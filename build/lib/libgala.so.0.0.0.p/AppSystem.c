/* AppSystem.c generated by valac 0.56.17, the Vala compiler
 * generated from AppSystem.vala, do not modify */

/*
 * Copyright 2021 elementary, Inc. <https://elementary.io>
 * Copyright 2021 Corentin NoÃ«l <tintou@noel.tf>
 * SPDX-License-Identifier: GPL-3.0-or-later
 */

#include "gala.h"
#include <glib.h>
#include <stdlib.h>
#include <string.h>
#include <gio/gdesktopappinfo.h>
#include <gio/gio.h>
#include <glib-object.h>

#if !defined(VALA_STRICT_C)
#if !defined(__clang__) && defined(__GNUC__) && (__GNUC__ >= 14)
#pragma GCC diagnostic warning "-Wincompatible-pointer-types"
#elif defined(__clang__) && (__clang_major__ >= 16)
#pragma clang diagnostic ignored "-Wincompatible-function-pointer-types"
#pragma clang diagnostic ignored "-Wincompatible-pointer-types"
#endif
#endif

enum  {
	GALA_APP_SYSTEM_0_PROPERTY,
	GALA_APP_SYSTEM_NUM_PROPERTIES
};
static GParamSpec* gala_app_system_properties[GALA_APP_SYSTEM_NUM_PROPERTIES];
#define _g_hash_table_unref0(var) ((var == NULL) ? NULL : (var = (g_hash_table_unref (var), NULL)))
#define _g_object_unref0(var) ((var == NULL) ? NULL : (var = (g_object_unref (var), NULL)))
#define _g_free0(var) (var = (g_free (var), NULL))

struct _GalaAppSystemPrivate {
	GHashTable* running_apps;
	GHashTable* id_to_app;
	GHashTable* startup_wm_class_to_id;
	GalaAppCache* app_cache;
};

static gint GalaAppSystem_private_offset;
static gpointer gala_app_system_parent_class = NULL;
static GOnce gala_app_system_instance;
static GOnce gala_app_system_instance = G_ONCE_INIT;

static GalaAppSystem* __lambda7_ (void);
static gpointer ___lambda7__gthread_func (gpointer self);
static GalaApp* gala_app_system_lookup_heuristic_basename (GalaAppSystem* self,
                                                    const gchar* name);
static GObject * gala_app_system_constructor (GType type,
                                       guint n_construct_properties,
                                       GObjectConstructParam * construct_properties);
static void _g_object_unref0_ (gpointer var);
static void _g_free0_ (gpointer var);
static void gala_app_system_finalize (GObject * obj);
static GType gala_app_system_get_type_once (void);

static inline gpointer
gala_app_system_get_instance_private (GalaAppSystem* self)
{
	return G_STRUCT_MEMBER_P (self, GalaAppSystem_private_offset);
}

static GalaAppSystem*
__lambda7_ (void)
{
	GalaAppSystem* _tmp0_;
	GalaAppSystem* result;
#line 10 "../lib/AppSystem.vala"
	_tmp0_ = gala_app_system_new ();
#line 10 "../lib/AppSystem.vala"
	result = _tmp0_;
#line 10 "../lib/AppSystem.vala"
	return result;
#line 78 "AppSystem.c"
}

static gpointer
___lambda7__gthread_func (gpointer self)
{
	gpointer result;
	result = __lambda7_ ();
#line 10 "../lib/AppSystem.vala"
	return result;
#line 88 "AppSystem.c"
}

GalaAppSystem*
gala_app_system_get_default (void)
{
	gconstpointer _tmp0_;
	GalaAppSystem* result;
#line 10 "../lib/AppSystem.vala"
	_tmp0_ = g_once (&gala_app_system_instance, ___lambda7__gthread_func, NULL);
#line 10 "../lib/AppSystem.vala"
	result = (GalaAppSystem*) _tmp0_;
#line 10 "../lib/AppSystem.vala"
	return result;
#line 102 "AppSystem.c"
}

static gpointer
_g_object_ref0 (gpointer self)
{
#line 31 "../lib/AppSystem.vala"
	return self ? g_object_ref (self) : NULL;
#line 110 "AppSystem.c"
}

GalaApp*
gala_app_system_lookup_app (GalaAppSystem* self,
                            const gchar* id)
{
	GalaApp* app = NULL;
	GHashTable* _tmp0_;
	gconstpointer _tmp1_;
	GalaApp* _tmp2_;
	GDesktopAppInfo* info = NULL;
	GalaAppCache* _tmp4_;
	GDesktopAppInfo* _tmp5_;
	GDesktopAppInfo* _tmp6_;
	GDesktopAppInfo* _tmp7_;
	GalaApp* owned_app = NULL;
	GDesktopAppInfo* _tmp8_;
	GalaApp* _tmp9_;
	GalaApp* _tmp10_;
	GHashTable* _tmp11_;
	GalaApp* _tmp12_;
	const gchar* _tmp13_;
	const gchar* _tmp14_;
	GalaApp* _tmp15_;
	GalaApp* _tmp16_;
	GalaApp* result;
#line 25 "../lib/AppSystem.vala"
	g_return_val_if_fail (self != NULL, NULL);
#line 25 "../lib/AppSystem.vala"
	g_return_val_if_fail (id != NULL, NULL);
#line 26 "../lib/AppSystem.vala"
	_tmp0_ = self->priv->id_to_app;
#line 26 "../lib/AppSystem.vala"
	_tmp1_ = g_hash_table_lookup (_tmp0_, id);
#line 26 "../lib/AppSystem.vala"
	app = (GalaApp*) _tmp1_;
#line 27 "../lib/AppSystem.vala"
	_tmp2_ = app;
#line 27 "../lib/AppSystem.vala"
	if (_tmp2_ != NULL) {
#line 151 "AppSystem.c"
		GalaApp* _tmp3_;
#line 28 "../lib/AppSystem.vala"
		_tmp3_ = app;
#line 28 "../lib/AppSystem.vala"
		result = _tmp3_;
#line 28 "../lib/AppSystem.vala"
		return result;
#line 159 "AppSystem.c"
	}
#line 31 "../lib/AppSystem.vala"
	_tmp4_ = self->priv->app_cache;
#line 31 "../lib/AppSystem.vala"
	_tmp5_ = gala_app_cache_lookup_id (_tmp4_, id);
#line 31 "../lib/AppSystem.vala"
	_tmp6_ = _g_object_ref0 (_tmp5_);
#line 31 "../lib/AppSystem.vala"
	info = _tmp6_;
#line 32 "../lib/AppSystem.vala"
	_tmp7_ = info;
#line 32 "../lib/AppSystem.vala"
	if (_tmp7_ == NULL) {
#line 33 "../lib/AppSystem.vala"
		result = NULL;
#line 33 "../lib/AppSystem.vala"
		_g_object_unref0 (info);
#line 33 "../lib/AppSystem.vala"
		return result;
#line 179 "AppSystem.c"
	}
#line 36 "../lib/AppSystem.vala"
	_tmp8_ = info;
#line 36 "../lib/AppSystem.vala"
	_tmp9_ = gala_app_new (_tmp8_);
#line 36 "../lib/AppSystem.vala"
	owned_app = _tmp9_;
#line 37 "../lib/AppSystem.vala"
	_tmp10_ = owned_app;
#line 37 "../lib/AppSystem.vala"
	app = _tmp10_;
#line 38 "../lib/AppSystem.vala"
	_tmp11_ = self->priv->id_to_app;
#line 38 "../lib/AppSystem.vala"
	_tmp12_ = owned_app;
#line 38 "../lib/AppSystem.vala"
	_tmp13_ = gala_app_get_id (_tmp12_);
#line 38 "../lib/AppSystem.vala"
	_tmp14_ = _tmp13_;
#line 38 "../lib/AppSystem.vala"
	_tmp15_ = owned_app;
#line 38 "../lib/AppSystem.vala"
	owned_app = NULL;
#line 38 "../lib/AppSystem.vala"
	g_hash_table_insert (_tmp11_, _tmp14_, _tmp15_);
#line 39 "../lib/AppSystem.vala"
	_tmp16_ = app;
#line 39 "../lib/AppSystem.vala"
	result = _tmp16_;
#line 39 "../lib/AppSystem.vala"
	_g_object_unref0 (owned_app);
#line 39 "../lib/AppSystem.vala"
	_g_object_unref0 (info);
#line 39 "../lib/AppSystem.vala"
	return result;
#line 215 "AppSystem.c"
}

GalaApp*
gala_app_system_lookup_startup_wmclass (GalaAppSystem* self,
                                        const gchar* wmclass)
{
	GDesktopAppInfo* info = NULL;
	GalaAppCache* _tmp0_;
	GDesktopAppInfo* _tmp1_;
	GDesktopAppInfo* _tmp2_;
	GDesktopAppInfo* _tmp3_;
	const gchar* _tmp4_;
	GalaApp* _tmp5_;
	GalaApp* result;
#line 42 "../lib/AppSystem.vala"
	g_return_val_if_fail (self != NULL, NULL);
#line 43 "../lib/AppSystem.vala"
	if (wmclass == NULL) {
#line 44 "../lib/AppSystem.vala"
		result = NULL;
#line 44 "../lib/AppSystem.vala"
		return result;
#line 238 "AppSystem.c"
	}
#line 47 "../lib/AppSystem.vala"
	_tmp0_ = self->priv->app_cache;
#line 47 "../lib/AppSystem.vala"
	_tmp1_ = gala_app_cache_lookup_startup_wmclass (_tmp0_, wmclass);
#line 47 "../lib/AppSystem.vala"
	info = _tmp1_;
#line 48 "../lib/AppSystem.vala"
	_tmp2_ = info;
#line 48 "../lib/AppSystem.vala"
	if (_tmp2_ == NULL) {
#line 49 "../lib/AppSystem.vala"
		result = NULL;
#line 49 "../lib/AppSystem.vala"
		_g_object_unref0 (info);
#line 49 "../lib/AppSystem.vala"
		return result;
#line 256 "AppSystem.c"
	}
#line 52 "../lib/AppSystem.vala"
	_tmp3_ = info;
#line 52 "../lib/AppSystem.vala"
	_tmp4_ = g_app_info_get_id ((GAppInfo*) _tmp3_);
#line 52 "../lib/AppSystem.vala"
	_tmp5_ = gala_app_system_lookup_app (self, _tmp4_);
#line 52 "../lib/AppSystem.vala"
	result = _tmp5_;
#line 52 "../lib/AppSystem.vala"
	_g_object_unref0 (info);
#line 52 "../lib/AppSystem.vala"
	return result;
#line 270 "AppSystem.c"
}

static GalaApp*
gala_app_system_lookup_heuristic_basename (GalaAppSystem* self,
                                           const gchar* name)
{
#line 59 "../lib/AppSystem.vala"
	static const gchar* VENDOR_PREFIXES[4] = {"gnome-", "fedora-", "mozilla-", "debian-"};
#line 279 "AppSystem.c"
	GalaApp* _result_ = NULL;
	GalaApp* _tmp0_;
	GalaApp* _tmp1_;
	GalaApp* result;
#line 55 "../lib/AppSystem.vala"
	g_return_val_if_fail (self != NULL, NULL);
#line 55 "../lib/AppSystem.vala"
	g_return_val_if_fail (name != NULL, NULL);
#line 66 "../lib/AppSystem.vala"
	_tmp0_ = gala_app_system_lookup_app (self, name);
#line 66 "../lib/AppSystem.vala"
	_result_ = _tmp0_;
#line 67 "../lib/AppSystem.vala"
	_tmp1_ = _result_;
#line 67 "../lib/AppSystem.vala"
	if (_tmp1_ != NULL) {
#line 296 "AppSystem.c"
		GalaApp* _tmp2_;
#line 68 "../lib/AppSystem.vala"
		_tmp2_ = _result_;
#line 68 "../lib/AppSystem.vala"
		result = _tmp2_;
#line 68 "../lib/AppSystem.vala"
		return result;
#line 304 "AppSystem.c"
	}
	{
		const gchar** prefix_collection = NULL;
		gint prefix_collection_length1 = 0;
		gint _prefix_collection_size_ = 0;
		gint prefix_it = 0;
#line 71 "../lib/AppSystem.vala"
		prefix_collection = VENDOR_PREFIXES;
#line 71 "../lib/AppSystem.vala"
		prefix_collection_length1 = G_N_ELEMENTS (VENDOR_PREFIXES);
#line 71 "../lib/AppSystem.vala"
		for (prefix_it = 0; prefix_it < prefix_collection_length1; prefix_it = prefix_it + 1) {
#line 317 "AppSystem.c"
			const gchar* prefix = NULL;
#line 71 "../lib/AppSystem.vala"
			prefix = prefix_collection[prefix_it];
#line 321 "AppSystem.c"
			{
				const gchar* _tmp3_;
				gchar* _tmp4_;
				gchar* _tmp5_;
				GalaApp* _tmp6_;
				GalaApp* _tmp7_;
#line 72 "../lib/AppSystem.vala"
				_tmp3_ = prefix;
#line 72 "../lib/AppSystem.vala"
				_tmp4_ = g_strconcat (_tmp3_, name, NULL);
#line 72 "../lib/AppSystem.vala"
				_tmp5_ = _tmp4_;
#line 72 "../lib/AppSystem.vala"
				_tmp6_ = gala_app_system_lookup_app (self, _tmp5_);
#line 72 "../lib/AppSystem.vala"
				_result_ = _tmp6_;
#line 72 "../lib/AppSystem.vala"
				_g_free0 (_tmp5_);
#line 73 "../lib/AppSystem.vala"
				_tmp7_ = _result_;
#line 73 "../lib/AppSystem.vala"
				if (_tmp7_ != NULL) {
#line 344 "AppSystem.c"
					GalaApp* _tmp8_;
#line 74 "../lib/AppSystem.vala"
					_tmp8_ = _result_;
#line 74 "../lib/AppSystem.vala"
					result = _tmp8_;
#line 74 "../lib/AppSystem.vala"
					return result;
#line 352 "AppSystem.c"
				}
			}
		}
	}
#line 78 "../lib/AppSystem.vala"
	result = NULL;
#line 78 "../lib/AppSystem.vala"
	return result;
#line 361 "AppSystem.c"
}

GalaApp*
gala_app_system_lookup_desktop_wmclass (GalaAppSystem* self,
                                        const gchar* wmclass)
{
	gchar* desktop_file = NULL;
	gchar* _tmp0_;
	GalaApp* app = NULL;
	const gchar* _tmp1_;
	GalaApp* _tmp2_;
	GalaApp* _tmp3_;
	const gchar* _tmp5_;
	const gchar* _tmp6_;
	gchar* _tmp7_;
	gchar* _tmp8_;
	gchar* _tmp9_;
	const gchar* _tmp10_;
	GalaApp* _tmp11_;
	GalaApp* result;
#line 81 "../lib/AppSystem.vala"
	g_return_val_if_fail (self != NULL, NULL);
#line 82 "../lib/AppSystem.vala"
	if (wmclass == NULL) {
#line 83 "../lib/AppSystem.vala"
		result = NULL;
#line 83 "../lib/AppSystem.vala"
		return result;
#line 390 "AppSystem.c"
	}
#line 93 "../lib/AppSystem.vala"
	_tmp0_ = g_strconcat (wmclass, ".desktop", NULL);
#line 93 "../lib/AppSystem.vala"
	desktop_file = _tmp0_;
#line 94 "../lib/AppSystem.vala"
	_tmp1_ = desktop_file;
#line 94 "../lib/AppSystem.vala"
	_tmp2_ = gala_app_system_lookup_heuristic_basename (self, _tmp1_);
#line 94 "../lib/AppSystem.vala"
	app = _tmp2_;
#line 95 "../lib/AppSystem.vala"
	_tmp3_ = app;
#line 95 "../lib/AppSystem.vala"
	if (_tmp3_ != NULL) {
#line 406 "AppSystem.c"
		GalaApp* _tmp4_;
#line 96 "../lib/AppSystem.vala"
		_tmp4_ = app;
#line 96 "../lib/AppSystem.vala"
		result = _tmp4_;
#line 96 "../lib/AppSystem.vala"
		_g_free0 (desktop_file);
#line 96 "../lib/AppSystem.vala"
		return result;
#line 416 "AppSystem.c"
	}
#line 101 "../lib/AppSystem.vala"
	_tmp5_ = desktop_file;
#line 101 "../lib/AppSystem.vala"
	g_strdelimit (_tmp5_, " ", '-');
#line 103 "../lib/AppSystem.vala"
	_tmp6_ = desktop_file;
#line 103 "../lib/AppSystem.vala"
	_tmp7_ = g_ascii_strdown (_tmp6_, (gssize) -1);
#line 103 "../lib/AppSystem.vala"
	_tmp8_ = _tmp7_;
#line 103 "../lib/AppSystem.vala"
	_tmp9_ = g_strconcat (_tmp8_, ".desktop", NULL);
#line 103 "../lib/AppSystem.vala"
	_g_free0 (desktop_file);
#line 103 "../lib/AppSystem.vala"
	desktop_file = _tmp9_;
#line 103 "../lib/AppSystem.vala"
	_g_free0 (_tmp8_);
#line 105 "../lib/AppSystem.vala"
	_tmp10_ = desktop_file;
#line 105 "../lib/AppSystem.vala"
	_tmp11_ = gala_app_system_lookup_heuristic_basename (self, _tmp10_);
#line 105 "../lib/AppSystem.vala"
	result = _tmp11_;
#line 105 "../lib/AppSystem.vala"
	_g_free0 (desktop_file);
#line 105 "../lib/AppSystem.vala"
	return result;
#line 446 "AppSystem.c"
}

void
gala_app_system_notify_app_state_changed (GalaAppSystem* self,
                                          GalaApp* app)
{
	GalaAppState _tmp0_;
	GalaAppState _tmp1_;
#line 108 "../lib/AppSystem.vala"
	g_return_if_fail (self != NULL);
#line 108 "../lib/AppSystem.vala"
	g_return_if_fail (app != NULL);
#line 109 "../lib/AppSystem.vala"
	_tmp0_ = gala_app_get_state (app);
#line 109 "../lib/AppSystem.vala"
	_tmp1_ = _tmp0_;
#line 109 "../lib/AppSystem.vala"
	if (_tmp1_ == GALA_APP_STATE_RUNNING) {
#line 465 "AppSystem.c"
		GHashTable* _tmp2_;
		GalaApp* _tmp3_;
#line 110 "../lib/AppSystem.vala"
		_tmp2_ = self->priv->running_apps;
#line 110 "../lib/AppSystem.vala"
		_tmp3_ = _g_object_ref0 (app);
#line 110 "../lib/AppSystem.vala"
		g_hash_table_insert (_tmp2_, _tmp3_, app);
#line 474 "AppSystem.c"
	} else {
		GalaAppState _tmp4_;
		GalaAppState _tmp5_;
#line 111 "../lib/AppSystem.vala"
		_tmp4_ = gala_app_get_state (app);
#line 111 "../lib/AppSystem.vala"
		_tmp5_ = _tmp4_;
#line 111 "../lib/AppSystem.vala"
		if (_tmp5_ == GALA_APP_STATE_STOPPED) {
#line 484 "AppSystem.c"
			GHashTable* _tmp6_;
#line 112 "../lib/AppSystem.vala"
			_tmp6_ = self->priv->running_apps;
#line 112 "../lib/AppSystem.vala"
			g_hash_table_remove (_tmp6_, app);
#line 490 "AppSystem.c"
		}
	}
}

GList*
gala_app_system_get_running_apps (GalaAppSystem* self)
{
	GHashTable* _tmp0_;
	GList* _tmp1_;
	GList* result;
#line 116 "../lib/AppSystem.vala"
	g_return_val_if_fail (self != NULL, NULL);
#line 117 "../lib/AppSystem.vala"
	_tmp0_ = self->priv->running_apps;
#line 117 "../lib/AppSystem.vala"
	_tmp1_ = g_hash_table_get_keys (_tmp0_);
#line 117 "../lib/AppSystem.vala"
	result = _tmp1_;
#line 117 "../lib/AppSystem.vala"
	return result;
#line 511 "AppSystem.c"
}

GalaAppSystem*
gala_app_system_construct (GType object_type)
{
	GalaAppSystem * self = NULL;
#line 7 "../lib/AppSystem.vala"
	self = (GalaAppSystem*) g_object_new (object_type, NULL);
#line 7 "../lib/AppSystem.vala"
	return self;
#line 522 "AppSystem.c"
}

GalaAppSystem*
gala_app_system_new (void)
{
#line 7 "../lib/AppSystem.vala"
	return gala_app_system_construct (GALA_TYPE_APP_SYSTEM);
#line 530 "AppSystem.c"
}

static void
_g_object_unref0_ (gpointer var)
{
#line 19 "../lib/AppSystem.vala"
	(var == NULL) ? NULL : (var = (g_object_unref (var), NULL));
#line 538 "AppSystem.c"
}

static void
_g_free0_ (gpointer var)
{
#line 20 "../lib/AppSystem.vala"
	var = (g_free (var), NULL);
#line 546 "AppSystem.c"
}

static GObject *
gala_app_system_constructor (GType type,
                             guint n_construct_properties,
                             GObjectConstructParam * construct_properties)
{
	GObject * obj;
	GObjectClass * parent_class;
	GalaAppSystem * self;
	GHashFunc _tmp0_;
	GEqualFunc _tmp1_;
	GHashTable* _tmp2_;
	GHashFunc _tmp3_;
	GEqualFunc _tmp4_;
	GHashTable* _tmp5_;
	GHashTable* _tmp6_;
	GalaAppCache* _tmp7_;
#line 18 "../lib/AppSystem.vala"
	parent_class = G_OBJECT_CLASS (gala_app_system_parent_class);
#line 18 "../lib/AppSystem.vala"
	obj = parent_class->constructor (type, n_construct_properties, construct_properties);
#line 18 "../lib/AppSystem.vala"
	self = G_TYPE_CHECK_INSTANCE_CAST (obj, GALA_TYPE_APP_SYSTEM, GalaAppSystem);
#line 19 "../lib/AppSystem.vala"
	_tmp0_ = g_str_hash;
#line 19 "../lib/AppSystem.vala"
	_tmp1_ = g_str_equal;
#line 19 "../lib/AppSystem.vala"
	_tmp2_ = g_hash_table_new_full (_tmp0_, _tmp1_, NULL, _g_object_unref0_);
#line 19 "../lib/AppSystem.vala"
	_g_hash_table_unref0 (self->priv->id_to_app);
#line 19 "../lib/AppSystem.vala"
	self->priv->id_to_app = _tmp2_;
#line 20 "../lib/AppSystem.vala"
	_tmp3_ = g_str_hash;
#line 20 "../lib/AppSystem.vala"
	_tmp4_ = g_str_equal;
#line 20 "../lib/AppSystem.vala"
	_tmp5_ = g_hash_table_new_full (_tmp3_, _tmp4_, _g_free0_, _g_free0_);
#line 20 "../lib/AppSystem.vala"
	_g_hash_table_unref0 (self->priv->startup_wm_class_to_id);
#line 20 "../lib/AppSystem.vala"
	self->priv->startup_wm_class_to_id = _tmp5_;
#line 21 "../lib/AppSystem.vala"
	_tmp6_ = g_hash_table_new_full (NULL, NULL, _g_object_unref0_, NULL);
#line 21 "../lib/AppSystem.vala"
	_g_hash_table_unref0 (self->priv->running_apps);
#line 21 "../lib/AppSystem.vala"
	self->priv->running_apps = _tmp6_;
#line 22 "../lib/AppSystem.vala"
	_tmp7_ = gala_app_cache_new ();
#line 22 "../lib/AppSystem.vala"
	_g_object_unref0 (self->priv->app_cache);
#line 22 "../lib/AppSystem.vala"
	self->priv->app_cache = _tmp7_;
#line 18 "../lib/AppSystem.vala"
	return obj;
#line 605 "AppSystem.c"
}

static void
gala_app_system_class_init (GalaAppSystemClass * klass,
                            gpointer klass_data)
{
#line 7 "../lib/AppSystem.vala"
	gala_app_system_parent_class = g_type_class_peek_parent (klass);
#line 7 "../lib/AppSystem.vala"
	g_type_class_adjust_private_offset (klass, &GalaAppSystem_private_offset);
#line 7 "../lib/AppSystem.vala"
	G_OBJECT_CLASS (klass)->constructor = gala_app_system_constructor;
#line 7 "../lib/AppSystem.vala"
	G_OBJECT_CLASS (klass)->finalize = gala_app_system_finalize;
#line 620 "AppSystem.c"
}

static void
gala_app_system_instance_init (GalaAppSystem * self,
                               gpointer klass)
{
#line 7 "../lib/AppSystem.vala"
	self->priv = gala_app_system_get_instance_private (self);
#line 629 "AppSystem.c"
}

static void
gala_app_system_finalize (GObject * obj)
{
	GalaAppSystem * self;
#line 7 "../lib/AppSystem.vala"
	self = G_TYPE_CHECK_INSTANCE_CAST (obj, GALA_TYPE_APP_SYSTEM, GalaAppSystem);
#line 13 "../lib/AppSystem.vala"
	_g_hash_table_unref0 (self->priv->running_apps);
#line 14 "../lib/AppSystem.vala"
	_g_hash_table_unref0 (self->priv->id_to_app);
#line 15 "../lib/AppSystem.vala"
	_g_hash_table_unref0 (self->priv->startup_wm_class_to_id);
#line 16 "../lib/AppSystem.vala"
	_g_object_unref0 (self->priv->app_cache);
#line 7 "../lib/AppSystem.vala"
	G_OBJECT_CLASS (gala_app_system_parent_class)->finalize (obj);
#line 648 "AppSystem.c"
}

 G_GNUC_NO_INLINE static GType
gala_app_system_get_type_once (void)
{
	static const GTypeInfo g_define_type_info = { sizeof (GalaAppSystemClass), (GBaseInitFunc) NULL, (GBaseFinalizeFunc) NULL, (GClassInitFunc) gala_app_system_class_init, (GClassFinalizeFunc) NULL, NULL, sizeof (GalaAppSystem), 0, (GInstanceInitFunc) gala_app_system_instance_init, NULL };
	GType gala_app_system_type_id;
	gala_app_system_type_id = g_type_register_static (G_TYPE_OBJECT, "GalaAppSystem", &g_define_type_info, 0);
	GalaAppSystem_private_offset = g_type_add_instance_private (gala_app_system_type_id, sizeof (GalaAppSystemPrivate));
	return gala_app_system_type_id;
}

GType
gala_app_system_get_type (void)
{
	static gsize gala_app_system_type_id__once = 0;
	if (g_once_init_enter (&gala_app_system_type_id__once)) {
		GType gala_app_system_type_id;
		gala_app_system_type_id = gala_app_system_get_type_once ();
		g_once_init_leave (&gala_app_system_type_id__once, gala_app_system_type_id);
	}
	return gala_app_system_type_id__once;
}

