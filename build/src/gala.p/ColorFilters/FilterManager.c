/* FilterManager.c generated by valac 0.56.17, the Vala compiler
 * generated from FilterManager.vala, do not modify */

/*
 * Copyright 2023 elementary, Inc. <https://elementary.io>
 * SPDX-License-Identifier: GPL-3.0-or-later
 */

#include <glib-object.h>
#include "gala.h"
#include <stdlib.h>
#include <string.h>
#include <glib.h>
#include <gio/gio.h>
#include <float.h>
#include <math.h>
#include <clutter/clutter.h>

#define GALA_FILTER_MANAGER_TRANSITION_NAME "strength-transition"
#define GALA_FILTER_MANAGER_TRANSITION_DURATION 500
#define GALA_COLORBLINDNESS_CORRECTION_EFFECT_EFFECT_NAME "colorblindness-correction-filter"
#define GALA_MONOCHROME_EFFECT_EFFECT_NAME "monochrome-filter"
#if !defined(VALA_STRICT_C)
#if !defined(__clang__) && defined(__GNUC__) && (__GNUC__ >= 14)
#pragma GCC diagnostic warning "-Wincompatible-pointer-types"
#elif defined(__clang__) && (__clang_major__ >= 16)
#pragma clang diagnostic ignored "-Wincompatible-function-pointer-types"
#pragma clang diagnostic ignored "-Wincompatible-pointer-types"
#endif
#endif
#if !defined(VALA_EXTERN)
#if defined(_MSC_VER)
#define VALA_EXTERN __declspec(dllexport) extern
#elif __GNUC__ >= 4
#define VALA_EXTERN __attribute__((visibility("default"))) extern
#else
#define VALA_EXTERN extern
#endif
#endif

#define GALA_TYPE_FILTER_MANAGER (gala_filter_manager_get_type ())
#define GALA_FILTER_MANAGER(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), GALA_TYPE_FILTER_MANAGER, GalaFilterManager))
#define GALA_FILTER_MANAGER_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), GALA_TYPE_FILTER_MANAGER, GalaFilterManagerClass))
#define GALA_IS_FILTER_MANAGER(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), GALA_TYPE_FILTER_MANAGER))
#define GALA_IS_FILTER_MANAGER_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), GALA_TYPE_FILTER_MANAGER))
#define GALA_FILTER_MANAGER_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), GALA_TYPE_FILTER_MANAGER, GalaFilterManagerClass))

typedef struct _GalaFilterManager GalaFilterManager;
typedef struct _GalaFilterManagerClass GalaFilterManagerClass;
typedef struct _GalaFilterManagerPrivate GalaFilterManagerPrivate;
enum  {
	GALA_FILTER_MANAGER_0_PROPERTY,
	GALA_FILTER_MANAGER_WM_PROPERTY,
	GALA_FILTER_MANAGER_NUM_PROPERTIES
};
static GParamSpec* gala_filter_manager_properties[GALA_FILTER_MANAGER_NUM_PROPERTIES];
#define _g_object_unref0(var) ((var == NULL) ? NULL : (var = (g_object_unref (var), NULL)))

#define GALA_TYPE_COLORBLINDNESS_CORRECTION_EFFECT (gala_colorblindness_correction_effect_get_type ())
#define GALA_COLORBLINDNESS_CORRECTION_EFFECT(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), GALA_TYPE_COLORBLINDNESS_CORRECTION_EFFECT, GalaColorblindnessCorrectionEffect))
#define GALA_COLORBLINDNESS_CORRECTION_EFFECT_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), GALA_TYPE_COLORBLINDNESS_CORRECTION_EFFECT, GalaColorblindnessCorrectionEffectClass))
#define GALA_IS_COLORBLINDNESS_CORRECTION_EFFECT(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), GALA_TYPE_COLORBLINDNESS_CORRECTION_EFFECT))
#define GALA_IS_COLORBLINDNESS_CORRECTION_EFFECT_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), GALA_TYPE_COLORBLINDNESS_CORRECTION_EFFECT))
#define GALA_COLORBLINDNESS_CORRECTION_EFFECT_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), GALA_TYPE_COLORBLINDNESS_CORRECTION_EFFECT, GalaColorblindnessCorrectionEffectClass))

typedef struct _GalaColorblindnessCorrectionEffect GalaColorblindnessCorrectionEffect;
typedef struct _GalaColorblindnessCorrectionEffectClass GalaColorblindnessCorrectionEffectClass;
typedef struct _Block50Data Block50Data;
typedef struct _Block51Data Block51Data;
typedef struct _Block52Data Block52Data;

#define GALA_TYPE_MONOCHROME_EFFECT (gala_monochrome_effect_get_type ())
#define GALA_MONOCHROME_EFFECT(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), GALA_TYPE_MONOCHROME_EFFECT, GalaMonochromeEffect))
#define GALA_MONOCHROME_EFFECT_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), GALA_TYPE_MONOCHROME_EFFECT, GalaMonochromeEffectClass))
#define GALA_IS_MONOCHROME_EFFECT(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), GALA_TYPE_MONOCHROME_EFFECT))
#define GALA_IS_MONOCHROME_EFFECT_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), GALA_TYPE_MONOCHROME_EFFECT))
#define GALA_MONOCHROME_EFFECT_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), GALA_TYPE_MONOCHROME_EFFECT, GalaMonochromeEffectClass))

typedef struct _GalaMonochromeEffect GalaMonochromeEffect;
typedef struct _GalaMonochromeEffectClass GalaMonochromeEffectClass;
typedef struct _Block53Data Block53Data;
typedef struct _Block54Data Block54Data;

struct _GalaFilterManager {
	GObject parent_instance;
	GalaFilterManagerPrivate * priv;
};

struct _GalaFilterManagerClass {
	GObjectClass parent_class;
};

struct _GalaFilterManagerPrivate {
	GalaWindowManager* _wm;
};

struct _Block50Data {
	int _ref_count_;
	GalaFilterManager* self;
	GalaColorblindnessCorrectionEffect* new_effect;
};

struct _Block51Data {
	int _ref_count_;
	Block50Data * _data50_;
	GalaColorblindnessCorrectionEffect* effect;
};

struct _Block52Data {
	int _ref_count_;
	GalaFilterManager* self;
	GalaColorblindnessCorrectionEffect* effect;
};

struct _Block53Data {
	int _ref_count_;
	GalaFilterManager* self;
	GalaMonochromeEffect* effect;
	GalaMonochromeEffect* new_effect;
};

struct _Block54Data {
	int _ref_count_;
	GalaFilterManager* self;
	GalaMonochromeEffect* effect;
};

static gint GalaFilterManager_private_offset;
static gpointer gala_filter_manager_parent_class = NULL;
static GalaFilterManager* gala_filter_manager_instance;
static GalaFilterManager* gala_filter_manager_instance = NULL;
static GSettings* gala_filter_manager_settings;
static GSettings* gala_filter_manager_settings = NULL;

VALA_EXTERN GType gala_filter_manager_get_type (void) G_GNUC_CONST ;
G_DEFINE_AUTOPTR_CLEANUP_FUNC (GalaFilterManager, g_object_unref)
VALA_EXTERN void gala_filter_manager_init (GalaWindowManager* wm);
static GalaFilterManager* gala_filter_manager_new (GalaWindowManager* wm);
static GalaFilterManager* gala_filter_manager_construct (GType object_type,
                                                  GalaWindowManager* wm);
static void gala_filter_manager_load_filters (GalaFilterManager* self);
static void gala_filter_manager_load_colorblindness_filter (GalaFilterManager* self);
static void gala_filter_manager_load_monochrome_filter (GalaFilterManager* self);
VALA_EXTERN GalaWindowManager* gala_filter_manager_get_wm (GalaFilterManager* self);
VALA_EXTERN GalaColorblindnessCorrectionEffect* gala_colorblindness_correction_effect_new (gint mode,
                                                                               gdouble strength);
VALA_EXTERN GalaColorblindnessCorrectionEffect* gala_colorblindness_correction_effect_construct (GType object_type,
                                                                                     gint mode,
                                                                                     gdouble strength);
VALA_EXTERN GType gala_colorblindness_correction_effect_get_type (void) G_GNUC_CONST ;
G_DEFINE_AUTOPTR_CLEANUP_FUNC (GalaColorblindnessCorrectionEffect, g_object_unref)
static void gala_filter_manager_update_colorblindness_filter (GalaFilterManager* self);
static Block50Data* block50_data_ref (Block50Data* _data50_);
static void block50_data_unref (void * _userdata_);
static Block51Data* block51_data_ref (Block51Data* _data51_);
static void block51_data_unref (void * _userdata_);
VALA_EXTERN gint gala_colorblindness_correction_effect_get_mode (GalaColorblindnessCorrectionEffect* self);
VALA_EXTERN ClutterActor* gala_colorblindness_correction_effect_get_transition_actor (GalaColorblindnessCorrectionEffect* self);
VALA_EXTERN gdouble gala_colorblindness_correction_effect_get_strength (GalaColorblindnessCorrectionEffect* self);
VALA_EXTERN void gala_colorblindness_correction_effect_set_transition_actor (GalaColorblindnessCorrectionEffect* self,
                                                                 ClutterActor* value);
static void _____lambda149_ (Block51Data* _data51_);
static void ______lambda149__clutter_timeline_completed (ClutterTimeline* _sender,
                                                  gpointer self);
static void __lambda150_ (Block50Data* _data50_);
static void ___lambda150__clutter_timeline_completed (ClutterTimeline* _sender,
                                               gpointer self);
static void gala_filter_manager_update_colorblindness_strength (GalaFilterManager* self);
static Block52Data* block52_data_ref (Block52Data* _data52_);
static void block52_data_unref (void * _userdata_);
static void _____lambda151_ (Block52Data* _data52_);
static void ______lambda151__clutter_timeline_completed (ClutterTimeline* _sender,
                                                  gpointer self);
VALA_EXTERN GalaMonochromeEffect* gala_monochrome_effect_new (gdouble strength);
VALA_EXTERN GalaMonochromeEffect* gala_monochrome_effect_construct (GType object_type,
                                                        gdouble strength);
VALA_EXTERN GType gala_monochrome_effect_get_type (void) G_GNUC_CONST ;
G_DEFINE_AUTOPTR_CLEANUP_FUNC (GalaMonochromeEffect, g_object_unref)
static void gala_filter_manager_update_monochrome_filter (GalaFilterManager* self);
static Block53Data* block53_data_ref (Block53Data* _data53_);
static void block53_data_unref (void * _userdata_);
VALA_EXTERN ClutterActor* gala_monochrome_effect_get_transition_actor (GalaMonochromeEffect* self);
VALA_EXTERN gdouble gala_monochrome_effect_get_strength (GalaMonochromeEffect* self);
VALA_EXTERN void gala_monochrome_effect_set_transition_actor (GalaMonochromeEffect* self,
                                                  ClutterActor* value);
static void ___lambda152_ (Block53Data* _data53_);
static void ____lambda152__clutter_timeline_completed (ClutterTimeline* _sender,
                                                gpointer self);
static void __lambda153_ (Block53Data* _data53_);
static void ___lambda153__clutter_timeline_completed (ClutterTimeline* _sender,
                                               gpointer self);
static void gala_filter_manager_update_monochrome_strength (GalaFilterManager* self);
static Block54Data* block54_data_ref (Block54Data* _data54_);
static void block54_data_unref (void * _userdata_);
static void __lambda154_ (Block54Data* _data54_);
static void ___lambda154__clutter_timeline_completed (ClutterTimeline* _sender,
                                               gpointer self);
static void gala_filter_manager_set_wm (GalaFilterManager* self,
                                 GalaWindowManager* value);
static GObject * gala_filter_manager_constructor (GType type,
                                           guint n_construct_properties,
                                           GObjectConstructParam * construct_properties);
static void _gala_filter_manager_update_colorblindness_filter_g_settings_changed (GSettings* _sender,
                                                                           const gchar* key,
                                                                           gpointer self);
static void _gala_filter_manager_update_colorblindness_strength_g_settings_changed (GSettings* _sender,
                                                                             const gchar* key,
                                                                             gpointer self);
static void _gala_filter_manager_update_monochrome_filter_g_settings_changed (GSettings* _sender,
                                                                       const gchar* key,
                                                                       gpointer self);
static void _gala_filter_manager_update_monochrome_strength_g_settings_changed (GSettings* _sender,
                                                                         const gchar* key,
                                                                         gpointer self);
static void gala_filter_manager_finalize (GObject * obj);
static GType gala_filter_manager_get_type_once (void);
static void _vala_gala_filter_manager_get_property (GObject * object,
                                             guint property_id,
                                             GValue * value,
                                             GParamSpec * pspec);
static void _vala_gala_filter_manager_set_property (GObject * object,
                                             guint property_id,
                                             const GValue * value,
                                             GParamSpec * pspec);

static inline gpointer
gala_filter_manager_get_instance_private (GalaFilterManager* self)
{
	return G_STRUCT_MEMBER_P (self, GalaFilterManager_private_offset);
}

void
gala_filter_manager_init (GalaWindowManager* wm)
{
	GalaFilterManager* _tmp0_;
	GalaFilterManager* _tmp1_;
#line 14 "../src/ColorFilters/FilterManager.vala"
	g_return_if_fail (wm != NULL);
#line 15 "../src/ColorFilters/FilterManager.vala"
	_tmp0_ = gala_filter_manager_instance;
#line 15 "../src/ColorFilters/FilterManager.vala"
	if (_tmp0_ != NULL) {
#line 16 "../src/ColorFilters/FilterManager.vala"
		return;
#line 246 "FilterManager.c"
	}
#line 19 "../src/ColorFilters/FilterManager.vala"
	_tmp1_ = gala_filter_manager_new (wm);
#line 19 "../src/ColorFilters/FilterManager.vala"
	_g_object_unref0 (gala_filter_manager_instance);
#line 19 "../src/ColorFilters/FilterManager.vala"
	gala_filter_manager_instance = _tmp1_;
#line 254 "FilterManager.c"
}

static GalaFilterManager*
gala_filter_manager_construct (GType object_type,
                               GalaWindowManager* wm)
{
	GalaFilterManager * self = NULL;
#line 22 "../src/ColorFilters/FilterManager.vala"
	g_return_val_if_fail (wm != NULL, NULL);
#line 23 "../src/ColorFilters/FilterManager.vala"
	self = (GalaFilterManager*) g_object_new (object_type, "wm", wm, NULL);
#line 22 "../src/ColorFilters/FilterManager.vala"
	return self;
#line 268 "FilterManager.c"
}

static GalaFilterManager*
gala_filter_manager_new (GalaWindowManager* wm)
{
#line 22 "../src/ColorFilters/FilterManager.vala"
	return gala_filter_manager_construct (GALA_TYPE_FILTER_MANAGER, wm);
#line 276 "FilterManager.c"
}

static void
gala_filter_manager_load_filters (GalaFilterManager* self)
{
#line 39 "../src/ColorFilters/FilterManager.vala"
	g_return_if_fail (self != NULL);
#line 40 "../src/ColorFilters/FilterManager.vala"
	gala_filter_manager_load_colorblindness_filter (self);
#line 41 "../src/ColorFilters/FilterManager.vala"
	gala_filter_manager_load_monochrome_filter (self);
#line 288 "FilterManager.c"
}

static void
gala_filter_manager_load_colorblindness_filter (GalaFilterManager* self)
{
	gint filter_variant = 0;
	GSettings* _tmp0_;
	gdouble strength = 0.0;
	GSettings* _tmp1_;
	gboolean _tmp2_ = FALSE;
#line 44 "../src/ColorFilters/FilterManager.vala"
	g_return_if_fail (self != NULL);
#line 46 "../src/ColorFilters/FilterManager.vala"
	_tmp0_ = gala_filter_manager_settings;
#line 46 "../src/ColorFilters/FilterManager.vala"
	filter_variant = g_settings_get_enum (_tmp0_, "colorblindness-correction-filter");
#line 47 "../src/ColorFilters/FilterManager.vala"
	_tmp1_ = gala_filter_manager_settings;
#line 47 "../src/ColorFilters/FilterManager.vala"
	strength = g_settings_get_double (_tmp1_, "colorblindness-correction-filter-strength");
#line 48 "../src/ColorFilters/FilterManager.vala"
	if (filter_variant != 0) {
#line 48 "../src/ColorFilters/FilterManager.vala"
		_tmp2_ = strength > 0.0;
#line 313 "FilterManager.c"
	} else {
#line 48 "../src/ColorFilters/FilterManager.vala"
		_tmp2_ = FALSE;
#line 317 "FilterManager.c"
	}
#line 48 "../src/ColorFilters/FilterManager.vala"
	if (_tmp2_) {
#line 321 "FilterManager.c"
		GalaWindowManager* _tmp3_;
		ClutterStage* _tmp4_;
		ClutterStage* _tmp5_;
		GalaColorblindnessCorrectionEffect* _tmp6_;
		GalaColorblindnessCorrectionEffect* _tmp7_;
#line 49 "../src/ColorFilters/FilterManager.vala"
		_tmp3_ = self->priv->_wm;
#line 49 "../src/ColorFilters/FilterManager.vala"
		_tmp4_ = gala_window_manager_get_stage (_tmp3_);
#line 49 "../src/ColorFilters/FilterManager.vala"
		_tmp5_ = _tmp4_;
#line 49 "../src/ColorFilters/FilterManager.vala"
		_tmp6_ = gala_colorblindness_correction_effect_new (filter_variant, strength);
#line 49 "../src/ColorFilters/FilterManager.vala"
		g_object_ref_sink (_tmp6_);
#line 49 "../src/ColorFilters/FilterManager.vala"
		_tmp7_ = _tmp6_;
#line 49 "../src/ColorFilters/FilterManager.vala"
		clutter_actor_add_effect_with_name ((ClutterActor*) _tmp5_, GALA_COLORBLINDNESS_CORRECTION_EFFECT_EFFECT_NAME, (ClutterEffect*) _tmp7_);
#line 49 "../src/ColorFilters/FilterManager.vala"
		_g_object_unref0 (_tmp7_);
#line 343 "FilterManager.c"
	}
}

static Block50Data*
block50_data_ref (Block50Data* _data50_)
{
#line 56 "../src/ColorFilters/FilterManager.vala"
	g_atomic_int_inc (&_data50_->_ref_count_);
#line 56 "../src/ColorFilters/FilterManager.vala"
	return _data50_;
#line 354 "FilterManager.c"
}

static void
block50_data_unref (void * _userdata_)
{
	Block50Data* _data50_;
	_data50_ = (Block50Data*) _userdata_;
#line 56 "../src/ColorFilters/FilterManager.vala"
	if (g_atomic_int_dec_and_test (&_data50_->_ref_count_)) {
#line 364 "FilterManager.c"
		GalaFilterManager* self;
#line 56 "../src/ColorFilters/FilterManager.vala"
		self = _data50_->self;
#line 56 "../src/ColorFilters/FilterManager.vala"
		_g_object_unref0 (_data50_->new_effect);
#line 56 "../src/ColorFilters/FilterManager.vala"
		_g_object_unref0 (self);
#line 56 "../src/ColorFilters/FilterManager.vala"
		g_slice_free (Block50Data, _data50_);
#line 374 "FilterManager.c"
	}
}

static Block51Data*
block51_data_ref (Block51Data* _data51_)
{
#line 62 "../src/ColorFilters/FilterManager.vala"
	g_atomic_int_inc (&_data51_->_ref_count_);
#line 62 "../src/ColorFilters/FilterManager.vala"
	return _data51_;
#line 385 "FilterManager.c"
}

static void
block51_data_unref (void * _userdata_)
{
	Block51Data* _data51_;
	_data51_ = (Block51Data*) _userdata_;
#line 62 "../src/ColorFilters/FilterManager.vala"
	if (g_atomic_int_dec_and_test (&_data51_->_ref_count_)) {
#line 395 "FilterManager.c"
		GalaFilterManager* self;
#line 62 "../src/ColorFilters/FilterManager.vala"
		self = _data51_->_data50_->self;
#line 62 "../src/ColorFilters/FilterManager.vala"
		block50_data_unref (_data51_->_data50_);
#line 62 "../src/ColorFilters/FilterManager.vala"
		_data51_->_data50_ = NULL;
#line 62 "../src/ColorFilters/FilterManager.vala"
		g_slice_free (Block51Data, _data51_);
#line 405 "FilterManager.c"
	}
}

static void
_____lambda149_ (Block51Data* _data51_)
{
	Block50Data* _data50_;
	GalaFilterManager* self;
	GalaColorblindnessCorrectionEffect* _tmp0_;
	ClutterActor* _tmp1_;
	ClutterActor* _tmp2_;
	GalaWindowManager* _tmp3_;
	ClutterStage* _tmp4_;
	ClutterStage* _tmp5_;
	GalaColorblindnessCorrectionEffect* _tmp6_;
#line 93 "../src/ColorFilters/FilterManager.vala"
	_data50_ = _data51_->_data50_;
#line 93 "../src/ColorFilters/FilterManager.vala"
	self = _data50_->self;
#line 94 "../src/ColorFilters/FilterManager.vala"
	_tmp0_ = _data51_->effect;
#line 94 "../src/ColorFilters/FilterManager.vala"
	_tmp1_ = gala_colorblindness_correction_effect_get_transition_actor (_tmp0_);
#line 94 "../src/ColorFilters/FilterManager.vala"
	_tmp2_ = _tmp1_;
#line 94 "../src/ColorFilters/FilterManager.vala"
	clutter_actor_destroy (_tmp2_);
#line 95 "../src/ColorFilters/FilterManager.vala"
	_tmp3_ = self->priv->_wm;
#line 95 "../src/ColorFilters/FilterManager.vala"
	_tmp4_ = gala_window_manager_get_stage (_tmp3_);
#line 95 "../src/ColorFilters/FilterManager.vala"
	_tmp5_ = _tmp4_;
#line 95 "../src/ColorFilters/FilterManager.vala"
	_tmp6_ = _data51_->effect;
#line 95 "../src/ColorFilters/FilterManager.vala"
	clutter_actor_remove_effect ((ClutterActor*) _tmp5_, (ClutterEffect*) _tmp6_);
#line 443 "FilterManager.c"
}

static void
______lambda149__clutter_timeline_completed (ClutterTimeline* _sender,
                                             gpointer self)
{
#line 93 "../src/ColorFilters/FilterManager.vala"
	_____lambda149_ (self);
#line 452 "FilterManager.c"
}

static void
__lambda150_ (Block50Data* _data50_)
{
	GalaFilterManager* self;
	GalaColorblindnessCorrectionEffect* _tmp0_;
	ClutterActor* _tmp1_;
	ClutterActor* _tmp2_;
#line 125 "../src/ColorFilters/FilterManager.vala"
	self = _data50_->self;
#line 126 "../src/ColorFilters/FilterManager.vala"
	_tmp0_ = _data50_->new_effect;
#line 126 "../src/ColorFilters/FilterManager.vala"
	_tmp1_ = gala_colorblindness_correction_effect_get_transition_actor (_tmp0_);
#line 126 "../src/ColorFilters/FilterManager.vala"
	_tmp2_ = _tmp1_;
#line 126 "../src/ColorFilters/FilterManager.vala"
	clutter_actor_destroy (_tmp2_);
#line 472 "FilterManager.c"
}

static void
___lambda150__clutter_timeline_completed (ClutterTimeline* _sender,
                                          gpointer self)
{
#line 125 "../src/ColorFilters/FilterManager.vala"
	__lambda150_ (self);
#line 481 "FilterManager.c"
}

static void
gala_filter_manager_update_colorblindness_filter (GalaFilterManager* self)
{
	Block50Data* _data50_;
	gint filter_variant = 0;
	GSettings* _tmp0_;
	gdouble strength = 0.0;
	GSettings* _tmp1_;
	GalaWindowManager* _tmp2_;
	ClutterStage* _tmp3_;
	ClutterStage* _tmp4_;
	GList* _tmp5_;
	gboolean _tmp43_ = FALSE;
	GalaColorblindnessCorrectionEffect* _tmp44_;
	GalaWindowManager* _tmp45_;
	ClutterStage* _tmp46_;
	ClutterStage* _tmp47_;
	GalaColorblindnessCorrectionEffect* _tmp48_;
	ClutterPropertyTransition* new_transition = NULL;
	ClutterPropertyTransition* _tmp49_ = NULL;
	ClutterPropertyTransition* _tmp50_;
	GValue _tmp51_ = {0};
	ClutterPropertyTransition* _tmp52_;
	GValue _tmp53_ = {0};
	GalaColorblindnessCorrectionEffect* _tmp54_;
	ClutterActor* _tmp55_ = NULL;
	ClutterActor* _tmp56_;
	GalaWindowManager* _tmp57_;
	ClutterActor* _tmp58_;
	ClutterActor* _tmp59_;
	GalaColorblindnessCorrectionEffect* _tmp60_;
	ClutterActor* _tmp61_;
	ClutterActor* _tmp62_;
	GalaColorblindnessCorrectionEffect* _tmp63_;
	ClutterActor* _tmp64_;
	ClutterActor* _tmp65_;
	GalaColorblindnessCorrectionEffect* _tmp66_;
	ClutterPropertyTransition* _tmp67_;
	GalaColorblindnessCorrectionEffect* _tmp68_;
	ClutterActor* _tmp69_;
	ClutterActor* _tmp70_;
	ClutterPropertyTransition* _tmp71_;
#line 56 "../src/ColorFilters/FilterManager.vala"
	g_return_if_fail (self != NULL);
#line 56 "../src/ColorFilters/FilterManager.vala"
	_data50_ = g_slice_new0 (Block50Data);
#line 56 "../src/ColorFilters/FilterManager.vala"
	_data50_->_ref_count_ = 1;
#line 56 "../src/ColorFilters/FilterManager.vala"
	_data50_->self = g_object_ref (self);
#line 57 "../src/ColorFilters/FilterManager.vala"
	_tmp0_ = gala_filter_manager_settings;
#line 57 "../src/ColorFilters/FilterManager.vala"
	filter_variant = g_settings_get_enum (_tmp0_, "colorblindness-correction-filter");
#line 58 "../src/ColorFilters/FilterManager.vala"
	_tmp1_ = gala_filter_manager_settings;
#line 58 "../src/ColorFilters/FilterManager.vala"
	strength = g_settings_get_double (_tmp1_, "colorblindness-correction-filter-strength");
#line 61 "../src/ColorFilters/FilterManager.vala"
	_tmp2_ = self->priv->_wm;
#line 61 "../src/ColorFilters/FilterManager.vala"
	_tmp3_ = gala_window_manager_get_stage (_tmp2_);
#line 61 "../src/ColorFilters/FilterManager.vala"
	_tmp4_ = _tmp3_;
#line 61 "../src/ColorFilters/FilterManager.vala"
	_tmp5_ = clutter_actor_get_effects ((ClutterActor*) _tmp4_);
#line 550 "FilterManager.c"
	{
		GList* _effect_collection = NULL;
		GList* _effect_it = NULL;
#line 61 "../src/ColorFilters/FilterManager.vala"
		_effect_collection = _tmp5_;
#line 61 "../src/ColorFilters/FilterManager.vala"
		for (_effect_it = _effect_collection; _effect_it != NULL; _effect_it = _effect_it->next) {
#line 558 "FilterManager.c"
			ClutterEffect* _effect = NULL;
#line 61 "../src/ColorFilters/FilterManager.vala"
			_effect = (ClutterEffect*) _effect_it->data;
#line 562 "FilterManager.c"
			{
				ClutterEffect* _tmp6_;
#line 62 "../src/ColorFilters/FilterManager.vala"
				_tmp6_ = _effect;
#line 62 "../src/ColorFilters/FilterManager.vala"
				if (GALA_IS_COLORBLINDNESS_CORRECTION_EFFECT (_tmp6_)) {
#line 569 "FilterManager.c"
					Block51Data* _data51_;
					ClutterEffect* _tmp7_;
					GalaColorblindnessCorrectionEffect* _tmp8_;
					gint _tmp9_;
					gint _tmp10_;
					GalaColorblindnessCorrectionEffect* _tmp11_;
					ClutterActor* _tmp12_;
					ClutterActor* _tmp13_;
					ClutterPropertyTransition* transition = NULL;
					ClutterPropertyTransition* _tmp17_ = NULL;
					ClutterPropertyTransition* _tmp18_;
					GalaColorblindnessCorrectionEffect* _tmp19_;
					gdouble _tmp20_;
					gdouble _tmp21_;
					GValue _tmp22_ = {0};
					ClutterPropertyTransition* _tmp23_;
					GValue _tmp24_ = {0};
					GalaColorblindnessCorrectionEffect* _tmp25_;
					ClutterActor* _tmp26_ = NULL;
					ClutterActor* _tmp27_;
					GalaWindowManager* _tmp28_;
					ClutterActor* _tmp29_;
					ClutterActor* _tmp30_;
					GalaColorblindnessCorrectionEffect* _tmp31_;
					ClutterActor* _tmp32_;
					ClutterActor* _tmp33_;
					GalaColorblindnessCorrectionEffect* _tmp34_;
					ClutterActor* _tmp35_;
					ClutterActor* _tmp36_;
					GalaColorblindnessCorrectionEffect* _tmp37_;
					ClutterPropertyTransition* _tmp38_;
					GalaColorblindnessCorrectionEffect* _tmp39_;
					ClutterActor* _tmp40_;
					ClutterActor* _tmp41_;
					ClutterPropertyTransition* _tmp42_;
#line 62 "../src/ColorFilters/FilterManager.vala"
					_data51_ = g_slice_new0 (Block51Data);
#line 62 "../src/ColorFilters/FilterManager.vala"
					_data51_->_ref_count_ = 1;
#line 62 "../src/ColorFilters/FilterManager.vala"
					_data51_->_data50_ = block50_data_ref (_data50_);
#line 63 "../src/ColorFilters/FilterManager.vala"
					_tmp7_ = _effect;
#line 63 "../src/ColorFilters/FilterManager.vala"
					_data51_->effect = G_TYPE_CHECK_INSTANCE_CAST (_tmp7_, GALA_TYPE_COLORBLINDNESS_CORRECTION_EFFECT, GalaColorblindnessCorrectionEffect);
#line 65 "../src/ColorFilters/FilterManager.vala"
					_tmp8_ = _data51_->effect;
#line 65 "../src/ColorFilters/FilterManager.vala"
					_tmp9_ = gala_colorblindness_correction_effect_get_mode (_tmp8_);
#line 65 "../src/ColorFilters/FilterManager.vala"
					_tmp10_ = _tmp9_;
#line 65 "../src/ColorFilters/FilterManager.vala"
					if (_tmp10_ == filter_variant) {
#line 66 "../src/ColorFilters/FilterManager.vala"
						block51_data_unref (_data51_);
#line 66 "../src/ColorFilters/FilterManager.vala"
						_data51_ = NULL;
#line 66 "../src/ColorFilters/FilterManager.vala"
						continue;
#line 629 "FilterManager.c"
					}
#line 73 "../src/ColorFilters/FilterManager.vala"
					_tmp11_ = _data51_->effect;
#line 73 "../src/ColorFilters/FilterManager.vala"
					_tmp12_ = gala_colorblindness_correction_effect_get_transition_actor (_tmp11_);
#line 73 "../src/ColorFilters/FilterManager.vala"
					_tmp13_ = _tmp12_;
#line 73 "../src/ColorFilters/FilterManager.vala"
					if (_tmp13_ != NULL) {
#line 639 "FilterManager.c"
						GalaColorblindnessCorrectionEffect* _tmp14_;
						ClutterActor* _tmp15_;
						ClutterActor* _tmp16_;
#line 74 "../src/ColorFilters/FilterManager.vala"
						_tmp14_ = _data51_->effect;
#line 74 "../src/ColorFilters/FilterManager.vala"
						_tmp15_ = gala_colorblindness_correction_effect_get_transition_actor (_tmp14_);
#line 74 "../src/ColorFilters/FilterManager.vala"
						_tmp16_ = _tmp15_;
#line 74 "../src/ColorFilters/FilterManager.vala"
						clutter_actor_destroy (_tmp16_);
#line 651 "FilterManager.c"
					}
#line 78 "../src/ColorFilters/FilterManager.vala"
					_tmp17_ = (ClutterPropertyTransition*) clutter_property_transition_new ("scale_x");
#line 78 "../src/ColorFilters/FilterManager.vala"
					clutter_timeline_set_duration ((ClutterTimeline*) _tmp17_, (guint) GALA_FILTER_MANAGER_TRANSITION_DURATION);
#line 78 "../src/ColorFilters/FilterManager.vala"
					clutter_timeline_set_progress_mode ((ClutterTimeline*) _tmp17_, CLUTTER_LINEAR);
#line 78 "../src/ColorFilters/FilterManager.vala"
					clutter_transition_set_remove_on_complete ((ClutterTransition*) _tmp17_, TRUE);
#line 78 "../src/ColorFilters/FilterManager.vala"
					transition = _tmp17_;
#line 83 "../src/ColorFilters/FilterManager.vala"
					_tmp18_ = transition;
#line 83 "../src/ColorFilters/FilterManager.vala"
					_tmp19_ = _data51_->effect;
#line 83 "../src/ColorFilters/FilterManager.vala"
					_tmp20_ = gala_colorblindness_correction_effect_get_strength (_tmp19_);
#line 83 "../src/ColorFilters/FilterManager.vala"
					_tmp21_ = _tmp20_;
#line 83 "../src/ColorFilters/FilterManager.vala"
					g_value_init (&_tmp22_, G_TYPE_DOUBLE);
#line 83 "../src/ColorFilters/FilterManager.vala"
					g_value_set_double (&_tmp22_, _tmp21_);
#line 83 "../src/ColorFilters/FilterManager.vala"
					clutter_transition_set_from_value ((ClutterTransition*) _tmp18_, &_tmp22_);
#line 83 "../src/ColorFilters/FilterManager.vala"
					G_IS_VALUE (&_tmp22_) ? (g_value_unset (&_tmp22_), NULL) : NULL;
#line 84 "../src/ColorFilters/FilterManager.vala"
					_tmp23_ = transition;
#line 84 "../src/ColorFilters/FilterManager.vala"
					g_value_init (&_tmp24_, G_TYPE_DOUBLE);
#line 84 "../src/ColorFilters/FilterManager.vala"
					g_value_set_double (&_tmp24_, 0.0);
#line 84 "../src/ColorFilters/FilterManager.vala"
					clutter_transition_set_to_value ((ClutterTransition*) _tmp23_, &_tmp24_);
#line 84 "../src/ColorFilters/FilterManager.vala"
					G_IS_VALUE (&_tmp24_) ? (g_value_unset (&_tmp24_), NULL) : NULL;
#line 87 "../src/ColorFilters/FilterManager.vala"
					_tmp25_ = _data51_->effect;
#line 87 "../src/ColorFilters/FilterManager.vala"
					_tmp26_ = clutter_actor_new ();
#line 87 "../src/ColorFilters/FilterManager.vala"
					g_object_set (_tmp26_, "visible", FALSE, NULL);
#line 87 "../src/ColorFilters/FilterManager.vala"
					g_object_ref_sink (_tmp26_);
#line 87 "../src/ColorFilters/FilterManager.vala"
					_tmp27_ = _tmp26_;
#line 87 "../src/ColorFilters/FilterManager.vala"
					gala_colorblindness_correction_effect_set_transition_actor (_tmp25_, _tmp27_);
#line 87 "../src/ColorFilters/FilterManager.vala"
					_g_object_unref0 (_tmp27_);
#line 90 "../src/ColorFilters/FilterManager.vala"
					_tmp28_ = self->priv->_wm;
#line 90 "../src/ColorFilters/FilterManager.vala"
					_tmp29_ = gala_window_manager_get_ui_group (_tmp28_);
#line 90 "../src/ColorFilters/FilterManager.vala"
					_tmp30_ = _tmp29_;
#line 90 "../src/ColorFilters/FilterManager.vala"
					_tmp31_ = _data51_->effect;
#line 90 "../src/ColorFilters/FilterManager.vala"
					_tmp32_ = gala_colorblindness_correction_effect_get_transition_actor (_tmp31_);
#line 90 "../src/ColorFilters/FilterManager.vala"
					_tmp33_ = _tmp32_;
#line 90 "../src/ColorFilters/FilterManager.vala"
					clutter_actor_add_child (_tmp30_, _tmp33_);
#line 91 "../src/ColorFilters/FilterManager.vala"
					_tmp34_ = _data51_->effect;
#line 91 "../src/ColorFilters/FilterManager.vala"
					_tmp35_ = gala_colorblindness_correction_effect_get_transition_actor (_tmp34_);
#line 91 "../src/ColorFilters/FilterManager.vala"
					_tmp36_ = _tmp35_;
#line 91 "../src/ColorFilters/FilterManager.vala"
					_tmp37_ = _data51_->effect;
#line 91 "../src/ColorFilters/FilterManager.vala"
					g_object_bind_property_with_closures ((GObject*) _tmp36_, "scale_x", (GObject*) _tmp37_, "strength", G_BINDING_DEFAULT, (GClosure*) ((NULL == NULL) ? NULL : g_cclosure_new ((GCallback) NULL, NULL, (GClosureNotify) NULL)), (GClosure*) ((NULL == NULL) ? NULL : g_cclosure_new ((GCallback) NULL, NULL, (GClosureNotify) NULL)));
#line 93 "../src/ColorFilters/FilterManager.vala"
					_tmp38_ = transition;
#line 93 "../src/ColorFilters/FilterManager.vala"
					g_signal_connect_data ((ClutterTimeline*) _tmp38_, "completed", (GCallback) ______lambda149__clutter_timeline_completed, block51_data_ref (_data51_), (GClosureNotify) block51_data_unref, 0);
#line 98 "../src/ColorFilters/FilterManager.vala"
					_tmp39_ = _data51_->effect;
#line 98 "../src/ColorFilters/FilterManager.vala"
					_tmp40_ = gala_colorblindness_correction_effect_get_transition_actor (_tmp39_);
#line 98 "../src/ColorFilters/FilterManager.vala"
					_tmp41_ = _tmp40_;
#line 98 "../src/ColorFilters/FilterManager.vala"
					_tmp42_ = transition;
#line 98 "../src/ColorFilters/FilterManager.vala"
					clutter_actor_add_transition (_tmp41_, GALA_FILTER_MANAGER_TRANSITION_NAME, (ClutterTransition*) _tmp42_);
#line 62 "../src/ColorFilters/FilterManager.vala"
					_g_object_unref0 (transition);
#line 62 "../src/ColorFilters/FilterManager.vala"
					block51_data_unref (_data51_);
#line 62 "../src/ColorFilters/FilterManager.vala"
					_data51_ = NULL;
#line 747 "FilterManager.c"
				}
			}
		}
#line 61 "../src/ColorFilters/FilterManager.vala"
		(_effect_collection == NULL) ? NULL : (_effect_collection = (g_list_free (_effect_collection), NULL));
#line 753 "FilterManager.c"
	}
#line 103 "../src/ColorFilters/FilterManager.vala"
	if (filter_variant == 0) {
#line 103 "../src/ColorFilters/FilterManager.vala"
		_tmp43_ = TRUE;
#line 759 "FilterManager.c"
	} else {
#line 103 "../src/ColorFilters/FilterManager.vala"
		_tmp43_ = strength == 0.0;
#line 763 "FilterManager.c"
	}
#line 103 "../src/ColorFilters/FilterManager.vala"
	if (_tmp43_) {
#line 104 "../src/ColorFilters/FilterManager.vala"
		block50_data_unref (_data50_);
#line 104 "../src/ColorFilters/FilterManager.vala"
		_data50_ = NULL;
#line 104 "../src/ColorFilters/FilterManager.vala"
		return;
#line 773 "FilterManager.c"
	}
#line 107 "../src/ColorFilters/FilterManager.vala"
	_tmp44_ = gala_colorblindness_correction_effect_new (filter_variant, 0.0);
#line 107 "../src/ColorFilters/FilterManager.vala"
	g_object_ref_sink (_tmp44_);
#line 107 "../src/ColorFilters/FilterManager.vala"
	_data50_->new_effect = _tmp44_;
#line 108 "../src/ColorFilters/FilterManager.vala"
	_tmp45_ = self->priv->_wm;
#line 108 "../src/ColorFilters/FilterManager.vala"
	_tmp46_ = gala_window_manager_get_stage (_tmp45_);
#line 108 "../src/ColorFilters/FilterManager.vala"
	_tmp47_ = _tmp46_;
#line 108 "../src/ColorFilters/FilterManager.vala"
	_tmp48_ = _data50_->new_effect;
#line 108 "../src/ColorFilters/FilterManager.vala"
	clutter_actor_add_effect_with_name ((ClutterActor*) _tmp47_, GALA_COLORBLINDNESS_CORRECTION_EFFECT_EFFECT_NAME, (ClutterEffect*) _tmp48_);
#line 111 "../src/ColorFilters/FilterManager.vala"
	_tmp49_ = (ClutterPropertyTransition*) clutter_property_transition_new ("scale_x");
#line 111 "../src/ColorFilters/FilterManager.vala"
	clutter_timeline_set_duration ((ClutterTimeline*) _tmp49_, (guint) GALA_FILTER_MANAGER_TRANSITION_DURATION);
#line 111 "../src/ColorFilters/FilterManager.vala"
	clutter_timeline_set_progress_mode ((ClutterTimeline*) _tmp49_, CLUTTER_LINEAR);
#line 111 "../src/ColorFilters/FilterManager.vala"
	clutter_transition_set_remove_on_complete ((ClutterTransition*) _tmp49_, TRUE);
#line 111 "../src/ColorFilters/FilterManager.vala"
	new_transition = _tmp49_;
#line 116 "../src/ColorFilters/FilterManager.vala"
	_tmp50_ = new_transition;
#line 116 "../src/ColorFilters/FilterManager.vala"
	g_value_init (&_tmp51_, G_TYPE_DOUBLE);
#line 116 "../src/ColorFilters/FilterManager.vala"
	g_value_set_double (&_tmp51_, 0.0);
#line 116 "../src/ColorFilters/FilterManager.vala"
	clutter_transition_set_from_value ((ClutterTransition*) _tmp50_, &_tmp51_);
#line 116 "../src/ColorFilters/FilterManager.vala"
	G_IS_VALUE (&_tmp51_) ? (g_value_unset (&_tmp51_), NULL) : NULL;
#line 117 "../src/ColorFilters/FilterManager.vala"
	_tmp52_ = new_transition;
#line 117 "../src/ColorFilters/FilterManager.vala"
	g_value_init (&_tmp53_, G_TYPE_DOUBLE);
#line 117 "../src/ColorFilters/FilterManager.vala"
	g_value_set_double (&_tmp53_, strength);
#line 117 "../src/ColorFilters/FilterManager.vala"
	clutter_transition_set_to_value ((ClutterTransition*) _tmp52_, &_tmp53_);
#line 117 "../src/ColorFilters/FilterManager.vala"
	G_IS_VALUE (&_tmp53_) ? (g_value_unset (&_tmp53_), NULL) : NULL;
#line 119 "../src/ColorFilters/FilterManager.vala"
	_tmp54_ = _data50_->new_effect;
#line 119 "../src/ColorFilters/FilterManager.vala"
	_tmp55_ = clutter_actor_new ();
#line 119 "../src/ColorFilters/FilterManager.vala"
	g_object_set (_tmp55_, "visible", FALSE, NULL);
#line 119 "../src/ColorFilters/FilterManager.vala"
	g_object_ref_sink (_tmp55_);
#line 119 "../src/ColorFilters/FilterManager.vala"
	_tmp56_ = _tmp55_;
#line 119 "../src/ColorFilters/FilterManager.vala"
	gala_colorblindness_correction_effect_set_transition_actor (_tmp54_, _tmp56_);
#line 119 "../src/ColorFilters/FilterManager.vala"
	_g_object_unref0 (_tmp56_);
#line 122 "../src/ColorFilters/FilterManager.vala"
	_tmp57_ = self->priv->_wm;
#line 122 "../src/ColorFilters/FilterManager.vala"
	_tmp58_ = gala_window_manager_get_ui_group (_tmp57_);
#line 122 "../src/ColorFilters/FilterManager.vala"
	_tmp59_ = _tmp58_;
#line 122 "../src/ColorFilters/FilterManager.vala"
	_tmp60_ = _data50_->new_effect;
#line 122 "../src/ColorFilters/FilterManager.vala"
	_tmp61_ = gala_colorblindness_correction_effect_get_transition_actor (_tmp60_);
#line 122 "../src/ColorFilters/FilterManager.vala"
	_tmp62_ = _tmp61_;
#line 122 "../src/ColorFilters/FilterManager.vala"
	clutter_actor_add_child (_tmp59_, _tmp62_);
#line 123 "../src/ColorFilters/FilterManager.vala"
	_tmp63_ = _data50_->new_effect;
#line 123 "../src/ColorFilters/FilterManager.vala"
	_tmp64_ = gala_colorblindness_correction_effect_get_transition_actor (_tmp63_);
#line 123 "../src/ColorFilters/FilterManager.vala"
	_tmp65_ = _tmp64_;
#line 123 "../src/ColorFilters/FilterManager.vala"
	_tmp66_ = _data50_->new_effect;
#line 123 "../src/ColorFilters/FilterManager.vala"
	g_object_bind_property_with_closures ((GObject*) _tmp65_, "scale_x", (GObject*) _tmp66_, "strength", G_BINDING_DEFAULT, (GClosure*) ((NULL == NULL) ? NULL : g_cclosure_new ((GCallback) NULL, NULL, (GClosureNotify) NULL)), (GClosure*) ((NULL == NULL) ? NULL : g_cclosure_new ((GCallback) NULL, NULL, (GClosureNotify) NULL)));
#line 125 "../src/ColorFilters/FilterManager.vala"
	_tmp67_ = new_transition;
#line 125 "../src/ColorFilters/FilterManager.vala"
	g_signal_connect_data ((ClutterTimeline*) _tmp67_, "completed", (GCallback) ___lambda150__clutter_timeline_completed, block50_data_ref (_data50_), (GClosureNotify) block50_data_unref, 0);
#line 129 "../src/ColorFilters/FilterManager.vala"
	_tmp68_ = _data50_->new_effect;
#line 129 "../src/ColorFilters/FilterManager.vala"
	_tmp69_ = gala_colorblindness_correction_effect_get_transition_actor (_tmp68_);
#line 129 "../src/ColorFilters/FilterManager.vala"
	_tmp70_ = _tmp69_;
#line 129 "../src/ColorFilters/FilterManager.vala"
	_tmp71_ = new_transition;
#line 129 "../src/ColorFilters/FilterManager.vala"
	clutter_actor_add_transition (_tmp70_, GALA_FILTER_MANAGER_TRANSITION_NAME, (ClutterTransition*) _tmp71_);
#line 56 "../src/ColorFilters/FilterManager.vala"
	_g_object_unref0 (new_transition);
#line 56 "../src/ColorFilters/FilterManager.vala"
	block50_data_unref (_data50_);
#line 56 "../src/ColorFilters/FilterManager.vala"
	_data50_ = NULL;
#line 879 "FilterManager.c"
}

static Block52Data*
block52_data_ref (Block52Data* _data52_)
{
#line 137 "../src/ColorFilters/FilterManager.vala"
	g_atomic_int_inc (&_data52_->_ref_count_);
#line 137 "../src/ColorFilters/FilterManager.vala"
	return _data52_;
#line 889 "FilterManager.c"
}

static void
block52_data_unref (void * _userdata_)
{
	Block52Data* _data52_;
	_data52_ = (Block52Data*) _userdata_;
#line 137 "../src/ColorFilters/FilterManager.vala"
	if (g_atomic_int_dec_and_test (&_data52_->_ref_count_)) {
#line 899 "FilterManager.c"
		GalaFilterManager* self;
#line 137 "../src/ColorFilters/FilterManager.vala"
		self = _data52_->self;
#line 137 "../src/ColorFilters/FilterManager.vala"
		_g_object_unref0 (self);
#line 137 "../src/ColorFilters/FilterManager.vala"
		g_slice_free (Block52Data, _data52_);
#line 907 "FilterManager.c"
	}
}

static void
_____lambda151_ (Block52Data* _data52_)
{
	GalaFilterManager* self;
	GalaColorblindnessCorrectionEffect* _tmp0_;
	ClutterActor* _tmp1_;
	ClutterActor* _tmp2_;
#line 165 "../src/ColorFilters/FilterManager.vala"
	self = _data52_->self;
#line 166 "../src/ColorFilters/FilterManager.vala"
	_tmp0_ = _data52_->effect;
#line 166 "../src/ColorFilters/FilterManager.vala"
	_tmp1_ = gala_colorblindness_correction_effect_get_transition_actor (_tmp0_);
#line 166 "../src/ColorFilters/FilterManager.vala"
	_tmp2_ = _tmp1_;
#line 166 "../src/ColorFilters/FilterManager.vala"
	clutter_actor_destroy (_tmp2_);
#line 928 "FilterManager.c"
}

static void
______lambda151__clutter_timeline_completed (ClutterTimeline* _sender,
                                             gpointer self)
{
#line 165 "../src/ColorFilters/FilterManager.vala"
	_____lambda151_ (self);
#line 937 "FilterManager.c"
}

static void
gala_filter_manager_update_colorblindness_strength (GalaFilterManager* self)
{
	gint filter_variant = 0;
	GSettings* _tmp0_;
	gdouble strength = 0.0;
	GSettings* _tmp1_;
	GalaWindowManager* _tmp2_;
	ClutterStage* _tmp3_;
	ClutterStage* _tmp4_;
	GList* _tmp5_;
#line 132 "../src/ColorFilters/FilterManager.vala"
	g_return_if_fail (self != NULL);
#line 133 "../src/ColorFilters/FilterManager.vala"
	_tmp0_ = gala_filter_manager_settings;
#line 133 "../src/ColorFilters/FilterManager.vala"
	filter_variant = g_settings_get_enum (_tmp0_, "colorblindness-correction-filter");
#line 134 "../src/ColorFilters/FilterManager.vala"
	_tmp1_ = gala_filter_manager_settings;
#line 134 "../src/ColorFilters/FilterManager.vala"
	strength = g_settings_get_double (_tmp1_, "colorblindness-correction-filter-strength");
#line 136 "../src/ColorFilters/FilterManager.vala"
	_tmp2_ = self->priv->_wm;
#line 136 "../src/ColorFilters/FilterManager.vala"
	_tmp3_ = gala_window_manager_get_stage (_tmp2_);
#line 136 "../src/ColorFilters/FilterManager.vala"
	_tmp4_ = _tmp3_;
#line 136 "../src/ColorFilters/FilterManager.vala"
	_tmp5_ = clutter_actor_get_effects ((ClutterActor*) _tmp4_);
#line 969 "FilterManager.c"
	{
		GList* _effect_collection = NULL;
		GList* _effect_it = NULL;
#line 136 "../src/ColorFilters/FilterManager.vala"
		_effect_collection = _tmp5_;
#line 136 "../src/ColorFilters/FilterManager.vala"
		for (_effect_it = _effect_collection; _effect_it != NULL; _effect_it = _effect_it->next) {
#line 977 "FilterManager.c"
			ClutterEffect* _effect = NULL;
#line 136 "../src/ColorFilters/FilterManager.vala"
			_effect = (ClutterEffect*) _effect_it->data;
#line 981 "FilterManager.c"
			{
				ClutterEffect* _tmp6_;
#line 137 "../src/ColorFilters/FilterManager.vala"
				_tmp6_ = _effect;
#line 137 "../src/ColorFilters/FilterManager.vala"
				if (GALA_IS_COLORBLINDNESS_CORRECTION_EFFECT (_tmp6_)) {
#line 988 "FilterManager.c"
					Block52Data* _data52_;
					ClutterEffect* _tmp7_;
					GalaColorblindnessCorrectionEffect* _tmp8_;
					gint _tmp9_;
					gint _tmp10_;
					GalaColorblindnessCorrectionEffect* _tmp11_;
					ClutterActor* _tmp12_;
					ClutterActor* _tmp13_;
					ClutterPropertyTransition* transition = NULL;
					ClutterPropertyTransition* _tmp17_ = NULL;
					ClutterPropertyTransition* _tmp18_;
					GalaColorblindnessCorrectionEffect* _tmp19_;
					gdouble _tmp20_;
					gdouble _tmp21_;
					GValue _tmp22_ = {0};
					ClutterPropertyTransition* _tmp23_;
					GValue _tmp24_ = {0};
					GalaColorblindnessCorrectionEffect* _tmp25_;
					ClutterActor* _tmp26_ = NULL;
					ClutterActor* _tmp27_;
					GalaWindowManager* _tmp28_;
					ClutterActor* _tmp29_;
					ClutterActor* _tmp30_;
					GalaColorblindnessCorrectionEffect* _tmp31_;
					ClutterActor* _tmp32_;
					ClutterActor* _tmp33_;
					GalaColorblindnessCorrectionEffect* _tmp34_;
					ClutterActor* _tmp35_;
					ClutterActor* _tmp36_;
					GalaColorblindnessCorrectionEffect* _tmp37_;
					ClutterPropertyTransition* _tmp38_;
					GalaColorblindnessCorrectionEffect* _tmp39_;
					ClutterActor* _tmp40_;
					ClutterActor* _tmp41_;
					ClutterPropertyTransition* _tmp42_;
#line 137 "../src/ColorFilters/FilterManager.vala"
					_data52_ = g_slice_new0 (Block52Data);
#line 137 "../src/ColorFilters/FilterManager.vala"
					_data52_->_ref_count_ = 1;
#line 137 "../src/ColorFilters/FilterManager.vala"
					_data52_->self = g_object_ref (self);
#line 138 "../src/ColorFilters/FilterManager.vala"
					_tmp7_ = _effect;
#line 138 "../src/ColorFilters/FilterManager.vala"
					_data52_->effect = G_TYPE_CHECK_INSTANCE_CAST (_tmp7_, GALA_TYPE_COLORBLINDNESS_CORRECTION_EFFECT, GalaColorblindnessCorrectionEffect);
#line 140 "../src/ColorFilters/FilterManager.vala"
					_tmp8_ = _data52_->effect;
#line 140 "../src/ColorFilters/FilterManager.vala"
					_tmp9_ = gala_colorblindness_correction_effect_get_mode (_tmp8_);
#line 140 "../src/ColorFilters/FilterManager.vala"
					_tmp10_ = _tmp9_;
#line 140 "../src/ColorFilters/FilterManager.vala"
					if (_tmp10_ != filter_variant) {
#line 141 "../src/ColorFilters/FilterManager.vala"
						block52_data_unref (_data52_);
#line 141 "../src/ColorFilters/FilterManager.vala"
						_data52_ = NULL;
#line 141 "../src/ColorFilters/FilterManager.vala"
						continue;
#line 1048 "FilterManager.c"
					}
#line 145 "../src/ColorFilters/FilterManager.vala"
					_tmp11_ = _data52_->effect;
#line 145 "../src/ColorFilters/FilterManager.vala"
					_tmp12_ = gala_colorblindness_correction_effect_get_transition_actor (_tmp11_);
#line 145 "../src/ColorFilters/FilterManager.vala"
					_tmp13_ = _tmp12_;
#line 145 "../src/ColorFilters/FilterManager.vala"
					if (_tmp13_ != NULL) {
#line 1058 "FilterManager.c"
						GalaColorblindnessCorrectionEffect* _tmp14_;
						ClutterActor* _tmp15_;
						ClutterActor* _tmp16_;
#line 146 "../src/ColorFilters/FilterManager.vala"
						_tmp14_ = _data52_->effect;
#line 146 "../src/ColorFilters/FilterManager.vala"
						_tmp15_ = gala_colorblindness_correction_effect_get_transition_actor (_tmp14_);
#line 146 "../src/ColorFilters/FilterManager.vala"
						_tmp16_ = _tmp15_;
#line 146 "../src/ColorFilters/FilterManager.vala"
						clutter_actor_destroy (_tmp16_);
#line 1070 "FilterManager.c"
					}
#line 150 "../src/ColorFilters/FilterManager.vala"
					_tmp17_ = (ClutterPropertyTransition*) clutter_property_transition_new ("scale_x");
#line 150 "../src/ColorFilters/FilterManager.vala"
					clutter_timeline_set_duration ((ClutterTimeline*) _tmp17_, (guint) GALA_FILTER_MANAGER_TRANSITION_DURATION);
#line 150 "../src/ColorFilters/FilterManager.vala"
					clutter_timeline_set_progress_mode ((ClutterTimeline*) _tmp17_, CLUTTER_LINEAR);
#line 150 "../src/ColorFilters/FilterManager.vala"
					clutter_transition_set_remove_on_complete ((ClutterTransition*) _tmp17_, TRUE);
#line 150 "../src/ColorFilters/FilterManager.vala"
					transition = _tmp17_;
#line 155 "../src/ColorFilters/FilterManager.vala"
					_tmp18_ = transition;
#line 155 "../src/ColorFilters/FilterManager.vala"
					_tmp19_ = _data52_->effect;
#line 155 "../src/ColorFilters/FilterManager.vala"
					_tmp20_ = gala_colorblindness_correction_effect_get_strength (_tmp19_);
#line 155 "../src/ColorFilters/FilterManager.vala"
					_tmp21_ = _tmp20_;
#line 155 "../src/ColorFilters/FilterManager.vala"
					g_value_init (&_tmp22_, G_TYPE_DOUBLE);
#line 155 "../src/ColorFilters/FilterManager.vala"
					g_value_set_double (&_tmp22_, _tmp21_);
#line 155 "../src/ColorFilters/FilterManager.vala"
					clutter_transition_set_from_value ((ClutterTransition*) _tmp18_, &_tmp22_);
#line 155 "../src/ColorFilters/FilterManager.vala"
					G_IS_VALUE (&_tmp22_) ? (g_value_unset (&_tmp22_), NULL) : NULL;
#line 156 "../src/ColorFilters/FilterManager.vala"
					_tmp23_ = transition;
#line 156 "../src/ColorFilters/FilterManager.vala"
					g_value_init (&_tmp24_, G_TYPE_DOUBLE);
#line 156 "../src/ColorFilters/FilterManager.vala"
					g_value_set_double (&_tmp24_, strength);
#line 156 "../src/ColorFilters/FilterManager.vala"
					clutter_transition_set_to_value ((ClutterTransition*) _tmp23_, &_tmp24_);
#line 156 "../src/ColorFilters/FilterManager.vala"
					G_IS_VALUE (&_tmp24_) ? (g_value_unset (&_tmp24_), NULL) : NULL;
#line 159 "../src/ColorFilters/FilterManager.vala"
					_tmp25_ = _data52_->effect;
#line 159 "../src/ColorFilters/FilterManager.vala"
					_tmp26_ = clutter_actor_new ();
#line 159 "../src/ColorFilters/FilterManager.vala"
					g_object_set (_tmp26_, "visible", FALSE, NULL);
#line 159 "../src/ColorFilters/FilterManager.vala"
					g_object_ref_sink (_tmp26_);
#line 159 "../src/ColorFilters/FilterManager.vala"
					_tmp27_ = _tmp26_;
#line 159 "../src/ColorFilters/FilterManager.vala"
					gala_colorblindness_correction_effect_set_transition_actor (_tmp25_, _tmp27_);
#line 159 "../src/ColorFilters/FilterManager.vala"
					_g_object_unref0 (_tmp27_);
#line 162 "../src/ColorFilters/FilterManager.vala"
					_tmp28_ = self->priv->_wm;
#line 162 "../src/ColorFilters/FilterManager.vala"
					_tmp29_ = gala_window_manager_get_ui_group (_tmp28_);
#line 162 "../src/ColorFilters/FilterManager.vala"
					_tmp30_ = _tmp29_;
#line 162 "../src/ColorFilters/FilterManager.vala"
					_tmp31_ = _data52_->effect;
#line 162 "../src/ColorFilters/FilterManager.vala"
					_tmp32_ = gala_colorblindness_correction_effect_get_transition_actor (_tmp31_);
#line 162 "../src/ColorFilters/FilterManager.vala"
					_tmp33_ = _tmp32_;
#line 162 "../src/ColorFilters/FilterManager.vala"
					clutter_actor_add_child (_tmp30_, _tmp33_);
#line 163 "../src/ColorFilters/FilterManager.vala"
					_tmp34_ = _data52_->effect;
#line 163 "../src/ColorFilters/FilterManager.vala"
					_tmp35_ = gala_colorblindness_correction_effect_get_transition_actor (_tmp34_);
#line 163 "../src/ColorFilters/FilterManager.vala"
					_tmp36_ = _tmp35_;
#line 163 "../src/ColorFilters/FilterManager.vala"
					_tmp37_ = _data52_->effect;
#line 163 "../src/ColorFilters/FilterManager.vala"
					g_object_bind_property_with_closures ((GObject*) _tmp36_, "scale_x", (GObject*) _tmp37_, "strength", G_BINDING_DEFAULT, (GClosure*) ((NULL == NULL) ? NULL : g_cclosure_new ((GCallback) NULL, NULL, (GClosureNotify) NULL)), (GClosure*) ((NULL == NULL) ? NULL : g_cclosure_new ((GCallback) NULL, NULL, (GClosureNotify) NULL)));
#line 165 "../src/ColorFilters/FilterManager.vala"
					_tmp38_ = transition;
#line 165 "../src/ColorFilters/FilterManager.vala"
					g_signal_connect_data ((ClutterTimeline*) _tmp38_, "completed", (GCallback) ______lambda151__clutter_timeline_completed, block52_data_ref (_data52_), (GClosureNotify) block52_data_unref, 0);
#line 169 "../src/ColorFilters/FilterManager.vala"
					_tmp39_ = _data52_->effect;
#line 169 "../src/ColorFilters/FilterManager.vala"
					_tmp40_ = gala_colorblindness_correction_effect_get_transition_actor (_tmp39_);
#line 169 "../src/ColorFilters/FilterManager.vala"
					_tmp41_ = _tmp40_;
#line 169 "../src/ColorFilters/FilterManager.vala"
					_tmp42_ = transition;
#line 169 "../src/ColorFilters/FilterManager.vala"
					clutter_actor_add_transition (_tmp41_, GALA_FILTER_MANAGER_TRANSITION_NAME, (ClutterTransition*) _tmp42_);
#line 171 "../src/ColorFilters/FilterManager.vala"
					_g_object_unref0 (transition);
#line 171 "../src/ColorFilters/FilterManager.vala"
					block52_data_unref (_data52_);
#line 171 "../src/ColorFilters/FilterManager.vala"
					_data52_ = NULL;
#line 171 "../src/ColorFilters/FilterManager.vala"
					(_effect_collection == NULL) ? NULL : (_effect_collection = (g_list_free (_effect_collection), NULL));
#line 171 "../src/ColorFilters/FilterManager.vala"
					return;
#line 1170 "FilterManager.c"
				}
			}
		}
#line 136 "../src/ColorFilters/FilterManager.vala"
		(_effect_collection == NULL) ? NULL : (_effect_collection = (g_list_free (_effect_collection), NULL));
#line 1176 "FilterManager.c"
	}
}

static void
gala_filter_manager_load_monochrome_filter (GalaFilterManager* self)
{
	gboolean enable = FALSE;
	GSettings* _tmp0_;
	gdouble strength = 0.0;
	GSettings* _tmp1_;
	gboolean _tmp2_ = FALSE;
#line 176 "../src/ColorFilters/FilterManager.vala"
	g_return_if_fail (self != NULL);
#line 178 "../src/ColorFilters/FilterManager.vala"
	_tmp0_ = gala_filter_manager_settings;
#line 178 "../src/ColorFilters/FilterManager.vala"
	enable = g_settings_get_boolean (_tmp0_, "enable-monochrome-filter");
#line 179 "../src/ColorFilters/FilterManager.vala"
	_tmp1_ = gala_filter_manager_settings;
#line 179 "../src/ColorFilters/FilterManager.vala"
	strength = g_settings_get_double (_tmp1_, "monochrome-filter-strength");
#line 180 "../src/ColorFilters/FilterManager.vala"
	if (enable) {
#line 180 "../src/ColorFilters/FilterManager.vala"
		_tmp2_ = strength > 0.0;
#line 1202 "FilterManager.c"
	} else {
#line 180 "../src/ColorFilters/FilterManager.vala"
		_tmp2_ = FALSE;
#line 1206 "FilterManager.c"
	}
#line 180 "../src/ColorFilters/FilterManager.vala"
	if (_tmp2_) {
#line 1210 "FilterManager.c"
		GalaWindowManager* _tmp3_;
		ClutterStage* _tmp4_;
		ClutterStage* _tmp5_;
		GalaMonochromeEffect* _tmp6_;
		GalaMonochromeEffect* _tmp7_;
#line 181 "../src/ColorFilters/FilterManager.vala"
		_tmp3_ = self->priv->_wm;
#line 181 "../src/ColorFilters/FilterManager.vala"
		_tmp4_ = gala_window_manager_get_stage (_tmp3_);
#line 181 "../src/ColorFilters/FilterManager.vala"
		_tmp5_ = _tmp4_;
#line 181 "../src/ColorFilters/FilterManager.vala"
		_tmp6_ = gala_monochrome_effect_new (strength);
#line 181 "../src/ColorFilters/FilterManager.vala"
		g_object_ref_sink (_tmp6_);
#line 181 "../src/ColorFilters/FilterManager.vala"
		_tmp7_ = _tmp6_;
#line 181 "../src/ColorFilters/FilterManager.vala"
		clutter_actor_add_effect_with_name ((ClutterActor*) _tmp5_, GALA_MONOCHROME_EFFECT_EFFECT_NAME, (ClutterEffect*) _tmp7_);
#line 181 "../src/ColorFilters/FilterManager.vala"
		_g_object_unref0 (_tmp7_);
#line 1232 "FilterManager.c"
	}
}

static Block53Data*
block53_data_ref (Block53Data* _data53_)
{
#line 188 "../src/ColorFilters/FilterManager.vala"
	g_atomic_int_inc (&_data53_->_ref_count_);
#line 188 "../src/ColorFilters/FilterManager.vala"
	return _data53_;
#line 1243 "FilterManager.c"
}

static void
block53_data_unref (void * _userdata_)
{
	Block53Data* _data53_;
	_data53_ = (Block53Data*) _userdata_;
#line 188 "../src/ColorFilters/FilterManager.vala"
	if (g_atomic_int_dec_and_test (&_data53_->_ref_count_)) {
#line 1253 "FilterManager.c"
		GalaFilterManager* self;
#line 188 "../src/ColorFilters/FilterManager.vala"
		self = _data53_->self;
#line 188 "../src/ColorFilters/FilterManager.vala"
		_g_object_unref0 (_data53_->new_effect);
#line 188 "../src/ColorFilters/FilterManager.vala"
		_g_object_unref0 (self);
#line 188 "../src/ColorFilters/FilterManager.vala"
		g_slice_free (Block53Data, _data53_);
#line 1263 "FilterManager.c"
	}
}

static void
___lambda152_ (Block53Data* _data53_)
{
	GalaFilterManager* self;
	GalaMonochromeEffect* _tmp0_;
	ClutterActor* _tmp1_;
	ClutterActor* _tmp2_;
	GalaWindowManager* _tmp3_;
	ClutterStage* _tmp4_;
	ClutterStage* _tmp5_;
	GalaMonochromeEffect* _tmp6_;
#line 223 "../src/ColorFilters/FilterManager.vala"
	self = _data53_->self;
#line 224 "../src/ColorFilters/FilterManager.vala"
	_tmp0_ = _data53_->effect;
#line 224 "../src/ColorFilters/FilterManager.vala"
	_tmp1_ = gala_monochrome_effect_get_transition_actor (_tmp0_);
#line 224 "../src/ColorFilters/FilterManager.vala"
	_tmp2_ = _tmp1_;
#line 224 "../src/ColorFilters/FilterManager.vala"
	clutter_actor_destroy (_tmp2_);
#line 225 "../src/ColorFilters/FilterManager.vala"
	_tmp3_ = self->priv->_wm;
#line 225 "../src/ColorFilters/FilterManager.vala"
	_tmp4_ = gala_window_manager_get_stage (_tmp3_);
#line 225 "../src/ColorFilters/FilterManager.vala"
	_tmp5_ = _tmp4_;
#line 225 "../src/ColorFilters/FilterManager.vala"
	_tmp6_ = _data53_->effect;
#line 225 "../src/ColorFilters/FilterManager.vala"
	clutter_actor_remove_effect ((ClutterActor*) _tmp5_, (ClutterEffect*) _tmp6_);
#line 1298 "FilterManager.c"
}

static void
____lambda152__clutter_timeline_completed (ClutterTimeline* _sender,
                                           gpointer self)
{
#line 223 "../src/ColorFilters/FilterManager.vala"
	___lambda152_ (self);
#line 1307 "FilterManager.c"
}

static void
__lambda153_ (Block53Data* _data53_)
{
	GalaFilterManager* self;
	GalaMonochromeEffect* _tmp0_;
	ClutterActor* _tmp1_;
	ClutterActor* _tmp2_;
#line 254 "../src/ColorFilters/FilterManager.vala"
	self = _data53_->self;
#line 255 "../src/ColorFilters/FilterManager.vala"
	_tmp0_ = _data53_->new_effect;
#line 255 "../src/ColorFilters/FilterManager.vala"
	_tmp1_ = gala_monochrome_effect_get_transition_actor (_tmp0_);
#line 255 "../src/ColorFilters/FilterManager.vala"
	_tmp2_ = _tmp1_;
#line 255 "../src/ColorFilters/FilterManager.vala"
	clutter_actor_destroy (_tmp2_);
#line 1327 "FilterManager.c"
}

static void
___lambda153__clutter_timeline_completed (ClutterTimeline* _sender,
                                          gpointer self)
{
#line 254 "../src/ColorFilters/FilterManager.vala"
	__lambda153_ (self);
#line 1336 "FilterManager.c"
}

static void
gala_filter_manager_update_monochrome_filter (GalaFilterManager* self)
{
	Block53Data* _data53_;
	gboolean enabled = FALSE;
	GSettings* _tmp0_;
	gdouble strength = 0.0;
	GSettings* _tmp1_;
	GalaWindowManager* _tmp2_;
	ClutterStage* _tmp3_;
	ClutterStage* _tmp4_;
	ClutterEffect* _tmp5_;
	GalaMonochromeEffect* _tmp6_;
	GalaMonochromeEffect* _tmp7_;
	gboolean _tmp40_ = FALSE;
	GalaMonochromeEffect* _tmp41_;
	GalaWindowManager* _tmp42_;
	ClutterStage* _tmp43_;
	ClutterStage* _tmp44_;
	GalaMonochromeEffect* _tmp45_;
	ClutterPropertyTransition* new_transition = NULL;
	ClutterPropertyTransition* _tmp46_ = NULL;
	ClutterPropertyTransition* _tmp47_;
	GValue _tmp48_ = {0};
	ClutterPropertyTransition* _tmp49_;
	GValue _tmp50_ = {0};
	GalaMonochromeEffect* _tmp51_;
	ClutterActor* _tmp52_ = NULL;
	ClutterActor* _tmp53_;
	GalaWindowManager* _tmp54_;
	ClutterActor* _tmp55_;
	ClutterActor* _tmp56_;
	GalaMonochromeEffect* _tmp57_;
	ClutterActor* _tmp58_;
	ClutterActor* _tmp59_;
	GalaMonochromeEffect* _tmp60_;
	ClutterActor* _tmp61_;
	ClutterActor* _tmp62_;
	GalaMonochromeEffect* _tmp63_;
	ClutterPropertyTransition* _tmp64_;
	GalaMonochromeEffect* _tmp65_;
	ClutterActor* _tmp66_;
	ClutterActor* _tmp67_;
	ClutterPropertyTransition* _tmp68_;
#line 188 "../src/ColorFilters/FilterManager.vala"
	g_return_if_fail (self != NULL);
#line 188 "../src/ColorFilters/FilterManager.vala"
	_data53_ = g_slice_new0 (Block53Data);
#line 188 "../src/ColorFilters/FilterManager.vala"
	_data53_->_ref_count_ = 1;
#line 188 "../src/ColorFilters/FilterManager.vala"
	_data53_->self = g_object_ref (self);
#line 189 "../src/ColorFilters/FilterManager.vala"
	_tmp0_ = gala_filter_manager_settings;
#line 189 "../src/ColorFilters/FilterManager.vala"
	enabled = g_settings_get_boolean (_tmp0_, "enable-monochrome-filter");
#line 190 "../src/ColorFilters/FilterManager.vala"
	_tmp1_ = gala_filter_manager_settings;
#line 190 "../src/ColorFilters/FilterManager.vala"
	strength = g_settings_get_double (_tmp1_, "monochrome-filter-strength");
#line 191 "../src/ColorFilters/FilterManager.vala"
	_tmp2_ = self->priv->_wm;
#line 191 "../src/ColorFilters/FilterManager.vala"
	_tmp3_ = gala_window_manager_get_stage (_tmp2_);
#line 191 "../src/ColorFilters/FilterManager.vala"
	_tmp4_ = _tmp3_;
#line 191 "../src/ColorFilters/FilterManager.vala"
	_tmp5_ = clutter_actor_get_effect ((ClutterActor*) _tmp4_, GALA_MONOCHROME_EFFECT_EFFECT_NAME);
#line 191 "../src/ColorFilters/FilterManager.vala"
	_data53_->effect = G_TYPE_CHECK_INSTANCE_CAST (_tmp5_, GALA_TYPE_MONOCHROME_EFFECT, GalaMonochromeEffect);
#line 193 "../src/ColorFilters/FilterManager.vala"
	_tmp6_ = _data53_->effect;
#line 193 "../src/ColorFilters/FilterManager.vala"
	if ((_tmp6_ != NULL) == enabled) {
#line 194 "../src/ColorFilters/FilterManager.vala"
		block53_data_unref (_data53_);
#line 194 "../src/ColorFilters/FilterManager.vala"
		_data53_ = NULL;
#line 194 "../src/ColorFilters/FilterManager.vala"
		return;
#line 1419 "FilterManager.c"
	}
#line 198 "../src/ColorFilters/FilterManager.vala"
	_tmp7_ = _data53_->effect;
#line 198 "../src/ColorFilters/FilterManager.vala"
	if (_tmp7_ != NULL) {
#line 1425 "FilterManager.c"
		GalaMonochromeEffect* _tmp8_;
		ClutterActor* _tmp9_;
		ClutterActor* _tmp10_;
		ClutterPropertyTransition* transition = NULL;
		ClutterPropertyTransition* _tmp14_ = NULL;
		ClutterPropertyTransition* _tmp15_;
		GalaMonochromeEffect* _tmp16_;
		gdouble _tmp17_;
		gdouble _tmp18_;
		GValue _tmp19_ = {0};
		ClutterPropertyTransition* _tmp20_;
		GValue _tmp21_ = {0};
		GalaMonochromeEffect* _tmp22_;
		ClutterActor* _tmp23_ = NULL;
		ClutterActor* _tmp24_;
		GalaWindowManager* _tmp25_;
		ClutterActor* _tmp26_;
		ClutterActor* _tmp27_;
		GalaMonochromeEffect* _tmp28_;
		ClutterActor* _tmp29_;
		ClutterActor* _tmp30_;
		GalaMonochromeEffect* _tmp31_;
		ClutterActor* _tmp32_;
		ClutterActor* _tmp33_;
		GalaMonochromeEffect* _tmp34_;
		ClutterPropertyTransition* _tmp35_;
		GalaMonochromeEffect* _tmp36_;
		ClutterActor* _tmp37_;
		ClutterActor* _tmp38_;
		ClutterPropertyTransition* _tmp39_;
#line 203 "../src/ColorFilters/FilterManager.vala"
		_tmp8_ = _data53_->effect;
#line 203 "../src/ColorFilters/FilterManager.vala"
		_tmp9_ = gala_monochrome_effect_get_transition_actor (_tmp8_);
#line 203 "../src/ColorFilters/FilterManager.vala"
		_tmp10_ = _tmp9_;
#line 203 "../src/ColorFilters/FilterManager.vala"
		if (_tmp10_ != NULL) {
#line 1464 "FilterManager.c"
			GalaMonochromeEffect* _tmp11_;
			ClutterActor* _tmp12_;
			ClutterActor* _tmp13_;
#line 204 "../src/ColorFilters/FilterManager.vala"
			_tmp11_ = _data53_->effect;
#line 204 "../src/ColorFilters/FilterManager.vala"
			_tmp12_ = gala_monochrome_effect_get_transition_actor (_tmp11_);
#line 204 "../src/ColorFilters/FilterManager.vala"
			_tmp13_ = _tmp12_;
#line 204 "../src/ColorFilters/FilterManager.vala"
			clutter_actor_destroy (_tmp13_);
#line 1476 "FilterManager.c"
		}
#line 208 "../src/ColorFilters/FilterManager.vala"
		_tmp14_ = (ClutterPropertyTransition*) clutter_property_transition_new ("scale_x");
#line 208 "../src/ColorFilters/FilterManager.vala"
		clutter_timeline_set_duration ((ClutterTimeline*) _tmp14_, (guint) GALA_FILTER_MANAGER_TRANSITION_DURATION);
#line 208 "../src/ColorFilters/FilterManager.vala"
		clutter_timeline_set_progress_mode ((ClutterTimeline*) _tmp14_, CLUTTER_LINEAR);
#line 208 "../src/ColorFilters/FilterManager.vala"
		clutter_transition_set_remove_on_complete ((ClutterTransition*) _tmp14_, TRUE);
#line 208 "../src/ColorFilters/FilterManager.vala"
		transition = _tmp14_;
#line 213 "../src/ColorFilters/FilterManager.vala"
		_tmp15_ = transition;
#line 213 "../src/ColorFilters/FilterManager.vala"
		_tmp16_ = _data53_->effect;
#line 213 "../src/ColorFilters/FilterManager.vala"
		_tmp17_ = gala_monochrome_effect_get_strength (_tmp16_);
#line 213 "../src/ColorFilters/FilterManager.vala"
		_tmp18_ = _tmp17_;
#line 213 "../src/ColorFilters/FilterManager.vala"
		g_value_init (&_tmp19_, G_TYPE_DOUBLE);
#line 213 "../src/ColorFilters/FilterManager.vala"
		g_value_set_double (&_tmp19_, _tmp18_);
#line 213 "../src/ColorFilters/FilterManager.vala"
		clutter_transition_set_from_value ((ClutterTransition*) _tmp15_, &_tmp19_);
#line 213 "../src/ColorFilters/FilterManager.vala"
		G_IS_VALUE (&_tmp19_) ? (g_value_unset (&_tmp19_), NULL) : NULL;
#line 214 "../src/ColorFilters/FilterManager.vala"
		_tmp20_ = transition;
#line 214 "../src/ColorFilters/FilterManager.vala"
		g_value_init (&_tmp21_, G_TYPE_DOUBLE);
#line 214 "../src/ColorFilters/FilterManager.vala"
		g_value_set_double (&_tmp21_, 0.0);
#line 214 "../src/ColorFilters/FilterManager.vala"
		clutter_transition_set_to_value ((ClutterTransition*) _tmp20_, &_tmp21_);
#line 214 "../src/ColorFilters/FilterManager.vala"
		G_IS_VALUE (&_tmp21_) ? (g_value_unset (&_tmp21_), NULL) : NULL;
#line 217 "../src/ColorFilters/FilterManager.vala"
		_tmp22_ = _data53_->effect;
#line 217 "../src/ColorFilters/FilterManager.vala"
		_tmp23_ = clutter_actor_new ();
#line 217 "../src/ColorFilters/FilterManager.vala"
		g_object_set (_tmp23_, "visible", FALSE, NULL);
#line 217 "../src/ColorFilters/FilterManager.vala"
		g_object_ref_sink (_tmp23_);
#line 217 "../src/ColorFilters/FilterManager.vala"
		_tmp24_ = _tmp23_;
#line 217 "../src/ColorFilters/FilterManager.vala"
		gala_monochrome_effect_set_transition_actor (_tmp22_, _tmp24_);
#line 217 "../src/ColorFilters/FilterManager.vala"
		_g_object_unref0 (_tmp24_);
#line 220 "../src/ColorFilters/FilterManager.vala"
		_tmp25_ = self->priv->_wm;
#line 220 "../src/ColorFilters/FilterManager.vala"
		_tmp26_ = gala_window_manager_get_ui_group (_tmp25_);
#line 220 "../src/ColorFilters/FilterManager.vala"
		_tmp27_ = _tmp26_;
#line 220 "../src/ColorFilters/FilterManager.vala"
		_tmp28_ = _data53_->effect;
#line 220 "../src/ColorFilters/FilterManager.vala"
		_tmp29_ = gala_monochrome_effect_get_transition_actor (_tmp28_);
#line 220 "../src/ColorFilters/FilterManager.vala"
		_tmp30_ = _tmp29_;
#line 220 "../src/ColorFilters/FilterManager.vala"
		clutter_actor_add_child (_tmp27_, _tmp30_);
#line 221 "../src/ColorFilters/FilterManager.vala"
		_tmp31_ = _data53_->effect;
#line 221 "../src/ColorFilters/FilterManager.vala"
		_tmp32_ = gala_monochrome_effect_get_transition_actor (_tmp31_);
#line 221 "../src/ColorFilters/FilterManager.vala"
		_tmp33_ = _tmp32_;
#line 221 "../src/ColorFilters/FilterManager.vala"
		_tmp34_ = _data53_->effect;
#line 221 "../src/ColorFilters/FilterManager.vala"
		g_object_bind_property_with_closures ((GObject*) _tmp33_, "scale_x", (GObject*) _tmp34_, "strength", G_BINDING_DEFAULT, (GClosure*) ((NULL == NULL) ? NULL : g_cclosure_new ((GCallback) NULL, NULL, (GClosureNotify) NULL)), (GClosure*) ((NULL == NULL) ? NULL : g_cclosure_new ((GCallback) NULL, NULL, (GClosureNotify) NULL)));
#line 223 "../src/ColorFilters/FilterManager.vala"
		_tmp35_ = transition;
#line 223 "../src/ColorFilters/FilterManager.vala"
		g_signal_connect_data ((ClutterTimeline*) _tmp35_, "completed", (GCallback) ____lambda152__clutter_timeline_completed, block53_data_ref (_data53_), (GClosureNotify) block53_data_unref, 0);
#line 228 "../src/ColorFilters/FilterManager.vala"
		_tmp36_ = _data53_->effect;
#line 228 "../src/ColorFilters/FilterManager.vala"
		_tmp37_ = gala_monochrome_effect_get_transition_actor (_tmp36_);
#line 228 "../src/ColorFilters/FilterManager.vala"
		_tmp38_ = _tmp37_;
#line 228 "../src/ColorFilters/FilterManager.vala"
		_tmp39_ = transition;
#line 228 "../src/ColorFilters/FilterManager.vala"
		clutter_actor_add_transition (_tmp38_, GALA_FILTER_MANAGER_TRANSITION_NAME, (ClutterTransition*) _tmp39_);
#line 198 "../src/ColorFilters/FilterManager.vala"
		_g_object_unref0 (transition);
#line 1568 "FilterManager.c"
	}
#line 232 "../src/ColorFilters/FilterManager.vala"
	if (!enabled) {
#line 232 "../src/ColorFilters/FilterManager.vala"
		_tmp40_ = TRUE;
#line 1574 "FilterManager.c"
	} else {
#line 232 "../src/ColorFilters/FilterManager.vala"
		_tmp40_ = strength == 0.0;
#line 1578 "FilterManager.c"
	}
#line 232 "../src/ColorFilters/FilterManager.vala"
	if (_tmp40_) {
#line 233 "../src/ColorFilters/FilterManager.vala"
		block53_data_unref (_data53_);
#line 233 "../src/ColorFilters/FilterManager.vala"
		_data53_ = NULL;
#line 233 "../src/ColorFilters/FilterManager.vala"
		return;
#line 1588 "FilterManager.c"
	}
#line 236 "../src/ColorFilters/FilterManager.vala"
	_tmp41_ = gala_monochrome_effect_new (0.0);
#line 236 "../src/ColorFilters/FilterManager.vala"
	g_object_ref_sink (_tmp41_);
#line 236 "../src/ColorFilters/FilterManager.vala"
	_data53_->new_effect = _tmp41_;
#line 237 "../src/ColorFilters/FilterManager.vala"
	_tmp42_ = self->priv->_wm;
#line 237 "../src/ColorFilters/FilterManager.vala"
	_tmp43_ = gala_window_manager_get_stage (_tmp42_);
#line 237 "../src/ColorFilters/FilterManager.vala"
	_tmp44_ = _tmp43_;
#line 237 "../src/ColorFilters/FilterManager.vala"
	_tmp45_ = _data53_->new_effect;
#line 237 "../src/ColorFilters/FilterManager.vala"
	clutter_actor_add_effect_with_name ((ClutterActor*) _tmp44_, GALA_MONOCHROME_EFFECT_EFFECT_NAME, (ClutterEffect*) _tmp45_);
#line 240 "../src/ColorFilters/FilterManager.vala"
	_tmp46_ = (ClutterPropertyTransition*) clutter_property_transition_new ("scale_x");
#line 240 "../src/ColorFilters/FilterManager.vala"
	clutter_timeline_set_duration ((ClutterTimeline*) _tmp46_, (guint) GALA_FILTER_MANAGER_TRANSITION_DURATION);
#line 240 "../src/ColorFilters/FilterManager.vala"
	clutter_timeline_set_progress_mode ((ClutterTimeline*) _tmp46_, CLUTTER_LINEAR);
#line 240 "../src/ColorFilters/FilterManager.vala"
	clutter_transition_set_remove_on_complete ((ClutterTransition*) _tmp46_, TRUE);
#line 240 "../src/ColorFilters/FilterManager.vala"
	new_transition = _tmp46_;
#line 245 "../src/ColorFilters/FilterManager.vala"
	_tmp47_ = new_transition;
#line 245 "../src/ColorFilters/FilterManager.vala"
	g_value_init (&_tmp48_, G_TYPE_DOUBLE);
#line 245 "../src/ColorFilters/FilterManager.vala"
	g_value_set_double (&_tmp48_, 0.0);
#line 245 "../src/ColorFilters/FilterManager.vala"
	clutter_transition_set_from_value ((ClutterTransition*) _tmp47_, &_tmp48_);
#line 245 "../src/ColorFilters/FilterManager.vala"
	G_IS_VALUE (&_tmp48_) ? (g_value_unset (&_tmp48_), NULL) : NULL;
#line 246 "../src/ColorFilters/FilterManager.vala"
	_tmp49_ = new_transition;
#line 246 "../src/ColorFilters/FilterManager.vala"
	g_value_init (&_tmp50_, G_TYPE_DOUBLE);
#line 246 "../src/ColorFilters/FilterManager.vala"
	g_value_set_double (&_tmp50_, strength);
#line 246 "../src/ColorFilters/FilterManager.vala"
	clutter_transition_set_to_value ((ClutterTransition*) _tmp49_, &_tmp50_);
#line 246 "../src/ColorFilters/FilterManager.vala"
	G_IS_VALUE (&_tmp50_) ? (g_value_unset (&_tmp50_), NULL) : NULL;
#line 248 "../src/ColorFilters/FilterManager.vala"
	_tmp51_ = _data53_->new_effect;
#line 248 "../src/ColorFilters/FilterManager.vala"
	_tmp52_ = clutter_actor_new ();
#line 248 "../src/ColorFilters/FilterManager.vala"
	g_object_set (_tmp52_, "visible", FALSE, NULL);
#line 248 "../src/ColorFilters/FilterManager.vala"
	g_object_ref_sink (_tmp52_);
#line 248 "../src/ColorFilters/FilterManager.vala"
	_tmp53_ = _tmp52_;
#line 248 "../src/ColorFilters/FilterManager.vala"
	gala_monochrome_effect_set_transition_actor (_tmp51_, _tmp53_);
#line 248 "../src/ColorFilters/FilterManager.vala"
	_g_object_unref0 (_tmp53_);
#line 251 "../src/ColorFilters/FilterManager.vala"
	_tmp54_ = self->priv->_wm;
#line 251 "../src/ColorFilters/FilterManager.vala"
	_tmp55_ = gala_window_manager_get_ui_group (_tmp54_);
#line 251 "../src/ColorFilters/FilterManager.vala"
	_tmp56_ = _tmp55_;
#line 251 "../src/ColorFilters/FilterManager.vala"
	_tmp57_ = _data53_->new_effect;
#line 251 "../src/ColorFilters/FilterManager.vala"
	_tmp58_ = gala_monochrome_effect_get_transition_actor (_tmp57_);
#line 251 "../src/ColorFilters/FilterManager.vala"
	_tmp59_ = _tmp58_;
#line 251 "../src/ColorFilters/FilterManager.vala"
	clutter_actor_add_child (_tmp56_, _tmp59_);
#line 252 "../src/ColorFilters/FilterManager.vala"
	_tmp60_ = _data53_->new_effect;
#line 252 "../src/ColorFilters/FilterManager.vala"
	_tmp61_ = gala_monochrome_effect_get_transition_actor (_tmp60_);
#line 252 "../src/ColorFilters/FilterManager.vala"
	_tmp62_ = _tmp61_;
#line 252 "../src/ColorFilters/FilterManager.vala"
	_tmp63_ = _data53_->new_effect;
#line 252 "../src/ColorFilters/FilterManager.vala"
	g_object_bind_property_with_closures ((GObject*) _tmp62_, "scale_x", (GObject*) _tmp63_, "strength", G_BINDING_DEFAULT, (GClosure*) ((NULL == NULL) ? NULL : g_cclosure_new ((GCallback) NULL, NULL, (GClosureNotify) NULL)), (GClosure*) ((NULL == NULL) ? NULL : g_cclosure_new ((GCallback) NULL, NULL, (GClosureNotify) NULL)));
#line 254 "../src/ColorFilters/FilterManager.vala"
	_tmp64_ = new_transition;
#line 254 "../src/ColorFilters/FilterManager.vala"
	g_signal_connect_data ((ClutterTimeline*) _tmp64_, "completed", (GCallback) ___lambda153__clutter_timeline_completed, block53_data_ref (_data53_), (GClosureNotify) block53_data_unref, 0);
#line 258 "../src/ColorFilters/FilterManager.vala"
	_tmp65_ = _data53_->new_effect;
#line 258 "../src/ColorFilters/FilterManager.vala"
	_tmp66_ = gala_monochrome_effect_get_transition_actor (_tmp65_);
#line 258 "../src/ColorFilters/FilterManager.vala"
	_tmp67_ = _tmp66_;
#line 258 "../src/ColorFilters/FilterManager.vala"
	_tmp68_ = new_transition;
#line 258 "../src/ColorFilters/FilterManager.vala"
	clutter_actor_add_transition (_tmp67_, GALA_FILTER_MANAGER_TRANSITION_NAME, (ClutterTransition*) _tmp68_);
#line 188 "../src/ColorFilters/FilterManager.vala"
	_g_object_unref0 (new_transition);
#line 188 "../src/ColorFilters/FilterManager.vala"
	block53_data_unref (_data53_);
#line 188 "../src/ColorFilters/FilterManager.vala"
	_data53_ = NULL;
#line 1694 "FilterManager.c"
}

static Block54Data*
block54_data_ref (Block54Data* _data54_)
{
#line 261 "../src/ColorFilters/FilterManager.vala"
	g_atomic_int_inc (&_data54_->_ref_count_);
#line 261 "../src/ColorFilters/FilterManager.vala"
	return _data54_;
#line 1704 "FilterManager.c"
}

static void
block54_data_unref (void * _userdata_)
{
	Block54Data* _data54_;
	_data54_ = (Block54Data*) _userdata_;
#line 261 "../src/ColorFilters/FilterManager.vala"
	if (g_atomic_int_dec_and_test (&_data54_->_ref_count_)) {
#line 1714 "FilterManager.c"
		GalaFilterManager* self;
#line 261 "../src/ColorFilters/FilterManager.vala"
		self = _data54_->self;
#line 261 "../src/ColorFilters/FilterManager.vala"
		_g_object_unref0 (self);
#line 261 "../src/ColorFilters/FilterManager.vala"
		g_slice_free (Block54Data, _data54_);
#line 1722 "FilterManager.c"
	}
}

static void
__lambda154_ (Block54Data* _data54_)
{
	GalaFilterManager* self;
	GalaMonochromeEffect* _tmp0_;
	ClutterActor* _tmp1_;
	ClutterActor* _tmp2_;
#line 287 "../src/ColorFilters/FilterManager.vala"
	self = _data54_->self;
#line 288 "../src/ColorFilters/FilterManager.vala"
	_tmp0_ = _data54_->effect;
#line 288 "../src/ColorFilters/FilterManager.vala"
	_tmp1_ = gala_monochrome_effect_get_transition_actor (_tmp0_);
#line 288 "../src/ColorFilters/FilterManager.vala"
	_tmp2_ = _tmp1_;
#line 288 "../src/ColorFilters/FilterManager.vala"
	clutter_actor_destroy (_tmp2_);
#line 1743 "FilterManager.c"
}

static void
___lambda154__clutter_timeline_completed (ClutterTimeline* _sender,
                                          gpointer self)
{
#line 287 "../src/ColorFilters/FilterManager.vala"
	__lambda154_ (self);
#line 1752 "FilterManager.c"
}

static void
gala_filter_manager_update_monochrome_strength (GalaFilterManager* self)
{
	Block54Data* _data54_;
	gdouble strength = 0.0;
	GSettings* _tmp0_;
	GalaWindowManager* _tmp1_;
	ClutterStage* _tmp2_;
	ClutterStage* _tmp3_;
	ClutterEffect* _tmp4_;
	GalaMonochromeEffect* _tmp5_;
	ClutterActor* _tmp6_;
	ClutterActor* _tmp7_;
	ClutterPropertyTransition* transition = NULL;
	ClutterPropertyTransition* _tmp11_ = NULL;
	GalaMonochromeEffect* _tmp12_;
	gdouble _tmp13_;
	gdouble _tmp14_;
	GValue _tmp15_ = {0};
	GValue _tmp16_ = {0};
	GalaMonochromeEffect* _tmp17_;
	ClutterActor* _tmp18_ = NULL;
	ClutterActor* _tmp19_;
	GalaWindowManager* _tmp20_;
	ClutterActor* _tmp21_;
	ClutterActor* _tmp22_;
	GalaMonochromeEffect* _tmp23_;
	ClutterActor* _tmp24_;
	ClutterActor* _tmp25_;
	GalaMonochromeEffect* _tmp26_;
	ClutterActor* _tmp27_;
	ClutterActor* _tmp28_;
	GalaMonochromeEffect* _tmp29_;
	GalaMonochromeEffect* _tmp30_;
	ClutterActor* _tmp31_;
	ClutterActor* _tmp32_;
#line 261 "../src/ColorFilters/FilterManager.vala"
	g_return_if_fail (self != NULL);
#line 261 "../src/ColorFilters/FilterManager.vala"
	_data54_ = g_slice_new0 (Block54Data);
#line 261 "../src/ColorFilters/FilterManager.vala"
	_data54_->_ref_count_ = 1;
#line 261 "../src/ColorFilters/FilterManager.vala"
	_data54_->self = g_object_ref (self);
#line 262 "../src/ColorFilters/FilterManager.vala"
	_tmp0_ = gala_filter_manager_settings;
#line 262 "../src/ColorFilters/FilterManager.vala"
	strength = g_settings_get_double (_tmp0_, "monochrome-filter-strength");
#line 264 "../src/ColorFilters/FilterManager.vala"
	_tmp1_ = self->priv->_wm;
#line 264 "../src/ColorFilters/FilterManager.vala"
	_tmp2_ = gala_window_manager_get_stage (_tmp1_);
#line 264 "../src/ColorFilters/FilterManager.vala"
	_tmp3_ = _tmp2_;
#line 264 "../src/ColorFilters/FilterManager.vala"
	_tmp4_ = clutter_actor_get_effect ((ClutterActor*) _tmp3_, GALA_MONOCHROME_EFFECT_EFFECT_NAME);
#line 264 "../src/ColorFilters/FilterManager.vala"
	_data54_->effect = G_TYPE_CHECK_INSTANCE_CAST (_tmp4_, GALA_TYPE_MONOCHROME_EFFECT, GalaMonochromeEffect);
#line 267 "../src/ColorFilters/FilterManager.vala"
	_tmp5_ = _data54_->effect;
#line 267 "../src/ColorFilters/FilterManager.vala"
	_tmp6_ = gala_monochrome_effect_get_transition_actor (_tmp5_);
#line 267 "../src/ColorFilters/FilterManager.vala"
	_tmp7_ = _tmp6_;
#line 267 "../src/ColorFilters/FilterManager.vala"
	if (_tmp7_ != NULL) {
#line 1821 "FilterManager.c"
		GalaMonochromeEffect* _tmp8_;
		ClutterActor* _tmp9_;
		ClutterActor* _tmp10_;
#line 268 "../src/ColorFilters/FilterManager.vala"
		_tmp8_ = _data54_->effect;
#line 268 "../src/ColorFilters/FilterManager.vala"
		_tmp9_ = gala_monochrome_effect_get_transition_actor (_tmp8_);
#line 268 "../src/ColorFilters/FilterManager.vala"
		_tmp10_ = _tmp9_;
#line 268 "../src/ColorFilters/FilterManager.vala"
		clutter_actor_destroy (_tmp10_);
#line 1833 "FilterManager.c"
	}
#line 272 "../src/ColorFilters/FilterManager.vala"
	_tmp11_ = (ClutterPropertyTransition*) clutter_property_transition_new ("scale_x");
#line 272 "../src/ColorFilters/FilterManager.vala"
	clutter_timeline_set_duration ((ClutterTimeline*) _tmp11_, (guint) GALA_FILTER_MANAGER_TRANSITION_DURATION);
#line 272 "../src/ColorFilters/FilterManager.vala"
	clutter_timeline_set_progress_mode ((ClutterTimeline*) _tmp11_, CLUTTER_LINEAR);
#line 272 "../src/ColorFilters/FilterManager.vala"
	clutter_transition_set_remove_on_complete ((ClutterTransition*) _tmp11_, TRUE);
#line 272 "../src/ColorFilters/FilterManager.vala"
	transition = _tmp11_;
#line 277 "../src/ColorFilters/FilterManager.vala"
	_tmp12_ = _data54_->effect;
#line 277 "../src/ColorFilters/FilterManager.vala"
	_tmp13_ = gala_monochrome_effect_get_strength (_tmp12_);
#line 277 "../src/ColorFilters/FilterManager.vala"
	_tmp14_ = _tmp13_;
#line 277 "../src/ColorFilters/FilterManager.vala"
	g_value_init (&_tmp15_, G_TYPE_DOUBLE);
#line 277 "../src/ColorFilters/FilterManager.vala"
	g_value_set_double (&_tmp15_, _tmp14_);
#line 277 "../src/ColorFilters/FilterManager.vala"
	clutter_transition_set_from_value ((ClutterTransition*) transition, &_tmp15_);
#line 277 "../src/ColorFilters/FilterManager.vala"
	G_IS_VALUE (&_tmp15_) ? (g_value_unset (&_tmp15_), NULL) : NULL;
#line 278 "../src/ColorFilters/FilterManager.vala"
	g_value_init (&_tmp16_, G_TYPE_DOUBLE);
#line 278 "../src/ColorFilters/FilterManager.vala"
	g_value_set_double (&_tmp16_, strength);
#line 278 "../src/ColorFilters/FilterManager.vala"
	clutter_transition_set_to_value ((ClutterTransition*) transition, &_tmp16_);
#line 278 "../src/ColorFilters/FilterManager.vala"
	G_IS_VALUE (&_tmp16_) ? (g_value_unset (&_tmp16_), NULL) : NULL;
#line 281 "../src/ColorFilters/FilterManager.vala"
	_tmp17_ = _data54_->effect;
#line 281 "../src/ColorFilters/FilterManager.vala"
	_tmp18_ = clutter_actor_new ();
#line 281 "../src/ColorFilters/FilterManager.vala"
	g_object_set (_tmp18_, "visible", FALSE, NULL);
#line 281 "../src/ColorFilters/FilterManager.vala"
	g_object_ref_sink (_tmp18_);
#line 281 "../src/ColorFilters/FilterManager.vala"
	_tmp19_ = _tmp18_;
#line 281 "../src/ColorFilters/FilterManager.vala"
	gala_monochrome_effect_set_transition_actor (_tmp17_, _tmp19_);
#line 281 "../src/ColorFilters/FilterManager.vala"
	_g_object_unref0 (_tmp19_);
#line 284 "../src/ColorFilters/FilterManager.vala"
	_tmp20_ = self->priv->_wm;
#line 284 "../src/ColorFilters/FilterManager.vala"
	_tmp21_ = gala_window_manager_get_ui_group (_tmp20_);
#line 284 "../src/ColorFilters/FilterManager.vala"
	_tmp22_ = _tmp21_;
#line 284 "../src/ColorFilters/FilterManager.vala"
	_tmp23_ = _data54_->effect;
#line 284 "../src/ColorFilters/FilterManager.vala"
	_tmp24_ = gala_monochrome_effect_get_transition_actor (_tmp23_);
#line 284 "../src/ColorFilters/FilterManager.vala"
	_tmp25_ = _tmp24_;
#line 284 "../src/ColorFilters/FilterManager.vala"
	clutter_actor_add_child (_tmp22_, _tmp25_);
#line 285 "../src/ColorFilters/FilterManager.vala"
	_tmp26_ = _data54_->effect;
#line 285 "../src/ColorFilters/FilterManager.vala"
	_tmp27_ = gala_monochrome_effect_get_transition_actor (_tmp26_);
#line 285 "../src/ColorFilters/FilterManager.vala"
	_tmp28_ = _tmp27_;
#line 285 "../src/ColorFilters/FilterManager.vala"
	_tmp29_ = _data54_->effect;
#line 285 "../src/ColorFilters/FilterManager.vala"
	g_object_bind_property_with_closures ((GObject*) _tmp28_, "scale_x", (GObject*) _tmp29_, "strength", G_BINDING_DEFAULT, (GClosure*) ((NULL == NULL) ? NULL : g_cclosure_new ((GCallback) NULL, NULL, (GClosureNotify) NULL)), (GClosure*) ((NULL == NULL) ? NULL : g_cclosure_new ((GCallback) NULL, NULL, (GClosureNotify) NULL)));
#line 287 "../src/ColorFilters/FilterManager.vala"
	g_signal_connect_data ((ClutterTimeline*) transition, "completed", (GCallback) ___lambda154__clutter_timeline_completed, block54_data_ref (_data54_), (GClosureNotify) block54_data_unref, 0);
#line 291 "../src/ColorFilters/FilterManager.vala"
	_tmp30_ = _data54_->effect;
#line 291 "../src/ColorFilters/FilterManager.vala"
	_tmp31_ = gala_monochrome_effect_get_transition_actor (_tmp30_);
#line 291 "../src/ColorFilters/FilterManager.vala"
	_tmp32_ = _tmp31_;
#line 291 "../src/ColorFilters/FilterManager.vala"
	clutter_actor_add_transition (_tmp32_, GALA_FILTER_MANAGER_TRANSITION_NAME, (ClutterTransition*) transition);
#line 261 "../src/ColorFilters/FilterManager.vala"
	_g_object_unref0 (transition);
#line 261 "../src/ColorFilters/FilterManager.vala"
	block54_data_unref (_data54_);
#line 261 "../src/ColorFilters/FilterManager.vala"
	_data54_ = NULL;
#line 1921 "FilterManager.c"
}

GalaWindowManager*
gala_filter_manager_get_wm (GalaFilterManager* self)
{
	GalaWindowManager* result;
	GalaWindowManager* _tmp0_;
#line 12 "../src/ColorFilters/FilterManager.vala"
	g_return_val_if_fail (self != NULL, NULL);
#line 12 "../src/ColorFilters/FilterManager.vala"
	_tmp0_ = self->priv->_wm;
#line 12 "../src/ColorFilters/FilterManager.vala"
	result = _tmp0_;
#line 12 "../src/ColorFilters/FilterManager.vala"
	return result;
#line 1937 "FilterManager.c"
}

static gpointer
_g_object_ref0 (gpointer self)
{
#line 12 "../src/ColorFilters/FilterManager.vala"
	return self ? g_object_ref (self) : NULL;
#line 1945 "FilterManager.c"
}

static void
gala_filter_manager_set_wm (GalaFilterManager* self,
                            GalaWindowManager* value)
{
	GalaWindowManager* old_value;
#line 12 "../src/ColorFilters/FilterManager.vala"
	g_return_if_fail (self != NULL);
#line 12 "../src/ColorFilters/FilterManager.vala"
	old_value = gala_filter_manager_get_wm (self);
#line 12 "../src/ColorFilters/FilterManager.vala"
	if (old_value != value) {
#line 1959 "FilterManager.c"
		GalaWindowManager* _tmp0_;
#line 12 "../src/ColorFilters/FilterManager.vala"
		_tmp0_ = _g_object_ref0 (value);
#line 12 "../src/ColorFilters/FilterManager.vala"
		_g_object_unref0 (self->priv->_wm);
#line 12 "../src/ColorFilters/FilterManager.vala"
		self->priv->_wm = _tmp0_;
#line 12 "../src/ColorFilters/FilterManager.vala"
		g_object_notify_by_pspec ((GObject *) self, gala_filter_manager_properties[GALA_FILTER_MANAGER_WM_PROPERTY]);
#line 1969 "FilterManager.c"
	}
}

static void
_gala_filter_manager_update_colorblindness_filter_g_settings_changed (GSettings* _sender,
                                                                      const gchar* key,
                                                                      gpointer self)
{
#line 31 "../src/ColorFilters/FilterManager.vala"
	gala_filter_manager_update_colorblindness_filter ((GalaFilterManager*) self);
#line 1980 "FilterManager.c"
}

static void
_gala_filter_manager_update_colorblindness_strength_g_settings_changed (GSettings* _sender,
                                                                        const gchar* key,
                                                                        gpointer self)
{
#line 32 "../src/ColorFilters/FilterManager.vala"
	gala_filter_manager_update_colorblindness_strength ((GalaFilterManager*) self);
#line 1990 "FilterManager.c"
}

static void
_gala_filter_manager_update_monochrome_filter_g_settings_changed (GSettings* _sender,
                                                                  const gchar* key,
                                                                  gpointer self)
{
#line 33 "../src/ColorFilters/FilterManager.vala"
	gala_filter_manager_update_monochrome_filter ((GalaFilterManager*) self);
#line 2000 "FilterManager.c"
}

static void
_gala_filter_manager_update_monochrome_strength_g_settings_changed (GSettings* _sender,
                                                                    const gchar* key,
                                                                    gpointer self)
{
#line 34 "../src/ColorFilters/FilterManager.vala"
	gala_filter_manager_update_monochrome_strength ((GalaFilterManager*) self);
#line 2010 "FilterManager.c"
}

static GObject *
gala_filter_manager_constructor (GType type,
                                 guint n_construct_properties,
                                 GObjectConstructParam * construct_properties)
{
	GObject * obj;
	GObjectClass * parent_class;
	GalaFilterManager * self;
	GSettings* _tmp0_;
	GSettings* _tmp1_;
	GSettings* _tmp2_;
	GSettings* _tmp3_;
#line 30 "../src/ColorFilters/FilterManager.vala"
	parent_class = G_OBJECT_CLASS (gala_filter_manager_parent_class);
#line 30 "../src/ColorFilters/FilterManager.vala"
	obj = parent_class->constructor (type, n_construct_properties, construct_properties);
#line 30 "../src/ColorFilters/FilterManager.vala"
	self = G_TYPE_CHECK_INSTANCE_CAST (obj, GALA_TYPE_FILTER_MANAGER, GalaFilterManager);
#line 31 "../src/ColorFilters/FilterManager.vala"
	_tmp0_ = gala_filter_manager_settings;
#line 31 "../src/ColorFilters/FilterManager.vala"
	g_signal_connect_object (_tmp0_, "changed::colorblindness-correction-filter", (GCallback) _gala_filter_manager_update_colorblindness_filter_g_settings_changed, self, 0);
#line 32 "../src/ColorFilters/FilterManager.vala"
	_tmp1_ = gala_filter_manager_settings;
#line 32 "../src/ColorFilters/FilterManager.vala"
	g_signal_connect_object (_tmp1_, "changed::colorblindness-correction-filter-strength", (GCallback) _gala_filter_manager_update_colorblindness_strength_g_settings_changed, self, 0);
#line 33 "../src/ColorFilters/FilterManager.vala"
	_tmp2_ = gala_filter_manager_settings;
#line 33 "../src/ColorFilters/FilterManager.vala"
	g_signal_connect_object (_tmp2_, "changed::enable-monochrome-filter", (GCallback) _gala_filter_manager_update_monochrome_filter_g_settings_changed, self, 0);
#line 34 "../src/ColorFilters/FilterManager.vala"
	_tmp3_ = gala_filter_manager_settings;
#line 34 "../src/ColorFilters/FilterManager.vala"
	g_signal_connect_object (_tmp3_, "changed::monochrome-filter-strength", (GCallback) _gala_filter_manager_update_monochrome_strength_g_settings_changed, self, 0);
#line 36 "../src/ColorFilters/FilterManager.vala"
	gala_filter_manager_load_filters (self);
#line 30 "../src/ColorFilters/FilterManager.vala"
	return obj;
#line 2051 "FilterManager.c"
}

static void
gala_filter_manager_class_init (GalaFilterManagerClass * klass,
                                gpointer klass_data)
{
	GSettings* _tmp0_;
#line 6 "../src/ColorFilters/FilterManager.vala"
	gala_filter_manager_parent_class = g_type_class_peek_parent (klass);
#line 6 "../src/ColorFilters/FilterManager.vala"
	g_type_class_adjust_private_offset (klass, &GalaFilterManager_private_offset);
#line 6 "../src/ColorFilters/FilterManager.vala"
	G_OBJECT_CLASS (klass)->get_property = _vala_gala_filter_manager_get_property;
#line 6 "../src/ColorFilters/FilterManager.vala"
	G_OBJECT_CLASS (klass)->set_property = _vala_gala_filter_manager_set_property;
#line 6 "../src/ColorFilters/FilterManager.vala"
	G_OBJECT_CLASS (klass)->constructor = gala_filter_manager_constructor;
#line 6 "../src/ColorFilters/FilterManager.vala"
	G_OBJECT_CLASS (klass)->finalize = gala_filter_manager_finalize;
#line 6 "../src/ColorFilters/FilterManager.vala"
	g_object_class_install_property (G_OBJECT_CLASS (klass), GALA_FILTER_MANAGER_WM_PROPERTY, gala_filter_manager_properties[GALA_FILTER_MANAGER_WM_PROPERTY] = g_param_spec_object ("wm", "wm", "wm", GALA_TYPE_WINDOW_MANAGER, G_PARAM_STATIC_STRINGS | G_PARAM_READABLE | G_PARAM_WRITABLE | G_PARAM_CONSTRUCT_ONLY));
#line 27 "../src/ColorFilters/FilterManager.vala"
	_tmp0_ = g_settings_new ("io.elementary.desktop.wm.accessibility");
#line 27 "../src/ColorFilters/FilterManager.vala"
	_g_object_unref0 (gala_filter_manager_settings);
#line 27 "../src/ColorFilters/FilterManager.vala"
	gala_filter_manager_settings = _tmp0_;
#line 2079 "FilterManager.c"
}

static void
gala_filter_manager_instance_init (GalaFilterManager * self,
                                   gpointer klass)
{
#line 6 "../src/ColorFilters/FilterManager.vala"
	self->priv = gala_filter_manager_get_instance_private (self);
#line 2088 "FilterManager.c"
}

static void
gala_filter_manager_finalize (GObject * obj)
{
	GalaFilterManager * self;
#line 6 "../src/ColorFilters/FilterManager.vala"
	self = G_TYPE_CHECK_INSTANCE_CAST (obj, GALA_TYPE_FILTER_MANAGER, GalaFilterManager);
#line 12 "../src/ColorFilters/FilterManager.vala"
	_g_object_unref0 (self->priv->_wm);
#line 6 "../src/ColorFilters/FilterManager.vala"
	G_OBJECT_CLASS (gala_filter_manager_parent_class)->finalize (obj);
#line 2101 "FilterManager.c"
}

 G_GNUC_NO_INLINE static GType
gala_filter_manager_get_type_once (void)
{
	static const GTypeInfo g_define_type_info = { sizeof (GalaFilterManagerClass), (GBaseInitFunc) NULL, (GBaseFinalizeFunc) NULL, (GClassInitFunc) gala_filter_manager_class_init, (GClassFinalizeFunc) NULL, NULL, sizeof (GalaFilterManager), 0, (GInstanceInitFunc) gala_filter_manager_instance_init, NULL };
	GType gala_filter_manager_type_id;
	gala_filter_manager_type_id = g_type_register_static (G_TYPE_OBJECT, "GalaFilterManager", &g_define_type_info, 0);
	GalaFilterManager_private_offset = g_type_add_instance_private (gala_filter_manager_type_id, sizeof (GalaFilterManagerPrivate));
	return gala_filter_manager_type_id;
}

GType
gala_filter_manager_get_type (void)
{
	static gsize gala_filter_manager_type_id__once = 0;
	if (g_once_init_enter (&gala_filter_manager_type_id__once)) {
		GType gala_filter_manager_type_id;
		gala_filter_manager_type_id = gala_filter_manager_get_type_once ();
		g_once_init_leave (&gala_filter_manager_type_id__once, gala_filter_manager_type_id);
	}
	return gala_filter_manager_type_id__once;
}

static void
_vala_gala_filter_manager_get_property (GObject * object,
                                        guint property_id,
                                        GValue * value,
                                        GParamSpec * pspec)
{
	GalaFilterManager * self;
	self = G_TYPE_CHECK_INSTANCE_CAST (object, GALA_TYPE_FILTER_MANAGER, GalaFilterManager);
#line 6 "../src/ColorFilters/FilterManager.vala"
	switch (property_id) {
#line 6 "../src/ColorFilters/FilterManager.vala"
		case GALA_FILTER_MANAGER_WM_PROPERTY:
#line 6 "../src/ColorFilters/FilterManager.vala"
		g_value_set_object (value, gala_filter_manager_get_wm (self));
#line 6 "../src/ColorFilters/FilterManager.vala"
		break;
#line 2142 "FilterManager.c"
		default:
#line 6 "../src/ColorFilters/FilterManager.vala"
		G_OBJECT_WARN_INVALID_PROPERTY_ID (object, property_id, pspec);
#line 6 "../src/ColorFilters/FilterManager.vala"
		break;
#line 2148 "FilterManager.c"
	}
}

static void
_vala_gala_filter_manager_set_property (GObject * object,
                                        guint property_id,
                                        const GValue * value,
                                        GParamSpec * pspec)
{
	GalaFilterManager * self;
	self = G_TYPE_CHECK_INSTANCE_CAST (object, GALA_TYPE_FILTER_MANAGER, GalaFilterManager);
#line 6 "../src/ColorFilters/FilterManager.vala"
	switch (property_id) {
#line 6 "../src/ColorFilters/FilterManager.vala"
		case GALA_FILTER_MANAGER_WM_PROPERTY:
#line 6 "../src/ColorFilters/FilterManager.vala"
		gala_filter_manager_set_wm (self, g_value_get_object (value));
#line 6 "../src/ColorFilters/FilterManager.vala"
		break;
#line 2168 "FilterManager.c"
		default:
#line 6 "../src/ColorFilters/FilterManager.vala"
		G_OBJECT_WARN_INVALID_PROPERTY_ID (object, property_id, pspec);
#line 6 "../src/ColorFilters/FilterManager.vala"
		break;
#line 2174 "FilterManager.c"
	}
}

