/* Background.c generated by valac 0.56.17, the Vala compiler
 * generated from Background.vala, do not modify */

/**/
/*  Copyright (C) 2014 Tom Beckmann*/
/**/
/*  This program is free software: you can redistribute it and/or modify*/
/*  it under the terms of the GNU General Public License as published by*/
/*  the Free Software Foundation, either version 3 of the License, or*/
/*  (at your option) any later version.*/
/**/
/*  This program is distributed in the hope that it will be useful,*/
/*  but WITHOUT ANY WARRANTY; without even the implied warranty of*/
/*  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the*/
/*  GNU General Public License for more details.*/
/**/
/*  You should have received a copy of the GNU General Public License*/
/*  along with this program.  If not, see <http://www.gnu.org/licenses/>.*/
/**/

#include <glib-object.h>
#include <meta/display.h>
#include <glib.h>
#include <gsettings-desktop-schemas/gdesktop-enums.h>
#include <stdlib.h>
#include <string.h>
#include <meta/meta-background.h>
#include <gee.h>
#include <gio/gio.h>
#include <libgnome-desktop/gnome-wall-clock.h>
#include <float.h>
#include <math.h>
#include <clutter/clutter.h>
#include <meta/meta-background-image.h>
#include <mtk/mtk.h>

#define GALA_BACKGROUND_ANIMATION_OPACITY_STEP_INCREMENT 4.0
#define GALA_BACKGROUND_ANIMATION_MIN_WAKEUP_INTERVAL 1.0
#if !defined(VALA_STRICT_C)
#if !defined(__clang__) && defined(__GNUC__) && (__GNUC__ >= 14)
#pragma GCC diagnostic warning "-Wincompatible-pointer-types"
#elif defined(__clang__) && (__clang_major__ >= 16)
#pragma clang diagnostic ignored "-Wincompatible-function-pointer-types"
#pragma clang diagnostic ignored "-Wincompatible-pointer-types"
#endif
#endif
#if !defined(VALA_EXTERN)
#if defined(_MSC_VER)
#define VALA_EXTERN __declspec(dllexport) extern
#elif __GNUC__ >= 4
#define VALA_EXTERN __attribute__((visibility("default"))) extern
#else
#define VALA_EXTERN extern
#endif
#endif

#define GALA_TYPE_BACKGROUND (gala_background_get_type ())
#define GALA_BACKGROUND(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), GALA_TYPE_BACKGROUND, GalaBackground))
#define GALA_BACKGROUND_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), GALA_TYPE_BACKGROUND, GalaBackgroundClass))
#define GALA_IS_BACKGROUND(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), GALA_TYPE_BACKGROUND))
#define GALA_IS_BACKGROUND_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), GALA_TYPE_BACKGROUND))
#define GALA_BACKGROUND_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), GALA_TYPE_BACKGROUND, GalaBackgroundClass))

typedef struct _GalaBackground GalaBackground;
typedef struct _GalaBackgroundClass GalaBackgroundClass;
typedef struct _GalaBackgroundPrivate GalaBackgroundPrivate;

#define GALA_TYPE_BACKGROUND_SOURCE (gala_background_source_get_type ())
#define GALA_BACKGROUND_SOURCE(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), GALA_TYPE_BACKGROUND_SOURCE, GalaBackgroundSource))
#define GALA_BACKGROUND_SOURCE_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), GALA_TYPE_BACKGROUND_SOURCE, GalaBackgroundSourceClass))
#define GALA_IS_BACKGROUND_SOURCE(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), GALA_TYPE_BACKGROUND_SOURCE))
#define GALA_IS_BACKGROUND_SOURCE_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), GALA_TYPE_BACKGROUND_SOURCE))
#define GALA_BACKGROUND_SOURCE_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), GALA_TYPE_BACKGROUND_SOURCE, GalaBackgroundSourceClass))

typedef struct _GalaBackgroundSource GalaBackgroundSource;
typedef struct _GalaBackgroundSourceClass GalaBackgroundSourceClass;

#define GALA_TYPE_ANIMATION (gala_animation_get_type ())
#define GALA_ANIMATION(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), GALA_TYPE_ANIMATION, GalaAnimation))
#define GALA_ANIMATION_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), GALA_TYPE_ANIMATION, GalaAnimationClass))
#define GALA_IS_ANIMATION(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), GALA_TYPE_ANIMATION))
#define GALA_IS_ANIMATION_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), GALA_TYPE_ANIMATION))
#define GALA_ANIMATION_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), GALA_TYPE_ANIMATION, GalaAnimationClass))

typedef struct _GalaAnimation GalaAnimation;
typedef struct _GalaAnimationClass GalaAnimationClass;
enum  {
	GALA_BACKGROUND_0_PROPERTY,
	GALA_BACKGROUND_DISPLAY_PROPERTY,
	GALA_BACKGROUND_MONITOR_INDEX_PROPERTY,
	GALA_BACKGROUND_BACKGROUND_SOURCE_PROPERTY,
	GALA_BACKGROUND_IS_LOADED_PROPERTY,
	GALA_BACKGROUND_STYLE_PROPERTY,
	GALA_BACKGROUND_FILENAME_PROPERTY,
	GALA_BACKGROUND_BACKGROUND_PROPERTY,
	GALA_BACKGROUND_NUM_PROPERTIES
};
static GParamSpec* gala_background_properties[GALA_BACKGROUND_NUM_PROPERTIES];
#define _g_object_unref0(var) ((var == NULL) ? NULL : (var = (g_object_unref (var), NULL)))
#define _g_free0(var) (var = (g_free (var), NULL))

#define GALA_TYPE_BACKGROUND_CACHE (gala_background_cache_get_type ())
#define GALA_BACKGROUND_CACHE(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), GALA_TYPE_BACKGROUND_CACHE, GalaBackgroundCache))
#define GALA_BACKGROUND_CACHE_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), GALA_TYPE_BACKGROUND_CACHE, GalaBackgroundCacheClass))
#define GALA_IS_BACKGROUND_CACHE(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), GALA_TYPE_BACKGROUND_CACHE))
#define GALA_IS_BACKGROUND_CACHE_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), GALA_TYPE_BACKGROUND_CACHE))
#define GALA_BACKGROUND_CACHE_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), GALA_TYPE_BACKGROUND_CACHE, GalaBackgroundCacheClass))

typedef struct _GalaBackgroundCache GalaBackgroundCache;
typedef struct _GalaBackgroundCacheClass GalaBackgroundCacheClass;
#define __vala_ClutterColor_free0(var) ((var == NULL) ? NULL : (var = (_vala_ClutterColor_free (var), NULL)))
typedef struct _Block38Data Block38Data;
typedef struct _Block39Data Block39Data;
typedef struct _Block40Data Block40Data;
typedef struct _Block41Data Block41Data;
typedef struct _GalaBackgroundLoadAnimationData GalaBackgroundLoadAnimationData;
typedef struct _Block42Data Block42Data;
typedef struct _Block43Data Block43Data;
enum  {
	GALA_BACKGROUND_CHANGED_SIGNAL,
	GALA_BACKGROUND_LOADED_SIGNAL,
	GALA_BACKGROUND_NUM_SIGNALS
};
static guint gala_background_signals[GALA_BACKGROUND_NUM_SIGNALS] = {0};

struct _GalaBackground {
	GObject parent_instance;
	GalaBackgroundPrivate * priv;
};

struct _GalaBackgroundClass {
	GObjectClass parent_class;
};

struct _GalaBackgroundPrivate {
	MetaDisplay* _display;
	gint _monitor_index;
	GalaBackgroundSource* _background_source;
	gboolean _is_loaded;
	GDesktopBackgroundStyle _style;
	gchar* _filename;
	MetaBackground* _background;
	GalaAnimation* animation;
	GeeHashMap* file_watches;
	GCancellable* cancellable;
	guint update_animation_timeout_id;
	GnomeWallClock* clock;
	gulong clock_timezone_handler;
};

struct _Block38Data {
	int _ref_count_;
	GalaBackground* self;
	gchar* filename;
};

struct _Block39Data {
	int _ref_count_;
	GalaBackground* self;
	gchar** files;
	gint files_length1;
	gint _files_size_;
	gint num_pending_images;
};

struct _Block40Data {
	int _ref_count_;
	Block39Data * _data39_;
	MetaBackgroundImage* image;
};

struct _Block41Data {
	int _ref_count_;
	Block40Data * _data40_;
	gulong handler;
};

struct _GalaBackgroundLoadAnimationData {
	int _state_;
	GObject* _source_object_;
	GAsyncResult* _res_;
	GTask* _async_result;
	GalaBackground* self;
	gchar* filename;
	GalaBackgroundCache* _tmp0_;
	GalaAnimation* _tmp1_;
	gboolean _tmp2_;
	GalaAnimation* _tmp3_;
	GCancellable* _tmp4_;
};

struct _Block42Data {
	int _ref_count_;
	GalaBackground* self;
	MetaBackgroundImage* image;
};

struct _Block43Data {
	int _ref_count_;
	Block42Data * _data42_;
	gulong handler;
};

static gint GalaBackground_private_offset;
static gpointer gala_background_parent_class = NULL;

VALA_EXTERN GType gala_background_get_type (void) G_GNUC_CONST ;
G_DEFINE_AUTOPTR_CLEANUP_FUNC (GalaBackground, g_object_unref)
VALA_EXTERN GType gala_background_source_get_type (void) G_GNUC_CONST ;
G_DEFINE_AUTOPTR_CLEANUP_FUNC (GalaBackgroundSource, g_object_unref)
VALA_EXTERN GType gala_animation_get_type (void) G_GNUC_CONST ;
G_DEFINE_AUTOPTR_CLEANUP_FUNC (GalaAnimation, g_object_unref)
VALA_EXTERN GalaBackground* gala_background_new (MetaDisplay* display,
                                     gint monitor_index,
                                     const gchar* filename,
                                     GalaBackgroundSource* background_source,
                                     GDesktopBackgroundStyle style);
VALA_EXTERN GalaBackground* gala_background_construct (GType object_type,
                                           MetaDisplay* display,
                                           gint monitor_index,
                                           const gchar* filename,
                                           GalaBackgroundSource* background_source,
                                           GDesktopBackgroundStyle style);
VALA_EXTERN void gala_background_destroy (GalaBackground* self);
static void gala_background_remove_animation_timeout (GalaBackground* self);
VALA_EXTERN GType gala_background_cache_get_type (void) G_GNUC_CONST ;
G_DEFINE_AUTOPTR_CLEANUP_FUNC (GalaBackgroundCache, g_object_unref)
VALA_EXTERN GalaBackgroundCache* gala_background_cache_get_default (void);
VALA_EXTERN GalaBackgroundSource* gala_background_get_background_source (GalaBackground* self);
static void gala_background_settings_changed (GalaBackground* self);
static void _gala_background_settings_changed_gala_background_source_changed (GalaBackgroundSource* _sender,
                                                                       gpointer self);
VALA_EXTERN void gala_background_update_resolution (GalaBackground* self);
static void gala_background_update_animation (GalaBackground* self);
static void gala_background_set_loaded (GalaBackground* self);
VALA_EXTERN gboolean gala_background_get_is_loaded (GalaBackground* self);
static void gala_background_set_is_loaded (GalaBackground* self,
                                    gboolean value);
static gboolean __lambda36_ (GalaBackground* self);
static gboolean ___lambda36__gsource_func (gpointer self);
static void gala_background_load_pattern (GalaBackground* self);
VALA_EXTERN GSettings* gala_background_source_get_gnome_background_settings (GalaBackgroundSource* self);
VALA_EXTERN MetaBackground* gala_background_get_background (GalaBackground* self);
static void _vala_ClutterColor_free (ClutterColor* self);
static void gala_background_watch_file (GalaBackground* self,
                                 const gchar* filename);
static Block38Data* block38_data_ref (Block38Data* _data38_);
static void block38_data_unref (void * _userdata_);
VALA_EXTERN void gala_background_cache_monitor_file (GalaBackgroundCache* self,
                                         const gchar* filename);
static void __lambda35_ (Block38Data* _data38_,
                  const gchar* changed_file);
static void ___lambda35__gala_background_cache_file_changed (GalaBackgroundCache* _sender,
                                                      const gchar* filename,
                                                      gpointer self);
static void gala_background_finish_animation (GalaBackground* self,
                                       gchar** files,
                                       gint files_length1);
VALA_EXTERN gdouble gala_animation_get_transition_progress (GalaAnimation* self);
VALA_EXTERN GDesktopBackgroundStyle gala_background_get_style (GalaBackground* self);
static void gala_background_queue_update_animation (GalaBackground* self);
static Block39Data* block39_data_ref (Block39Data* _data39_);
static void block39_data_unref (void * _userdata_);
VALA_EXTERN void gala_animation_update (GalaAnimation* self,
                            MtkRectangle* monitor);
VALA_EXTERN MetaDisplay* gala_background_get_display (GalaBackground* self);
VALA_EXTERN gint gala_background_get_monitor_index (GalaBackground* self);
VALA_EXTERN gchar** gala_animation_get_key_frame_files (GalaAnimation* self,
                                            gint* result_length1);
static gchar** _vala_array_dup3 (gchar** self,
                          gssize length);
static Block40Data* block40_data_ref (Block40Data* _data40_);
static void block40_data_unref (void * _userdata_);
static Block41Data* block41_data_ref (Block41Data* _data41_);
static void block41_data_unref (void * _userdata_);
static void ______lambda38_ (Block41Data* _data41_);
static void _______lambda38__meta_background_image_loaded (MetaBackgroundImage* _sender,
                                                    gpointer self);
VALA_EXTERN gdouble gala_animation_get_transition_duration (GalaAnimation* self);
static gboolean __lambda37_ (GalaBackground* self);
static gboolean ___lambda37__gsource_func (gpointer self);
static void gala_background_load_animation_data_free (gpointer _data);
static void gala_background_load_animation (GalaBackground* self,
                                     const gchar* filename,
                                     GAsyncReadyCallback _callback_,
                                     gpointer _user_data_);
static void gala_background_load_animation_finish (GalaBackground* self,
                                            GAsyncResult* _res_);
static gboolean gala_background_load_animation_co (GalaBackgroundLoadAnimationData* _data_);
VALA_EXTERN void gala_background_cache_get_animation (GalaBackgroundCache* self,
                                          const gchar* filename,
                                          GAsyncReadyCallback _callback_,
                                          gpointer _user_data_);
VALA_EXTERN GalaAnimation* gala_background_cache_get_animation_finish (GalaBackgroundCache* self,
                                                           GAsyncResult* _res_);
static void gala_background_load_animation_ready (GObject* source_object,
                                           GAsyncResult* _res_,
                                           gpointer _user_data_);
static void gala_background_load_image (GalaBackground* self,
                                 const gchar* filename);
static Block42Data* block42_data_ref (Block42Data* _data42_);
static void block42_data_unref (void * _userdata_);
static Block43Data* block43_data_ref (Block43Data* _data43_);
static void block43_data_unref (void * _userdata_);
static void ___lambda40_ (Block43Data* _data43_);
static void ____lambda40__meta_background_image_loaded (MetaBackgroundImage* _sender,
                                                 gpointer self);
static void gala_background_load_file (GalaBackground* self,
                                const gchar* filename);
static void gala_background_load (GalaBackground* self);
VALA_EXTERN const gchar* gala_background_get_filename (GalaBackground* self);
static void gala_background_set_display (GalaBackground* self,
                                  MetaDisplay* value);
static void gala_background_set_monitor_index (GalaBackground* self,
                                        gint value);
static void gala_background_set_background_source (GalaBackground* self,
                                            GalaBackgroundSource* value);
static void gala_background_set_style (GalaBackground* self,
                                GDesktopBackgroundStyle value);
static void gala_background_set_filename (GalaBackground* self,
                                   const gchar* value);
static void gala_background_set_background (GalaBackground* self,
                                     MetaBackground* value);
static GObject * gala_background_constructor (GType type,
                                       guint n_construct_properties,
                                       GObjectConstructParam * construct_properties);
static void _gala_background___lambda41_ (GalaBackground* self);
VALA_EXTERN const gchar* gala_animation_get_filename (GalaAnimation* self);
static void __gala_background___lambda41__g_object_notify (GObject* _sender,
                                                    GParamSpec* pspec,
                                                    gpointer self);
static void gala_background_finalize (GObject * obj);
static GType gala_background_get_type_once (void);
static void _vala_gala_background_get_property (GObject * object,
                                         guint property_id,
                                         GValue * value,
                                         GParamSpec * pspec);
static void _vala_gala_background_set_property (GObject * object,
                                         guint property_id,
                                         const GValue * value,
                                         GParamSpec * pspec);
static void _vala_array_destroy (gpointer array,
                          gssize array_length,
                          GDestroyNotify destroy_func);
static void _vala_array_free (gpointer array,
                       gssize array_length,
                       GDestroyNotify destroy_func);

static inline gpointer
gala_background_get_instance_private (GalaBackground* self)
{
	return G_STRUCT_MEMBER_P (self, GalaBackground_private_offset);
}

GalaBackground*
gala_background_construct (GType object_type,
                           MetaDisplay* display,
                           gint monitor_index,
                           const gchar* filename,
                           GalaBackgroundSource* background_source,
                           GDesktopBackgroundStyle style)
{
	GalaBackground * self = NULL;
#line 42 "../src/Background/Background.vala"
	g_return_val_if_fail (display != NULL, NULL);
#line 42 "../src/Background/Background.vala"
	g_return_val_if_fail (background_source != NULL, NULL);
#line 44 "../src/Background/Background.vala"
	self = (GalaBackground*) g_object_new (object_type, "display", display, "monitor-index", monitor_index, "background-source", background_source, "style", style, "filename", filename, NULL);
#line 42 "../src/Background/Background.vala"
	return self;
#line 373 "Background.c"
}

GalaBackground*
gala_background_new (MetaDisplay* display,
                     gint monitor_index,
                     const gchar* filename,
                     GalaBackgroundSource* background_source,
                     GDesktopBackgroundStyle style)
{
#line 42 "../src/Background/Background.vala"
	return gala_background_construct (GALA_TYPE_BACKGROUND, display, monitor_index, filename, background_source, style);
#line 385 "Background.c"
}

static gpointer
_g_object_ref0 (gpointer self)
{
#line 74 "../src/Background/Background.vala"
	return self ? g_object_ref (self) : NULL;
#line 393 "Background.c"
}

static void
_gala_background_settings_changed_gala_background_source_changed (GalaBackgroundSource* _sender,
                                                                  gpointer self)
{
#line 80 "../src/Background/Background.vala"
	gala_background_settings_changed ((GalaBackground*) self);
#line 402 "Background.c"
}

void
gala_background_destroy (GalaBackground* self)
{
	GCancellable* _tmp0_;
	GalaBackgroundCache* cache = NULL;
	GalaBackgroundCache* _tmp1_;
	GalaBackgroundCache* _tmp2_;
	GalaBackgroundSource* _tmp13_;
	guint _tmp14_;
#line 70 "../src/Background/Background.vala"
	g_return_if_fail (self != NULL);
#line 71 "../src/Background/Background.vala"
	_tmp0_ = self->priv->cancellable;
#line 71 "../src/Background/Background.vala"
	g_cancellable_cancel (_tmp0_);
#line 72 "../src/Background/Background.vala"
	gala_background_remove_animation_timeout (self);
#line 74 "../src/Background/Background.vala"
	_tmp1_ = gala_background_cache_get_default ();
#line 74 "../src/Background/Background.vala"
	_tmp2_ = _g_object_ref0 (_tmp1_);
#line 74 "../src/Background/Background.vala"
	cache = _tmp2_;
#line 428 "Background.c"
	{
		GeeIterator* _watch_it = NULL;
		GeeHashMap* _tmp3_;
		GeeCollection* _tmp4_;
		GeeCollection* _tmp5_;
		GeeCollection* _tmp6_;
		GeeIterator* _tmp7_;
		GeeIterator* _tmp8_;
#line 76 "../src/Background/Background.vala"
		_tmp3_ = self->priv->file_watches;
#line 76 "../src/Background/Background.vala"
		_tmp4_ = gee_abstract_map_get_values ((GeeAbstractMap*) _tmp3_);
#line 76 "../src/Background/Background.vala"
		_tmp5_ = _tmp4_;
#line 76 "../src/Background/Background.vala"
		_tmp6_ = _tmp5_;
#line 76 "../src/Background/Background.vala"
		_tmp7_ = gee_iterable_iterator ((GeeIterable*) _tmp6_);
#line 76 "../src/Background/Background.vala"
		_tmp8_ = _tmp7_;
#line 76 "../src/Background/Background.vala"
		_g_object_unref0 (_tmp6_);
#line 76 "../src/Background/Background.vala"
		_watch_it = _tmp8_;
#line 76 "../src/Background/Background.vala"
		while (TRUE) {
#line 455 "Background.c"
			GeeIterator* _tmp9_;
			gulong watch = 0UL;
			GeeIterator* _tmp10_;
			gpointer _tmp11_;
			GalaBackgroundCache* _tmp12_;
#line 76 "../src/Background/Background.vala"
			_tmp9_ = _watch_it;
#line 76 "../src/Background/Background.vala"
			if (!gee_iterator_next (_tmp9_)) {
#line 76 "../src/Background/Background.vala"
				break;
#line 467 "Background.c"
			}
#line 76 "../src/Background/Background.vala"
			_tmp10_ = _watch_it;
#line 76 "../src/Background/Background.vala"
			_tmp11_ = gee_iterator_get (_tmp10_);
#line 76 "../src/Background/Background.vala"
			watch = (gulong) ((guintptr) _tmp11_);
#line 77 "../src/Background/Background.vala"
			_tmp12_ = cache;
#line 77 "../src/Background/Background.vala"
			g_signal_handler_disconnect ((GObject*) _tmp12_, watch);
#line 479 "Background.c"
		}
#line 76 "../src/Background/Background.vala"
		_g_object_unref0 (_watch_it);
#line 483 "Background.c"
	}
#line 80 "../src/Background/Background.vala"
	_tmp13_ = self->priv->_background_source;
#line 80 "../src/Background/Background.vala"
	g_signal_parse_name ("changed", GALA_TYPE_BACKGROUND_SOURCE, &_tmp14_, NULL, FALSE);
#line 80 "../src/Background/Background.vala"
	g_signal_handlers_disconnect_matched (_tmp13_, G_SIGNAL_MATCH_ID | G_SIGNAL_MATCH_FUNC | G_SIGNAL_MATCH_DATA, _tmp14_, 0, NULL, (GCallback) _gala_background_settings_changed_gala_background_source_changed, self);
#line 82 "../src/Background/Background.vala"
	if (self->priv->clock_timezone_handler != ((gulong) 0)) {
#line 493 "Background.c"
		GnomeWallClock* _tmp15_;
#line 83 "../src/Background/Background.vala"
		_tmp15_ = self->priv->clock;
#line 83 "../src/Background/Background.vala"
		g_signal_handler_disconnect ((GObject*) _tmp15_, self->priv->clock_timezone_handler);
#line 499 "Background.c"
	}
#line 70 "../src/Background/Background.vala"
	_g_object_unref0 (cache);
#line 503 "Background.c"
}

void
gala_background_update_resolution (GalaBackground* self)
{
	GalaAnimation* _tmp0_;
#line 87 "../src/Background/Background.vala"
	g_return_if_fail (self != NULL);
#line 88 "../src/Background/Background.vala"
	_tmp0_ = self->priv->animation;
#line 88 "../src/Background/Background.vala"
	if (_tmp0_ != NULL) {
#line 89 "../src/Background/Background.vala"
		gala_background_remove_animation_timeout (self);
#line 90 "../src/Background/Background.vala"
		gala_background_update_animation (self);
#line 520 "Background.c"
	}
}

static gboolean
__lambda36_ (GalaBackground* self)
{
	gboolean result;
#line 101 "../src/Background/Background.vala"
	g_signal_emit (self, gala_background_signals[GALA_BACKGROUND_LOADED_SIGNAL], 0);
#line 102 "../src/Background/Background.vala"
	result = G_SOURCE_REMOVE;
#line 102 "../src/Background/Background.vala"
	return result;
#line 534 "Background.c"
}

static gboolean
___lambda36__gsource_func (gpointer self)
{
	gboolean result;
	result = __lambda36_ ((GalaBackground*) self);
#line 100 "../src/Background/Background.vala"
	return result;
#line 544 "Background.c"
}

static void
gala_background_set_loaded (GalaBackground* self)
{
	gboolean _tmp0_;
#line 94 "../src/Background/Background.vala"
	g_return_if_fail (self != NULL);
#line 95 "../src/Background/Background.vala"
	_tmp0_ = self->priv->_is_loaded;
#line 95 "../src/Background/Background.vala"
	if (_tmp0_) {
#line 96 "../src/Background/Background.vala"
		return;
#line 559 "Background.c"
	}
#line 98 "../src/Background/Background.vala"
	gala_background_set_is_loaded (self, TRUE);
#line 100 "../src/Background/Background.vala"
	g_idle_add_full (G_PRIORITY_DEFAULT_IDLE, ___lambda36__gsource_func, g_object_ref (self), g_object_unref);
#line 565 "Background.c"
}

static ClutterColor*
_vala_clutter_color_from_string (const gchar* str)
{
	ClutterColor* color = NULL;
	ClutterColor* _tmp0_;
	ClutterColor* result;
#line 7865 "mutter-clutter-14.vapi"
	g_return_val_if_fail (str != NULL, NULL);
#line 7866 "mutter-clutter-14.vapi"
	_tmp0_ = clutter_color_alloc ();
#line 7866 "mutter-clutter-14.vapi"
	color = _tmp0_;
#line 7867 "mutter-clutter-14.vapi"
	clutter_color_from_string (color, str);
#line 7868 "mutter-clutter-14.vapi"
	result = color;
#line 7868 "mutter-clutter-14.vapi"
	return result;
#line 586 "Background.c"
}

static void
_vala_ClutterColor_free (ClutterColor* self)
{
#line 115 "../src/Background/Background.vala"
	g_boxed_free (clutter_color_get_type (), self);
#line 594 "Background.c"
}

static void
gala_background_load_pattern (GalaBackground* self)
{
	gchar* color_string = NULL;
	GSettings* settings = NULL;
	GalaBackgroundSource* _tmp0_;
	GSettings* _tmp1_;
	GSettings* _tmp2_;
	GSettings* _tmp3_;
	GSettings* _tmp4_;
	gchar* _tmp5_;
	ClutterColor* color = NULL;
	const gchar* _tmp6_;
	ClutterColor* _tmp7_;
	gint shading_type = 0;
	GSettings* _tmp8_;
#line 106 "../src/Background/Background.vala"
	g_return_if_fail (self != NULL);
#line 108 "../src/Background/Background.vala"
	_tmp0_ = self->priv->_background_source;
#line 108 "../src/Background/Background.vala"
	_tmp1_ = gala_background_source_get_gnome_background_settings (_tmp0_);
#line 108 "../src/Background/Background.vala"
	_tmp2_ = _tmp1_;
#line 108 "../src/Background/Background.vala"
	_tmp3_ = _g_object_ref0 (_tmp2_);
#line 108 "../src/Background/Background.vala"
	settings = _tmp3_;
#line 110 "../src/Background/Background.vala"
	_tmp4_ = settings;
#line 110 "../src/Background/Background.vala"
	_tmp5_ = g_settings_get_string (_tmp4_, "primary-color");
#line 110 "../src/Background/Background.vala"
	_g_free0 (color_string);
#line 110 "../src/Background/Background.vala"
	color_string = _tmp5_;
#line 111 "../src/Background/Background.vala"
	_tmp6_ = color_string;
#line 111 "../src/Background/Background.vala"
	_tmp7_ = _vala_clutter_color_from_string (_tmp6_);
#line 111 "../src/Background/Background.vala"
	color = _tmp7_;
#line 113 "../src/Background/Background.vala"
	_tmp8_ = settings;
#line 113 "../src/Background/Background.vala"
	shading_type = g_settings_get_enum (_tmp8_, "color-shading-type");
#line 115 "../src/Background/Background.vala"
	if (shading_type == ((gint) G_DESKTOP_BACKGROUND_SHADING_SOLID)) {
#line 645 "Background.c"
		MetaBackground* _tmp9_;
		ClutterColor* _tmp10_;
		ClutterColor _tmp11_;
#line 116 "../src/Background/Background.vala"
		_tmp9_ = self->priv->_background;
#line 116 "../src/Background/Background.vala"
		_tmp10_ = color;
#line 116 "../src/Background/Background.vala"
		_tmp11_ = *_tmp10_;
#line 116 "../src/Background/Background.vala"
		meta_background_set_color (_tmp9_, &_tmp11_);
#line 657 "Background.c"
	} else {
		GSettings* _tmp12_;
		gchar* _tmp13_;
		ClutterColor* second_color = NULL;
		const gchar* _tmp14_;
		ClutterColor* _tmp15_;
		MetaBackground* _tmp16_;
		ClutterColor* _tmp17_;
		ClutterColor* _tmp18_;
		ClutterColor _tmp19_;
		ClutterColor _tmp20_;
#line 118 "../src/Background/Background.vala"
		_tmp12_ = settings;
#line 118 "../src/Background/Background.vala"
		_tmp13_ = g_settings_get_string (_tmp12_, "secondary-color");
#line 118 "../src/Background/Background.vala"
		_g_free0 (color_string);
#line 118 "../src/Background/Background.vala"
		color_string = _tmp13_;
#line 119 "../src/Background/Background.vala"
		_tmp14_ = color_string;
#line 119 "../src/Background/Background.vala"
		_tmp15_ = _vala_clutter_color_from_string (_tmp14_);
#line 119 "../src/Background/Background.vala"
		second_color = _tmp15_;
#line 120 "../src/Background/Background.vala"
		_tmp16_ = self->priv->_background;
#line 120 "../src/Background/Background.vala"
		_tmp17_ = color;
#line 120 "../src/Background/Background.vala"
		_tmp18_ = second_color;
#line 120 "../src/Background/Background.vala"
		_tmp19_ = *_tmp17_;
#line 120 "../src/Background/Background.vala"
		_tmp20_ = *_tmp18_;
#line 120 "../src/Background/Background.vala"
		meta_background_set_gradient (_tmp16_, (GDesktopBackgroundShading) shading_type, &_tmp19_, &_tmp20_);
#line 115 "../src/Background/Background.vala"
		__vala_ClutterColor_free0 (second_color);
#line 697 "Background.c"
	}
#line 106 "../src/Background/Background.vala"
	__vala_ClutterColor_free0 (color);
#line 106 "../src/Background/Background.vala"
	_g_object_unref0 (settings);
#line 106 "../src/Background/Background.vala"
	_g_free0 (color_string);
#line 705 "Background.c"
}

static Block38Data*
block38_data_ref (Block38Data* _data38_)
{
#line 124 "../src/Background/Background.vala"
	g_atomic_int_inc (&_data38_->_ref_count_);
#line 124 "../src/Background/Background.vala"
	return _data38_;
#line 715 "Background.c"
}

static void
block38_data_unref (void * _userdata_)
{
	Block38Data* _data38_;
	_data38_ = (Block38Data*) _userdata_;
#line 124 "../src/Background/Background.vala"
	if (g_atomic_int_dec_and_test (&_data38_->_ref_count_)) {
#line 725 "Background.c"
		GalaBackground* self;
#line 124 "../src/Background/Background.vala"
		self = _data38_->self;
#line 124 "../src/Background/Background.vala"
		_g_free0 (_data38_->filename);
#line 124 "../src/Background/Background.vala"
		_g_object_unref0 (self);
#line 124 "../src/Background/Background.vala"
		g_slice_free (Block38Data, _data38_);
#line 735 "Background.c"
	}
}

static void
__lambda35_ (Block38Data* _data38_,
             const gchar* changed_file)
{
	GalaBackground* self;
#line 132 "../src/Background/Background.vala"
	self = _data38_->self;
#line 132 "../src/Background/Background.vala"
	g_return_if_fail (changed_file != NULL);
#line 133 "../src/Background/Background.vala"
	if (g_strcmp0 (changed_file, _data38_->filename) == 0) {
#line 750 "Background.c"
		MetaBackgroundImageCache* image_cache = NULL;
		MetaBackgroundImageCache* _tmp0_;
		MetaBackgroundImageCache* _tmp1_;
		MetaBackgroundImageCache* _tmp2_;
		GFile* _tmp3_;
		GFile* _tmp4_;
#line 134 "../src/Background/Background.vala"
		_tmp0_ = meta_background_image_cache_get_default ();
#line 134 "../src/Background/Background.vala"
		_tmp1_ = _g_object_ref0 (_tmp0_);
#line 134 "../src/Background/Background.vala"
		image_cache = _tmp1_;
#line 135 "../src/Background/Background.vala"
		_tmp2_ = image_cache;
#line 135 "../src/Background/Background.vala"
		_tmp3_ = g_file_new_for_path (changed_file);
#line 135 "../src/Background/Background.vala"
		_tmp4_ = _tmp3_;
#line 135 "../src/Background/Background.vala"
		meta_background_image_cache_purge (_tmp2_, _tmp4_);
#line 135 "../src/Background/Background.vala"
		_g_object_unref0 (_tmp4_);
#line 136 "../src/Background/Background.vala"
		g_signal_emit (self, gala_background_signals[GALA_BACKGROUND_CHANGED_SIGNAL], 0);
#line 133 "../src/Background/Background.vala"
		_g_object_unref0 (image_cache);
#line 777 "Background.c"
	}
}

static void
___lambda35__gala_background_cache_file_changed (GalaBackgroundCache* _sender,
                                                 const gchar* filename,
                                                 gpointer self)
{
#line 132 "../src/Background/Background.vala"
	__lambda35_ (self, filename);
#line 788 "Background.c"
}

static void
gala_background_watch_file (GalaBackground* self,
                            const gchar* filename)
{
	Block38Data* _data38_;
	gchar* _tmp0_;
	GeeHashMap* _tmp1_;
	GalaBackgroundCache* cache = NULL;
	GalaBackgroundCache* _tmp2_;
	GalaBackgroundCache* _tmp3_;
	GalaBackgroundCache* _tmp4_;
	GeeHashMap* _tmp5_;
	GalaBackgroundCache* _tmp6_;
	gulong _tmp7_;
#line 124 "../src/Background/Background.vala"
	g_return_if_fail (self != NULL);
#line 124 "../src/Background/Background.vala"
	g_return_if_fail (filename != NULL);
#line 124 "../src/Background/Background.vala"
	_data38_ = g_slice_new0 (Block38Data);
#line 124 "../src/Background/Background.vala"
	_data38_->_ref_count_ = 1;
#line 124 "../src/Background/Background.vala"
	_data38_->self = g_object_ref (self);
#line 124 "../src/Background/Background.vala"
	_tmp0_ = g_strdup (filename);
#line 124 "../src/Background/Background.vala"
	_g_free0 (_data38_->filename);
#line 124 "../src/Background/Background.vala"
	_data38_->filename = _tmp0_;
#line 125 "../src/Background/Background.vala"
	_tmp1_ = self->priv->file_watches;
#line 125 "../src/Background/Background.vala"
	if (gee_abstract_map_has_key ((GeeAbstractMap*) _tmp1_, _data38_->filename)) {
#line 126 "../src/Background/Background.vala"
		block38_data_unref (_data38_);
#line 126 "../src/Background/Background.vala"
		_data38_ = NULL;
#line 126 "../src/Background/Background.vala"
		return;
#line 831 "Background.c"
	}
#line 128 "../src/Background/Background.vala"
	_tmp2_ = gala_background_cache_get_default ();
#line 128 "../src/Background/Background.vala"
	_tmp3_ = _g_object_ref0 (_tmp2_);
#line 128 "../src/Background/Background.vala"
	cache = _tmp3_;
#line 130 "../src/Background/Background.vala"
	_tmp4_ = cache;
#line 130 "../src/Background/Background.vala"
	gala_background_cache_monitor_file (_tmp4_, _data38_->filename);
#line 132 "../src/Background/Background.vala"
	_tmp5_ = self->priv->file_watches;
#line 132 "../src/Background/Background.vala"
	_tmp6_ = cache;
#line 132 "../src/Background/Background.vala"
	_tmp7_ = g_signal_connect_data (_tmp6_, "file-changed", (GCallback) ___lambda35__gala_background_cache_file_changed, block38_data_ref (_data38_), (GClosureNotify) block38_data_unref, 0);
#line 132 "../src/Background/Background.vala"
	gee_abstract_map_set ((GeeAbstractMap*) _tmp5_, _data38_->filename, (gpointer) ((guintptr) _tmp7_));
#line 124 "../src/Background/Background.vala"
	_g_object_unref0 (cache);
#line 124 "../src/Background/Background.vala"
	block38_data_unref (_data38_);
#line 124 "../src/Background/Background.vala"
	_data38_ = NULL;
#line 857 "Background.c"
}

static void
gala_background_remove_animation_timeout (GalaBackground* self)
{
#line 141 "../src/Background/Background.vala"
	g_return_if_fail (self != NULL);
#line 142 "../src/Background/Background.vala"
	if (self->priv->update_animation_timeout_id != ((guint) 0)) {
#line 143 "../src/Background/Background.vala"
		g_source_remove (self->priv->update_animation_timeout_id);
#line 144 "../src/Background/Background.vala"
		self->priv->update_animation_timeout_id = (guint) 0;
#line 871 "Background.c"
	}
}

static void
gala_background_finish_animation (GalaBackground* self,
                                  gchar** files,
                                  gint files_length1)
{
#line 148 "../src/Background/Background.vala"
	g_return_if_fail (self != NULL);
#line 149 "../src/Background/Background.vala"
	gala_background_set_loaded (self);
#line 151 "../src/Background/Background.vala"
	if (files_length1 > 1) {
#line 886 "Background.c"
		MetaBackground* _tmp0_;
		const gchar* _tmp1_;
		GFile* _tmp2_;
		GFile* _tmp3_;
		const gchar* _tmp4_;
		GFile* _tmp5_;
		GFile* _tmp6_;
		GalaAnimation* _tmp7_;
		gdouble _tmp8_;
		gdouble _tmp9_;
		GDesktopBackgroundStyle _tmp10_;
#line 152 "../src/Background/Background.vala"
		_tmp0_ = self->priv->_background;
#line 152 "../src/Background/Background.vala"
		_tmp1_ = files[0];
#line 152 "../src/Background/Background.vala"
		_tmp2_ = g_file_new_for_path (_tmp1_);
#line 152 "../src/Background/Background.vala"
		_tmp3_ = _tmp2_;
#line 152 "../src/Background/Background.vala"
		_tmp4_ = files[1];
#line 152 "../src/Background/Background.vala"
		_tmp5_ = g_file_new_for_path (_tmp4_);
#line 152 "../src/Background/Background.vala"
		_tmp6_ = _tmp5_;
#line 152 "../src/Background/Background.vala"
		_tmp7_ = self->priv->animation;
#line 152 "../src/Background/Background.vala"
		_tmp8_ = gala_animation_get_transition_progress (_tmp7_);
#line 152 "../src/Background/Background.vala"
		_tmp9_ = _tmp8_;
#line 152 "../src/Background/Background.vala"
		_tmp10_ = self->priv->_style;
#line 152 "../src/Background/Background.vala"
		meta_background_set_blend (_tmp0_, _tmp3_, _tmp6_, _tmp9_, _tmp10_);
#line 152 "../src/Background/Background.vala"
		_g_object_unref0 (_tmp6_);
#line 152 "../src/Background/Background.vala"
		_g_object_unref0 (_tmp3_);
#line 926 "Background.c"
	} else {
#line 153 "../src/Background/Background.vala"
		if (files_length1 > 0) {
#line 930 "Background.c"
			MetaBackground* _tmp11_;
			const gchar* _tmp12_;
			GFile* _tmp13_;
			GFile* _tmp14_;
			GDesktopBackgroundStyle _tmp15_;
#line 154 "../src/Background/Background.vala"
			_tmp11_ = self->priv->_background;
#line 154 "../src/Background/Background.vala"
			_tmp12_ = files[0];
#line 154 "../src/Background/Background.vala"
			_tmp13_ = g_file_new_for_path (_tmp12_);
#line 154 "../src/Background/Background.vala"
			_tmp14_ = _tmp13_;
#line 154 "../src/Background/Background.vala"
			_tmp15_ = self->priv->_style;
#line 154 "../src/Background/Background.vala"
			meta_background_set_file (_tmp11_, _tmp14_, _tmp15_);
#line 154 "../src/Background/Background.vala"
			_g_object_unref0 (_tmp14_);
#line 950 "Background.c"
		} else {
			MetaBackground* _tmp16_;
			GDesktopBackgroundStyle _tmp17_;
#line 156 "../src/Background/Background.vala"
			_tmp16_ = self->priv->_background;
#line 156 "../src/Background/Background.vala"
			_tmp17_ = self->priv->_style;
#line 156 "../src/Background/Background.vala"
			meta_background_set_file (_tmp16_, NULL, _tmp17_);
#line 960 "Background.c"
		}
	}
#line 158 "../src/Background/Background.vala"
	gala_background_queue_update_animation (self);
#line 965 "Background.c"
}

static Block39Data*
block39_data_ref (Block39Data* _data39_)
{
#line 161 "../src/Background/Background.vala"
	g_atomic_int_inc (&_data39_->_ref_count_);
#line 161 "../src/Background/Background.vala"
	return _data39_;
#line 975 "Background.c"
}

static void
block39_data_unref (void * _userdata_)
{
	Block39Data* _data39_;
	_data39_ = (Block39Data*) _userdata_;
#line 161 "../src/Background/Background.vala"
	if (g_atomic_int_dec_and_test (&_data39_->_ref_count_)) {
#line 985 "Background.c"
		GalaBackground* self;
#line 161 "../src/Background/Background.vala"
		self = _data39_->self;
#line 161 "../src/Background/Background.vala"
		_data39_->files = (_vala_array_free (_data39_->files, _data39_->files_length1, (GDestroyNotify) g_free), NULL);
#line 161 "../src/Background/Background.vala"
		_g_object_unref0 (self);
#line 161 "../src/Background/Background.vala"
		g_slice_free (Block39Data, _data39_);
#line 995 "Background.c"
	}
}

static gchar**
_vala_array_dup3 (gchar** self,
                  gssize length)
{
#line 165 "../src/Background/Background.vala"
	if (length >= 0) {
#line 1005 "Background.c"
		gchar** result;
		gssize i;
#line 165 "../src/Background/Background.vala"
		result = g_new0 (gchar*, length + 1);
#line 165 "../src/Background/Background.vala"
		for (i = 0; i < length; i++) {
#line 1012 "Background.c"
			gchar* _tmp0_;
#line 165 "../src/Background/Background.vala"
			_tmp0_ = g_strdup (self[i]);
#line 165 "../src/Background/Background.vala"
			result[i] = _tmp0_;
#line 1018 "Background.c"
		}
#line 165 "../src/Background/Background.vala"
		return result;
#line 1022 "Background.c"
	}
#line 165 "../src/Background/Background.vala"
	return NULL;
#line 1026 "Background.c"
}

static Block40Data*
block40_data_ref (Block40Data* _data40_)
{
#line 169 "../src/Background/Background.vala"
	g_atomic_int_inc (&_data40_->_ref_count_);
#line 169 "../src/Background/Background.vala"
	return _data40_;
#line 1036 "Background.c"
}

static void
block40_data_unref (void * _userdata_)
{
	Block40Data* _data40_;
	_data40_ = (Block40Data*) _userdata_;
#line 169 "../src/Background/Background.vala"
	if (g_atomic_int_dec_and_test (&_data40_->_ref_count_)) {
#line 1046 "Background.c"
		GalaBackground* self;
#line 169 "../src/Background/Background.vala"
		self = _data40_->_data39_->self;
#line 169 "../src/Background/Background.vala"
		_g_object_unref0 (_data40_->image);
#line 169 "../src/Background/Background.vala"
		block39_data_unref (_data40_->_data39_);
#line 169 "../src/Background/Background.vala"
		_data40_->_data39_ = NULL;
#line 169 "../src/Background/Background.vala"
		g_slice_free (Block40Data, _data40_);
#line 1058 "Background.c"
	}
}

static Block41Data*
block41_data_ref (Block41Data* _data41_)
{
#line 174 "../src/Background/Background.vala"
	g_atomic_int_inc (&_data41_->_ref_count_);
#line 174 "../src/Background/Background.vala"
	return _data41_;
#line 1069 "Background.c"
}

static void
block41_data_unref (void * _userdata_)
{
	Block41Data* _data41_;
	_data41_ = (Block41Data*) _userdata_;
#line 174 "../src/Background/Background.vala"
	if (g_atomic_int_dec_and_test (&_data41_->_ref_count_)) {
#line 1079 "Background.c"
		GalaBackground* self;
#line 174 "../src/Background/Background.vala"
		self = _data41_->_data40_->_data39_->self;
#line 174 "../src/Background/Background.vala"
		block40_data_unref (_data41_->_data40_);
#line 174 "../src/Background/Background.vala"
		_data41_->_data40_ = NULL;
#line 174 "../src/Background/Background.vala"
		g_slice_free (Block41Data, _data41_);
#line 1089 "Background.c"
	}
}

static void
______lambda38_ (Block41Data* _data41_)
{
	Block40Data* _data40_;
	Block39Data* _data39_;
	GalaBackground* self;
	MetaBackgroundImage* _tmp0_;
	gint _tmp1_;
#line 181 "../src/Background/Background.vala"
	_data40_ = _data41_->_data40_;
#line 181 "../src/Background/Background.vala"
	_data39_ = _data40_->_data39_;
#line 181 "../src/Background/Background.vala"
	self = _data39_->self;
#line 182 "../src/Background/Background.vala"
	_tmp0_ = _data40_->image;
#line 182 "../src/Background/Background.vala"
	g_signal_handler_disconnect ((GObject*) _tmp0_, _data41_->handler);
#line 183 "../src/Background/Background.vala"
	_data39_->num_pending_images = _data39_->num_pending_images - 1;
#line 183 "../src/Background/Background.vala"
	_tmp1_ = _data39_->num_pending_images;
#line 183 "../src/Background/Background.vala"
	if (_tmp1_ == 0) {
#line 1117 "Background.c"
		gchar** _tmp2_;
		gint _tmp2__length1;
#line 184 "../src/Background/Background.vala"
		_tmp2_ = _data39_->files;
#line 184 "../src/Background/Background.vala"
		_tmp2__length1 = _data39_->files_length1;
#line 184 "../src/Background/Background.vala"
		gala_background_finish_animation (self, _tmp2_, (gint) _tmp2__length1);
#line 1126 "Background.c"
	}
}

static void
_______lambda38__meta_background_image_loaded (MetaBackgroundImage* _sender,
                                               gpointer self)
{
#line 181 "../src/Background/Background.vala"
	______lambda38_ (self);
#line 1136 "Background.c"
}

static void
gala_background_update_animation (GalaBackground* self)
{
	Block39Data* _data39_;
	GalaAnimation* _tmp0_;
	MetaDisplay* _tmp1_;
	gint _tmp2_;
	MtkRectangle _tmp3_ = {0};
	GalaAnimation* _tmp4_;
	gchar** _tmp5_;
	gint _tmp5__length1;
	gint _tmp6_ = 0;
	gchar** _tmp7_;
	gint _tmp7__length1;
	gchar** _tmp8_;
	gint _tmp8__length1;
	MetaBackgroundImageCache* cache = NULL;
	MetaBackgroundImageCache* _tmp9_;
	MetaBackgroundImageCache* _tmp10_;
	gchar** _tmp11_;
	gint _tmp11__length1;
#line 161 "../src/Background/Background.vala"
	g_return_if_fail (self != NULL);
#line 161 "../src/Background/Background.vala"
	_data39_ = g_slice_new0 (Block39Data);
#line 161 "../src/Background/Background.vala"
	_data39_->_ref_count_ = 1;
#line 161 "../src/Background/Background.vala"
	_data39_->self = g_object_ref (self);
#line 162 "../src/Background/Background.vala"
	self->priv->update_animation_timeout_id = (guint) 0;
#line 164 "../src/Background/Background.vala"
	_tmp0_ = self->priv->animation;
#line 164 "../src/Background/Background.vala"
	_tmp1_ = self->priv->_display;
#line 164 "../src/Background/Background.vala"
	_tmp2_ = self->priv->_monitor_index;
#line 164 "../src/Background/Background.vala"
	meta_display_get_monitor_geometry (_tmp1_, _tmp2_, &_tmp3_);
#line 164 "../src/Background/Background.vala"
	gala_animation_update (_tmp0_, &_tmp3_);
#line 165 "../src/Background/Background.vala"
	_tmp4_ = self->priv->animation;
#line 165 "../src/Background/Background.vala"
	_tmp5_ = gala_animation_get_key_frame_files (_tmp4_, &_tmp6_);
#line 165 "../src/Background/Background.vala"
	_tmp5__length1 = _tmp6_;
#line 165 "../src/Background/Background.vala"
	_tmp7_ = _tmp5_;
#line 165 "../src/Background/Background.vala"
	_tmp7__length1 = _tmp5__length1;
#line 165 "../src/Background/Background.vala"
	_tmp8_ = (_tmp7_ != NULL) ? _vala_array_dup3 (_tmp7_, _tmp7__length1) : _tmp7_;
#line 165 "../src/Background/Background.vala"
	_tmp8__length1 = _tmp7__length1;
#line 165 "../src/Background/Background.vala"
	_data39_->files = _tmp8_;
#line 165 "../src/Background/Background.vala"
	_data39_->files_length1 = _tmp8__length1;
#line 165 "../src/Background/Background.vala"
	_data39_->_files_size_ = _data39_->files_length1;
#line 167 "../src/Background/Background.vala"
	_tmp9_ = meta_background_image_cache_get_default ();
#line 167 "../src/Background/Background.vala"
	_tmp10_ = _g_object_ref0 (_tmp9_);
#line 167 "../src/Background/Background.vala"
	cache = _tmp10_;
#line 168 "../src/Background/Background.vala"
	_tmp11_ = _data39_->files;
#line 168 "../src/Background/Background.vala"
	_tmp11__length1 = _data39_->files_length1;
#line 168 "../src/Background/Background.vala"
	_data39_->num_pending_images = _tmp11__length1;
#line 1212 "Background.c"
	{
		gint i = 0;
#line 169 "../src/Background/Background.vala"
		i = 0;
#line 1217 "Background.c"
		{
			gboolean _tmp12_ = FALSE;
#line 169 "../src/Background/Background.vala"
			_tmp12_ = TRUE;
#line 169 "../src/Background/Background.vala"
			while (TRUE) {
#line 1224 "Background.c"
				Block40Data* _data40_;
				gchar** _tmp14_;
				gint _tmp14__length1;
				gchar** _tmp15_;
				gint _tmp15__length1;
				const gchar* _tmp16_;
				MetaBackgroundImageCache* _tmp17_;
				gchar** _tmp18_;
				gint _tmp18__length1;
				const gchar* _tmp19_;
				GFile* _tmp20_;
				GFile* _tmp21_;
				MetaBackgroundImage* _tmp22_;
				MetaBackgroundImage* _tmp23_;
				MetaBackgroundImage* _tmp24_;
#line 169 "../src/Background/Background.vala"
				_data40_ = g_slice_new0 (Block40Data);
#line 169 "../src/Background/Background.vala"
				_data40_->_ref_count_ = 1;
#line 169 "../src/Background/Background.vala"
				_data40_->_data39_ = block39_data_ref (_data39_);
#line 169 "../src/Background/Background.vala"
				if (!_tmp12_) {
#line 1248 "Background.c"
					gint _tmp13_;
#line 169 "../src/Background/Background.vala"
					_tmp13_ = i;
#line 169 "../src/Background/Background.vala"
					i = _tmp13_ + 1;
#line 1254 "Background.c"
				}
#line 169 "../src/Background/Background.vala"
				_tmp12_ = FALSE;
#line 169 "../src/Background/Background.vala"
				_tmp14_ = _data39_->files;
#line 169 "../src/Background/Background.vala"
				_tmp14__length1 = _data39_->files_length1;
#line 169 "../src/Background/Background.vala"
				if (!(i < _tmp14__length1)) {
#line 169 "../src/Background/Background.vala"
					block40_data_unref (_data40_);
#line 169 "../src/Background/Background.vala"
					_data40_ = NULL;
#line 169 "../src/Background/Background.vala"
					break;
#line 1270 "Background.c"
				}
#line 170 "../src/Background/Background.vala"
				_tmp15_ = _data39_->files;
#line 170 "../src/Background/Background.vala"
				_tmp15__length1 = _data39_->files_length1;
#line 170 "../src/Background/Background.vala"
				_tmp16_ = _tmp15_[i];
#line 170 "../src/Background/Background.vala"
				gala_background_watch_file (self, _tmp16_);
#line 172 "../src/Background/Background.vala"
				_tmp17_ = cache;
#line 172 "../src/Background/Background.vala"
				_tmp18_ = _data39_->files;
#line 172 "../src/Background/Background.vala"
				_tmp18__length1 = _data39_->files_length1;
#line 172 "../src/Background/Background.vala"
				_tmp19_ = _tmp18_[i];
#line 172 "../src/Background/Background.vala"
				_tmp20_ = g_file_new_for_path (_tmp19_);
#line 172 "../src/Background/Background.vala"
				_tmp21_ = _tmp20_;
#line 172 "../src/Background/Background.vala"
				_tmp22_ = meta_background_image_cache_load (_tmp17_, _tmp21_);
#line 172 "../src/Background/Background.vala"
				_tmp23_ = _tmp22_;
#line 172 "../src/Background/Background.vala"
				_g_object_unref0 (_tmp21_);
#line 172 "../src/Background/Background.vala"
				_data40_->image = _tmp23_;
#line 174 "../src/Background/Background.vala"
				_tmp24_ = _data40_->image;
#line 174 "../src/Background/Background.vala"
				if (meta_background_image_is_loaded (_tmp24_)) {
#line 1304 "Background.c"
					gint _tmp25_;
#line 175 "../src/Background/Background.vala"
					_tmp25_ = _data39_->num_pending_images;
#line 175 "../src/Background/Background.vala"
					_data39_->num_pending_images = _tmp25_ - 1;
#line 176 "../src/Background/Background.vala"
					if (_data39_->num_pending_images == 0) {
#line 1312 "Background.c"
						gchar** _tmp26_;
						gint _tmp26__length1;
#line 177 "../src/Background/Background.vala"
						_tmp26_ = _data39_->files;
#line 177 "../src/Background/Background.vala"
						_tmp26__length1 = _data39_->files_length1;
#line 177 "../src/Background/Background.vala"
						gala_background_finish_animation (self, _tmp26_, (gint) _tmp26__length1);
#line 1321 "Background.c"
					}
				} else {
					Block41Data* _data41_;
					MetaBackgroundImage* _tmp27_;
					gulong _tmp28_;
#line 174 "../src/Background/Background.vala"
					_data41_ = g_slice_new0 (Block41Data);
#line 174 "../src/Background/Background.vala"
					_data41_->_ref_count_ = 1;
#line 174 "../src/Background/Background.vala"
					_data41_->_data40_ = block40_data_ref (_data40_);
#line 180 "../src/Background/Background.vala"
					_data41_->handler = (gulong) 0;
#line 181 "../src/Background/Background.vala"
					_tmp27_ = _data40_->image;
#line 181 "../src/Background/Background.vala"
					_tmp28_ = g_signal_connect_data (_tmp27_, "loaded", (GCallback) _______lambda38__meta_background_image_loaded, block41_data_ref (_data41_), (GClosureNotify) block41_data_unref, 0);
#line 181 "../src/Background/Background.vala"
					_data41_->handler = _tmp28_;
#line 174 "../src/Background/Background.vala"
					block41_data_unref (_data41_);
#line 174 "../src/Background/Background.vala"
					_data41_ = NULL;
#line 1345 "Background.c"
				}
#line 169 "../src/Background/Background.vala"
				block40_data_unref (_data40_);
#line 169 "../src/Background/Background.vala"
				_data40_ = NULL;
#line 1351 "Background.c"
			}
		}
	}
#line 161 "../src/Background/Background.vala"
	_g_object_unref0 (cache);
#line 161 "../src/Background/Background.vala"
	block39_data_unref (_data39_);
#line 161 "../src/Background/Background.vala"
	_data39_ = NULL;
#line 1361 "Background.c"
}

static gboolean
__lambda37_ (GalaBackground* self)
{
	gboolean result;
#line 210 "../src/Background/Background.vala"
	self->priv->update_animation_timeout_id = (guint) 0;
#line 211 "../src/Background/Background.vala"
	gala_background_update_animation (self);
#line 212 "../src/Background/Background.vala"
	result = G_SOURCE_REMOVE;
#line 212 "../src/Background/Background.vala"
	return result;
#line 1376 "Background.c"
}

static gboolean
___lambda37__gsource_func (gpointer self)
{
	gboolean result;
	result = __lambda37_ ((GalaBackground*) self);
#line 209 "../src/Background/Background.vala"
	return result;
#line 1386 "Background.c"
}

static void
gala_background_queue_update_animation (GalaBackground* self)
{
	gboolean _tmp0_ = FALSE;
	GCancellable* _tmp1_;
	GalaAnimation* _tmp3_;
	gdouble _tmp4_;
	gdouble _tmp5_;
	gdouble n_steps = 0.0;
	gdouble time_per_step = 0.0;
	GalaAnimation* _tmp6_;
	gdouble _tmp7_;
	gdouble _tmp8_;
	guint32 interval = 0U;
#line 191 "../src/Background/Background.vala"
	g_return_if_fail (self != NULL);
#line 192 "../src/Background/Background.vala"
	if (self->priv->update_animation_timeout_id != ((guint) 0)) {
#line 193 "../src/Background/Background.vala"
		return;
#line 1409 "Background.c"
	}
#line 195 "../src/Background/Background.vala"
	_tmp1_ = self->priv->cancellable;
#line 195 "../src/Background/Background.vala"
	if (_tmp1_ == NULL) {
#line 195 "../src/Background/Background.vala"
		_tmp0_ = TRUE;
#line 1417 "Background.c"
	} else {
		GCancellable* _tmp2_;
#line 195 "../src/Background/Background.vala"
		_tmp2_ = self->priv->cancellable;
#line 195 "../src/Background/Background.vala"
		_tmp0_ = g_cancellable_is_cancelled (_tmp2_);
#line 1424 "Background.c"
	}
#line 195 "../src/Background/Background.vala"
	if (_tmp0_) {
#line 196 "../src/Background/Background.vala"
		return;
#line 1430 "Background.c"
	}
#line 198 "../src/Background/Background.vala"
	_tmp3_ = self->priv->animation;
#line 198 "../src/Background/Background.vala"
	_tmp4_ = gala_animation_get_transition_duration (_tmp3_);
#line 198 "../src/Background/Background.vala"
	_tmp5_ = _tmp4_;
#line 198 "../src/Background/Background.vala"
	if (_tmp5_ == ((gdouble) 0)) {
#line 199 "../src/Background/Background.vala"
		return;
#line 1442 "Background.c"
	}
#line 201 "../src/Background/Background.vala"
	n_steps = 255.0 / GALA_BACKGROUND_ANIMATION_OPACITY_STEP_INCREMENT;
#line 202 "../src/Background/Background.vala"
	_tmp6_ = self->priv->animation;
#line 202 "../src/Background/Background.vala"
	_tmp7_ = gala_animation_get_transition_duration (_tmp6_);
#line 202 "../src/Background/Background.vala"
	_tmp8_ = _tmp7_;
#line 202 "../src/Background/Background.vala"
	time_per_step = (_tmp8_ * 1000) / n_steps;
#line 204 "../src/Background/Background.vala"
	interval = (guint32) fmax (GALA_BACKGROUND_ANIMATION_MIN_WAKEUP_INTERVAL * 1000, time_per_step);
#line 206 "../src/Background/Background.vala"
	if (interval > G_MAXUINT32) {
#line 207 "../src/Background/Background.vala"
		return;
#line 1460 "Background.c"
	}
#line 209 "../src/Background/Background.vala"
	self->priv->update_animation_timeout_id = g_timeout_add_full (G_PRIORITY_DEFAULT, (guint) interval, ___lambda37__gsource_func, g_object_ref (self), g_object_unref);
#line 1464 "Background.c"
}

static void
gala_background_load_animation_data_free (gpointer _data)
{
	GalaBackgroundLoadAnimationData* _data_;
	_data_ = _data;
#line 19 "../src/Background/Background.vala"
	_g_free0 (_data_->filename);
#line 19 "../src/Background/Background.vala"
	_g_object_unref0 (_data_->self);
#line 19 "../src/Background/Background.vala"
	g_slice_free (GalaBackgroundLoadAnimationData, _data_);
#line 1478 "Background.c"
}

static void
gala_background_load_animation (GalaBackground* self,
                                const gchar* filename,
                                GAsyncReadyCallback _callback_,
                                gpointer _user_data_)
{
	GalaBackgroundLoadAnimationData* _data_;
	GalaBackground* _tmp0_;
	gchar* _tmp1_;
#line 19 "../src/Background/Background.vala"
	g_return_if_fail (self != NULL);
#line 19 "../src/Background/Background.vala"
	g_return_if_fail (filename != NULL);
#line 19 "../src/Background/Background.vala"
	_data_ = g_slice_new0 (GalaBackgroundLoadAnimationData);
#line 19 "../src/Background/Background.vala"
	_data_->_async_result = g_task_new (G_OBJECT (self), NULL, _callback_, _user_data_);
#line 19 "../src/Background/Background.vala"
	g_task_set_task_data (_data_->_async_result, _data_, gala_background_load_animation_data_free);
#line 19 "../src/Background/Background.vala"
	_tmp0_ = _g_object_ref0 (self);
#line 19 "../src/Background/Background.vala"
	_data_->self = _tmp0_;
#line 19 "../src/Background/Background.vala"
	_tmp1_ = g_strdup (filename);
#line 19 "../src/Background/Background.vala"
	_g_free0 (_data_->filename);
#line 19 "../src/Background/Background.vala"
	_data_->filename = _tmp1_;
#line 19 "../src/Background/Background.vala"
	gala_background_load_animation_co (_data_);
#line 1512 "Background.c"
}

static void
gala_background_load_animation_finish (GalaBackground* self,
                                       GAsyncResult* _res_)
{
	GalaBackgroundLoadAnimationData* _data_;
#line 19 "../src/Background/Background.vala"
	_data_ = g_task_propagate_pointer (G_TASK (_res_), NULL);
#line 1522 "Background.c"
}

static void
gala_background_load_animation_ready (GObject* source_object,
                                      GAsyncResult* _res_,
                                      gpointer _user_data_)
{
	GalaBackgroundLoadAnimationData* _data_;
#line 217 "../src/Background/Background.vala"
	_data_ = _user_data_;
#line 217 "../src/Background/Background.vala"
	_data_->_source_object_ = source_object;
#line 217 "../src/Background/Background.vala"
	_data_->_res_ = _res_;
#line 217 "../src/Background/Background.vala"
	gala_background_load_animation_co (_data_);
#line 1539 "Background.c"
}

static gboolean
gala_background_load_animation_co (GalaBackgroundLoadAnimationData* _data_)
{
#line 216 "../src/Background/Background.vala"
	switch (_data_->_state_) {
#line 216 "../src/Background/Background.vala"
		case 0:
#line 1549 "Background.c"
		goto _state_0;
#line 216 "../src/Background/Background.vala"
		case 1:
#line 1553 "Background.c"
		goto _state_1;
		default:
#line 216 "../src/Background/Background.vala"
		g_assert_not_reached ();
#line 1558 "Background.c"
	}
	_state_0:
#line 217 "../src/Background/Background.vala"
	_data_->_tmp0_ = gala_background_cache_get_default ();
#line 217 "../src/Background/Background.vala"
	_data_->_state_ = 1;
#line 217 "../src/Background/Background.vala"
	gala_background_cache_get_animation (_data_->_tmp0_, _data_->filename, gala_background_load_animation_ready, _data_);
#line 217 "../src/Background/Background.vala"
	return FALSE;
#line 1569 "Background.c"
	_state_1:
#line 217 "../src/Background/Background.vala"
	_data_->_tmp1_ = gala_background_cache_get_animation_finish (_data_->_tmp0_, _data_->_res_);
#line 217 "../src/Background/Background.vala"
	_g_object_unref0 (_data_->self->priv->animation);
#line 217 "../src/Background/Background.vala"
	_data_->self->priv->animation = _data_->_tmp1_;
#line 219 "../src/Background/Background.vala"
	_data_->_tmp3_ = _data_->self->priv->animation;
#line 219 "../src/Background/Background.vala"
	if (_data_->_tmp3_ == NULL) {
#line 219 "../src/Background/Background.vala"
		_data_->_tmp2_ = TRUE;
#line 1583 "Background.c"
	} else {
#line 219 "../src/Background/Background.vala"
		_data_->_tmp4_ = _data_->self->priv->cancellable;
#line 219 "../src/Background/Background.vala"
		_data_->_tmp2_ = g_cancellable_is_cancelled (_data_->_tmp4_);
#line 1589 "Background.c"
	}
#line 219 "../src/Background/Background.vala"
	if (_data_->_tmp2_) {
#line 220 "../src/Background/Background.vala"
		gala_background_set_loaded (_data_->self);
#line 221 "../src/Background/Background.vala"
		g_task_return_pointer (_data_->_async_result, _data_, NULL);
#line 221 "../src/Background/Background.vala"
		if (_data_->_state_ != 0) {
#line 221 "../src/Background/Background.vala"
			while (!g_task_get_completed (_data_->_async_result)) {
#line 221 "../src/Background/Background.vala"
				g_main_context_iteration (g_task_get_context (_data_->_async_result), TRUE);
#line 1603 "Background.c"
			}
		}
#line 221 "../src/Background/Background.vala"
		g_object_unref (_data_->_async_result);
#line 221 "../src/Background/Background.vala"
		return FALSE;
#line 1610 "Background.c"
	}
#line 224 "../src/Background/Background.vala"
	gala_background_update_animation (_data_->self);
#line 225 "../src/Background/Background.vala"
	gala_background_watch_file (_data_->self, _data_->filename);
#line 216 "../src/Background/Background.vala"
	g_task_return_pointer (_data_->_async_result, _data_, NULL);
#line 216 "../src/Background/Background.vala"
	if (_data_->_state_ != 0) {
#line 216 "../src/Background/Background.vala"
		while (!g_task_get_completed (_data_->_async_result)) {
#line 216 "../src/Background/Background.vala"
			g_main_context_iteration (g_task_get_context (_data_->_async_result), TRUE);
#line 1624 "Background.c"
		}
	}
#line 216 "../src/Background/Background.vala"
	g_object_unref (_data_->_async_result);
#line 216 "../src/Background/Background.vala"
	return FALSE;
#line 1631 "Background.c"
}

static Block42Data*
block42_data_ref (Block42Data* _data42_)
{
#line 228 "../src/Background/Background.vala"
	g_atomic_int_inc (&_data42_->_ref_count_);
#line 228 "../src/Background/Background.vala"
	return _data42_;
#line 1641 "Background.c"
}

static void
block42_data_unref (void * _userdata_)
{
	Block42Data* _data42_;
	_data42_ = (Block42Data*) _userdata_;
#line 228 "../src/Background/Background.vala"
	if (g_atomic_int_dec_and_test (&_data42_->_ref_count_)) {
#line 1651 "Background.c"
		GalaBackground* self;
#line 228 "../src/Background/Background.vala"
		self = _data42_->self;
#line 228 "../src/Background/Background.vala"
		_g_object_unref0 (_data42_->image);
#line 228 "../src/Background/Background.vala"
		_g_object_unref0 (self);
#line 228 "../src/Background/Background.vala"
		g_slice_free (Block42Data, _data42_);
#line 1661 "Background.c"
	}
}

static Block43Data*
block43_data_ref (Block43Data* _data43_)
{
#line 234 "../src/Background/Background.vala"
	g_atomic_int_inc (&_data43_->_ref_count_);
#line 234 "../src/Background/Background.vala"
	return _data43_;
#line 1672 "Background.c"
}

static void
block43_data_unref (void * _userdata_)
{
	Block43Data* _data43_;
	_data43_ = (Block43Data*) _userdata_;
#line 234 "../src/Background/Background.vala"
	if (g_atomic_int_dec_and_test (&_data43_->_ref_count_)) {
#line 1682 "Background.c"
		GalaBackground* self;
#line 234 "../src/Background/Background.vala"
		self = _data43_->_data42_->self;
#line 234 "../src/Background/Background.vala"
		block42_data_unref (_data43_->_data42_);
#line 234 "../src/Background/Background.vala"
		_data43_->_data42_ = NULL;
#line 234 "../src/Background/Background.vala"
		g_slice_free (Block43Data, _data43_);
#line 1692 "Background.c"
	}
}

static void
___lambda40_ (Block43Data* _data43_)
{
	Block42Data* _data42_;
	GalaBackground* self;
	MetaBackgroundImage* _tmp0_;
#line 238 "../src/Background/Background.vala"
	_data42_ = _data43_->_data42_;
#line 238 "../src/Background/Background.vala"
	self = _data42_->self;
#line 239 "../src/Background/Background.vala"
	gala_background_set_loaded (self);
#line 240 "../src/Background/Background.vala"
	_tmp0_ = _data42_->image;
#line 240 "../src/Background/Background.vala"
	g_signal_handler_disconnect ((GObject*) _tmp0_, _data43_->handler);
#line 1712 "Background.c"
}

static void
____lambda40__meta_background_image_loaded (MetaBackgroundImage* _sender,
                                            gpointer self)
{
#line 238 "../src/Background/Background.vala"
	___lambda40_ (self);
#line 1721 "Background.c"
}

static void
gala_background_load_image (GalaBackground* self,
                            const gchar* filename)
{
	Block42Data* _data42_;
	MetaBackground* _tmp0_;
	GFile* _tmp1_;
	GFile* _tmp2_;
	GDesktopBackgroundStyle _tmp3_;
	MetaBackgroundImageCache* cache = NULL;
	MetaBackgroundImageCache* _tmp4_;
	MetaBackgroundImageCache* _tmp5_;
	MetaBackgroundImageCache* _tmp6_;
	GFile* _tmp7_;
	GFile* _tmp8_;
	MetaBackgroundImage* _tmp9_;
	MetaBackgroundImage* _tmp10_;
	MetaBackgroundImage* _tmp11_;
#line 228 "../src/Background/Background.vala"
	g_return_if_fail (self != NULL);
#line 228 "../src/Background/Background.vala"
	g_return_if_fail (filename != NULL);
#line 228 "../src/Background/Background.vala"
	_data42_ = g_slice_new0 (Block42Data);
#line 228 "../src/Background/Background.vala"
	_data42_->_ref_count_ = 1;
#line 228 "../src/Background/Background.vala"
	_data42_->self = g_object_ref (self);
#line 229 "../src/Background/Background.vala"
	_tmp0_ = self->priv->_background;
#line 229 "../src/Background/Background.vala"
	_tmp1_ = g_file_new_for_path (filename);
#line 229 "../src/Background/Background.vala"
	_tmp2_ = _tmp1_;
#line 229 "../src/Background/Background.vala"
	_tmp3_ = self->priv->_style;
#line 229 "../src/Background/Background.vala"
	meta_background_set_file (_tmp0_, _tmp2_, _tmp3_);
#line 229 "../src/Background/Background.vala"
	_g_object_unref0 (_tmp2_);
#line 230 "../src/Background/Background.vala"
	gala_background_watch_file (self, filename);
#line 232 "../src/Background/Background.vala"
	_tmp4_ = meta_background_image_cache_get_default ();
#line 232 "../src/Background/Background.vala"
	_tmp5_ = _g_object_ref0 (_tmp4_);
#line 232 "../src/Background/Background.vala"
	cache = _tmp5_;
#line 233 "../src/Background/Background.vala"
	_tmp6_ = cache;
#line 233 "../src/Background/Background.vala"
	_tmp7_ = g_file_new_for_path (filename);
#line 233 "../src/Background/Background.vala"
	_tmp8_ = _tmp7_;
#line 233 "../src/Background/Background.vala"
	_tmp9_ = meta_background_image_cache_load (_tmp6_, _tmp8_);
#line 233 "../src/Background/Background.vala"
	_tmp10_ = _tmp9_;
#line 233 "../src/Background/Background.vala"
	_g_object_unref0 (_tmp8_);
#line 233 "../src/Background/Background.vala"
	_data42_->image = _tmp10_;
#line 234 "../src/Background/Background.vala"
	_tmp11_ = _data42_->image;
#line 234 "../src/Background/Background.vala"
	if (meta_background_image_is_loaded (_tmp11_)) {
#line 235 "../src/Background/Background.vala"
		gala_background_set_loaded (self);
#line 1792 "Background.c"
	} else {
		Block43Data* _data43_;
		MetaBackgroundImage* _tmp12_;
		gulong _tmp13_;
#line 234 "../src/Background/Background.vala"
		_data43_ = g_slice_new0 (Block43Data);
#line 234 "../src/Background/Background.vala"
		_data43_->_ref_count_ = 1;
#line 234 "../src/Background/Background.vala"
		_data43_->_data42_ = block42_data_ref (_data42_);
#line 237 "../src/Background/Background.vala"
		_data43_->handler = (gulong) 0;
#line 238 "../src/Background/Background.vala"
		_tmp12_ = _data42_->image;
#line 238 "../src/Background/Background.vala"
		_tmp13_ = g_signal_connect_data (_tmp12_, "loaded", (GCallback) ____lambda40__meta_background_image_loaded, block43_data_ref (_data43_), (GClosureNotify) block43_data_unref, 0);
#line 238 "../src/Background/Background.vala"
		_data43_->handler = _tmp13_;
#line 234 "../src/Background/Background.vala"
		block43_data_unref (_data43_);
#line 234 "../src/Background/Background.vala"
		_data43_ = NULL;
#line 1815 "Background.c"
	}
#line 228 "../src/Background/Background.vala"
	_g_object_unref0 (cache);
#line 228 "../src/Background/Background.vala"
	block42_data_unref (_data42_);
#line 228 "../src/Background/Background.vala"
	_data42_ = NULL;
#line 1823 "Background.c"
}

static void
gala_background_load_file (GalaBackground* self,
                           const gchar* filename)
{
#line 245 "../src/Background/Background.vala"
	g_return_if_fail (self != NULL);
#line 245 "../src/Background/Background.vala"
	g_return_if_fail (filename != NULL);
#line 246 "../src/Background/Background.vala"
	if (g_str_has_suffix (filename, ".xml")) {
#line 247 "../src/Background/Background.vala"
		gala_background_load_animation (self, filename, NULL, NULL);
#line 1838 "Background.c"
	} else {
#line 249 "../src/Background/Background.vala"
		gala_background_load_image (self, filename);
#line 1842 "Background.c"
	}
}

static void
gala_background_load (GalaBackground* self)
{
	const gchar* _tmp0_;
#line 252 "../src/Background/Background.vala"
	g_return_if_fail (self != NULL);
#line 253 "../src/Background/Background.vala"
	gala_background_load_pattern (self);
#line 255 "../src/Background/Background.vala"
	_tmp0_ = self->priv->_filename;
#line 255 "../src/Background/Background.vala"
	if (_tmp0_ == NULL) {
#line 256 "../src/Background/Background.vala"
		gala_background_set_loaded (self);
#line 1860 "Background.c"
	} else {
		const gchar* _tmp1_;
#line 258 "../src/Background/Background.vala"
		_tmp1_ = self->priv->_filename;
#line 258 "../src/Background/Background.vala"
		gala_background_load_file (self, _tmp1_);
#line 1867 "Background.c"
	}
}

static void
gala_background_settings_changed (GalaBackground* self)
{
#line 261 "../src/Background/Background.vala"
	g_return_if_fail (self != NULL);
#line 262 "../src/Background/Background.vala"
	g_signal_emit (self, gala_background_signals[GALA_BACKGROUND_CHANGED_SIGNAL], 0);
#line 1878 "Background.c"
}

MetaDisplay*
gala_background_get_display (GalaBackground* self)
{
	MetaDisplay* result;
	MetaDisplay* _tmp0_;
#line 26 "../src/Background/Background.vala"
	g_return_val_if_fail (self != NULL, NULL);
#line 26 "../src/Background/Background.vala"
	_tmp0_ = self->priv->_display;
#line 26 "../src/Background/Background.vala"
	result = _tmp0_;
#line 26 "../src/Background/Background.vala"
	return result;
#line 1894 "Background.c"
}

static void
gala_background_set_display (GalaBackground* self,
                             MetaDisplay* value)
{
	MetaDisplay* old_value;
#line 26 "../src/Background/Background.vala"
	g_return_if_fail (self != NULL);
#line 26 "../src/Background/Background.vala"
	old_value = gala_background_get_display (self);
#line 26 "../src/Background/Background.vala"
	if (old_value != value) {
#line 1908 "Background.c"
		MetaDisplay* _tmp0_;
#line 26 "../src/Background/Background.vala"
		_tmp0_ = _g_object_ref0 (value);
#line 26 "../src/Background/Background.vala"
		_g_object_unref0 (self->priv->_display);
#line 26 "../src/Background/Background.vala"
		self->priv->_display = _tmp0_;
#line 26 "../src/Background/Background.vala"
		g_object_notify_by_pspec ((GObject *) self, gala_background_properties[GALA_BACKGROUND_DISPLAY_PROPERTY]);
#line 1918 "Background.c"
	}
}

gint
gala_background_get_monitor_index (GalaBackground* self)
{
	gint result;
#line 27 "../src/Background/Background.vala"
	g_return_val_if_fail (self != NULL, 0);
#line 27 "../src/Background/Background.vala"
	result = self->priv->_monitor_index;
#line 27 "../src/Background/Background.vala"
	return result;
#line 1932 "Background.c"
}

static void
gala_background_set_monitor_index (GalaBackground* self,
                                   gint value)
{
	gint old_value;
#line 27 "../src/Background/Background.vala"
	g_return_if_fail (self != NULL);
#line 27 "../src/Background/Background.vala"
	old_value = gala_background_get_monitor_index (self);
#line 27 "../src/Background/Background.vala"
	if (old_value != value) {
#line 27 "../src/Background/Background.vala"
		self->priv->_monitor_index = value;
#line 27 "../src/Background/Background.vala"
		g_object_notify_by_pspec ((GObject *) self, gala_background_properties[GALA_BACKGROUND_MONITOR_INDEX_PROPERTY]);
#line 1950 "Background.c"
	}
}

GalaBackgroundSource*
gala_background_get_background_source (GalaBackground* self)
{
	GalaBackgroundSource* result;
	GalaBackgroundSource* _tmp0_;
#line 28 "../src/Background/Background.vala"
	g_return_val_if_fail (self != NULL, NULL);
#line 28 "../src/Background/Background.vala"
	_tmp0_ = self->priv->_background_source;
#line 28 "../src/Background/Background.vala"
	result = _tmp0_;
#line 28 "../src/Background/Background.vala"
	return result;
#line 1967 "Background.c"
}

static void
gala_background_set_background_source (GalaBackground* self,
                                       GalaBackgroundSource* value)
{
	GalaBackgroundSource* old_value;
#line 28 "../src/Background/Background.vala"
	g_return_if_fail (self != NULL);
#line 28 "../src/Background/Background.vala"
	old_value = gala_background_get_background_source (self);
#line 28 "../src/Background/Background.vala"
	if (old_value != value) {
#line 1981 "Background.c"
		GalaBackgroundSource* _tmp0_;
#line 28 "../src/Background/Background.vala"
		_tmp0_ = _g_object_ref0 (value);
#line 28 "../src/Background/Background.vala"
		_g_object_unref0 (self->priv->_background_source);
#line 28 "../src/Background/Background.vala"
		self->priv->_background_source = _tmp0_;
#line 28 "../src/Background/Background.vala"
		g_object_notify_by_pspec ((GObject *) self, gala_background_properties[GALA_BACKGROUND_BACKGROUND_SOURCE_PROPERTY]);
#line 1991 "Background.c"
	}
}

gboolean
gala_background_get_is_loaded (GalaBackground* self)
{
	gboolean result;
#line 29 "../src/Background/Background.vala"
	g_return_val_if_fail (self != NULL, FALSE);
#line 29 "../src/Background/Background.vala"
	result = self->priv->_is_loaded;
#line 29 "../src/Background/Background.vala"
	return result;
#line 2005 "Background.c"
}

static void
gala_background_set_is_loaded (GalaBackground* self,
                               gboolean value)
{
	gboolean old_value;
#line 29 "../src/Background/Background.vala"
	g_return_if_fail (self != NULL);
#line 29 "../src/Background/Background.vala"
	old_value = gala_background_get_is_loaded (self);
#line 29 "../src/Background/Background.vala"
	if (old_value != value) {
#line 29 "../src/Background/Background.vala"
		self->priv->_is_loaded = value;
#line 29 "../src/Background/Background.vala"
		g_object_notify_by_pspec ((GObject *) self, gala_background_properties[GALA_BACKGROUND_IS_LOADED_PROPERTY]);
#line 2023 "Background.c"
	}
}

GDesktopBackgroundStyle
gala_background_get_style (GalaBackground* self)
{
	GDesktopBackgroundStyle result;
#line 30 "../src/Background/Background.vala"
	g_return_val_if_fail (self != NULL, 0);
#line 30 "../src/Background/Background.vala"
	result = self->priv->_style;
#line 30 "../src/Background/Background.vala"
	return result;
#line 2037 "Background.c"
}

static void
gala_background_set_style (GalaBackground* self,
                           GDesktopBackgroundStyle value)
{
	GDesktopBackgroundStyle old_value;
#line 30 "../src/Background/Background.vala"
	g_return_if_fail (self != NULL);
#line 30 "../src/Background/Background.vala"
	old_value = gala_background_get_style (self);
#line 30 "../src/Background/Background.vala"
	if (old_value != value) {
#line 30 "../src/Background/Background.vala"
		self->priv->_style = value;
#line 30 "../src/Background/Background.vala"
		g_object_notify_by_pspec ((GObject *) self, gala_background_properties[GALA_BACKGROUND_STYLE_PROPERTY]);
#line 2055 "Background.c"
	}
}

const gchar*
gala_background_get_filename (GalaBackground* self)
{
	const gchar* result;
	const gchar* _tmp0_;
#line 31 "../src/Background/Background.vala"
	g_return_val_if_fail (self != NULL, NULL);
#line 31 "../src/Background/Background.vala"
	_tmp0_ = self->priv->_filename;
#line 31 "../src/Background/Background.vala"
	result = _tmp0_;
#line 31 "../src/Background/Background.vala"
	return result;
#line 2072 "Background.c"
}

static void
gala_background_set_filename (GalaBackground* self,
                              const gchar* value)
{
	gchar* old_value;
#line 31 "../src/Background/Background.vala"
	g_return_if_fail (self != NULL);
#line 31 "../src/Background/Background.vala"
	old_value = gala_background_get_filename (self);
#line 31 "../src/Background/Background.vala"
	if (g_strcmp0 (value, old_value) != 0) {
#line 2086 "Background.c"
		gchar* _tmp0_;
#line 31 "../src/Background/Background.vala"
		_tmp0_ = g_strdup (value);
#line 31 "../src/Background/Background.vala"
		_g_free0 (self->priv->_filename);
#line 31 "../src/Background/Background.vala"
		self->priv->_filename = _tmp0_;
#line 31 "../src/Background/Background.vala"
		g_object_notify_by_pspec ((GObject *) self, gala_background_properties[GALA_BACKGROUND_FILENAME_PROPERTY]);
#line 2096 "Background.c"
	}
}

MetaBackground*
gala_background_get_background (GalaBackground* self)
{
	MetaBackground* result;
	MetaBackground* _tmp0_;
#line 32 "../src/Background/Background.vala"
	g_return_val_if_fail (self != NULL, NULL);
#line 32 "../src/Background/Background.vala"
	_tmp0_ = self->priv->_background;
#line 32 "../src/Background/Background.vala"
	result = _tmp0_;
#line 32 "../src/Background/Background.vala"
	return result;
#line 2113 "Background.c"
}

static void
gala_background_set_background (GalaBackground* self,
                                MetaBackground* value)
{
	MetaBackground* old_value;
#line 32 "../src/Background/Background.vala"
	g_return_if_fail (self != NULL);
#line 32 "../src/Background/Background.vala"
	old_value = gala_background_get_background (self);
#line 32 "../src/Background/Background.vala"
	if (old_value != value) {
#line 2127 "Background.c"
		MetaBackground* _tmp0_;
#line 32 "../src/Background/Background.vala"
		_tmp0_ = _g_object_ref0 (value);
#line 32 "../src/Background/Background.vala"
		_g_object_unref0 (self->priv->_background);
#line 32 "../src/Background/Background.vala"
		self->priv->_background = _tmp0_;
#line 32 "../src/Background/Background.vala"
		g_object_notify_by_pspec ((GObject *) self, gala_background_properties[GALA_BACKGROUND_BACKGROUND_PROPERTY]);
#line 2137 "Background.c"
	}
}

static void
_gala_background___lambda41_ (GalaBackground* self)
{
	GalaAnimation* _tmp0_;
#line 62 "../src/Background/Background.vala"
	_tmp0_ = self->priv->animation;
#line 62 "../src/Background/Background.vala"
	if (_tmp0_ != NULL) {
#line 2149 "Background.c"
		GalaAnimation* _tmp1_;
		const gchar* _tmp2_;
		const gchar* _tmp3_;
#line 63 "../src/Background/Background.vala"
		_tmp1_ = self->priv->animation;
#line 63 "../src/Background/Background.vala"
		_tmp2_ = gala_animation_get_filename (_tmp1_);
#line 63 "../src/Background/Background.vala"
		_tmp3_ = _tmp2_;
#line 63 "../src/Background/Background.vala"
		gala_background_load_animation (self, _tmp3_, NULL, NULL);
#line 2161 "Background.c"
	}
}

static void
__gala_background___lambda41__g_object_notify (GObject* _sender,
                                               GParamSpec* pspec,
                                               gpointer self)
{
#line 61 "../src/Background/Background.vala"
	_gala_background___lambda41_ ((GalaBackground*) self);
#line 2172 "Background.c"
}

static GObject *
gala_background_constructor (GType type,
                             guint n_construct_properties,
                             GObjectConstructParam * construct_properties)
{
	GObject * obj;
	GObjectClass * parent_class;
	GalaBackground * self;
	MetaDisplay* _tmp0_;
	MetaBackground* _tmp1_;
	MetaBackground* _tmp2_;
	MetaBackground* _tmp3_;
	GeeHashMap* _tmp4_;
	GCancellable* _tmp5_;
	GalaBackgroundSource* _tmp6_;
	GnomeWallClock* _tmp7_;
	GnomeWallClock* _tmp8_;
	gulong _tmp9_;
#line 51 "../src/Background/Background.vala"
	parent_class = G_OBJECT_CLASS (gala_background_parent_class);
#line 51 "../src/Background/Background.vala"
	obj = parent_class->constructor (type, n_construct_properties, construct_properties);
#line 51 "../src/Background/Background.vala"
	self = G_TYPE_CHECK_INSTANCE_CAST (obj, GALA_TYPE_BACKGROUND, GalaBackground);
#line 52 "../src/Background/Background.vala"
	_tmp0_ = self->priv->_display;
#line 52 "../src/Background/Background.vala"
	_tmp1_ = meta_background_new (_tmp0_);
#line 52 "../src/Background/Background.vala"
	_tmp2_ = _tmp1_;
#line 52 "../src/Background/Background.vala"
	gala_background_set_background (self, _tmp2_);
#line 52 "../src/Background/Background.vala"
	_g_object_unref0 (_tmp2_);
#line 53 "../src/Background/Background.vala"
	_tmp3_ = self->priv->_background;
#line 53 "../src/Background/Background.vala"
	g_object_set_data_full ((GObject*) _tmp3_, "delegate", self, NULL);
#line 55 "../src/Background/Background.vala"
	_tmp4_ = gee_hash_map_new (G_TYPE_STRING, (GBoxedCopyFunc) g_strdup, (GDestroyNotify) g_free, G_TYPE_ULONG, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL);
#line 55 "../src/Background/Background.vala"
	_g_object_unref0 (self->priv->file_watches);
#line 55 "../src/Background/Background.vala"
	self->priv->file_watches = _tmp4_;
#line 56 "../src/Background/Background.vala"
	_tmp5_ = g_cancellable_new ();
#line 56 "../src/Background/Background.vala"
	_g_object_unref0 (self->priv->cancellable);
#line 56 "../src/Background/Background.vala"
	self->priv->cancellable = _tmp5_;
#line 58 "../src/Background/Background.vala"
	_tmp6_ = self->priv->_background_source;
#line 58 "../src/Background/Background.vala"
	g_signal_connect_object (_tmp6_, "changed", (GCallback) _gala_background_settings_changed_gala_background_source_changed, self, 0);
#line 60 "../src/Background/Background.vala"
	_tmp7_ = gnome_wall_clock_new ();
#line 60 "../src/Background/Background.vala"
	_g_object_unref0 (self->priv->clock);
#line 60 "../src/Background/Background.vala"
	self->priv->clock = _tmp7_;
#line 61 "../src/Background/Background.vala"
	_tmp8_ = self->priv->clock;
#line 61 "../src/Background/Background.vala"
	_tmp9_ = g_signal_connect_object ((GObject*) _tmp8_, "notify::timezone", (GCallback) __gala_background___lambda41__g_object_notify, self, 0);
#line 61 "../src/Background/Background.vala"
	self->priv->clock_timezone_handler = _tmp9_;
#line 67 "../src/Background/Background.vala"
	gala_background_load (self);
#line 51 "../src/Background/Background.vala"
	return obj;
#line 2245 "Background.c"
}

static void
gala_background_class_init (GalaBackgroundClass * klass,
                            gpointer klass_data)
{
#line 19 "../src/Background/Background.vala"
	gala_background_parent_class = g_type_class_peek_parent (klass);
#line 19 "../src/Background/Background.vala"
	g_type_class_adjust_private_offset (klass, &GalaBackground_private_offset);
#line 19 "../src/Background/Background.vala"
	G_OBJECT_CLASS (klass)->get_property = _vala_gala_background_get_property;
#line 19 "../src/Background/Background.vala"
	G_OBJECT_CLASS (klass)->set_property = _vala_gala_background_set_property;
#line 19 "../src/Background/Background.vala"
	G_OBJECT_CLASS (klass)->constructor = gala_background_constructor;
#line 19 "../src/Background/Background.vala"
	G_OBJECT_CLASS (klass)->finalize = gala_background_finalize;
#line 19 "../src/Background/Background.vala"
	g_object_class_install_property (G_OBJECT_CLASS (klass), GALA_BACKGROUND_DISPLAY_PROPERTY, gala_background_properties[GALA_BACKGROUND_DISPLAY_PROPERTY] = g_param_spec_object ("display", "display", "display", meta_display_get_type (), G_PARAM_STATIC_STRINGS | G_PARAM_READABLE | G_PARAM_WRITABLE | G_PARAM_CONSTRUCT_ONLY));
#line 19 "../src/Background/Background.vala"
	g_object_class_install_property (G_OBJECT_CLASS (klass), GALA_BACKGROUND_MONITOR_INDEX_PROPERTY, gala_background_properties[GALA_BACKGROUND_MONITOR_INDEX_PROPERTY] = g_param_spec_int ("monitor-index", "monitor-index", "monitor-index", G_MININT, G_MAXINT, 0, G_PARAM_STATIC_STRINGS | G_PARAM_READABLE | G_PARAM_WRITABLE | G_PARAM_CONSTRUCT_ONLY));
#line 19 "../src/Background/Background.vala"
	g_object_class_install_property (G_OBJECT_CLASS (klass), GALA_BACKGROUND_BACKGROUND_SOURCE_PROPERTY, gala_background_properties[GALA_BACKGROUND_BACKGROUND_SOURCE_PROPERTY] = g_param_spec_object ("background-source", "background-source", "background-source", GALA_TYPE_BACKGROUND_SOURCE, G_PARAM_STATIC_STRINGS | G_PARAM_READABLE | G_PARAM_WRITABLE | G_PARAM_CONSTRUCT_ONLY));
#line 19 "../src/Background/Background.vala"
	g_object_class_install_property (G_OBJECT_CLASS (klass), GALA_BACKGROUND_IS_LOADED_PROPERTY, gala_background_properties[GALA_BACKGROUND_IS_LOADED_PROPERTY] = g_param_spec_boolean ("is-loaded", "is-loaded", "is-loaded", FALSE, G_PARAM_STATIC_STRINGS | G_PARAM_READABLE));
#line 19 "../src/Background/Background.vala"
	g_object_class_install_property (G_OBJECT_CLASS (klass), GALA_BACKGROUND_STYLE_PROPERTY, gala_background_properties[GALA_BACKGROUND_STYLE_PROPERTY] = g_param_spec_int ("style", "style", "style", G_MININT, G_MAXINT, 0, G_PARAM_STATIC_STRINGS | G_PARAM_READABLE | G_PARAM_WRITABLE | G_PARAM_CONSTRUCT_ONLY));
#line 19 "../src/Background/Background.vala"
	g_object_class_install_property (G_OBJECT_CLASS (klass), GALA_BACKGROUND_FILENAME_PROPERTY, gala_background_properties[GALA_BACKGROUND_FILENAME_PROPERTY] = g_param_spec_string ("filename", "filename", "filename", NULL, G_PARAM_STATIC_STRINGS | G_PARAM_READABLE | G_PARAM_WRITABLE | G_PARAM_CONSTRUCT_ONLY));
#line 19 "../src/Background/Background.vala"
	g_object_class_install_property (G_OBJECT_CLASS (klass), GALA_BACKGROUND_BACKGROUND_PROPERTY, gala_background_properties[GALA_BACKGROUND_BACKGROUND_PROPERTY] = g_param_spec_object ("background", "background", "background", meta_background_get_type (), G_PARAM_STATIC_STRINGS | G_PARAM_READABLE));
#line 19 "../src/Background/Background.vala"
	gala_background_signals[GALA_BACKGROUND_CHANGED_SIGNAL] = g_signal_new ("changed", GALA_TYPE_BACKGROUND, G_SIGNAL_RUN_LAST, 0, NULL, NULL, g_cclosure_marshal_VOID__VOID, G_TYPE_NONE, 0);
#line 19 "../src/Background/Background.vala"
	gala_background_signals[GALA_BACKGROUND_LOADED_SIGNAL] = g_signal_new ("loaded", GALA_TYPE_BACKGROUND, G_SIGNAL_RUN_LAST, 0, NULL, NULL, g_cclosure_marshal_VOID__VOID, G_TYPE_NONE, 0);
#line 2282 "Background.c"
}

static void
gala_background_instance_init (GalaBackground * self,
                               gpointer klass)
{
#line 19 "../src/Background/Background.vala"
	self->priv = gala_background_get_instance_private (self);
#line 29 "../src/Background/Background.vala"
	self->priv->_is_loaded = FALSE;
#line 34 "../src/Background/Background.vala"
	self->priv->animation = NULL;
#line 37 "../src/Background/Background.vala"
	self->priv->update_animation_timeout_id = (guint) 0;
#line 40 "../src/Background/Background.vala"
	self->priv->clock_timezone_handler = (gulong) 0;
#line 2299 "Background.c"
}

static void
gala_background_finalize (GObject * obj)
{
	GalaBackground * self;
#line 19 "../src/Background/Background.vala"
	self = G_TYPE_CHECK_INSTANCE_CAST (obj, GALA_TYPE_BACKGROUND, GalaBackground);
#line 26 "../src/Background/Background.vala"
	_g_object_unref0 (self->priv->_display);
#line 28 "../src/Background/Background.vala"
	_g_object_unref0 (self->priv->_background_source);
#line 31 "../src/Background/Background.vala"
	_g_free0 (self->priv->_filename);
#line 32 "../src/Background/Background.vala"
	_g_object_unref0 (self->priv->_background);
#line 34 "../src/Background/Background.vala"
	_g_object_unref0 (self->priv->animation);
#line 35 "../src/Background/Background.vala"
	_g_object_unref0 (self->priv->file_watches);
#line 36 "../src/Background/Background.vala"
	_g_object_unref0 (self->priv->cancellable);
#line 39 "../src/Background/Background.vala"
	_g_object_unref0 (self->priv->clock);
#line 19 "../src/Background/Background.vala"
	G_OBJECT_CLASS (gala_background_parent_class)->finalize (obj);
#line 2326 "Background.c"
}

 G_GNUC_NO_INLINE static GType
gala_background_get_type_once (void)
{
	static const GTypeInfo g_define_type_info = { sizeof (GalaBackgroundClass), (GBaseInitFunc) NULL, (GBaseFinalizeFunc) NULL, (GClassInitFunc) gala_background_class_init, (GClassFinalizeFunc) NULL, NULL, sizeof (GalaBackground), 0, (GInstanceInitFunc) gala_background_instance_init, NULL };
	GType gala_background_type_id;
	gala_background_type_id = g_type_register_static (G_TYPE_OBJECT, "GalaBackground", &g_define_type_info, 0);
	GalaBackground_private_offset = g_type_add_instance_private (gala_background_type_id, sizeof (GalaBackgroundPrivate));
	return gala_background_type_id;
}

GType
gala_background_get_type (void)
{
	static gsize gala_background_type_id__once = 0;
	if (g_once_init_enter (&gala_background_type_id__once)) {
		GType gala_background_type_id;
		gala_background_type_id = gala_background_get_type_once ();
		g_once_init_leave (&gala_background_type_id__once, gala_background_type_id);
	}
	return gala_background_type_id__once;
}

static void
_vala_gala_background_get_property (GObject * object,
                                    guint property_id,
                                    GValue * value,
                                    GParamSpec * pspec)
{
	GalaBackground * self;
	self = G_TYPE_CHECK_INSTANCE_CAST (object, GALA_TYPE_BACKGROUND, GalaBackground);
#line 19 "../src/Background/Background.vala"
	switch (property_id) {
#line 19 "../src/Background/Background.vala"
		case GALA_BACKGROUND_DISPLAY_PROPERTY:
#line 19 "../src/Background/Background.vala"
		g_value_set_object (value, gala_background_get_display (self));
#line 19 "../src/Background/Background.vala"
		break;
#line 19 "../src/Background/Background.vala"
		case GALA_BACKGROUND_MONITOR_INDEX_PROPERTY:
#line 19 "../src/Background/Background.vala"
		g_value_set_int (value, gala_background_get_monitor_index (self));
#line 19 "../src/Background/Background.vala"
		break;
#line 19 "../src/Background/Background.vala"
		case GALA_BACKGROUND_BACKGROUND_SOURCE_PROPERTY:
#line 19 "../src/Background/Background.vala"
		g_value_set_object (value, gala_background_get_background_source (self));
#line 19 "../src/Background/Background.vala"
		break;
#line 19 "../src/Background/Background.vala"
		case GALA_BACKGROUND_IS_LOADED_PROPERTY:
#line 19 "../src/Background/Background.vala"
		g_value_set_boolean (value, gala_background_get_is_loaded (self));
#line 19 "../src/Background/Background.vala"
		break;
#line 19 "../src/Background/Background.vala"
		case GALA_BACKGROUND_STYLE_PROPERTY:
#line 19 "../src/Background/Background.vala"
		g_value_set_int (value, gala_background_get_style (self));
#line 19 "../src/Background/Background.vala"
		break;
#line 19 "../src/Background/Background.vala"
		case GALA_BACKGROUND_FILENAME_PROPERTY:
#line 19 "../src/Background/Background.vala"
		g_value_set_string (value, gala_background_get_filename (self));
#line 19 "../src/Background/Background.vala"
		break;
#line 19 "../src/Background/Background.vala"
		case GALA_BACKGROUND_BACKGROUND_PROPERTY:
#line 19 "../src/Background/Background.vala"
		g_value_set_object (value, gala_background_get_background (self));
#line 19 "../src/Background/Background.vala"
		break;
#line 2403 "Background.c"
		default:
#line 19 "../src/Background/Background.vala"
		G_OBJECT_WARN_INVALID_PROPERTY_ID (object, property_id, pspec);
#line 19 "../src/Background/Background.vala"
		break;
#line 2409 "Background.c"
	}
}

static void
_vala_gala_background_set_property (GObject * object,
                                    guint property_id,
                                    const GValue * value,
                                    GParamSpec * pspec)
{
	GalaBackground * self;
	self = G_TYPE_CHECK_INSTANCE_CAST (object, GALA_TYPE_BACKGROUND, GalaBackground);
#line 19 "../src/Background/Background.vala"
	switch (property_id) {
#line 19 "../src/Background/Background.vala"
		case GALA_BACKGROUND_DISPLAY_PROPERTY:
#line 19 "../src/Background/Background.vala"
		gala_background_set_display (self, g_value_get_object (value));
#line 19 "../src/Background/Background.vala"
		break;
#line 19 "../src/Background/Background.vala"
		case GALA_BACKGROUND_MONITOR_INDEX_PROPERTY:
#line 19 "../src/Background/Background.vala"
		gala_background_set_monitor_index (self, g_value_get_int (value));
#line 19 "../src/Background/Background.vala"
		break;
#line 19 "../src/Background/Background.vala"
		case GALA_BACKGROUND_BACKGROUND_SOURCE_PROPERTY:
#line 19 "../src/Background/Background.vala"
		gala_background_set_background_source (self, g_value_get_object (value));
#line 19 "../src/Background/Background.vala"
		break;
#line 19 "../src/Background/Background.vala"
		case GALA_BACKGROUND_IS_LOADED_PROPERTY:
#line 19 "../src/Background/Background.vala"
		gala_background_set_is_loaded (self, g_value_get_boolean (value));
#line 19 "../src/Background/Background.vala"
		break;
#line 19 "../src/Background/Background.vala"
		case GALA_BACKGROUND_STYLE_PROPERTY:
#line 19 "../src/Background/Background.vala"
		gala_background_set_style (self, g_value_get_int (value));
#line 19 "../src/Background/Background.vala"
		break;
#line 19 "../src/Background/Background.vala"
		case GALA_BACKGROUND_FILENAME_PROPERTY:
#line 19 "../src/Background/Background.vala"
		gala_background_set_filename (self, g_value_get_string (value));
#line 19 "../src/Background/Background.vala"
		break;
#line 19 "../src/Background/Background.vala"
		case GALA_BACKGROUND_BACKGROUND_PROPERTY:
#line 19 "../src/Background/Background.vala"
		gala_background_set_background (self, g_value_get_object (value));
#line 19 "../src/Background/Background.vala"
		break;
#line 2465 "Background.c"
		default:
#line 19 "../src/Background/Background.vala"
		G_OBJECT_WARN_INVALID_PROPERTY_ID (object, property_id, pspec);
#line 19 "../src/Background/Background.vala"
		break;
#line 2471 "Background.c"
	}
}

static void
_vala_array_destroy (gpointer array,
                     gssize array_length,
                     GDestroyNotify destroy_func)
{
#line 21 "../src/PluginManager.vala"
	if ((array != NULL) && (destroy_func != NULL)) {
#line 2482 "Background.c"
		gssize i;
#line 21 "../src/PluginManager.vala"
		for (i = 0; i < array_length; i = i + 1) {
#line 21 "../src/PluginManager.vala"
			if (((gpointer*) array)[i] != NULL) {
#line 21 "../src/PluginManager.vala"
				destroy_func (((gpointer*) array)[i]);
#line 2490 "Background.c"
			}
		}
	}
}

static void
_vala_array_free (gpointer array,
                  gssize array_length,
                  GDestroyNotify destroy_func)
{
#line 21 "../src/PluginManager.vala"
	_vala_array_destroy (array, array_length, destroy_func);
#line 21 "../src/PluginManager.vala"
	g_free (array);
#line 2505 "Background.c"
}

