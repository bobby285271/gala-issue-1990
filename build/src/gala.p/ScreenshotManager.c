/* ScreenshotManager.c generated by valac 0.56.17, the Vala compiler
 * generated from ScreenshotManager.vala, do not modify */

/**/
/*  Copyright (C) 2016 Rico Tzschichholz, Santiago Le√≥n O.*/
/**/
/*  This program is free software: you can redistribute it and/or modify*/
/*  it under the terms of the GNU General Public License as published by*/
/*  the Free Software Foundation, either version 3 of the License, or*/
/*  (at your option) any later version.*/
/**/
/*  This program is distributed in the hope that it will be useful,*/
/*  but WITHOUT ANY WARRANTY; without even the implied warranty of*/
/*  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the*/
/*  GNU General Public License for more details.*/
/**/
/*  You should have received a copy of the GNU General Public License*/
/*  along with this program.  If not, see <http://www.gnu.org/licenses/>.*/
/**/

#include <stdlib.h>
#include <string.h>
#include <glib.h>
#include <glib-object.h>
#include <gio/gio.h>
#include "gala.h"
#include <float.h>
#include <math.h>
#include <clutter/clutter.h>
#include <meta/display.h>
#include <meta/meta-plugin.h>
#include <cairo-gobject.h>
#include <mtk/mtk.h>
#include <meta/window.h>
#include <meta/meta-window-actor.h>
#include <graphene-gobject.h>
#include <glib/gstdio.h>
#include <glib/gi18n-lib.h>
#include <gdk-pixbuf/gdk-pixbuf.h>
#include <gdk/gdk.h>
#include <gtk/gtk.h>
#include <canberra.h>
#include <cogl/cogl.h>
#include <meta/meta-cursor-tracker.h>

#define GALA_EXTENSION ".png"
#define GALA_UNCONCEAL_TEXT_TIMEOUT 2000
#if !defined(VALA_STRICT_C)
#if !defined(__clang__) && defined(__GNUC__) && (__GNUC__ >= 14)
#pragma GCC diagnostic warning "-Wincompatible-pointer-types"
#elif defined(__clang__) && (__clang_major__ >= 16)
#pragma clang diagnostic ignored "-Wincompatible-function-pointer-types"
#pragma clang diagnostic ignored "-Wincompatible-pointer-types"
#endif
#endif
#if !defined(VALA_EXTERN)
#if defined(_MSC_VER)
#define VALA_EXTERN __declspec(dllexport) extern
#elif __GNUC__ >= 4
#define VALA_EXTERN __attribute__((visibility("default"))) extern
#else
#define VALA_EXTERN extern
#endif
#endif

#define GALA_TYPE_SCREENSHOT_MANAGER (gala_screenshot_manager_get_type ())
#define GALA_SCREENSHOT_MANAGER(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), GALA_TYPE_SCREENSHOT_MANAGER, GalaScreenshotManager))
#define GALA_SCREENSHOT_MANAGER_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), GALA_TYPE_SCREENSHOT_MANAGER, GalaScreenshotManagerClass))
#define GALA_IS_SCREENSHOT_MANAGER(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), GALA_TYPE_SCREENSHOT_MANAGER))
#define GALA_IS_SCREENSHOT_MANAGER_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), GALA_TYPE_SCREENSHOT_MANAGER))
#define GALA_SCREENSHOT_MANAGER_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), GALA_TYPE_SCREENSHOT_MANAGER, GalaScreenshotManagerClass))

typedef struct _GalaScreenshotManager GalaScreenshotManager;
typedef struct _GalaScreenshotManagerClass GalaScreenshotManagerClass;
typedef struct _GalaScreenshotManagerPrivate GalaScreenshotManagerPrivate;
enum  {
	GALA_SCREENSHOT_MANAGER_0_PROPERTY,
	GALA_SCREENSHOT_MANAGER_NUM_PROPERTIES
};
static GParamSpec* gala_screenshot_manager_properties[GALA_SCREENSHOT_MANAGER_NUM_PROPERTIES];
#define _g_object_unref0(var) ((var == NULL) ? NULL : (var = (g_object_unref (var), NULL)))
#define _g_free0(var) (var = (g_free (var), NULL))
#define __vala_ClutterColor_free0(var) ((var == NULL) ? NULL : (var = (_vala_ClutterColor_free (var), NULL)))
#define _cairo_surface_destroy0(var) ((var == NULL) ? NULL : (var = (cairo_surface_destroy (var), NULL)))
typedef struct _GalaScreenshotManagerScreenshotData GalaScreenshotManagerScreenshotData;
typedef struct _GalaScreenshotManagerScreenshotAreaData GalaScreenshotManagerScreenshotAreaData;
typedef struct _GalaScreenshotManagerScreenshotAreaWithCursorData GalaScreenshotManagerScreenshotAreaWithCursorData;
typedef struct _GalaScreenshotManagerScreenshotWindowData GalaScreenshotManagerScreenshotWindowData;
typedef struct _Block5Data Block5Data;

#define GALA_TYPE_SELECTION_AREA (gala_selection_area_get_type ())
#define GALA_SELECTION_AREA(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), GALA_TYPE_SELECTION_AREA, GalaSelectionArea))
#define GALA_SELECTION_AREA_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), GALA_TYPE_SELECTION_AREA, GalaSelectionAreaClass))
#define GALA_IS_SELECTION_AREA(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), GALA_TYPE_SELECTION_AREA))
#define GALA_IS_SELECTION_AREA_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), GALA_TYPE_SELECTION_AREA))
#define GALA_SELECTION_AREA_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), GALA_TYPE_SELECTION_AREA, GalaSelectionAreaClass))

typedef struct _GalaSelectionArea GalaSelectionArea;
typedef struct _GalaSelectionAreaClass GalaSelectionAreaClass;
typedef struct _GalaScreenshotManagerSelectAreaData GalaScreenshotManagerSelectAreaData;
typedef struct _GalaScreenshotManagerConcealTextData GalaScreenshotManagerConcealTextData;
#define _g_hash_table_unref0(var) ((var == NULL) ? NULL : (var = (g_hash_table_unref (var), NULL)))
typedef struct _Block6Data Block6Data;

#define GALA_TYPE_PIXEL_PICKER (gala_pixel_picker_get_type ())
#define GALA_PIXEL_PICKER(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), GALA_TYPE_PIXEL_PICKER, GalaPixelPicker))
#define GALA_PIXEL_PICKER_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), GALA_TYPE_PIXEL_PICKER, GalaPixelPickerClass))
#define GALA_IS_PIXEL_PICKER(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), GALA_TYPE_PIXEL_PICKER))
#define GALA_IS_PIXEL_PICKER_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), GALA_TYPE_PIXEL_PICKER))
#define GALA_PIXEL_PICKER_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), GALA_TYPE_PIXEL_PICKER, GalaPixelPickerClass))

typedef struct _GalaPixelPicker GalaPixelPicker;
typedef struct _GalaPixelPickerClass GalaPixelPickerClass;
typedef struct _GalaScreenshotManagerPickColorData GalaScreenshotManagerPickColorData;
typedef struct _GalaScreenshotManagerSaveImageData GalaScreenshotManagerSaveImageData;
#define _g_error_free0(var) ((var == NULL) ? NULL : (var = (g_error_free (var), NULL)))
typedef struct _GalaScreenshotManagerSaveImageToFileData GalaScreenshotManagerSaveImageToFileData;
#define _ca_context_destroy0(var) ((var == NULL) ? NULL : (var = (ca_context_destroy (var), NULL)))
#define _ca_proplist_destroy0(var) ((var == NULL) ? NULL : (var = (ca_proplist_destroy (var), NULL)))
#define _cairo_region_destroy0(var) ((var == NULL) ? NULL : (var = (cairo_region_destroy (var), NULL)))
#define _cairo_destroy0(var) ((var == NULL) ? NULL : (var = (cairo_destroy (var), NULL)))
typedef struct _Block7Data Block7Data;
typedef struct _GalaScreenshotManagerWaitStageRepaintData GalaScreenshotManagerWaitStageRepaintData;
typedef struct _GalaScreenshotManagerScreenshotReadyData GalaScreenshotManagerScreenshotReadyData;
typedef struct _GalaScreenshotManagerScreenshotAreaReadyData GalaScreenshotManagerScreenshotAreaReadyData;
typedef struct _GalaScreenshotManagerScreenshotAreaWithCursorReadyData GalaScreenshotManagerScreenshotAreaWithCursorReadyData;
typedef struct _GalaScreenshotManagerScreenshotWindowReadyData GalaScreenshotManagerScreenshotWindowReadyData;
typedef struct _GalaScreenshotManagerSelectAreaReadyData GalaScreenshotManagerSelectAreaReadyData;
typedef struct _GalaScreenshotManagerConcealTextReadyData GalaScreenshotManagerConcealTextReadyData;
typedef struct _GalaScreenshotManagerPickColorReadyData GalaScreenshotManagerPickColorReadyData;
#define _vala_assert(expr, msg) if G_LIKELY (expr) ; else g_assertion_message_expr (G_LOG_DOMAIN, __FILE__, __LINE__, G_STRFUNC, msg);
#define _vala_return_if_fail(expr, msg) if G_LIKELY (expr) ; else { g_return_if_fail_warning (G_LOG_DOMAIN, G_STRFUNC, msg); return; }
#define _vala_return_val_if_fail(expr, msg, val) if G_LIKELY (expr) ; else { g_return_if_fail_warning (G_LOG_DOMAIN, G_STRFUNC, msg); return val; }
#define _vala_warn_if_fail(expr, msg) if G_LIKELY (expr) ; else g_warn_message (G_LOG_DOMAIN, __FILE__, __LINE__, G_STRFUNC, msg);

struct _GalaScreenshotManager {
	GObject parent_instance;
	GalaScreenshotManagerPrivate * priv;
};

struct _GalaScreenshotManagerClass {
	GObjectClass parent_class;
};

struct _GalaScreenshotManagerPrivate {
	GalaWindowManager* wm;
	GSettings* desktop_settings;
	gchar* prev_font_regular;
	gchar* prev_font_document;
	gchar* prev_font_mono;
	guint conceal_timeout;
};

struct _GalaScreenshotManagerScreenshotData {
	int _state_;
	GObject* _source_object_;
	GAsyncResult* _res_;
	GTask* _async_result;
	GalaScreenshotManager* self;
	gboolean include_cursor;
	gboolean flash;
	gchar* filename;
	gboolean success;
	gchar* filename_used;
	MetaDisplay* display;
	GalaWindowManager* _tmp0_;
	MetaDisplay* _tmp1_;
	gint width;
	gint height;
	MetaDisplay* _tmp2_;
	gint _tmp3_;
	gint _tmp4_;
	cairo_surface_t* image;
	cairo_surface_t* _tmp5_;
	gfloat scale;
	MetaDisplay* _tmp6_;
	MetaDisplay* _tmp7_;
	cairo_surface_t* _tmp8_;
	gchar* _tmp9_;
	gboolean _tmp10_;
	GError* _inner_error0_;
};

struct _GalaScreenshotManagerScreenshotAreaData {
	int _state_;
	GObject* _source_object_;
	GAsyncResult* _res_;
	GTask* _async_result;
	GalaScreenshotManager* self;
	gint x;
	gint y;
	gint width;
	gint height;
	gboolean flash;
	gchar* filename;
	gboolean success;
	gchar* filename_used;
	gboolean _tmp0_;
	gchar* _tmp1_;
	GError* _inner_error0_;
};

struct _GalaScreenshotManagerScreenshotAreaWithCursorData {
	int _state_;
	GObject* _source_object_;
	GAsyncResult* _res_;
	GTask* _async_result;
	GalaScreenshotManager* self;
	gint x;
	gint y;
	gint width;
	gint height;
	gboolean include_cursor;
	gboolean flash;
	gchar* filename;
	gboolean success;
	gchar* filename_used;
	cairo_surface_t* image;
	cairo_surface_t* _tmp0_;
	MtkRectangle rect;
	MtkRectangle _tmp1_;
	MetaDisplay* display;
	GalaWindowManager* _tmp2_;
	MetaDisplay* _tmp3_;
	gfloat scale;
	MetaDisplay* _tmp4_;
	MetaDisplay* _tmp5_;
	MtkRectangle _tmp6_;
	cairo_surface_t* _tmp7_;
	gchar* _tmp8_;
	gboolean _tmp9_;
	GError* _tmp10_;
	GError* _inner_error0_;
};

struct _GalaScreenshotManagerScreenshotWindowData {
	int _state_;
	GObject* _source_object_;
	GAsyncResult* _res_;
	GTask* _async_result;
	GalaScreenshotManager* self;
	gboolean include_frame;
	gboolean include_cursor;
	gboolean flash;
	gchar* filename;
	gboolean success;
	gchar* filename_used;
	MetaWindow* window;
	GalaWindowManager* _tmp0_;
	MetaDisplay* _tmp1_;
	MetaWindow* _tmp2_;
	MetaWindow* _tmp3_;
	GError* _tmp4_;
	MetaWindowActor* window_actor;
	GObject* _tmp5_;
	MetaWindowActor* _tmp6_;
	gfloat actor_x;
	gfloat actor_y;
	MetaWindowActor* _tmp7_;
	gfloat _tmp8_;
	gfloat _tmp9_;
	MtkRectangle rect;
	MtkRectangle _tmp10_;
	gboolean _tmp11_;
	gboolean _tmp12_;
	gboolean _tmp13_;
	MtkRectangle _tmp14_;
	MtkRectangle _tmp15_;
	MtkRectangle clip;
	MtkRectangle _tmp16_;
	MtkRectangle _tmp17_;
	MtkRectangle _tmp18_;
	MtkRectangle _tmp19_;
	MtkRectangle _tmp20_;
	cairo_surface_t* image;
	MetaWindowActor* _tmp21_;
	MtkRectangle _tmp22_;
	cairo_surface_t* _tmp23_;
	gfloat resource_scale;
	MetaWindowActor* _tmp24_;
	cairo_surface_t* _tmp25_;
	cairo_surface_t* _tmp26_;
	MtkRectangle _tmp27_;
	MtkRectangle _tmp28_;
	MtkRectangle _tmp29_;
	MtkRectangle _tmp30_;
	cairo_rectangle_int_t _tmp31_;
	cairo_surface_t* _tmp32_;
	MtkRectangle _tmp33_;
	MtkRectangle _tmp34_;
	MtkRectangle _tmp35_;
	MtkRectangle _tmp36_;
	MetaDisplay* display;
	GalaWindowManager* _tmp37_;
	MetaDisplay* _tmp38_;
	gfloat scale;
	MetaDisplay* _tmp39_;
	MetaDisplay* _tmp40_;
	MtkRectangle _tmp41_;
	cairo_surface_t* _tmp42_;
	gchar* _tmp43_;
	gboolean _tmp44_;
	GError* _inner_error0_;
};

struct _Block5Data {
	int _ref_count_;
	GalaScreenshotManager* self;
	gpointer _async_data_;
};

struct _GalaScreenshotManagerSelectAreaData {
	int _state_;
	GObject* _source_object_;
	GAsyncResult* _res_;
	GTask* _async_result;
	GalaScreenshotManager* self;
	gint x;
	gint y;
	gint width;
	gint height;
	Block5Data* _data5_;
	GalaSelectionArea* selection_area;
	GalaWindowManager* _tmp0_;
	GalaSelectionArea* _tmp1_;
	GalaSelectionArea* _tmp2_;
	GalaWindowManager* _tmp3_;
	ClutterActor* _tmp4_;
	ClutterActor* _tmp5_;
	GalaSelectionArea* _tmp6_;
	GalaSelectionArea* _tmp7_;
	GalaSelectionArea* _tmp8_;
	GalaSelectionArea* _tmp9_;
	gboolean _tmp10_;
	gboolean _tmp11_;
	GError* _tmp12_;
	graphene_rect_t rect;
	GalaSelectionArea* _tmp13_;
	graphene_rect_t _tmp14_;
	graphene_rect_t _tmp15_;
	graphene_point_t _tmp16_;
	graphene_rect_t _tmp17_;
	graphene_point_t _tmp18_;
	graphene_rect_t _tmp19_;
	graphene_size_t _tmp20_;
	graphene_rect_t _tmp21_;
	graphene_size_t _tmp22_;
	GError* _inner_error0_;
};

struct _GalaScreenshotManagerConcealTextData {
	int _state_;
	GObject* _source_object_;
	GAsyncResult* _res_;
	GTask* _async_result;
	GalaScreenshotManager* self;
	GSettings* _tmp0_;
	gchar* _tmp1_;
	GSettings* _tmp2_;
	gchar* _tmp3_;
	GSettings* _tmp4_;
	gchar* _tmp5_;
	GSettings* _tmp6_;
	GSettings* _tmp7_;
	GSettings* _tmp8_;
};

struct _Block6Data {
	int _ref_count_;
	GalaScreenshotManager* self;
	gpointer _async_data_;
};

struct _GalaScreenshotManagerPickColorData {
	int _state_;
	GObject* _source_object_;
	GAsyncResult* _res_;
	GTask* _async_result;
	GalaScreenshotManager* self;
	GHashTable* result;
	Block6Data* _data6_;
	GalaPixelPicker* pixel_picker;
	GalaWindowManager* _tmp0_;
	GalaPixelPicker* _tmp1_;
	GalaPixelPicker* _tmp2_;
	GalaWindowManager* _tmp3_;
	ClutterActor* _tmp4_;
	ClutterActor* _tmp5_;
	GalaPixelPicker* _tmp6_;
	GalaPixelPicker* _tmp7_;
	GalaPixelPicker* _tmp8_;
	GalaPixelPicker* _tmp9_;
	gboolean _tmp10_;
	gboolean _tmp11_;
	GError* _tmp12_;
	graphene_point_t picker_point;
	GalaPixelPicker* _tmp13_;
	graphene_point_t _tmp14_;
	graphene_point_t _tmp15_;
	cairo_surface_t* image;
	graphene_point_t _tmp16_;
	graphene_point_t _tmp17_;
	cairo_surface_t* _tmp18_;
	cairo_surface_t* _tmp19_;
	guchar* data;
	cairo_surface_t* _tmp20_;
	guchar* _tmp21_;
	gint data_length1;
	gint _data_size_;
	gdouble r;
	gdouble g;
	gdouble b;
	guchar* _tmp22_;
	gint _tmp22__length1;
	guchar _tmp23_;
	guchar* _tmp24_;
	gint _tmp24__length1;
	guchar _tmp25_;
	guchar* _tmp26_;
	gint _tmp26__length1;
	guchar _tmp27_;
	guchar* _tmp28_;
	gint _tmp28__length1;
	guchar _tmp29_;
	guchar* _tmp30_;
	gint _tmp30__length1;
	guchar _tmp31_;
	guchar* _tmp32_;
	gint _tmp32__length1;
	guchar _tmp33_;
	GHashTable* _result_;
	GHashFunc _tmp34_;
	GEqualFunc _tmp35_;
	GHashTable* _tmp36_;
	gchar* _tmp37_;
	GVariant* _tmp38_;
	GError* _inner_error0_;
};

struct _GalaScreenshotManagerSaveImageData {
	int _state_;
	GObject* _source_object_;
	GAsyncResult* _res_;
	GTask* _async_result;
	cairo_surface_t* image;
	gchar* filename;
	gfloat scale;
	gchar* used_filename;
	gboolean result;
	gboolean _tmp0_;
	gchar* _tmp1_;
	gboolean _tmp2_;
	gchar* _tmp3_;
	gboolean _tmp4_;
};

struct _GalaScreenshotManagerSaveImageToFileData {
	int _state_;
	GObject* _source_object_;
	GAsyncResult* _res_;
	GTask* _async_result;
	cairo_surface_t* image;
	gchar* filename;
	gfloat scale;
	gchar* used_filename;
	gboolean result;
	gchar* _tmp0_;
	const gchar* _tmp1_;
	const gchar* _tmp2_;
	const gchar* _tmp3_;
	gchar* _tmp4_;
	gint scale_pos;
	gint _tmp5_;
	gint _tmp6_;
	const gchar* _tmp7_;
	gchar* _tmp8_;
	gchar* _tmp9_;
	gchar* _tmp10_;
	gchar* path;
	gchar* _tmp11_;
	const gchar* _tmp12_;
	const gchar* _tmp13_;
	gchar* _tmp14_;
	GdkPixbuf* screenshot;
	GdkPixbuf* _tmp15_;
	GFile* file;
	const gchar* _tmp16_;
	GFile* _tmp17_;
	GFileIOStream* stream;
	GFile* _tmp18_;
	GFileIOStream* _tmp19_;
	GFile* _tmp20_;
	GFileIOStream* _tmp21_;
	GFileIOStream* _tmp22_;
	GFileIOStream* _tmp23_;
	GFile* _tmp24_;
	GFileIOStream* _tmp25_;
	GFileIOStream* _tmp26_;
	GdkPixbuf* _tmp27_;
	GFileIOStream* _tmp28_;
	GOutputStream* _tmp29_;
	GOutputStream* _tmp30_;
	GError* e;
	GError* _tmp31_;
	const gchar* _tmp32_;
	GError* _inner_error0_;
};

struct _Block7Data {
	int _ref_count_;
	GalaScreenshotManager* self;
	gulong signal_id;
	gpointer _async_data_;
};

struct _GalaScreenshotManagerWaitStageRepaintData {
	int _state_;
	GObject* _source_object_;
	GAsyncResult* _res_;
	GTask* _async_result;
	GalaScreenshotManager* self;
	Block7Data* _data7_;
	GalaWindowManager* _tmp0_;
	ClutterStage* _tmp1_;
	ClutterStage* _tmp2_;
	gulong _tmp3_;
	GalaWindowManager* _tmp4_;
	ClutterStage* _tmp5_;
	ClutterStage* _tmp6_;
};

struct _GalaScreenshotManagerScreenshotReadyData {
	GDBusMethodInvocation* _invocation_;
	gboolean include_cursor;
	gboolean flash;
	gchar* filename;
};

struct _GalaScreenshotManagerScreenshotAreaReadyData {
	GDBusMethodInvocation* _invocation_;
	gint x;
	gint y;
	gint width;
	gint height;
	gboolean flash;
	gchar* filename;
};

struct _GalaScreenshotManagerScreenshotAreaWithCursorReadyData {
	GDBusMethodInvocation* _invocation_;
	gint x;
	gint y;
	gint width;
	gint height;
	gboolean include_cursor;
	gboolean flash;
	gchar* filename;
};

struct _GalaScreenshotManagerScreenshotWindowReadyData {
	GDBusMethodInvocation* _invocation_;
	gboolean include_frame;
	gboolean include_cursor;
	gboolean flash;
	gchar* filename;
};

struct _GalaScreenshotManagerSelectAreaReadyData {
	GDBusMethodInvocation* _invocation_;
};

struct _GalaScreenshotManagerConcealTextReadyData {
	GDBusMethodInvocation* _invocation_;
};

struct _GalaScreenshotManagerPickColorReadyData {
	GDBusMethodInvocation* _invocation_;
};

static gint GalaScreenshotManager_private_offset;
static gpointer gala_screenshot_manager_parent_class = NULL;
static GalaScreenshotManager* gala_screenshot_manager_instance;
static GalaScreenshotManager* gala_screenshot_manager_instance = NULL;

VALA_EXTERN GType gala_screenshot_manager_get_type (void) G_GNUC_CONST ;
G_DEFINE_AUTOPTR_CLEANUP_FUNC (GalaScreenshotManager, g_object_unref)
VALA_EXTERN guint gala_screenshot_manager_register_object (void* object,
                                               GDBusConnection* connection,
                                               const gchar* path,
                                               GError** error);
VALA_EXTERN GalaScreenshotManager* gala_screenshot_manager_init (GalaWindowManager* wm);
static GalaScreenshotManager* gala_screenshot_manager_new (GalaWindowManager* _wm);
static GalaScreenshotManager* gala_screenshot_manager_construct (GType object_type,
                                                          GalaWindowManager* _wm);
VALA_EXTERN void gala_screenshot_manager_flash_area (GalaScreenshotManager* self,
                                         gint x,
                                         gint y,
                                         gint width,
                                         gint height,
                                         GError** error);
static void _vala_ClutterColor_free (ClutterColor* self);
static void __lambda124_ (GalaScreenshotManager* self,
                   ClutterActor* actor);
static void ___lambda124__clutter_actor_transitions_completed (ClutterActor* _sender,
                                                        gpointer self);
static void _vala_GValue_array_free (GValue * array,
                              gssize array_length);
static void gala_screenshot_manager_screenshot_data_free (gpointer _data);
VALA_EXTERN void gala_screenshot_manager_screenshot (GalaScreenshotManager* self,
                                         gboolean include_cursor,
                                         gboolean flash,
                                         const gchar* filename,
                                         GAsyncReadyCallback _callback_,
                                         gpointer _user_data_);
VALA_EXTERN void gala_screenshot_manager_screenshot_finish (GalaScreenshotManager* self,
                                                GAsyncResult* _res_,
                                                gboolean* success,
                                                gchar** filename_used,
                                                GError** error);
static gboolean gala_screenshot_manager_screenshot_co (GalaScreenshotManagerScreenshotData* _data_);
static cairo_surface_t* gala_screenshot_manager_take_screenshot (GalaScreenshotManager* self,
                                                          gint x,
                                                          gint y,
                                                          gint width,
                                                          gint height,
                                                          gboolean include_cursor);
static void gala_screenshot_manager_unconceal_text (GalaScreenshotManager* self);
static void gala_screenshot_manager_save_image (cairo_surface_t* image,
                                         const gchar* filename,
                                         gfloat scale,
                                         GAsyncReadyCallback _callback_,
                                         gpointer _user_data_);
static gboolean gala_screenshot_manager_save_image_finish (GAsyncResult* _res_,
                                                    gchar** used_filename);
static void gala_screenshot_manager_screenshot_ready (GObject* source_object,
                                               GAsyncResult* _res_,
                                               gpointer _user_data_);
static void gala_screenshot_manager_play_shutter_sound (GalaScreenshotManager* self);
static void gala_screenshot_manager_screenshot_area_data_free (gpointer _data);
VALA_EXTERN void gala_screenshot_manager_screenshot_area (GalaScreenshotManager* self,
                                              gint x,
                                              gint y,
                                              gint width,
                                              gint height,
                                              gboolean flash,
                                              const gchar* filename,
                                              GAsyncReadyCallback _callback_,
                                              gpointer _user_data_);
VALA_EXTERN void gala_screenshot_manager_screenshot_area_finish (GalaScreenshotManager* self,
                                                     GAsyncResult* _res_,
                                                     gboolean* success,
                                                     gchar** filename_used,
                                                     GError** error);
static gboolean gala_screenshot_manager_screenshot_area_co (GalaScreenshotManagerScreenshotAreaData* _data_);
VALA_EXTERN void gala_screenshot_manager_screenshot_area_with_cursor (GalaScreenshotManager* self,
                                                          gint x,
                                                          gint y,
                                                          gint width,
                                                          gint height,
                                                          gboolean include_cursor,
                                                          gboolean flash,
                                                          const gchar* filename,
                                                          GAsyncReadyCallback _callback_,
                                                          gpointer _user_data_);
VALA_EXTERN void gala_screenshot_manager_screenshot_area_with_cursor_finish (GalaScreenshotManager* self,
                                                                 GAsyncResult* _res_,
                                                                 gboolean* success,
                                                                 gchar** filename_used,
                                                                 GError** error);
static void gala_screenshot_manager_screenshot_area_ready (GObject* source_object,
                                                    GAsyncResult* _res_,
                                                    gpointer _user_data_);
static void gala_screenshot_manager_screenshot_area_with_cursor_data_free (gpointer _data);
static gboolean gala_screenshot_manager_screenshot_area_with_cursor_co (GalaScreenshotManagerScreenshotAreaWithCursorData* _data_);
static void gala_screenshot_manager_wait_stage_repaint (GalaScreenshotManager* self,
                                                 GAsyncReadyCallback _callback_,
                                                 gpointer _user_data_);
static void gala_screenshot_manager_wait_stage_repaint_finish (GalaScreenshotManager* self,
                                                        GAsyncResult* _res_);
static void gala_screenshot_manager_screenshot_area_with_cursor_ready (GObject* source_object,
                                                                GAsyncResult* _res_,
                                                                gpointer _user_data_);
static void gala_screenshot_manager_screenshot_window_data_free (gpointer _data);
VALA_EXTERN void gala_screenshot_manager_screenshot_window (GalaScreenshotManager* self,
                                                gboolean include_frame,
                                                gboolean include_cursor,
                                                gboolean flash,
                                                const gchar* filename,
                                                GAsyncReadyCallback _callback_,
                                                gpointer _user_data_);
VALA_EXTERN void gala_screenshot_manager_screenshot_window_finish (GalaScreenshotManager* self,
                                                       GAsyncResult* _res_,
                                                       gboolean* success,
                                                       gchar** filename_used,
                                                       GError** error);
static gboolean gala_screenshot_manager_screenshot_window_co (GalaScreenshotManagerScreenshotWindowData* _data_);
static cairo_surface_t* gala_screenshot_manager_composite_stage_cursor (GalaScreenshotManager* self,
                                                                 cairo_surface_t* image,
                                                                 cairo_rectangle_int_t* image_rect);
static void gala_screenshot_manager_screenshot_window_ready (GObject* source_object,
                                                      GAsyncResult* _res_,
                                                      gpointer _user_data_);
static void gala_screenshot_manager_select_area_data_free (gpointer _data);
VALA_EXTERN void gala_screenshot_manager_select_area (GalaScreenshotManager* self,
                                          GAsyncReadyCallback _callback_,
                                          gpointer _user_data_);
VALA_EXTERN void gala_screenshot_manager_select_area_finish (GalaScreenshotManager* self,
                                                 GAsyncResult* _res_,
                                                 gint* x,
                                                 gint* y,
                                                 gint* width,
                                                 gint* height,
                                                 GError** error);
static gboolean gala_screenshot_manager_select_area_co (GalaScreenshotManagerSelectAreaData* _data_);
static Block5Data* block5_data_ref (Block5Data* _data5_);
static void block5_data_unref (void * _userdata_);
VALA_EXTERN GType gala_selection_area_get_type (void) G_GNUC_CONST ;
G_DEFINE_AUTOPTR_CLEANUP_FUNC (GalaSelectionArea, g_object_unref)
VALA_EXTERN GalaSelectionArea* gala_selection_area_new (GalaWindowManager* wm);
VALA_EXTERN GalaSelectionArea* gala_selection_area_construct (GType object_type,
                                                  GalaWindowManager* wm);
static void __lambda126_ (Block5Data* _data5_);
static gboolean _gala_screenshot_manager_select_area_co_gsource_func (gpointer self);
static void ___lambda126__gala_selection_area_closed (GalaSelectionArea* _sender,
                                               gpointer self);
VALA_EXTERN void gala_selection_area_start_selection (GalaSelectionArea* self);
VALA_EXTERN gboolean gala_selection_area_get_cancelled (GalaSelectionArea* self);
static void gala_screenshot_manager_select_area_ready (GObject* source_object,
                                                GAsyncResult* _res_,
                                                gpointer _user_data_);
VALA_EXTERN void gala_selection_area_get_selection_rectangle (GalaSelectionArea* self,
                                                  graphene_rect_t* result);
static void gala_screenshot_manager_conceal_text_data_free (gpointer _data);
VALA_EXTERN void gala_screenshot_manager_conceal_text (GalaScreenshotManager* self,
                                           GAsyncReadyCallback _callback_,
                                           gpointer _user_data_);
VALA_EXTERN void gala_screenshot_manager_conceal_text_finish (GalaScreenshotManager* self,
                                                  GAsyncResult* _res_,
                                                  GError** error);
static gboolean gala_screenshot_manager_conceal_text_co (GalaScreenshotManagerConcealTextData* _data_);
static gboolean __lambda127_ (GalaScreenshotManager* self);
static gboolean ___lambda127__gsource_func (gpointer self);
static void gala_screenshot_manager_pick_color_data_free (gpointer _data);
VALA_EXTERN void gala_screenshot_manager_pick_color (GalaScreenshotManager* self,
                                         GAsyncReadyCallback _callback_,
                                         gpointer _user_data_);
VALA_EXTERN GHashTable* gala_screenshot_manager_pick_color_finish (GalaScreenshotManager* self,
                                                       GAsyncResult* _res_,
                                                       GError** error);
static gboolean gala_screenshot_manager_pick_color_co (GalaScreenshotManagerPickColorData* _data_);
static Block6Data* block6_data_ref (Block6Data* _data6_);
static void block6_data_unref (void * _userdata_);
VALA_EXTERN GType gala_pixel_picker_get_type (void) G_GNUC_CONST ;
G_DEFINE_AUTOPTR_CLEANUP_FUNC (GalaPixelPicker, g_object_unref)
VALA_EXTERN GalaPixelPicker* gala_pixel_picker_new (GalaWindowManager* wm);
VALA_EXTERN GalaPixelPicker* gala_pixel_picker_construct (GType object_type,
                                              GalaWindowManager* wm);
static void __lambda128_ (Block6Data* _data6_);
static gboolean _gala_screenshot_manager_pick_color_co_gsource_func (gpointer self);
static void ___lambda128__gala_pixel_picker_closed (GalaPixelPicker* _sender,
                                             gpointer self);
VALA_EXTERN void gala_pixel_picker_start_selection (GalaPixelPicker* self);
VALA_EXTERN gboolean gala_pixel_picker_get_cancelled (GalaPixelPicker* self);
VALA_EXTERN void gala_pixel_picker_get_point (GalaPixelPicker* self,
                                  graphene_point_t * result);
static void _g_free0_ (gpointer var);
static void _g_variant_unref0_ (gpointer var);
static gchar* gala_screenshot_manager_find_target_path (void);
static void gala_screenshot_manager_save_image_data_free (gpointer _data);
static gboolean gala_screenshot_manager_save_image_co (GalaScreenshotManagerSaveImageData* _data_);
static void gala_screenshot_manager_save_image_to_file (cairo_surface_t* image,
                                                 const gchar* filename,
                                                 gfloat scale,
                                                 GAsyncReadyCallback _callback_,
                                                 gpointer _user_data_);
static gboolean gala_screenshot_manager_save_image_to_file_finish (GAsyncResult* _res_,
                                                            gchar** used_filename);
static void gala_screenshot_manager_save_image_ready (GObject* source_object,
                                               GAsyncResult* _res_,
                                               gpointer _user_data_);
static gboolean gala_screenshot_manager_save_image_to_clipboard (cairo_surface_t* image,
                                                          const gchar* filename,
                                                          gchar** used_filename);
static void gala_screenshot_manager_save_image_to_file_data_free (gpointer _data);
static gboolean gala_screenshot_manager_save_image_to_file_co (GalaScreenshotManagerSaveImageToFileData* _data_);
static void gala_screenshot_manager_save_image_to_file_ready (GObject* source_object,
                                                       GAsyncResult* _res_,
                                                       gpointer _user_data_);
static void gala_screenshot_manager_wait_stage_repaint_data_free (gpointer _data);
static gboolean gala_screenshot_manager_wait_stage_repaint_co (GalaScreenshotManagerWaitStageRepaintData* _data_);
static Block7Data* block7_data_ref (Block7Data* _data7_);
static void block7_data_unref (void * _userdata_);
static void __lambda125_ (Block7Data* _data7_);
static gboolean _gala_screenshot_manager_wait_stage_repaint_co_gsource_func (gpointer self);
static void ___lambda125__clutter_stage_after_paint (ClutterStage* _sender,
                                              ClutterStageView* view,
                                              ClutterFrame* frame,
                                              gpointer self);
static GObject * gala_screenshot_manager_constructor (GType type,
                                               guint n_construct_properties,
                                               GObjectConstructParam * construct_properties);
static void gala_screenshot_manager_finalize (GObject * obj);
static GType gala_screenshot_manager_get_type_once (void);
static void _dbus_gala_screenshot_manager_flash_area (GalaScreenshotManager* self,
                                               GVariant* _parameters_,
                                               GDBusMethodInvocation* invocation);
static void _dbus_gala_screenshot_manager_screenshot (GalaScreenshotManager* self,
                                               GVariant* _parameters_,
                                               GDBusMethodInvocation* invocation);
static void _dbus_gala_screenshot_manager_screenshot_ready (GObject * source_object,
                                                     GAsyncResult * _res_,
                                                     gpointer _user_data_);
static void _dbus_gala_screenshot_manager_screenshot_area (GalaScreenshotManager* self,
                                                    GVariant* _parameters_,
                                                    GDBusMethodInvocation* invocation);
static void _dbus_gala_screenshot_manager_screenshot_area_ready (GObject * source_object,
                                                          GAsyncResult * _res_,
                                                          gpointer _user_data_);
static void _dbus_gala_screenshot_manager_screenshot_area_with_cursor (GalaScreenshotManager* self,
                                                                GVariant* _parameters_,
                                                                GDBusMethodInvocation* invocation);
static void _dbus_gala_screenshot_manager_screenshot_area_with_cursor_ready (GObject * source_object,
                                                                      GAsyncResult * _res_,
                                                                      gpointer _user_data_);
static void _dbus_gala_screenshot_manager_screenshot_window (GalaScreenshotManager* self,
                                                      GVariant* _parameters_,
                                                      GDBusMethodInvocation* invocation);
static void _dbus_gala_screenshot_manager_screenshot_window_ready (GObject * source_object,
                                                            GAsyncResult * _res_,
                                                            gpointer _user_data_);
static void _dbus_gala_screenshot_manager_select_area (GalaScreenshotManager* self,
                                                GVariant* _parameters_,
                                                GDBusMethodInvocation* invocation);
static void _dbus_gala_screenshot_manager_select_area_ready (GObject * source_object,
                                                      GAsyncResult * _res_,
                                                      gpointer _user_data_);
static void _dbus_gala_screenshot_manager_conceal_text (GalaScreenshotManager* self,
                                                 GVariant* _parameters_,
                                                 GDBusMethodInvocation* invocation);
static void _dbus_gala_screenshot_manager_conceal_text_ready (GObject * source_object,
                                                       GAsyncResult * _res_,
                                                       gpointer _user_data_);
static void _dbus_gala_screenshot_manager_pick_color (GalaScreenshotManager* self,
                                               GVariant* _parameters_,
                                               GDBusMethodInvocation* invocation);
static void _dbus_gala_screenshot_manager_pick_color_ready (GObject * source_object,
                                                     GAsyncResult * _res_,
                                                     gpointer _user_data_);
static void gala_screenshot_manager_dbus_interface_method_call (GDBusConnection* connection,
                                                         const gchar* sender,
                                                         const gchar* object_path,
                                                         const gchar* interface_name,
                                                         const gchar* method_name,
                                                         GVariant* parameters,
                                                         GDBusMethodInvocation* invocation,
                                                         gpointer user_data);
static GVariant* gala_screenshot_manager_dbus_interface_get_property (GDBusConnection* connection,
                                                               const gchar* sender,
                                                               const gchar* object_path,
                                                               const gchar* interface_name,
                                                               const gchar* property_name,
                                                               GError** error,
                                                               gpointer user_data);
static gboolean gala_screenshot_manager_dbus_interface_set_property (GDBusConnection* connection,
                                                              const gchar* sender,
                                                              const gchar* object_path,
                                                              const gchar* interface_name,
                                                              const gchar* property_name,
                                                              GVariant* value,
                                                              GError** error,
                                                              gpointer user_data);
static void _gala_screenshot_manager_unregister_object (gpointer user_data);

static const GDBusArgInfo _gala_screenshot_manager_dbus_arg_info_flash_area_x = {-1, "x", "i", NULL};
static const GDBusArgInfo _gala_screenshot_manager_dbus_arg_info_flash_area_y = {-1, "y", "i", NULL};
static const GDBusArgInfo _gala_screenshot_manager_dbus_arg_info_flash_area_width = {-1, "width", "i", NULL};
static const GDBusArgInfo _gala_screenshot_manager_dbus_arg_info_flash_area_height = {-1, "height", "i", NULL};
static const GDBusArgInfo * const _gala_screenshot_manager_dbus_arg_info_flash_area_in[] = {&_gala_screenshot_manager_dbus_arg_info_flash_area_x, &_gala_screenshot_manager_dbus_arg_info_flash_area_y, &_gala_screenshot_manager_dbus_arg_info_flash_area_width, &_gala_screenshot_manager_dbus_arg_info_flash_area_height, NULL};
static const GDBusArgInfo * const _gala_screenshot_manager_dbus_arg_info_flash_area_out[] = {NULL};
static const GDBusMethodInfo _gala_screenshot_manager_dbus_method_info_flash_area = {-1, "FlashArea", (GDBusArgInfo **) (&_gala_screenshot_manager_dbus_arg_info_flash_area_in), (GDBusArgInfo **) (&_gala_screenshot_manager_dbus_arg_info_flash_area_out), NULL};
static const GDBusArgInfo _gala_screenshot_manager_dbus_arg_info_screenshot_include_cursor = {-1, "include_cursor", "b", NULL};
static const GDBusArgInfo _gala_screenshot_manager_dbus_arg_info_screenshot_flash = {-1, "flash", "b", NULL};
static const GDBusArgInfo _gala_screenshot_manager_dbus_arg_info_screenshot_filename = {-1, "filename", "s", NULL};
static const GDBusArgInfo _gala_screenshot_manager_dbus_arg_info_screenshot_success = {-1, "success", "b", NULL};
static const GDBusArgInfo _gala_screenshot_manager_dbus_arg_info_screenshot_filename_used = {-1, "filename_used", "s", NULL};
static const GDBusArgInfo * const _gala_screenshot_manager_dbus_arg_info_screenshot_in[] = {&_gala_screenshot_manager_dbus_arg_info_screenshot_include_cursor, &_gala_screenshot_manager_dbus_arg_info_screenshot_flash, &_gala_screenshot_manager_dbus_arg_info_screenshot_filename, NULL};
static const GDBusArgInfo * const _gala_screenshot_manager_dbus_arg_info_screenshot_out[] = {&_gala_screenshot_manager_dbus_arg_info_screenshot_success, &_gala_screenshot_manager_dbus_arg_info_screenshot_filename_used, NULL};
static const GDBusMethodInfo _gala_screenshot_manager_dbus_method_info_screenshot = {-1, "Screenshot", (GDBusArgInfo **) (&_gala_screenshot_manager_dbus_arg_info_screenshot_in), (GDBusArgInfo **) (&_gala_screenshot_manager_dbus_arg_info_screenshot_out), NULL};
static const GDBusArgInfo _gala_screenshot_manager_dbus_arg_info_screenshot_area_x = {-1, "x", "i", NULL};
static const GDBusArgInfo _gala_screenshot_manager_dbus_arg_info_screenshot_area_y = {-1, "y", "i", NULL};
static const GDBusArgInfo _gala_screenshot_manager_dbus_arg_info_screenshot_area_width = {-1, "width", "i", NULL};
static const GDBusArgInfo _gala_screenshot_manager_dbus_arg_info_screenshot_area_height = {-1, "height", "i", NULL};
static const GDBusArgInfo _gala_screenshot_manager_dbus_arg_info_screenshot_area_flash = {-1, "flash", "b", NULL};
static const GDBusArgInfo _gala_screenshot_manager_dbus_arg_info_screenshot_area_filename = {-1, "filename", "s", NULL};
static const GDBusArgInfo _gala_screenshot_manager_dbus_arg_info_screenshot_area_success = {-1, "success", "b", NULL};
static const GDBusArgInfo _gala_screenshot_manager_dbus_arg_info_screenshot_area_filename_used = {-1, "filename_used", "s", NULL};
static const GDBusArgInfo * const _gala_screenshot_manager_dbus_arg_info_screenshot_area_in[] = {&_gala_screenshot_manager_dbus_arg_info_screenshot_area_x, &_gala_screenshot_manager_dbus_arg_info_screenshot_area_y, &_gala_screenshot_manager_dbus_arg_info_screenshot_area_width, &_gala_screenshot_manager_dbus_arg_info_screenshot_area_height, &_gala_screenshot_manager_dbus_arg_info_screenshot_area_flash, &_gala_screenshot_manager_dbus_arg_info_screenshot_area_filename, NULL};
static const GDBusArgInfo * const _gala_screenshot_manager_dbus_arg_info_screenshot_area_out[] = {&_gala_screenshot_manager_dbus_arg_info_screenshot_area_success, &_gala_screenshot_manager_dbus_arg_info_screenshot_area_filename_used, NULL};
static const GDBusMethodInfo _gala_screenshot_manager_dbus_method_info_screenshot_area = {-1, "ScreenshotArea", (GDBusArgInfo **) (&_gala_screenshot_manager_dbus_arg_info_screenshot_area_in), (GDBusArgInfo **) (&_gala_screenshot_manager_dbus_arg_info_screenshot_area_out), NULL};
static const GDBusArgInfo _gala_screenshot_manager_dbus_arg_info_screenshot_area_with_cursor_x = {-1, "x", "i", NULL};
static const GDBusArgInfo _gala_screenshot_manager_dbus_arg_info_screenshot_area_with_cursor_y = {-1, "y", "i", NULL};
static const GDBusArgInfo _gala_screenshot_manager_dbus_arg_info_screenshot_area_with_cursor_width = {-1, "width", "i", NULL};
static const GDBusArgInfo _gala_screenshot_manager_dbus_arg_info_screenshot_area_with_cursor_height = {-1, "height", "i", NULL};
static const GDBusArgInfo _gala_screenshot_manager_dbus_arg_info_screenshot_area_with_cursor_include_cursor = {-1, "include_cursor", "b", NULL};
static const GDBusArgInfo _gala_screenshot_manager_dbus_arg_info_screenshot_area_with_cursor_flash = {-1, "flash", "b", NULL};
static const GDBusArgInfo _gala_screenshot_manager_dbus_arg_info_screenshot_area_with_cursor_filename = {-1, "filename", "s", NULL};
static const GDBusArgInfo _gala_screenshot_manager_dbus_arg_info_screenshot_area_with_cursor_success = {-1, "success", "b", NULL};
static const GDBusArgInfo _gala_screenshot_manager_dbus_arg_info_screenshot_area_with_cursor_filename_used = {-1, "filename_used", "s", NULL};
static const GDBusArgInfo * const _gala_screenshot_manager_dbus_arg_info_screenshot_area_with_cursor_in[] = {&_gala_screenshot_manager_dbus_arg_info_screenshot_area_with_cursor_x, &_gala_screenshot_manager_dbus_arg_info_screenshot_area_with_cursor_y, &_gala_screenshot_manager_dbus_arg_info_screenshot_area_with_cursor_width, &_gala_screenshot_manager_dbus_arg_info_screenshot_area_with_cursor_height, &_gala_screenshot_manager_dbus_arg_info_screenshot_area_with_cursor_include_cursor, &_gala_screenshot_manager_dbus_arg_info_screenshot_area_with_cursor_flash, &_gala_screenshot_manager_dbus_arg_info_screenshot_area_with_cursor_filename, NULL};
static const GDBusArgInfo * const _gala_screenshot_manager_dbus_arg_info_screenshot_area_with_cursor_out[] = {&_gala_screenshot_manager_dbus_arg_info_screenshot_area_with_cursor_success, &_gala_screenshot_manager_dbus_arg_info_screenshot_area_with_cursor_filename_used, NULL};
static const GDBusMethodInfo _gala_screenshot_manager_dbus_method_info_screenshot_area_with_cursor = {-1, "ScreenshotAreaWithCursor", (GDBusArgInfo **) (&_gala_screenshot_manager_dbus_arg_info_screenshot_area_with_cursor_in), (GDBusArgInfo **) (&_gala_screenshot_manager_dbus_arg_info_screenshot_area_with_cursor_out), NULL};
static const GDBusArgInfo _gala_screenshot_manager_dbus_arg_info_screenshot_window_include_frame = {-1, "include_frame", "b", NULL};
static const GDBusArgInfo _gala_screenshot_manager_dbus_arg_info_screenshot_window_include_cursor = {-1, "include_cursor", "b", NULL};
static const GDBusArgInfo _gala_screenshot_manager_dbus_arg_info_screenshot_window_flash = {-1, "flash", "b", NULL};
static const GDBusArgInfo _gala_screenshot_manager_dbus_arg_info_screenshot_window_filename = {-1, "filename", "s", NULL};
static const GDBusArgInfo _gala_screenshot_manager_dbus_arg_info_screenshot_window_success = {-1, "success", "b", NULL};
static const GDBusArgInfo _gala_screenshot_manager_dbus_arg_info_screenshot_window_filename_used = {-1, "filename_used", "s", NULL};
static const GDBusArgInfo * const _gala_screenshot_manager_dbus_arg_info_screenshot_window_in[] = {&_gala_screenshot_manager_dbus_arg_info_screenshot_window_include_frame, &_gala_screenshot_manager_dbus_arg_info_screenshot_window_include_cursor, &_gala_screenshot_manager_dbus_arg_info_screenshot_window_flash, &_gala_screenshot_manager_dbus_arg_info_screenshot_window_filename, NULL};
static const GDBusArgInfo * const _gala_screenshot_manager_dbus_arg_info_screenshot_window_out[] = {&_gala_screenshot_manager_dbus_arg_info_screenshot_window_success, &_gala_screenshot_manager_dbus_arg_info_screenshot_window_filename_used, NULL};
static const GDBusMethodInfo _gala_screenshot_manager_dbus_method_info_screenshot_window = {-1, "ScreenshotWindow", (GDBusArgInfo **) (&_gala_screenshot_manager_dbus_arg_info_screenshot_window_in), (GDBusArgInfo **) (&_gala_screenshot_manager_dbus_arg_info_screenshot_window_out), NULL};
static const GDBusArgInfo _gala_screenshot_manager_dbus_arg_info_select_area_x = {-1, "x", "i", NULL};
static const GDBusArgInfo _gala_screenshot_manager_dbus_arg_info_select_area_y = {-1, "y", "i", NULL};
static const GDBusArgInfo _gala_screenshot_manager_dbus_arg_info_select_area_width = {-1, "width", "i", NULL};
static const GDBusArgInfo _gala_screenshot_manager_dbus_arg_info_select_area_height = {-1, "height", "i", NULL};
static const GDBusArgInfo * const _gala_screenshot_manager_dbus_arg_info_select_area_in[] = {NULL};
static const GDBusArgInfo * const _gala_screenshot_manager_dbus_arg_info_select_area_out[] = {&_gala_screenshot_manager_dbus_arg_info_select_area_x, &_gala_screenshot_manager_dbus_arg_info_select_area_y, &_gala_screenshot_manager_dbus_arg_info_select_area_width, &_gala_screenshot_manager_dbus_arg_info_select_area_height, NULL};
static const GDBusMethodInfo _gala_screenshot_manager_dbus_method_info_select_area = {-1, "SelectArea", (GDBusArgInfo **) (&_gala_screenshot_manager_dbus_arg_info_select_area_in), (GDBusArgInfo **) (&_gala_screenshot_manager_dbus_arg_info_select_area_out), NULL};
static const GDBusArgInfo * const _gala_screenshot_manager_dbus_arg_info_conceal_text_in[] = {NULL};
static const GDBusArgInfo * const _gala_screenshot_manager_dbus_arg_info_conceal_text_out[] = {NULL};
static const GDBusMethodInfo _gala_screenshot_manager_dbus_method_info_conceal_text = {-1, "ConcealText", (GDBusArgInfo **) (&_gala_screenshot_manager_dbus_arg_info_conceal_text_in), (GDBusArgInfo **) (&_gala_screenshot_manager_dbus_arg_info_conceal_text_out), NULL};
static const GDBusArgInfo _gala_screenshot_manager_dbus_arg_info_pick_color_result = {-1, "result", "a{sv}", NULL};
static const GDBusArgInfo * const _gala_screenshot_manager_dbus_arg_info_pick_color_in[] = {NULL};
static const GDBusArgInfo * const _gala_screenshot_manager_dbus_arg_info_pick_color_out[] = {&_gala_screenshot_manager_dbus_arg_info_pick_color_result, NULL};
static const GDBusMethodInfo _gala_screenshot_manager_dbus_method_info_pick_color = {-1, "PickColor", (GDBusArgInfo **) (&_gala_screenshot_manager_dbus_arg_info_pick_color_in), (GDBusArgInfo **) (&_gala_screenshot_manager_dbus_arg_info_pick_color_out), NULL};
static const GDBusMethodInfo * const _gala_screenshot_manager_dbus_method_info[] = {&_gala_screenshot_manager_dbus_method_info_flash_area, &_gala_screenshot_manager_dbus_method_info_screenshot, &_gala_screenshot_manager_dbus_method_info_screenshot_area, &_gala_screenshot_manager_dbus_method_info_screenshot_area_with_cursor, &_gala_screenshot_manager_dbus_method_info_screenshot_window, &_gala_screenshot_manager_dbus_method_info_select_area, &_gala_screenshot_manager_dbus_method_info_conceal_text, &_gala_screenshot_manager_dbus_method_info_pick_color, NULL};
static const GDBusSignalInfo * const _gala_screenshot_manager_dbus_signal_info[] = {NULL};
static const GDBusPropertyInfo * const _gala_screenshot_manager_dbus_property_info[] = {NULL};
static const GDBusInterfaceInfo _gala_screenshot_manager_dbus_interface_info = {-1, "org.gnome.Shell.Screenshot", (GDBusMethodInfo **) (&_gala_screenshot_manager_dbus_method_info), (GDBusSignalInfo **) (&_gala_screenshot_manager_dbus_signal_info), (GDBusPropertyInfo **) (&_gala_screenshot_manager_dbus_property_info), NULL};
static const GDBusInterfaceVTable _gala_screenshot_manager_dbus_interface_vtable = {gala_screenshot_manager_dbus_interface_method_call, gala_screenshot_manager_dbus_interface_get_property, gala_screenshot_manager_dbus_interface_set_property};

static inline gpointer
gala_screenshot_manager_get_instance_private (GalaScreenshotManager* self)
{
	return G_STRUCT_MEMBER_P (self, GalaScreenshotManager_private_offset);
}

GalaScreenshotManager*
gala_screenshot_manager_init (GalaWindowManager* wm)
{
	GalaScreenshotManager* _tmp0_;
	GalaScreenshotManager* _tmp2_;
	GalaScreenshotManager* result;
#line 27 "../src/ScreenshotManager.vala"
	g_return_val_if_fail (wm != NULL, NULL);
#line 28 "../src/ScreenshotManager.vala"
	_tmp0_ = gala_screenshot_manager_instance;
#line 28 "../src/ScreenshotManager.vala"
	if (_tmp0_ == NULL) {
#line 960 "ScreenshotManager.c"
		GalaScreenshotManager* _tmp1_;
#line 29 "../src/ScreenshotManager.vala"
		_tmp1_ = gala_screenshot_manager_new (wm);
#line 29 "../src/ScreenshotManager.vala"
		_g_object_unref0 (gala_screenshot_manager_instance);
#line 29 "../src/ScreenshotManager.vala"
		gala_screenshot_manager_instance = _tmp1_;
#line 968 "ScreenshotManager.c"
	}
#line 31 "../src/ScreenshotManager.vala"
	_tmp2_ = gala_screenshot_manager_instance;
#line 31 "../src/ScreenshotManager.vala"
	result = _tmp2_;
#line 31 "../src/ScreenshotManager.vala"
	return result;
#line 976 "ScreenshotManager.c"
}

static gpointer
_g_object_ref0 (gpointer self)
{
#line 47 "../src/ScreenshotManager.vala"
	return self ? g_object_ref (self) : NULL;
#line 984 "ScreenshotManager.c"
}

static GalaScreenshotManager*
gala_screenshot_manager_construct (GType object_type,
                                   GalaWindowManager* _wm)
{
	GalaScreenshotManager * self = NULL;
	GalaWindowManager* _tmp0_;
#line 46 "../src/ScreenshotManager.vala"
	g_return_val_if_fail (_wm != NULL, NULL);
#line 46 "../src/ScreenshotManager.vala"
	self = (GalaScreenshotManager*) g_object_new (object_type, NULL);
#line 47 "../src/ScreenshotManager.vala"
	_tmp0_ = _g_object_ref0 (_wm);
#line 47 "../src/ScreenshotManager.vala"
	_g_object_unref0 (self->priv->wm);
#line 47 "../src/ScreenshotManager.vala"
	self->priv->wm = _tmp0_;
#line 46 "../src/ScreenshotManager.vala"
	return self;
#line 1005 "ScreenshotManager.c"
}

static GalaScreenshotManager*
gala_screenshot_manager_new (GalaWindowManager* _wm)
{
#line 46 "../src/ScreenshotManager.vala"
	return gala_screenshot_manager_construct (GALA_TYPE_SCREENSHOT_MANAGER, _wm);
#line 1013 "ScreenshotManager.c"
}

static ClutterColor*
_vala_clutter_color_from_pixel (guint32 pixel)
{
	ClutterColor* color = NULL;
	ClutterColor* _tmp0_;
	ClutterColor* result;
#line 7857 "mutter-clutter-14.vapi"
	_tmp0_ = clutter_color_alloc ();
#line 7857 "mutter-clutter-14.vapi"
	color = _tmp0_;
#line 7858 "mutter-clutter-14.vapi"
	clutter_color_from_pixel (color, pixel);
#line 7859 "mutter-clutter-14.vapi"
	result = color;
#line 7859 "mutter-clutter-14.vapi"
	return result;
#line 1032 "ScreenshotManager.c"
}

static void
_vala_ClutterColor_free (ClutterColor* self)
{
#line 69 "../src/ScreenshotManager.vala"
	g_boxed_free (clutter_color_get_type (), self);
#line 1040 "ScreenshotManager.c"
}

static void
__lambda124_ (GalaScreenshotManager* self,
              ClutterActor* actor)
{
	GalaWindowManager* _tmp0_;
	ClutterActor* _tmp1_;
	ClutterActor* _tmp2_;
#line 74 "../src/ScreenshotManager.vala"
	g_return_if_fail (actor != NULL);
#line 75 "../src/ScreenshotManager.vala"
	_tmp0_ = self->priv->wm;
#line 75 "../src/ScreenshotManager.vala"
	_tmp1_ = gala_window_manager_get_ui_group (_tmp0_);
#line 75 "../src/ScreenshotManager.vala"
	_tmp2_ = _tmp1_;
#line 75 "../src/ScreenshotManager.vala"
	clutter_actor_remove_child (_tmp2_, actor);
#line 76 "../src/ScreenshotManager.vala"
	clutter_actor_destroy (actor);
#line 1062 "ScreenshotManager.c"
}

static void
___lambda124__clutter_actor_transitions_completed (ClutterActor* _sender,
                                                   gpointer self)
{
#line 74 "../src/ScreenshotManager.vala"
	__lambda124_ ((GalaScreenshotManager*) self, _sender);
#line 1071 "ScreenshotManager.c"
}

static void
_vala_GValue_array_free (GValue * array,
                         gssize array_length)
{
#line 50 "../src/ScreenshotManager.vala"
	if (array != NULL) {
#line 1080 "ScreenshotManager.c"
		gssize i;
#line 50 "../src/ScreenshotManager.vala"
		for (i = 0; i < array_length; i = i + 1) {
#line 50 "../src/ScreenshotManager.vala"
			g_value_unset (&array[i]);
#line 1086 "ScreenshotManager.c"
		}
	}
#line 50 "../src/ScreenshotManager.vala"
	g_free (array);
#line 1091 "ScreenshotManager.c"
}

void
gala_screenshot_manager_flash_area (GalaScreenshotManager* self,
                                    gint x,
                                    gint y,
                                    gint width,
                                    gint height,
                                    GError** error)
{
	gdouble* keyframes = NULL;
	gdouble* _tmp0_;
	gint keyframes_length1;
	gint _keyframes_size_;
	GValue* values = NULL;
	GValue _tmp1_ = {0};
	GValue _tmp2_ = {0};
	GValue* _tmp3_;
	gint values_length1;
	gint _values_size_;
	ClutterKeyframeTransition* transition = NULL;
	ClutterKeyframeTransition* _tmp4_ = NULL;
	GValue _tmp5_ = {0};
	ClutterActor* flash_actor = NULL;
	ClutterActor* _tmp6_;
	ClutterColor* _tmp7_;
	ClutterColor* _tmp8_;
	GalaWindowManager* _tmp9_;
	ClutterActor* _tmp10_;
	ClutterActor* _tmp11_;
#line 50 "../src/ScreenshotManager.vala"
	g_return_if_fail (self != NULL);
#line 51 "../src/ScreenshotManager.vala"
	g_debug ("ScreenshotManager.vala:51: Flashing area");
#line 53 "../src/ScreenshotManager.vala"
	_tmp0_ = g_new0 (gdouble, 2);
#line 53 "../src/ScreenshotManager.vala"
	_tmp0_[0] = (gdouble) 0.3f;
#line 53 "../src/ScreenshotManager.vala"
	_tmp0_[1] = (gdouble) 0.8f;
#line 53 "../src/ScreenshotManager.vala"
	keyframes = _tmp0_;
#line 53 "../src/ScreenshotManager.vala"
	keyframes_length1 = 2;
#line 53 "../src/ScreenshotManager.vala"
	_keyframes_size_ = keyframes_length1;
#line 54 "../src/ScreenshotManager.vala"
	g_value_init (&_tmp1_, G_TYPE_UINT);
#line 54 "../src/ScreenshotManager.vala"
	g_value_set_uint (&_tmp1_, 180U);
#line 54 "../src/ScreenshotManager.vala"
	g_value_init (&_tmp2_, G_TYPE_UINT);
#line 54 "../src/ScreenshotManager.vala"
	g_value_set_uint (&_tmp2_, 0U);
#line 54 "../src/ScreenshotManager.vala"
	_tmp3_ = g_new0 (GValue, 2);
#line 54 "../src/ScreenshotManager.vala"
	_tmp3_[0] = _tmp1_;
#line 54 "../src/ScreenshotManager.vala"
	_tmp3_[1] = _tmp2_;
#line 54 "../src/ScreenshotManager.vala"
	values = _tmp3_;
#line 54 "../src/ScreenshotManager.vala"
	values_length1 = 2;
#line 54 "../src/ScreenshotManager.vala"
	_values_size_ = values_length1;
#line 56 "../src/ScreenshotManager.vala"
	_tmp4_ = (ClutterKeyframeTransition*) clutter_keyframe_transition_new ("opacity");
#line 56 "../src/ScreenshotManager.vala"
	clutter_timeline_set_duration ((ClutterTimeline*) _tmp4_, (guint) 200);
#line 56 "../src/ScreenshotManager.vala"
	clutter_transition_set_remove_on_complete ((ClutterTransition*) _tmp4_, TRUE);
#line 56 "../src/ScreenshotManager.vala"
	clutter_timeline_set_progress_mode ((ClutterTimeline*) _tmp4_, CLUTTER_LINEAR);
#line 56 "../src/ScreenshotManager.vala"
	transition = _tmp4_;
#line 61 "../src/ScreenshotManager.vala"
	clutter_keyframe_transition_set_key_frames (transition, (guint) keyframes_length1, keyframes);
#line 62 "../src/ScreenshotManager.vala"
	clutter_keyframe_transition_set_values (transition, (guint) values_length1, values);
#line 63 "../src/ScreenshotManager.vala"
	g_value_init (&_tmp5_, G_TYPE_FLOAT);
#line 63 "../src/ScreenshotManager.vala"
	g_value_set_float (&_tmp5_, 0.0f);
#line 63 "../src/ScreenshotManager.vala"
	clutter_transition_set_to_value ((ClutterTransition*) transition, &_tmp5_);
#line 63 "../src/ScreenshotManager.vala"
	G_IS_VALUE (&_tmp5_) ? (g_value_unset (&_tmp5_), NULL) : NULL;
#line 65 "../src/ScreenshotManager.vala"
	_tmp6_ = clutter_actor_new ();
#line 65 "../src/ScreenshotManager.vala"
	g_object_ref_sink (_tmp6_);
#line 65 "../src/ScreenshotManager.vala"
	flash_actor = _tmp6_;
#line 66 "../src/ScreenshotManager.vala"
	clutter_actor_set_size (flash_actor, (gfloat) width, (gfloat) height);
#line 67 "../src/ScreenshotManager.vala"
	clutter_actor_set_position (flash_actor, (gfloat) x, (gfloat) y);
#line 69 "../src/ScreenshotManager.vala"
	_tmp7_ = _vala_clutter_color_from_pixel ((guint32) 0xffffffffU);
#line 69 "../src/ScreenshotManager.vala"
	_tmp8_ = _tmp7_;
#line 69 "../src/ScreenshotManager.vala"
	clutter_actor_set_background_color (flash_actor, _tmp8_);
#line 69 "../src/ScreenshotManager.vala"
	__vala_ClutterColor_free0 (_tmp8_);
#line 73 "../src/ScreenshotManager.vala"
	clutter_actor_set_opacity (flash_actor, (guint8) 0);
#line 74 "../src/ScreenshotManager.vala"
	g_signal_connect_object (flash_actor, "transitions-completed", (GCallback) ___lambda124__clutter_actor_transitions_completed, self, 0);
#line 79 "../src/ScreenshotManager.vala"
	_tmp9_ = self->priv->wm;
#line 79 "../src/ScreenshotManager.vala"
	_tmp10_ = gala_window_manager_get_ui_group (_tmp9_);
#line 79 "../src/ScreenshotManager.vala"
	_tmp11_ = _tmp10_;
#line 79 "../src/ScreenshotManager.vala"
	clutter_actor_add_child (_tmp11_, flash_actor);
#line 80 "../src/ScreenshotManager.vala"
	clutter_actor_add_transition (flash_actor, "flash", (ClutterTransition*) transition);
#line 50 "../src/ScreenshotManager.vala"
	_g_object_unref0 (flash_actor);
#line 50 "../src/ScreenshotManager.vala"
	_g_object_unref0 (transition);
#line 50 "../src/ScreenshotManager.vala"
	values = (_vala_GValue_array_free (values, values_length1), NULL);
#line 50 "../src/ScreenshotManager.vala"
	keyframes = (g_free (keyframes), NULL);
#line 1220 "ScreenshotManager.c"
}

static void
gala_screenshot_manager_screenshot_data_free (gpointer _data)
{
	GalaScreenshotManagerScreenshotData* _data_;
	_data_ = _data;
#line 23 "../src/ScreenshotManager.vala"
	_g_free0 (_data_->filename);
#line 23 "../src/ScreenshotManager.vala"
	_g_object_unref0 (_data_->self);
#line 23 "../src/ScreenshotManager.vala"
	g_slice_free (GalaScreenshotManagerScreenshotData, _data_);
#line 1234 "ScreenshotManager.c"
}

void
gala_screenshot_manager_screenshot (GalaScreenshotManager* self,
                                    gboolean include_cursor,
                                    gboolean flash,
                                    const gchar* filename,
                                    GAsyncReadyCallback _callback_,
                                    gpointer _user_data_)
{
	GalaScreenshotManagerScreenshotData* _data_;
	GalaScreenshotManager* _tmp0_;
	gchar* _tmp1_;
#line 23 "../src/ScreenshotManager.vala"
	g_return_if_fail (self != NULL);
#line 23 "../src/ScreenshotManager.vala"
	g_return_if_fail (filename != NULL);
#line 23 "../src/ScreenshotManager.vala"
	_data_ = g_slice_new0 (GalaScreenshotManagerScreenshotData);
#line 23 "../src/ScreenshotManager.vala"
	_data_->_async_result = g_task_new (G_OBJECT (self), NULL, _callback_, _user_data_);
#line 23 "../src/ScreenshotManager.vala"
	g_task_set_task_data (_data_->_async_result, _data_, gala_screenshot_manager_screenshot_data_free);
#line 23 "../src/ScreenshotManager.vala"
	_tmp0_ = _g_object_ref0 (self);
#line 23 "../src/ScreenshotManager.vala"
	_data_->self = _tmp0_;
#line 23 "../src/ScreenshotManager.vala"
	_data_->include_cursor = include_cursor;
#line 23 "../src/ScreenshotManager.vala"
	_data_->flash = flash;
#line 23 "../src/ScreenshotManager.vala"
	_tmp1_ = g_strdup (filename);
#line 23 "../src/ScreenshotManager.vala"
	_g_free0 (_data_->filename);
#line 23 "../src/ScreenshotManager.vala"
	_data_->filename = _tmp1_;
#line 23 "../src/ScreenshotManager.vala"
	gala_screenshot_manager_screenshot_co (_data_);
#line 1274 "ScreenshotManager.c"
}

void
gala_screenshot_manager_screenshot_finish (GalaScreenshotManager* self,
                                           GAsyncResult* _res_,
                                           gboolean* success,
                                           gchar** filename_used,
                                           GError** error)
{
	GalaScreenshotManagerScreenshotData* _data_;
#line 23 "../src/ScreenshotManager.vala"
	_data_ = g_task_propagate_pointer (G_TASK (_res_), error);
#line 23 "../src/ScreenshotManager.vala"
	if (NULL == _data_) {
#line 23 "../src/ScreenshotManager.vala"
		return;
#line 1291 "ScreenshotManager.c"
	}
#line 23 "../src/ScreenshotManager.vala"
	if (success) {
#line 23 "../src/ScreenshotManager.vala"
		*success = _data_->success;
#line 1297 "ScreenshotManager.c"
	}
#line 23 "../src/ScreenshotManager.vala"
	if (filename_used) {
#line 23 "../src/ScreenshotManager.vala"
		*filename_used = _data_->filename_used;
#line 1303 "ScreenshotManager.c"
	} else {
#line 23 "../src/ScreenshotManager.vala"
		_g_free0 (_data_->filename_used);
#line 1307 "ScreenshotManager.c"
	}
#line 23 "../src/ScreenshotManager.vala"
	_data_->filename_used = NULL;
#line 1311 "ScreenshotManager.c"
}

static void
gala_screenshot_manager_screenshot_ready (GObject* source_object,
                                          GAsyncResult* _res_,
                                          gpointer _user_data_)
{
	GalaScreenshotManagerScreenshotData* _data_;
#line 99 "../src/ScreenshotManager.vala"
	_data_ = _user_data_;
#line 99 "../src/ScreenshotManager.vala"
	_data_->_source_object_ = source_object;
#line 99 "../src/ScreenshotManager.vala"
	_data_->_res_ = _res_;
#line 99 "../src/ScreenshotManager.vala"
	gala_screenshot_manager_screenshot_co (_data_);
#line 1328 "ScreenshotManager.c"
}

static gboolean
gala_screenshot_manager_screenshot_co (GalaScreenshotManagerScreenshotData* _data_)
{
#line 83 "../src/ScreenshotManager.vala"
	switch (_data_->_state_) {
#line 83 "../src/ScreenshotManager.vala"
		case 0:
#line 1338 "ScreenshotManager.c"
		goto _state_0;
#line 83 "../src/ScreenshotManager.vala"
		case 1:
#line 1342 "ScreenshotManager.c"
		goto _state_1;
		default:
#line 83 "../src/ScreenshotManager.vala"
		g_assert_not_reached ();
#line 1347 "ScreenshotManager.c"
	}
	_state_0:
#line 84 "../src/ScreenshotManager.vala"
	g_debug ("ScreenshotManager.vala:84: Taking screenshot");
#line 86 "../src/ScreenshotManager.vala"
	_data_->_tmp0_ = _data_->self->priv->wm;
#line 86 "../src/ScreenshotManager.vala"
	_data_->_tmp1_ = meta_plugin_get_display ((MetaPlugin*) _data_->_tmp0_);
#line 86 "../src/ScreenshotManager.vala"
	_data_->display = _data_->_tmp1_;
#line 89 "../src/ScreenshotManager.vala"
	_data_->_tmp2_ = _data_->display;
#line 89 "../src/ScreenshotManager.vala"
	_data_->_tmp3_ = 0;
#line 89 "../src/ScreenshotManager.vala"
	_data_->_tmp4_ = 0;
#line 89 "../src/ScreenshotManager.vala"
	meta_display_get_size (_data_->_tmp2_, &_data_->_tmp3_, &_data_->_tmp4_);
#line 89 "../src/ScreenshotManager.vala"
	_data_->width = _data_->_tmp3_;
#line 89 "../src/ScreenshotManager.vala"
	_data_->height = _data_->_tmp4_;
#line 91 "../src/ScreenshotManager.vala"
	_data_->_tmp5_ = gala_screenshot_manager_take_screenshot (_data_->self, 0, 0, _data_->width, _data_->height, _data_->include_cursor);
#line 91 "../src/ScreenshotManager.vala"
	_data_->image = _data_->_tmp5_;
#line 92 "../src/ScreenshotManager.vala"
	gala_screenshot_manager_unconceal_text (_data_->self);
#line 94 "../src/ScreenshotManager.vala"
	if (_data_->flash) {
#line 95 "../src/ScreenshotManager.vala"
		gala_screenshot_manager_flash_area (_data_->self, 0, 0, _data_->width, _data_->height, &_data_->_inner_error0_);
#line 95 "../src/ScreenshotManager.vala"
		if (G_UNLIKELY (_data_->_inner_error0_ != NULL)) {
#line 95 "../src/ScreenshotManager.vala"
			if ((_data_->_inner_error0_->domain == G_DBUS_ERROR) || (_data_->_inner_error0_->domain == G_IO_ERROR)) {
#line 95 "../src/ScreenshotManager.vala"
				g_task_return_error (_data_->_async_result, _data_->_inner_error0_);
#line 95 "../src/ScreenshotManager.vala"
				_cairo_surface_destroy0 (_data_->image);
#line 95 "../src/ScreenshotManager.vala"
				_g_free0 (_data_->filename_used);
#line 95 "../src/ScreenshotManager.vala"
				g_object_unref (_data_->_async_result);
#line 95 "../src/ScreenshotManager.vala"
				return FALSE;
#line 1394 "ScreenshotManager.c"
			} else {
#line 95 "../src/ScreenshotManager.vala"
				_cairo_surface_destroy0 (_data_->image);
#line 95 "../src/ScreenshotManager.vala"
				_g_free0 (_data_->filename_used);
#line 95 "../src/ScreenshotManager.vala"
				g_critical ("file %s: line %d: uncaught error: %s (%s, %d)", __FILE__, __LINE__, _data_->_inner_error0_->message, g_quark_to_string (_data_->_inner_error0_->domain), _data_->_inner_error0_->code);
#line 95 "../src/ScreenshotManager.vala"
				g_clear_error (&_data_->_inner_error0_);
#line 95 "../src/ScreenshotManager.vala"
				g_object_unref (_data_->_async_result);
#line 95 "../src/ScreenshotManager.vala"
				return FALSE;
#line 1408 "ScreenshotManager.c"
			}
		}
	}
#line 98 "../src/ScreenshotManager.vala"
	_data_->_tmp6_ = _data_->display;
#line 98 "../src/ScreenshotManager.vala"
	_data_->_tmp7_ = _data_->display;
#line 98 "../src/ScreenshotManager.vala"
	_data_->scale = meta_display_get_monitor_scale (_data_->_tmp6_, meta_display_get_primary_monitor (_data_->_tmp7_));
#line 99 "../src/ScreenshotManager.vala"
	_data_->_tmp8_ = _data_->image;
#line 99 "../src/ScreenshotManager.vala"
	_data_->_tmp9_ = NULL;
#line 99 "../src/ScreenshotManager.vala"
	_data_->_state_ = 1;
#line 99 "../src/ScreenshotManager.vala"
	gala_screenshot_manager_save_image (_data_->_tmp8_, _data_->filename, _data_->scale, gala_screenshot_manager_screenshot_ready, _data_);
#line 99 "../src/ScreenshotManager.vala"
	return FALSE;
#line 1428 "ScreenshotManager.c"
	_state_1:
#line 99 "../src/ScreenshotManager.vala"
	_data_->_tmp10_ = gala_screenshot_manager_save_image_finish (_data_->_res_, &_data_->_tmp9_);
#line 99 "../src/ScreenshotManager.vala"
	_g_free0 (_data_->filename_used);
#line 99 "../src/ScreenshotManager.vala"
	_data_->filename_used = _data_->_tmp9_;
#line 99 "../src/ScreenshotManager.vala"
	_data_->success = _data_->_tmp10_;
#line 101 "../src/ScreenshotManager.vala"
	if (_data_->success) {
#line 102 "../src/ScreenshotManager.vala"
		gala_screenshot_manager_play_shutter_sound (_data_->self);
#line 1442 "ScreenshotManager.c"
	}
#line 83 "../src/ScreenshotManager.vala"
	_cairo_surface_destroy0 (_data_->image);
#line 83 "../src/ScreenshotManager.vala"
	g_task_return_pointer (_data_->_async_result, _data_, NULL);
#line 83 "../src/ScreenshotManager.vala"
	if (_data_->_state_ != 0) {
#line 83 "../src/ScreenshotManager.vala"
		while (!g_task_get_completed (_data_->_async_result)) {
#line 83 "../src/ScreenshotManager.vala"
			g_main_context_iteration (g_task_get_context (_data_->_async_result), TRUE);
#line 1454 "ScreenshotManager.c"
		}
	}
#line 83 "../src/ScreenshotManager.vala"
	g_object_unref (_data_->_async_result);
#line 83 "../src/ScreenshotManager.vala"
	return FALSE;
#line 1461 "ScreenshotManager.c"
}

static void
gala_screenshot_manager_screenshot_area_data_free (gpointer _data)
{
	GalaScreenshotManagerScreenshotAreaData* _data_;
	_data_ = _data;
#line 23 "../src/ScreenshotManager.vala"
	_g_free0 (_data_->filename);
#line 23 "../src/ScreenshotManager.vala"
	_g_object_unref0 (_data_->self);
#line 23 "../src/ScreenshotManager.vala"
	g_slice_free (GalaScreenshotManagerScreenshotAreaData, _data_);
#line 1475 "ScreenshotManager.c"
}

void
gala_screenshot_manager_screenshot_area (GalaScreenshotManager* self,
                                         gint x,
                                         gint y,
                                         gint width,
                                         gint height,
                                         gboolean flash,
                                         const gchar* filename,
                                         GAsyncReadyCallback _callback_,
                                         gpointer _user_data_)
{
	GalaScreenshotManagerScreenshotAreaData* _data_;
	GalaScreenshotManager* _tmp0_;
	gchar* _tmp1_;
#line 23 "../src/ScreenshotManager.vala"
	g_return_if_fail (self != NULL);
#line 23 "../src/ScreenshotManager.vala"
	g_return_if_fail (filename != NULL);
#line 23 "../src/ScreenshotManager.vala"
	_data_ = g_slice_new0 (GalaScreenshotManagerScreenshotAreaData);
#line 23 "../src/ScreenshotManager.vala"
	_data_->_async_result = g_task_new (G_OBJECT (self), NULL, _callback_, _user_data_);
#line 23 "../src/ScreenshotManager.vala"
	g_task_set_task_data (_data_->_async_result, _data_, gala_screenshot_manager_screenshot_area_data_free);
#line 23 "../src/ScreenshotManager.vala"
	_tmp0_ = _g_object_ref0 (self);
#line 23 "../src/ScreenshotManager.vala"
	_data_->self = _tmp0_;
#line 23 "../src/ScreenshotManager.vala"
	_data_->x = x;
#line 23 "../src/ScreenshotManager.vala"
	_data_->y = y;
#line 23 "../src/ScreenshotManager.vala"
	_data_->width = width;
#line 23 "../src/ScreenshotManager.vala"
	_data_->height = height;
#line 23 "../src/ScreenshotManager.vala"
	_data_->flash = flash;
#line 23 "../src/ScreenshotManager.vala"
	_tmp1_ = g_strdup (filename);
#line 23 "../src/ScreenshotManager.vala"
	_g_free0 (_data_->filename);
#line 23 "../src/ScreenshotManager.vala"
	_data_->filename = _tmp1_;
#line 23 "../src/ScreenshotManager.vala"
	gala_screenshot_manager_screenshot_area_co (_data_);
#line 1524 "ScreenshotManager.c"
}

void
gala_screenshot_manager_screenshot_area_finish (GalaScreenshotManager* self,
                                                GAsyncResult* _res_,
                                                gboolean* success,
                                                gchar** filename_used,
                                                GError** error)
{
	GalaScreenshotManagerScreenshotAreaData* _data_;
#line 23 "../src/ScreenshotManager.vala"
	_data_ = g_task_propagate_pointer (G_TASK (_res_), error);
#line 23 "../src/ScreenshotManager.vala"
	if (NULL == _data_) {
#line 23 "../src/ScreenshotManager.vala"
		return;
#line 1541 "ScreenshotManager.c"
	}
#line 23 "../src/ScreenshotManager.vala"
	if (success) {
#line 23 "../src/ScreenshotManager.vala"
		*success = _data_->success;
#line 1547 "ScreenshotManager.c"
	}
#line 23 "../src/ScreenshotManager.vala"
	if (filename_used) {
#line 23 "../src/ScreenshotManager.vala"
		*filename_used = _data_->filename_used;
#line 1553 "ScreenshotManager.c"
	} else {
#line 23 "../src/ScreenshotManager.vala"
		_g_free0 (_data_->filename_used);
#line 1557 "ScreenshotManager.c"
	}
#line 23 "../src/ScreenshotManager.vala"
	_data_->filename_used = NULL;
#line 1561 "ScreenshotManager.c"
}

static void
gala_screenshot_manager_screenshot_area_ready (GObject* source_object,
                                               GAsyncResult* _res_,
                                               gpointer _user_data_)
{
	GalaScreenshotManagerScreenshotAreaData* _data_;
#line 107 "../src/ScreenshotManager.vala"
	_data_ = _user_data_;
#line 107 "../src/ScreenshotManager.vala"
	_data_->_source_object_ = source_object;
#line 107 "../src/ScreenshotManager.vala"
	_data_->_res_ = _res_;
#line 107 "../src/ScreenshotManager.vala"
	gala_screenshot_manager_screenshot_area_co (_data_);
#line 1578 "ScreenshotManager.c"
}

static gboolean
gala_screenshot_manager_screenshot_area_co (GalaScreenshotManagerScreenshotAreaData* _data_)
{
#line 106 "../src/ScreenshotManager.vala"
	switch (_data_->_state_) {
#line 106 "../src/ScreenshotManager.vala"
		case 0:
#line 1588 "ScreenshotManager.c"
		goto _state_0;
#line 106 "../src/ScreenshotManager.vala"
		case 1:
#line 1592 "ScreenshotManager.c"
		goto _state_1;
		default:
#line 106 "../src/ScreenshotManager.vala"
		g_assert_not_reached ();
#line 1597 "ScreenshotManager.c"
	}
	_state_0:
#line 107 "../src/ScreenshotManager.vala"
	_data_->_tmp0_ = FALSE;
#line 107 "../src/ScreenshotManager.vala"
	_data_->_tmp1_ = NULL;
#line 107 "../src/ScreenshotManager.vala"
	_data_->_state_ = 1;
#line 107 "../src/ScreenshotManager.vala"
	gala_screenshot_manager_screenshot_area_with_cursor (_data_->self, _data_->x, _data_->y, _data_->width, _data_->height, FALSE, _data_->flash, _data_->filename, gala_screenshot_manager_screenshot_area_ready, _data_);
#line 107 "../src/ScreenshotManager.vala"
	return FALSE;
#line 1610 "ScreenshotManager.c"
	_state_1:
#line 107 "../src/ScreenshotManager.vala"
	gala_screenshot_manager_screenshot_area_with_cursor_finish (_data_->self, _data_->_res_, &_data_->_tmp0_, &_data_->_tmp1_, &_data_->_inner_error0_);
#line 107 "../src/ScreenshotManager.vala"
	_data_->success = _data_->_tmp0_;
#line 107 "../src/ScreenshotManager.vala"
	_g_free0 (_data_->filename_used);
#line 107 "../src/ScreenshotManager.vala"
	_data_->filename_used = _data_->_tmp1_;
#line 107 "../src/ScreenshotManager.vala"
	if (G_UNLIKELY (_data_->_inner_error0_ != NULL)) {
#line 107 "../src/ScreenshotManager.vala"
		if ((_data_->_inner_error0_->domain == G_DBUS_ERROR) || (_data_->_inner_error0_->domain == G_IO_ERROR)) {
#line 107 "../src/ScreenshotManager.vala"
			g_task_return_error (_data_->_async_result, _data_->_inner_error0_);
#line 107 "../src/ScreenshotManager.vala"
			_g_free0 (_data_->filename_used);
#line 107 "../src/ScreenshotManager.vala"
			g_object_unref (_data_->_async_result);
#line 107 "../src/ScreenshotManager.vala"
			return FALSE;
#line 1632 "ScreenshotManager.c"
		} else {
#line 107 "../src/ScreenshotManager.vala"
			_g_free0 (_data_->filename_used);
#line 107 "../src/ScreenshotManager.vala"
			g_critical ("file %s: line %d: uncaught error: %s (%s, %d)", __FILE__, __LINE__, _data_->_inner_error0_->message, g_quark_to_string (_data_->_inner_error0_->domain), _data_->_inner_error0_->code);
#line 107 "../src/ScreenshotManager.vala"
			g_clear_error (&_data_->_inner_error0_);
#line 107 "../src/ScreenshotManager.vala"
			g_object_unref (_data_->_async_result);
#line 107 "../src/ScreenshotManager.vala"
			return FALSE;
#line 1644 "ScreenshotManager.c"
		}
	}
#line 106 "../src/ScreenshotManager.vala"
	g_task_return_pointer (_data_->_async_result, _data_, NULL);
#line 106 "../src/ScreenshotManager.vala"
	if (_data_->_state_ != 0) {
#line 106 "../src/ScreenshotManager.vala"
		while (!g_task_get_completed (_data_->_async_result)) {
#line 106 "../src/ScreenshotManager.vala"
			g_main_context_iteration (g_task_get_context (_data_->_async_result), TRUE);
#line 1655 "ScreenshotManager.c"
		}
	}
#line 106 "../src/ScreenshotManager.vala"
	g_object_unref (_data_->_async_result);
#line 106 "../src/ScreenshotManager.vala"
	return FALSE;
#line 1662 "ScreenshotManager.c"
}

static void
gala_screenshot_manager_screenshot_area_with_cursor_data_free (gpointer _data)
{
	GalaScreenshotManagerScreenshotAreaWithCursorData* _data_;
	_data_ = _data;
#line 23 "../src/ScreenshotManager.vala"
	_g_free0 (_data_->filename);
#line 23 "../src/ScreenshotManager.vala"
	_g_object_unref0 (_data_->self);
#line 23 "../src/ScreenshotManager.vala"
	g_slice_free (GalaScreenshotManagerScreenshotAreaWithCursorData, _data_);
#line 1676 "ScreenshotManager.c"
}

void
gala_screenshot_manager_screenshot_area_with_cursor (GalaScreenshotManager* self,
                                                     gint x,
                                                     gint y,
                                                     gint width,
                                                     gint height,
                                                     gboolean include_cursor,
                                                     gboolean flash,
                                                     const gchar* filename,
                                                     GAsyncReadyCallback _callback_,
                                                     gpointer _user_data_)
{
	GalaScreenshotManagerScreenshotAreaWithCursorData* _data_;
	GalaScreenshotManager* _tmp0_;
	gchar* _tmp1_;
#line 23 "../src/ScreenshotManager.vala"
	g_return_if_fail (self != NULL);
#line 23 "../src/ScreenshotManager.vala"
	g_return_if_fail (filename != NULL);
#line 23 "../src/ScreenshotManager.vala"
	_data_ = g_slice_new0 (GalaScreenshotManagerScreenshotAreaWithCursorData);
#line 23 "../src/ScreenshotManager.vala"
	_data_->_async_result = g_task_new (G_OBJECT (self), NULL, _callback_, _user_data_);
#line 23 "../src/ScreenshotManager.vala"
	g_task_set_task_data (_data_->_async_result, _data_, gala_screenshot_manager_screenshot_area_with_cursor_data_free);
#line 23 "../src/ScreenshotManager.vala"
	_tmp0_ = _g_object_ref0 (self);
#line 23 "../src/ScreenshotManager.vala"
	_data_->self = _tmp0_;
#line 23 "../src/ScreenshotManager.vala"
	_data_->x = x;
#line 23 "../src/ScreenshotManager.vala"
	_data_->y = y;
#line 23 "../src/ScreenshotManager.vala"
	_data_->width = width;
#line 23 "../src/ScreenshotManager.vala"
	_data_->height = height;
#line 23 "../src/ScreenshotManager.vala"
	_data_->include_cursor = include_cursor;
#line 23 "../src/ScreenshotManager.vala"
	_data_->flash = flash;
#line 23 "../src/ScreenshotManager.vala"
	_tmp1_ = g_strdup (filename);
#line 23 "../src/ScreenshotManager.vala"
	_g_free0 (_data_->filename);
#line 23 "../src/ScreenshotManager.vala"
	_data_->filename = _tmp1_;
#line 23 "../src/ScreenshotManager.vala"
	gala_screenshot_manager_screenshot_area_with_cursor_co (_data_);
#line 1728 "ScreenshotManager.c"
}

void
gala_screenshot_manager_screenshot_area_with_cursor_finish (GalaScreenshotManager* self,
                                                            GAsyncResult* _res_,
                                                            gboolean* success,
                                                            gchar** filename_used,
                                                            GError** error)
{
	GalaScreenshotManagerScreenshotAreaWithCursorData* _data_;
#line 23 "../src/ScreenshotManager.vala"
	_data_ = g_task_propagate_pointer (G_TASK (_res_), error);
#line 23 "../src/ScreenshotManager.vala"
	if (NULL == _data_) {
#line 23 "../src/ScreenshotManager.vala"
		return;
#line 1745 "ScreenshotManager.c"
	}
#line 23 "../src/ScreenshotManager.vala"
	if (success) {
#line 23 "../src/ScreenshotManager.vala"
		*success = _data_->success;
#line 1751 "ScreenshotManager.c"
	}
#line 23 "../src/ScreenshotManager.vala"
	if (filename_used) {
#line 23 "../src/ScreenshotManager.vala"
		*filename_used = _data_->filename_used;
#line 1757 "ScreenshotManager.c"
	} else {
#line 23 "../src/ScreenshotManager.vala"
		_g_free0 (_data_->filename_used);
#line 1761 "ScreenshotManager.c"
	}
#line 23 "../src/ScreenshotManager.vala"
	_data_->filename_used = NULL;
#line 1765 "ScreenshotManager.c"
}

static void
gala_screenshot_manager_screenshot_area_with_cursor_ready (GObject* source_object,
                                                           GAsyncResult* _res_,
                                                           gpointer _user_data_)
{
	GalaScreenshotManagerScreenshotAreaWithCursorData* _data_;
#line 113 "../src/ScreenshotManager.vala"
	_data_ = _user_data_;
#line 113 "../src/ScreenshotManager.vala"
	_data_->_source_object_ = source_object;
#line 113 "../src/ScreenshotManager.vala"
	_data_->_res_ = _res_;
#line 113 "../src/ScreenshotManager.vala"
	gala_screenshot_manager_screenshot_area_with_cursor_co (_data_);
#line 1782 "ScreenshotManager.c"
}

static gboolean
gala_screenshot_manager_screenshot_area_with_cursor_co (GalaScreenshotManagerScreenshotAreaWithCursorData* _data_)
{
#line 110 "../src/ScreenshotManager.vala"
	switch (_data_->_state_) {
#line 110 "../src/ScreenshotManager.vala"
		case 0:
#line 1792 "ScreenshotManager.c"
		goto _state_0;
#line 110 "../src/ScreenshotManager.vala"
		case 1:
#line 1796 "ScreenshotManager.c"
		goto _state_1;
#line 110 "../src/ScreenshotManager.vala"
		case 2:
#line 1800 "ScreenshotManager.c"
		goto _state_2;
		default:
#line 110 "../src/ScreenshotManager.vala"
		g_assert_not_reached ();
#line 1805 "ScreenshotManager.c"
	}
	_state_0:
#line 111 "../src/ScreenshotManager.vala"
	g_debug ("ScreenshotManager.vala:111: Taking area screenshot");
#line 113 "../src/ScreenshotManager.vala"
	_data_->_state_ = 1;
#line 113 "../src/ScreenshotManager.vala"
	gala_screenshot_manager_wait_stage_repaint (_data_->self, gala_screenshot_manager_screenshot_area_with_cursor_ready, _data_);
#line 113 "../src/ScreenshotManager.vala"
	return FALSE;
#line 1816 "ScreenshotManager.c"
	_state_1:
#line 113 "../src/ScreenshotManager.vala"
	gala_screenshot_manager_wait_stage_repaint_finish (_data_->self, _data_->_res_);
#line 115 "../src/ScreenshotManager.vala"
	_data_->_tmp0_ = gala_screenshot_manager_take_screenshot (_data_->self, _data_->x, _data_->y, _data_->width, _data_->height, _data_->include_cursor);
#line 115 "../src/ScreenshotManager.vala"
	_data_->image = _data_->_tmp0_;
#line 116 "../src/ScreenshotManager.vala"
	gala_screenshot_manager_unconceal_text (_data_->self);
#line 118 "../src/ScreenshotManager.vala"
	if (_data_->flash) {
#line 119 "../src/ScreenshotManager.vala"
		gala_screenshot_manager_flash_area (_data_->self, _data_->x, _data_->y, _data_->width, _data_->height, &_data_->_inner_error0_);
#line 119 "../src/ScreenshotManager.vala"
		if (G_UNLIKELY (_data_->_inner_error0_ != NULL)) {
#line 119 "../src/ScreenshotManager.vala"
			if ((_data_->_inner_error0_->domain == G_DBUS_ERROR) || (_data_->_inner_error0_->domain == G_IO_ERROR)) {
#line 119 "../src/ScreenshotManager.vala"
				g_task_return_error (_data_->_async_result, _data_->_inner_error0_);
#line 119 "../src/ScreenshotManager.vala"
				_cairo_surface_destroy0 (_data_->image);
#line 119 "../src/ScreenshotManager.vala"
				_g_free0 (_data_->filename_used);
#line 119 "../src/ScreenshotManager.vala"
				g_object_unref (_data_->_async_result);
#line 119 "../src/ScreenshotManager.vala"
				return FALSE;
#line 1844 "ScreenshotManager.c"
			} else {
#line 119 "../src/ScreenshotManager.vala"
				_cairo_surface_destroy0 (_data_->image);
#line 119 "../src/ScreenshotManager.vala"
				_g_free0 (_data_->filename_used);
#line 119 "../src/ScreenshotManager.vala"
				g_critical ("file %s: line %d: uncaught error: %s (%s, %d)", __FILE__, __LINE__, _data_->_inner_error0_->message, g_quark_to_string (_data_->_inner_error0_->domain), _data_->_inner_error0_->code);
#line 119 "../src/ScreenshotManager.vala"
				g_clear_error (&_data_->_inner_error0_);
#line 119 "../src/ScreenshotManager.vala"
				g_object_unref (_data_->_async_result);
#line 119 "../src/ScreenshotManager.vala"
				return FALSE;
#line 1858 "ScreenshotManager.c"
			}
		}
	}
#line 123 "../src/ScreenshotManager.vala"
	memset (&_data_->_tmp1_, 0, sizeof (MtkRectangle));
#line 123 "../src/ScreenshotManager.vala"
	_data_->_tmp1_.x = _data_->x;
#line 123 "../src/ScreenshotManager.vala"
	_data_->_tmp1_.y = _data_->y;
#line 123 "../src/ScreenshotManager.vala"
	_data_->_tmp1_.width = _data_->width;
#line 123 "../src/ScreenshotManager.vala"
	_data_->_tmp1_.height = _data_->height;
#line 123 "../src/ScreenshotManager.vala"
	_data_->rect = _data_->_tmp1_;
#line 127 "../src/ScreenshotManager.vala"
	_data_->_tmp2_ = _data_->self->priv->wm;
#line 127 "../src/ScreenshotManager.vala"
	_data_->_tmp3_ = meta_plugin_get_display ((MetaPlugin*) _data_->_tmp2_);
#line 127 "../src/ScreenshotManager.vala"
	_data_->display = _data_->_tmp3_;
#line 128 "../src/ScreenshotManager.vala"
	_data_->_tmp4_ = _data_->display;
#line 128 "../src/ScreenshotManager.vala"
	_data_->_tmp5_ = _data_->display;
#line 128 "../src/ScreenshotManager.vala"
	_data_->_tmp6_ = _data_->rect;
#line 128 "../src/ScreenshotManager.vala"
	_data_->scale = meta_display_get_monitor_scale (_data_->_tmp4_, meta_display_get_monitor_index_for_rect (_data_->_tmp5_, &_data_->_tmp6_));
#line 130 "../src/ScreenshotManager.vala"
	_data_->_tmp7_ = _data_->image;
#line 130 "../src/ScreenshotManager.vala"
	_data_->_tmp8_ = NULL;
#line 130 "../src/ScreenshotManager.vala"
	_data_->_state_ = 2;
#line 130 "../src/ScreenshotManager.vala"
	gala_screenshot_manager_save_image (_data_->_tmp7_, _data_->filename, _data_->scale, gala_screenshot_manager_screenshot_area_with_cursor_ready, _data_);
#line 130 "../src/ScreenshotManager.vala"
	return FALSE;
#line 1898 "ScreenshotManager.c"
	_state_2:
#line 130 "../src/ScreenshotManager.vala"
	_data_->_tmp9_ = gala_screenshot_manager_save_image_finish (_data_->_res_, &_data_->_tmp8_);
#line 130 "../src/ScreenshotManager.vala"
	_g_free0 (_data_->filename_used);
#line 130 "../src/ScreenshotManager.vala"
	_data_->filename_used = _data_->_tmp8_;
#line 130 "../src/ScreenshotManager.vala"
	_data_->success = _data_->_tmp9_;
#line 132 "../src/ScreenshotManager.vala"
	if (_data_->success) {
#line 133 "../src/ScreenshotManager.vala"
		gala_screenshot_manager_play_shutter_sound (_data_->self);
#line 1912 "ScreenshotManager.c"
	} else {
#line 135 "../src/ScreenshotManager.vala"
		_data_->_tmp10_ = g_error_new_literal (G_DBUS_ERROR, G_DBUS_ERROR_FAILED, "Failed to save image");
#line 135 "../src/ScreenshotManager.vala"
		_data_->_inner_error0_ = _data_->_tmp10_;
#line 135 "../src/ScreenshotManager.vala"
		if ((_data_->_inner_error0_->domain == G_DBUS_ERROR) || (_data_->_inner_error0_->domain == G_IO_ERROR)) {
#line 135 "../src/ScreenshotManager.vala"
			g_task_return_error (_data_->_async_result, _data_->_inner_error0_);
#line 135 "../src/ScreenshotManager.vala"
			_cairo_surface_destroy0 (_data_->image);
#line 135 "../src/ScreenshotManager.vala"
			_g_free0 (_data_->filename_used);
#line 135 "../src/ScreenshotManager.vala"
			g_object_unref (_data_->_async_result);
#line 135 "../src/ScreenshotManager.vala"
			return FALSE;
#line 1930 "ScreenshotManager.c"
		} else {
#line 135 "../src/ScreenshotManager.vala"
			_cairo_surface_destroy0 (_data_->image);
#line 135 "../src/ScreenshotManager.vala"
			_g_free0 (_data_->filename_used);
#line 135 "../src/ScreenshotManager.vala"
			g_critical ("file %s: line %d: uncaught error: %s (%s, %d)", __FILE__, __LINE__, _data_->_inner_error0_->message, g_quark_to_string (_data_->_inner_error0_->domain), _data_->_inner_error0_->code);
#line 135 "../src/ScreenshotManager.vala"
			g_clear_error (&_data_->_inner_error0_);
#line 135 "../src/ScreenshotManager.vala"
			g_object_unref (_data_->_async_result);
#line 135 "../src/ScreenshotManager.vala"
			return FALSE;
#line 1944 "ScreenshotManager.c"
		}
	}
#line 110 "../src/ScreenshotManager.vala"
	_cairo_surface_destroy0 (_data_->image);
#line 110 "../src/ScreenshotManager.vala"
	g_task_return_pointer (_data_->_async_result, _data_, NULL);
#line 110 "../src/ScreenshotManager.vala"
	if (_data_->_state_ != 0) {
#line 110 "../src/ScreenshotManager.vala"
		while (!g_task_get_completed (_data_->_async_result)) {
#line 110 "../src/ScreenshotManager.vala"
			g_main_context_iteration (g_task_get_context (_data_->_async_result), TRUE);
#line 1957 "ScreenshotManager.c"
		}
	}
#line 110 "../src/ScreenshotManager.vala"
	g_object_unref (_data_->_async_result);
#line 110 "../src/ScreenshotManager.vala"
	return FALSE;
#line 1964 "ScreenshotManager.c"
}

static void
gala_screenshot_manager_screenshot_window_data_free (gpointer _data)
{
	GalaScreenshotManagerScreenshotWindowData* _data_;
	_data_ = _data;
#line 23 "../src/ScreenshotManager.vala"
	_g_free0 (_data_->filename);
#line 23 "../src/ScreenshotManager.vala"
	_g_object_unref0 (_data_->self);
#line 23 "../src/ScreenshotManager.vala"
	g_slice_free (GalaScreenshotManagerScreenshotWindowData, _data_);
#line 1978 "ScreenshotManager.c"
}

void
gala_screenshot_manager_screenshot_window (GalaScreenshotManager* self,
                                           gboolean include_frame,
                                           gboolean include_cursor,
                                           gboolean flash,
                                           const gchar* filename,
                                           GAsyncReadyCallback _callback_,
                                           gpointer _user_data_)
{
	GalaScreenshotManagerScreenshotWindowData* _data_;
	GalaScreenshotManager* _tmp0_;
	gchar* _tmp1_;
#line 23 "../src/ScreenshotManager.vala"
	g_return_if_fail (self != NULL);
#line 23 "../src/ScreenshotManager.vala"
	g_return_if_fail (filename != NULL);
#line 23 "../src/ScreenshotManager.vala"
	_data_ = g_slice_new0 (GalaScreenshotManagerScreenshotWindowData);
#line 23 "../src/ScreenshotManager.vala"
	_data_->_async_result = g_task_new (G_OBJECT (self), NULL, _callback_, _user_data_);
#line 23 "../src/ScreenshotManager.vala"
	g_task_set_task_data (_data_->_async_result, _data_, gala_screenshot_manager_screenshot_window_data_free);
#line 23 "../src/ScreenshotManager.vala"
	_tmp0_ = _g_object_ref0 (self);
#line 23 "../src/ScreenshotManager.vala"
	_data_->self = _tmp0_;
#line 23 "../src/ScreenshotManager.vala"
	_data_->include_frame = include_frame;
#line 23 "../src/ScreenshotManager.vala"
	_data_->include_cursor = include_cursor;
#line 23 "../src/ScreenshotManager.vala"
	_data_->flash = flash;
#line 23 "../src/ScreenshotManager.vala"
	_tmp1_ = g_strdup (filename);
#line 23 "../src/ScreenshotManager.vala"
	_g_free0 (_data_->filename);
#line 23 "../src/ScreenshotManager.vala"
	_data_->filename = _tmp1_;
#line 23 "../src/ScreenshotManager.vala"
	gala_screenshot_manager_screenshot_window_co (_data_);
#line 2021 "ScreenshotManager.c"
}

void
gala_screenshot_manager_screenshot_window_finish (GalaScreenshotManager* self,
                                                  GAsyncResult* _res_,
                                                  gboolean* success,
                                                  gchar** filename_used,
                                                  GError** error)
{
	GalaScreenshotManagerScreenshotWindowData* _data_;
#line 23 "../src/ScreenshotManager.vala"
	_data_ = g_task_propagate_pointer (G_TASK (_res_), error);
#line 23 "../src/ScreenshotManager.vala"
	if (NULL == _data_) {
#line 23 "../src/ScreenshotManager.vala"
		return;
#line 2038 "ScreenshotManager.c"
	}
#line 23 "../src/ScreenshotManager.vala"
	if (success) {
#line 23 "../src/ScreenshotManager.vala"
		*success = _data_->success;
#line 2044 "ScreenshotManager.c"
	}
#line 23 "../src/ScreenshotManager.vala"
	if (filename_used) {
#line 23 "../src/ScreenshotManager.vala"
		*filename_used = _data_->filename_used;
#line 2050 "ScreenshotManager.c"
	} else {
#line 23 "../src/ScreenshotManager.vala"
		_g_free0 (_data_->filename_used);
#line 2054 "ScreenshotManager.c"
	}
#line 23 "../src/ScreenshotManager.vala"
	_data_->filename_used = NULL;
#line 2058 "ScreenshotManager.c"
}

static void
gala_screenshot_manager_screenshot_window_ready (GObject* source_object,
                                                 GAsyncResult* _res_,
                                                 gpointer _user_data_)
{
	GalaScreenshotManagerScreenshotWindowData* _data_;
#line 184 "../src/ScreenshotManager.vala"
	_data_ = _user_data_;
#line 184 "../src/ScreenshotManager.vala"
	_data_->_source_object_ = source_object;
#line 184 "../src/ScreenshotManager.vala"
	_data_->_res_ = _res_;
#line 184 "../src/ScreenshotManager.vala"
	gala_screenshot_manager_screenshot_window_co (_data_);
#line 2075 "ScreenshotManager.c"
}

static gboolean
gala_screenshot_manager_screenshot_window_co (GalaScreenshotManagerScreenshotWindowData* _data_)
{
#line 139 "../src/ScreenshotManager.vala"
	switch (_data_->_state_) {
#line 139 "../src/ScreenshotManager.vala"
		case 0:
#line 2085 "ScreenshotManager.c"
		goto _state_0;
#line 139 "../src/ScreenshotManager.vala"
		case 1:
#line 2089 "ScreenshotManager.c"
		goto _state_1;
		default:
#line 139 "../src/ScreenshotManager.vala"
		g_assert_not_reached ();
#line 2094 "ScreenshotManager.c"
	}
	_state_0:
#line 140 "../src/ScreenshotManager.vala"
	g_debug ("ScreenshotManager.vala:140: Taking window screenshot");
#line 142 "../src/ScreenshotManager.vala"
	_data_->_tmp0_ = _data_->self->priv->wm;
#line 142 "../src/ScreenshotManager.vala"
	_data_->_tmp1_ = meta_plugin_get_display ((MetaPlugin*) _data_->_tmp0_);
#line 142 "../src/ScreenshotManager.vala"
	_data_->_tmp2_ = meta_display_get_focus_window (_data_->_tmp1_);
#line 142 "../src/ScreenshotManager.vala"
	_data_->_tmp3_ = _g_object_ref0 (_data_->_tmp2_);
#line 142 "../src/ScreenshotManager.vala"
	_data_->window = _data_->_tmp3_;
#line 143 "../src/ScreenshotManager.vala"
	if (_data_->window == NULL) {
#line 144 "../src/ScreenshotManager.vala"
		gala_screenshot_manager_unconceal_text (_data_->self);
#line 145 "../src/ScreenshotManager.vala"
		_data_->_tmp4_ = g_error_new_literal (G_DBUS_ERROR, G_DBUS_ERROR_FAILED, "Cannot find active window");
#line 145 "../src/ScreenshotManager.vala"
		_data_->_inner_error0_ = _data_->_tmp4_;
#line 145 "../src/ScreenshotManager.vala"
		if ((_data_->_inner_error0_->domain == G_DBUS_ERROR) || (_data_->_inner_error0_->domain == G_IO_ERROR)) {
#line 145 "../src/ScreenshotManager.vala"
			g_task_return_error (_data_->_async_result, _data_->_inner_error0_);
#line 145 "../src/ScreenshotManager.vala"
			_g_object_unref0 (_data_->window);
#line 145 "../src/ScreenshotManager.vala"
			_g_free0 (_data_->filename_used);
#line 145 "../src/ScreenshotManager.vala"
			g_object_unref (_data_->_async_result);
#line 145 "../src/ScreenshotManager.vala"
			return FALSE;
#line 2129 "ScreenshotManager.c"
		} else {
#line 145 "../src/ScreenshotManager.vala"
			_g_object_unref0 (_data_->window);
#line 145 "../src/ScreenshotManager.vala"
			_g_free0 (_data_->filename_used);
#line 145 "../src/ScreenshotManager.vala"
			g_critical ("file %s: line %d: uncaught error: %s (%s, %d)", __FILE__, __LINE__, _data_->_inner_error0_->message, g_quark_to_string (_data_->_inner_error0_->domain), _data_->_inner_error0_->code);
#line 145 "../src/ScreenshotManager.vala"
			g_clear_error (&_data_->_inner_error0_);
#line 145 "../src/ScreenshotManager.vala"
			g_object_unref (_data_->_async_result);
#line 145 "../src/ScreenshotManager.vala"
			return FALSE;
#line 2143 "ScreenshotManager.c"
		}
	}
#line 148 "../src/ScreenshotManager.vala"
	_data_->_tmp5_ = meta_window_get_compositor_private (_data_->window);
#line 148 "../src/ScreenshotManager.vala"
	_data_->_tmp6_ = _g_object_ref0 (G_TYPE_CHECK_INSTANCE_CAST (_data_->_tmp5_, meta_window_actor_get_type (), MetaWindowActor));
#line 148 "../src/ScreenshotManager.vala"
	_data_->window_actor = _data_->_tmp6_;
#line 151 "../src/ScreenshotManager.vala"
	_data_->_tmp7_ = _data_->window_actor;
#line 151 "../src/ScreenshotManager.vala"
	_data_->_tmp8_ = 0.0F;
#line 151 "../src/ScreenshotManager.vala"
	_data_->_tmp9_ = 0.0F;
#line 151 "../src/ScreenshotManager.vala"
	clutter_actor_get_position ((ClutterActor*) _data_->_tmp7_, &_data_->_tmp8_, &_data_->_tmp9_);
#line 151 "../src/ScreenshotManager.vala"
	_data_->actor_x = _data_->_tmp8_;
#line 151 "../src/ScreenshotManager.vala"
	_data_->actor_y = _data_->_tmp9_;
#line 153 "../src/ScreenshotManager.vala"
	memset (&_data_->_tmp10_, 0, sizeof (MtkRectangle));
#line 153 "../src/ScreenshotManager.vala"
	meta_window_get_frame_rect (_data_->window, &_data_->_tmp10_);
#line 153 "../src/ScreenshotManager.vala"
	_data_->rect = _data_->_tmp10_;
#line 154 "../src/ScreenshotManager.vala"
	if (_data_->include_frame) {
#line 154 "../src/ScreenshotManager.vala"
		_data_->_tmp12_ = meta_window_is_client_decorated (_data_->window);
#line 2174 "ScreenshotManager.c"
	} else {
#line 154 "../src/ScreenshotManager.vala"
		_data_->_tmp12_ = FALSE;
#line 2178 "ScreenshotManager.c"
	}
#line 154 "../src/ScreenshotManager.vala"
	if (_data_->_tmp12_) {
#line 154 "../src/ScreenshotManager.vala"
		_data_->_tmp11_ = TRUE;
#line 2184 "ScreenshotManager.c"
	} else {
#line 155 "../src/ScreenshotManager.vala"
		if (!_data_->include_frame) {
#line 155 "../src/ScreenshotManager.vala"
			_data_->_tmp13_ = !meta_window_is_client_decorated (_data_->window);
#line 2190 "ScreenshotManager.c"
		} else {
#line 155 "../src/ScreenshotManager.vala"
			_data_->_tmp13_ = FALSE;
#line 2194 "ScreenshotManager.c"
		}
#line 155 "../src/ScreenshotManager.vala"
		_data_->_tmp11_ = _data_->_tmp13_;
#line 2198 "ScreenshotManager.c"
	}
#line 154 "../src/ScreenshotManager.vala"
	if (_data_->_tmp11_) {
#line 156 "../src/ScreenshotManager.vala"
		_data_->_tmp14_ = _data_->rect;
#line 156 "../src/ScreenshotManager.vala"
		memset (&_data_->_tmp15_, 0, sizeof (MtkRectangle));
#line 156 "../src/ScreenshotManager.vala"
		meta_window_frame_rect_to_client_rect (_data_->window, &_data_->_tmp14_, &_data_->_tmp15_);
#line 156 "../src/ScreenshotManager.vala"
		_data_->rect = _data_->_tmp15_;
#line 2210 "ScreenshotManager.c"
	}
#line 160 "../src/ScreenshotManager.vala"
	_data_->_tmp16_ = _data_->rect;
#line 160 "../src/ScreenshotManager.vala"
	_data_->_tmp17_ = _data_->rect;
#line 160 "../src/ScreenshotManager.vala"
	_data_->_tmp18_ = _data_->rect;
#line 160 "../src/ScreenshotManager.vala"
	_data_->_tmp19_ = _data_->rect;
#line 160 "../src/ScreenshotManager.vala"
	memset (&_data_->_tmp20_, 0, sizeof (MtkRectangle));
#line 160 "../src/ScreenshotManager.vala"
	_data_->_tmp20_.x = _data_->_tmp16_.x - ((gint) _data_->actor_x);
#line 160 "../src/ScreenshotManager.vala"
	_data_->_tmp20_.y = _data_->_tmp17_.y - ((gint) _data_->actor_y);
#line 160 "../src/ScreenshotManager.vala"
	_data_->_tmp20_.width = _data_->_tmp18_.width;
#line 160 "../src/ScreenshotManager.vala"
	_data_->_tmp20_.height = _data_->_tmp19_.height;
#line 160 "../src/ScreenshotManager.vala"
	_data_->clip = _data_->_tmp20_;
#line 164 "../src/ScreenshotManager.vala"
	_data_->_tmp21_ = _data_->window_actor;
#line 164 "../src/ScreenshotManager.vala"
	_data_->_tmp22_ = _data_->clip;
#line 164 "../src/ScreenshotManager.vala"
	_data_->_tmp23_ = meta_window_actor_get_image (_data_->_tmp21_, &_data_->_tmp22_);
#line 164 "../src/ScreenshotManager.vala"
	_data_->image = (cairo_surface_t*) _data_->_tmp23_;
#line 165 "../src/ScreenshotManager.vala"
	if (_data_->include_cursor) {
#line 166 "../src/ScreenshotManager.vala"
		if (meta_window_get_client_type (_data_->window) == META_WINDOW_CLIENT_TYPE_WAYLAND) {
#line 167 "../src/ScreenshotManager.vala"
			_data_->_tmp24_ = _data_->window_actor;
#line 167 "../src/ScreenshotManager.vala"
			_data_->resource_scale = clutter_actor_get_resource_scale ((ClutterActor*) _data_->_tmp24_);
#line 169 "../src/ScreenshotManager.vala"
			_data_->_tmp25_ = _data_->image;
#line 169 "../src/ScreenshotManager.vala"
			cairo_surface_set_device_scale (_data_->_tmp25_, (gdouble) _data_->resource_scale, (gdouble) _data_->resource_scale);
#line 2252 "ScreenshotManager.c"
		}
#line 172 "../src/ScreenshotManager.vala"
		_data_->_tmp26_ = _data_->image;
#line 172 "../src/ScreenshotManager.vala"
		_data_->_tmp27_ = _data_->rect;
#line 172 "../src/ScreenshotManager.vala"
		_data_->_tmp28_ = _data_->rect;
#line 172 "../src/ScreenshotManager.vala"
		_data_->_tmp29_ = _data_->rect;
#line 172 "../src/ScreenshotManager.vala"
		_data_->_tmp30_ = _data_->rect;
#line 172 "../src/ScreenshotManager.vala"
		memset (&_data_->_tmp31_, 0, sizeof (cairo_rectangle_int_t));
#line 172 "../src/ScreenshotManager.vala"
		_data_->_tmp31_.x = _data_->_tmp27_.x;
#line 172 "../src/ScreenshotManager.vala"
		_data_->_tmp31_.y = _data_->_tmp28_.y;
#line 172 "../src/ScreenshotManager.vala"
		_data_->_tmp31_.width = _data_->_tmp29_.width;
#line 172 "../src/ScreenshotManager.vala"
		_data_->_tmp31_.height = _data_->_tmp30_.height;
#line 172 "../src/ScreenshotManager.vala"
		_data_->_tmp32_ = gala_screenshot_manager_composite_stage_cursor (_data_->self, _data_->_tmp26_, &_data_->_tmp31_);
#line 172 "../src/ScreenshotManager.vala"
		_cairo_surface_destroy0 (_data_->image);
#line 172 "../src/ScreenshotManager.vala"
		_data_->image = _data_->_tmp32_;
#line 2280 "ScreenshotManager.c"
	}
#line 175 "../src/ScreenshotManager.vala"
	gala_screenshot_manager_unconceal_text (_data_->self);
#line 177 "../src/ScreenshotManager.vala"
	if (_data_->flash) {
#line 178 "../src/ScreenshotManager.vala"
		_data_->_tmp33_ = _data_->rect;
#line 178 "../src/ScreenshotManager.vala"
		_data_->_tmp34_ = _data_->rect;
#line 178 "../src/ScreenshotManager.vala"
		_data_->_tmp35_ = _data_->rect;
#line 178 "../src/ScreenshotManager.vala"
		_data_->_tmp36_ = _data_->rect;
#line 178 "../src/ScreenshotManager.vala"
		gala_screenshot_manager_flash_area (_data_->self, _data_->_tmp33_.x, _data_->_tmp34_.y, _data_->_tmp35_.width, _data_->_tmp36_.height, &_data_->_inner_error0_);
#line 178 "../src/ScreenshotManager.vala"
		if (G_UNLIKELY (_data_->_inner_error0_ != NULL)) {
#line 178 "../src/ScreenshotManager.vala"
			if ((_data_->_inner_error0_->domain == G_DBUS_ERROR) || (_data_->_inner_error0_->domain == G_IO_ERROR)) {
#line 178 "../src/ScreenshotManager.vala"
				g_task_return_error (_data_->_async_result, _data_->_inner_error0_);
#line 178 "../src/ScreenshotManager.vala"
				_cairo_surface_destroy0 (_data_->image);
#line 178 "../src/ScreenshotManager.vala"
				_g_object_unref0 (_data_->window_actor);
#line 178 "../src/ScreenshotManager.vala"
				_g_object_unref0 (_data_->window);
#line 178 "../src/ScreenshotManager.vala"
				_g_free0 (_data_->filename_used);
#line 178 "../src/ScreenshotManager.vala"
				g_object_unref (_data_->_async_result);
#line 178 "../src/ScreenshotManager.vala"
				return FALSE;
#line 2314 "ScreenshotManager.c"
			} else {
#line 178 "../src/ScreenshotManager.vala"
				_cairo_surface_destroy0 (_data_->image);
#line 178 "../src/ScreenshotManager.vala"
				_g_object_unref0 (_data_->window_actor);
#line 178 "../src/ScreenshotManager.vala"
				_g_object_unref0 (_data_->window);
#line 178 "../src/ScreenshotManager.vala"
				_g_free0 (_data_->filename_used);
#line 178 "../src/ScreenshotManager.vala"
				g_critical ("file %s: line %d: uncaught error: %s (%s, %d)", __FILE__, __LINE__, _data_->_inner_error0_->message, g_quark_to_string (_data_->_inner_error0_->domain), _data_->_inner_error0_->code);
#line 178 "../src/ScreenshotManager.vala"
				g_clear_error (&_data_->_inner_error0_);
#line 178 "../src/ScreenshotManager.vala"
				g_object_unref (_data_->_async_result);
#line 178 "../src/ScreenshotManager.vala"
				return FALSE;
#line 2332 "ScreenshotManager.c"
			}
		}
	}
#line 181 "../src/ScreenshotManager.vala"
	_data_->_tmp37_ = _data_->self->priv->wm;
#line 181 "../src/ScreenshotManager.vala"
	_data_->_tmp38_ = meta_plugin_get_display ((MetaPlugin*) _data_->_tmp37_);
#line 181 "../src/ScreenshotManager.vala"
	_data_->display = _data_->_tmp38_;
#line 182 "../src/ScreenshotManager.vala"
	_data_->_tmp39_ = _data_->display;
#line 182 "../src/ScreenshotManager.vala"
	_data_->_tmp40_ = _data_->display;
#line 182 "../src/ScreenshotManager.vala"
	_data_->_tmp41_ = _data_->rect;
#line 182 "../src/ScreenshotManager.vala"
	_data_->scale = meta_display_get_monitor_scale (_data_->_tmp39_, meta_display_get_monitor_index_for_rect (_data_->_tmp40_, &_data_->_tmp41_));
#line 184 "../src/ScreenshotManager.vala"
	_data_->_tmp42_ = _data_->image;
#line 184 "../src/ScreenshotManager.vala"
	_data_->_tmp43_ = NULL;
#line 184 "../src/ScreenshotManager.vala"
	_data_->_state_ = 1;
#line 184 "../src/ScreenshotManager.vala"
	gala_screenshot_manager_save_image (_data_->_tmp42_, _data_->filename, _data_->scale, gala_screenshot_manager_screenshot_window_ready, _data_);
#line 184 "../src/ScreenshotManager.vala"
	return FALSE;
#line 2360 "ScreenshotManager.c"
	_state_1:
#line 184 "../src/ScreenshotManager.vala"
	_data_->_tmp44_ = gala_screenshot_manager_save_image_finish (_data_->_res_, &_data_->_tmp43_);
#line 184 "../src/ScreenshotManager.vala"
	_g_free0 (_data_->filename_used);
#line 184 "../src/ScreenshotManager.vala"
	_data_->filename_used = _data_->_tmp43_;
#line 184 "../src/ScreenshotManager.vala"
	_data_->success = _data_->_tmp44_;
#line 186 "../src/ScreenshotManager.vala"
	if (_data_->success) {
#line 187 "../src/ScreenshotManager.vala"
		gala_screenshot_manager_play_shutter_sound (_data_->self);
#line 2374 "ScreenshotManager.c"
	}
#line 139 "../src/ScreenshotManager.vala"
	_cairo_surface_destroy0 (_data_->image);
#line 139 "../src/ScreenshotManager.vala"
	_g_object_unref0 (_data_->window_actor);
#line 139 "../src/ScreenshotManager.vala"
	_g_object_unref0 (_data_->window);
#line 139 "../src/ScreenshotManager.vala"
	g_task_return_pointer (_data_->_async_result, _data_, NULL);
#line 139 "../src/ScreenshotManager.vala"
	if (_data_->_state_ != 0) {
#line 139 "../src/ScreenshotManager.vala"
		while (!g_task_get_completed (_data_->_async_result)) {
#line 139 "../src/ScreenshotManager.vala"
			g_main_context_iteration (g_task_get_context (_data_->_async_result), TRUE);
#line 2390 "ScreenshotManager.c"
		}
	}
#line 139 "../src/ScreenshotManager.vala"
	g_object_unref (_data_->_async_result);
#line 139 "../src/ScreenshotManager.vala"
	return FALSE;
#line 2397 "ScreenshotManager.c"
}

static void
gala_screenshot_manager_select_area_data_free (gpointer _data)
{
	GalaScreenshotManagerSelectAreaData* _data_;
	_data_ = _data;
#line 23 "../src/ScreenshotManager.vala"
	_g_object_unref0 (_data_->self);
#line 23 "../src/ScreenshotManager.vala"
	g_slice_free (GalaScreenshotManagerSelectAreaData, _data_);
#line 2409 "ScreenshotManager.c"
}

void
gala_screenshot_manager_select_area (GalaScreenshotManager* self,
                                     GAsyncReadyCallback _callback_,
                                     gpointer _user_data_)
{
	GalaScreenshotManagerSelectAreaData* _data_;
	GalaScreenshotManager* _tmp0_;
#line 23 "../src/ScreenshotManager.vala"
	g_return_if_fail (self != NULL);
#line 23 "../src/ScreenshotManager.vala"
	_data_ = g_slice_new0 (GalaScreenshotManagerSelectAreaData);
#line 23 "../src/ScreenshotManager.vala"
	_data_->_async_result = g_task_new (G_OBJECT (self), NULL, _callback_, _user_data_);
#line 23 "../src/ScreenshotManager.vala"
	g_task_set_task_data (_data_->_async_result, _data_, gala_screenshot_manager_select_area_data_free);
#line 23 "../src/ScreenshotManager.vala"
	_tmp0_ = _g_object_ref0 (self);
#line 23 "../src/ScreenshotManager.vala"
	_data_->self = _tmp0_;
#line 23 "../src/ScreenshotManager.vala"
	gala_screenshot_manager_select_area_co (_data_);
#line 2433 "ScreenshotManager.c"
}

void
gala_screenshot_manager_select_area_finish (GalaScreenshotManager* self,
                                            GAsyncResult* _res_,
                                            gint* x,
                                            gint* y,
                                            gint* width,
                                            gint* height,
                                            GError** error)
{
	GalaScreenshotManagerSelectAreaData* _data_;
#line 23 "../src/ScreenshotManager.vala"
	_data_ = g_task_propagate_pointer (G_TASK (_res_), error);
#line 23 "../src/ScreenshotManager.vala"
	if (NULL == _data_) {
#line 23 "../src/ScreenshotManager.vala"
		return;
#line 2452 "ScreenshotManager.c"
	}
#line 23 "../src/ScreenshotManager.vala"
	if (x) {
#line 23 "../src/ScreenshotManager.vala"
		*x = _data_->x;
#line 2458 "ScreenshotManager.c"
	}
#line 23 "../src/ScreenshotManager.vala"
	if (y) {
#line 23 "../src/ScreenshotManager.vala"
		*y = _data_->y;
#line 2464 "ScreenshotManager.c"
	}
#line 23 "../src/ScreenshotManager.vala"
	if (width) {
#line 23 "../src/ScreenshotManager.vala"
		*width = _data_->width;
#line 2470 "ScreenshotManager.c"
	}
#line 23 "../src/ScreenshotManager.vala"
	if (height) {
#line 23 "../src/ScreenshotManager.vala"
		*height = _data_->height;
#line 2476 "ScreenshotManager.c"
	}
}

static Block5Data*
block5_data_ref (Block5Data* _data5_)
{
#line 191 "../src/ScreenshotManager.vala"
	g_atomic_int_inc (&_data5_->_ref_count_);
#line 191 "../src/ScreenshotManager.vala"
	return _data5_;
#line 2487 "ScreenshotManager.c"
}

static void
block5_data_unref (void * _userdata_)
{
	Block5Data* _data5_;
	_data5_ = (Block5Data*) _userdata_;
#line 191 "../src/ScreenshotManager.vala"
	if (g_atomic_int_dec_and_test (&_data5_->_ref_count_)) {
#line 2497 "ScreenshotManager.c"
		GalaScreenshotManager* self;
#line 191 "../src/ScreenshotManager.vala"
		self = _data5_->self;
#line 191 "../src/ScreenshotManager.vala"
		_g_object_unref0 (self);
#line 191 "../src/ScreenshotManager.vala"
		g_slice_free (Block5Data, _data5_);
#line 2505 "ScreenshotManager.c"
	}
}

static gboolean
_gala_screenshot_manager_select_area_co_gsource_func (gpointer self)
{
	gboolean result;
	result = gala_screenshot_manager_select_area_co (self);
#line 193 "../src/ScreenshotManager.vala"
	return result;
#line 2516 "ScreenshotManager.c"
}

static void
__lambda126_ (Block5Data* _data5_)
{
	GalaScreenshotManager* self;
#line 193 "../src/ScreenshotManager.vala"
	self = _data5_->self;
#line 193 "../src/ScreenshotManager.vala"
	g_idle_add_full (G_PRIORITY_DEFAULT_IDLE, _gala_screenshot_manager_select_area_co_gsource_func, _data5_->_async_data_, NULL);
#line 2527 "ScreenshotManager.c"
}

static void
___lambda126__gala_selection_area_closed (GalaSelectionArea* _sender,
                                          gpointer self)
{
#line 193 "../src/ScreenshotManager.vala"
	__lambda126_ (self);
#line 2536 "ScreenshotManager.c"
}

static void
gala_screenshot_manager_select_area_ready (GObject* source_object,
                                           GAsyncResult* _res_,
                                           gpointer _user_data_)
{
	GalaScreenshotManagerSelectAreaData* _data_;
#line 204 "../src/ScreenshotManager.vala"
	_data_ = _user_data_;
#line 204 "../src/ScreenshotManager.vala"
	_data_->_source_object_ = source_object;
#line 204 "../src/ScreenshotManager.vala"
	_data_->_res_ = _res_;
#line 204 "../src/ScreenshotManager.vala"
	gala_screenshot_manager_select_area_co (_data_);
#line 2553 "ScreenshotManager.c"
}

static gboolean
gala_screenshot_manager_select_area_co (GalaScreenshotManagerSelectAreaData* _data_)
{
#line 191 "../src/ScreenshotManager.vala"
	switch (_data_->_state_) {
#line 191 "../src/ScreenshotManager.vala"
		case 0:
#line 2563 "ScreenshotManager.c"
		goto _state_0;
#line 191 "../src/ScreenshotManager.vala"
		case 1:
#line 2567 "ScreenshotManager.c"
		goto _state_1;
#line 191 "../src/ScreenshotManager.vala"
		case 2:
#line 2571 "ScreenshotManager.c"
		goto _state_2;
		default:
#line 191 "../src/ScreenshotManager.vala"
		g_assert_not_reached ();
#line 2576 "ScreenshotManager.c"
	}
	_state_0:
#line 191 "../src/ScreenshotManager.vala"
	_data_->_data5_ = g_slice_new0 (Block5Data);
#line 191 "../src/ScreenshotManager.vala"
	_data_->_data5_->_ref_count_ = 1;
#line 191 "../src/ScreenshotManager.vala"
	_data_->_data5_->self = g_object_ref (_data_->self);
#line 191 "../src/ScreenshotManager.vala"
	_data_->_data5_->_async_data_ = _data_;
#line 192 "../src/ScreenshotManager.vala"
	_data_->_tmp0_ = _data_->self->priv->wm;
#line 192 "../src/ScreenshotManager.vala"
	_data_->_tmp1_ = gala_selection_area_new (_data_->_tmp0_);
#line 192 "../src/ScreenshotManager.vala"
	g_object_ref_sink (_data_->_tmp1_);
#line 192 "../src/ScreenshotManager.vala"
	_data_->selection_area = _data_->_tmp1_;
#line 193 "../src/ScreenshotManager.vala"
	_data_->_tmp2_ = _data_->selection_area;
#line 193 "../src/ScreenshotManager.vala"
	g_signal_connect_data (_data_->_tmp2_, "closed", (GCallback) ___lambda126__gala_selection_area_closed, block5_data_ref (_data_->_data5_), (GClosureNotify) block5_data_unref, 0);
#line 194 "../src/ScreenshotManager.vala"
	_data_->_tmp3_ = _data_->self->priv->wm;
#line 194 "../src/ScreenshotManager.vala"
	_data_->_tmp4_ = gala_window_manager_get_ui_group (_data_->_tmp3_);
#line 194 "../src/ScreenshotManager.vala"
	_data_->_tmp5_ = _data_->_tmp4_;
#line 194 "../src/ScreenshotManager.vala"
	_data_->_tmp6_ = _data_->selection_area;
#line 194 "../src/ScreenshotManager.vala"
	clutter_actor_add_child (_data_->_tmp5_, (ClutterActor*) _data_->_tmp6_);
#line 195 "../src/ScreenshotManager.vala"
	_data_->_tmp7_ = _data_->selection_area;
#line 195 "../src/ScreenshotManager.vala"
	gala_selection_area_start_selection (_data_->_tmp7_);
#line 197 "../src/ScreenshotManager.vala"
	_data_->_state_ = 1;
#line 197 "../src/ScreenshotManager.vala"
	return FALSE;
#line 2617 "ScreenshotManager.c"
	_state_1:
	;
#line 198 "../src/ScreenshotManager.vala"
	_data_->_tmp8_ = _data_->selection_area;
#line 198 "../src/ScreenshotManager.vala"
	clutter_actor_destroy ((ClutterActor*) _data_->_tmp8_);
#line 200 "../src/ScreenshotManager.vala"
	_data_->_tmp9_ = _data_->selection_area;
#line 200 "../src/ScreenshotManager.vala"
	_data_->_tmp10_ = gala_selection_area_get_cancelled (_data_->_tmp9_);
#line 200 "../src/ScreenshotManager.vala"
	_data_->_tmp11_ = _data_->_tmp10_;
#line 200 "../src/ScreenshotManager.vala"
	if (_data_->_tmp11_) {
#line 201 "../src/ScreenshotManager.vala"
		_data_->_tmp12_ = g_error_new_literal (G_IO_ERROR, G_IO_ERROR_CANCELLED, "Operation was cancelled");
#line 201 "../src/ScreenshotManager.vala"
		_data_->_inner_error0_ = _data_->_tmp12_;
#line 201 "../src/ScreenshotManager.vala"
		if ((_data_->_inner_error0_->domain == G_DBUS_ERROR) || (_data_->_inner_error0_->domain == G_IO_ERROR)) {
#line 201 "../src/ScreenshotManager.vala"
			g_task_return_error (_data_->_async_result, _data_->_inner_error0_);
#line 201 "../src/ScreenshotManager.vala"
			_g_object_unref0 (_data_->selection_area);
#line 201 "../src/ScreenshotManager.vala"
			block5_data_unref (_data_->_data5_);
#line 201 "../src/ScreenshotManager.vala"
			_data_->_data5_ = NULL;
#line 201 "../src/ScreenshotManager.vala"
			g_object_unref (_data_->_async_result);
#line 201 "../src/ScreenshotManager.vala"
			return FALSE;
#line 2650 "ScreenshotManager.c"
		} else {
#line 201 "../src/ScreenshotManager.vala"
			_g_object_unref0 (_data_->selection_area);
#line 201 "../src/ScreenshotManager.vala"
			block5_data_unref (_data_->_data5_);
#line 201 "../src/ScreenshotManager.vala"
			_data_->_data5_ = NULL;
#line 201 "../src/ScreenshotManager.vala"
			g_critical ("file %s: line %d: uncaught error: %s (%s, %d)", __FILE__, __LINE__, _data_->_inner_error0_->message, g_quark_to_string (_data_->_inner_error0_->domain), _data_->_inner_error0_->code);
#line 201 "../src/ScreenshotManager.vala"
			g_clear_error (&_data_->_inner_error0_);
#line 201 "../src/ScreenshotManager.vala"
			g_object_unref (_data_->_async_result);
#line 201 "../src/ScreenshotManager.vala"
			return FALSE;
#line 2666 "ScreenshotManager.c"
		}
	}
#line 204 "../src/ScreenshotManager.vala"
	_data_->_state_ = 2;
#line 204 "../src/ScreenshotManager.vala"
	gala_screenshot_manager_wait_stage_repaint (_data_->self, gala_screenshot_manager_select_area_ready, _data_);
#line 204 "../src/ScreenshotManager.vala"
	return FALSE;
#line 2675 "ScreenshotManager.c"
	_state_2:
#line 204 "../src/ScreenshotManager.vala"
	gala_screenshot_manager_wait_stage_repaint_finish (_data_->self, _data_->_res_);
#line 205 "../src/ScreenshotManager.vala"
	_data_->_tmp13_ = _data_->selection_area;
#line 205 "../src/ScreenshotManager.vala"
	memset (&_data_->_tmp14_, 0, sizeof (graphene_rect_t));
#line 205 "../src/ScreenshotManager.vala"
	gala_selection_area_get_selection_rectangle (_data_->_tmp13_, &_data_->_tmp14_);
#line 205 "../src/ScreenshotManager.vala"
	_data_->rect = _data_->_tmp14_;
#line 206 "../src/ScreenshotManager.vala"
	_data_->_tmp15_ = _data_->rect;
#line 206 "../src/ScreenshotManager.vala"
	_data_->_tmp16_ = _data_->_tmp15_.origin;
#line 206 "../src/ScreenshotManager.vala"
	_data_->x = (gint) roundf (_data_->_tmp16_.x);
#line 207 "../src/ScreenshotManager.vala"
	_data_->_tmp17_ = _data_->rect;
#line 207 "../src/ScreenshotManager.vala"
	_data_->_tmp18_ = _data_->_tmp17_.origin;
#line 207 "../src/ScreenshotManager.vala"
	_data_->y = (gint) roundf (_data_->_tmp18_.y);
#line 208 "../src/ScreenshotManager.vala"
	_data_->_tmp19_ = _data_->rect;
#line 208 "../src/ScreenshotManager.vala"
	_data_->_tmp20_ = _data_->_tmp19_.size;
#line 208 "../src/ScreenshotManager.vala"
	_data_->width = (gint) roundf (_data_->_tmp20_.width);
#line 209 "../src/ScreenshotManager.vala"
	_data_->_tmp21_ = _data_->rect;
#line 209 "../src/ScreenshotManager.vala"
	_data_->_tmp22_ = _data_->_tmp21_.size;
#line 209 "../src/ScreenshotManager.vala"
	_data_->height = (gint) roundf (_data_->_tmp22_.height);
#line 191 "../src/ScreenshotManager.vala"
	_g_object_unref0 (_data_->selection_area);
#line 191 "../src/ScreenshotManager.vala"
	block5_data_unref (_data_->_data5_);
#line 191 "../src/ScreenshotManager.vala"
	_data_->_data5_ = NULL;
#line 191 "../src/ScreenshotManager.vala"
	g_task_return_pointer (_data_->_async_result, _data_, NULL);
#line 191 "../src/ScreenshotManager.vala"
	if (_data_->_state_ != 0) {
#line 191 "../src/ScreenshotManager.vala"
		while (!g_task_get_completed (_data_->_async_result)) {
#line 191 "../src/ScreenshotManager.vala"
			g_main_context_iteration (g_task_get_context (_data_->_async_result), TRUE);
#line 2725 "ScreenshotManager.c"
		}
	}
#line 191 "../src/ScreenshotManager.vala"
	g_object_unref (_data_->_async_result);
#line 191 "../src/ScreenshotManager.vala"
	return FALSE;
#line 2732 "ScreenshotManager.c"
}

static void
gala_screenshot_manager_unconceal_text (GalaScreenshotManager* self)
{
	GSettings* _tmp0_;
	const gchar* _tmp1_;
	GSettings* _tmp2_;
	const gchar* _tmp3_;
	GSettings* _tmp4_;
	const gchar* _tmp5_;
#line 212 "../src/ScreenshotManager.vala"
	g_return_if_fail (self != NULL);
#line 213 "../src/ScreenshotManager.vala"
	if (self->priv->conceal_timeout == ((guint) 0)) {
#line 214 "../src/ScreenshotManager.vala"
		return;
#line 2750 "ScreenshotManager.c"
	}
#line 217 "../src/ScreenshotManager.vala"
	_tmp0_ = self->priv->desktop_settings;
#line 217 "../src/ScreenshotManager.vala"
	_tmp1_ = self->priv->prev_font_regular;
#line 217 "../src/ScreenshotManager.vala"
	g_settings_set_string (_tmp0_, "font-name", _tmp1_);
#line 218 "../src/ScreenshotManager.vala"
	_tmp2_ = self->priv->desktop_settings;
#line 218 "../src/ScreenshotManager.vala"
	_tmp3_ = self->priv->prev_font_mono;
#line 218 "../src/ScreenshotManager.vala"
	g_settings_set_string (_tmp2_, "monospace-font-name", _tmp3_);
#line 219 "../src/ScreenshotManager.vala"
	_tmp4_ = self->priv->desktop_settings;
#line 219 "../src/ScreenshotManager.vala"
	_tmp5_ = self->priv->prev_font_document;
#line 219 "../src/ScreenshotManager.vala"
	g_settings_set_string (_tmp4_, "document-font-name", _tmp5_);
#line 221 "../src/ScreenshotManager.vala"
	g_source_remove (self->priv->conceal_timeout);
#line 222 "../src/ScreenshotManager.vala"
	self->priv->conceal_timeout = (guint) 0;
#line 2774 "ScreenshotManager.c"
}

static void
gala_screenshot_manager_conceal_text_data_free (gpointer _data)
{
	GalaScreenshotManagerConcealTextData* _data_;
	_data_ = _data;
#line 23 "../src/ScreenshotManager.vala"
	_g_object_unref0 (_data_->self);
#line 23 "../src/ScreenshotManager.vala"
	g_slice_free (GalaScreenshotManagerConcealTextData, _data_);
#line 2786 "ScreenshotManager.c"
}

void
gala_screenshot_manager_conceal_text (GalaScreenshotManager* self,
                                      GAsyncReadyCallback _callback_,
                                      gpointer _user_data_)
{
	GalaScreenshotManagerConcealTextData* _data_;
	GalaScreenshotManager* _tmp0_;
#line 23 "../src/ScreenshotManager.vala"
	g_return_if_fail (self != NULL);
#line 23 "../src/ScreenshotManager.vala"
	_data_ = g_slice_new0 (GalaScreenshotManagerConcealTextData);
#line 23 "../src/ScreenshotManager.vala"
	_data_->_async_result = g_task_new (G_OBJECT (self), NULL, _callback_, _user_data_);
#line 23 "../src/ScreenshotManager.vala"
	g_task_set_task_data (_data_->_async_result, _data_, gala_screenshot_manager_conceal_text_data_free);
#line 23 "../src/ScreenshotManager.vala"
	_tmp0_ = _g_object_ref0 (self);
#line 23 "../src/ScreenshotManager.vala"
	_data_->self = _tmp0_;
#line 23 "../src/ScreenshotManager.vala"
	gala_screenshot_manager_conceal_text_co (_data_);
#line 2810 "ScreenshotManager.c"
}

void
gala_screenshot_manager_conceal_text_finish (GalaScreenshotManager* self,
                                             GAsyncResult* _res_,
                                             GError** error)
{
	GalaScreenshotManagerConcealTextData* _data_;
#line 23 "../src/ScreenshotManager.vala"
	_data_ = g_task_propagate_pointer (G_TASK (_res_), error);
#line 23 "../src/ScreenshotManager.vala"
	if (NULL == _data_) {
#line 23 "../src/ScreenshotManager.vala"
		return;
#line 2825 "ScreenshotManager.c"
	}
}

static gboolean
__lambda127_ (GalaScreenshotManager* self)
{
	gboolean result;
#line 239 "../src/ScreenshotManager.vala"
	gala_screenshot_manager_unconceal_text (self);
#line 240 "../src/ScreenshotManager.vala"
	result = G_SOURCE_REMOVE;
#line 240 "../src/ScreenshotManager.vala"
	return result;
#line 2839 "ScreenshotManager.c"
}

static gboolean
___lambda127__gsource_func (gpointer self)
{
	gboolean result;
	result = __lambda127_ ((GalaScreenshotManager*) self);
#line 238 "../src/ScreenshotManager.vala"
	return result;
#line 2849 "ScreenshotManager.c"
}

static gboolean
gala_screenshot_manager_conceal_text_co (GalaScreenshotManagerConcealTextData* _data_)
{
#line 225 "../src/ScreenshotManager.vala"
	switch (_data_->_state_) {
#line 225 "../src/ScreenshotManager.vala"
		case 0:
#line 2859 "ScreenshotManager.c"
		goto _state_0;
		default:
#line 225 "../src/ScreenshotManager.vala"
		g_assert_not_reached ();
#line 2864 "ScreenshotManager.c"
	}
	_state_0:
#line 226 "../src/ScreenshotManager.vala"
	if (_data_->self->priv->conceal_timeout > ((guint) 0)) {
#line 227 "../src/ScreenshotManager.vala"
		g_source_remove (_data_->self->priv->conceal_timeout);
#line 2871 "ScreenshotManager.c"
	} else {
#line 229 "../src/ScreenshotManager.vala"
		_data_->_tmp0_ = _data_->self->priv->desktop_settings;
#line 229 "../src/ScreenshotManager.vala"
		_data_->_tmp1_ = g_settings_get_string (_data_->_tmp0_, "font-name");
#line 229 "../src/ScreenshotManager.vala"
		_g_free0 (_data_->self->priv->prev_font_regular);
#line 229 "../src/ScreenshotManager.vala"
		_data_->self->priv->prev_font_regular = _data_->_tmp1_;
#line 230 "../src/ScreenshotManager.vala"
		_data_->_tmp2_ = _data_->self->priv->desktop_settings;
#line 230 "../src/ScreenshotManager.vala"
		_data_->_tmp3_ = g_settings_get_string (_data_->_tmp2_, "monospace-font-name");
#line 230 "../src/ScreenshotManager.vala"
		_g_free0 (_data_->self->priv->prev_font_mono);
#line 230 "../src/ScreenshotManager.vala"
		_data_->self->priv->prev_font_mono = _data_->_tmp3_;
#line 231 "../src/ScreenshotManager.vala"
		_data_->_tmp4_ = _data_->self->priv->desktop_settings;
#line 231 "../src/ScreenshotManager.vala"
		_data_->_tmp5_ = g_settings_get_string (_data_->_tmp4_, "document-font-name");
#line 231 "../src/ScreenshotManager.vala"
		_g_free0 (_data_->self->priv->prev_font_document);
#line 231 "../src/ScreenshotManager.vala"
		_data_->self->priv->prev_font_document = _data_->_tmp5_;
#line 233 "../src/ScreenshotManager.vala"
		_data_->_tmp6_ = _data_->self->priv->desktop_settings;
#line 233 "../src/ScreenshotManager.vala"
		g_settings_set_string (_data_->_tmp6_, "font-name", "Redacted Script Regular 9");
#line 234 "../src/ScreenshotManager.vala"
		_data_->_tmp7_ = _data_->self->priv->desktop_settings;
#line 234 "../src/ScreenshotManager.vala"
		g_settings_set_string (_data_->_tmp7_, "monospace-font-name", "Redacted Script Light 10");
#line 235 "../src/ScreenshotManager.vala"
		_data_->_tmp8_ = _data_->self->priv->desktop_settings;
#line 235 "../src/ScreenshotManager.vala"
		g_settings_set_string (_data_->_tmp8_, "document-font-name", "Redacted Script Regular 10");
#line 2909 "ScreenshotManager.c"
	}
#line 238 "../src/ScreenshotManager.vala"
	_data_->self->priv->conceal_timeout = g_timeout_add_full (G_PRIORITY_DEFAULT, (guint) GALA_UNCONCEAL_TEXT_TIMEOUT, ___lambda127__gsource_func, g_object_ref (_data_->self), g_object_unref);
#line 225 "../src/ScreenshotManager.vala"
	g_task_return_pointer (_data_->_async_result, _data_, NULL);
#line 225 "../src/ScreenshotManager.vala"
	if (_data_->_state_ != 0) {
#line 225 "../src/ScreenshotManager.vala"
		while (!g_task_get_completed (_data_->_async_result)) {
#line 225 "../src/ScreenshotManager.vala"
			g_main_context_iteration (g_task_get_context (_data_->_async_result), TRUE);
#line 2921 "ScreenshotManager.c"
		}
	}
#line 225 "../src/ScreenshotManager.vala"
	g_object_unref (_data_->_async_result);
#line 225 "../src/ScreenshotManager.vala"
	return FALSE;
#line 2928 "ScreenshotManager.c"
}

static void
gala_screenshot_manager_pick_color_data_free (gpointer _data)
{
	GalaScreenshotManagerPickColorData* _data_;
	_data_ = _data;
#line 23 "../src/ScreenshotManager.vala"
	_g_hash_table_unref0 (_data_->result);
#line 23 "../src/ScreenshotManager.vala"
	_g_object_unref0 (_data_->self);
#line 23 "../src/ScreenshotManager.vala"
	g_slice_free (GalaScreenshotManagerPickColorData, _data_);
#line 2942 "ScreenshotManager.c"
}

void
gala_screenshot_manager_pick_color (GalaScreenshotManager* self,
                                    GAsyncReadyCallback _callback_,
                                    gpointer _user_data_)
{
	GalaScreenshotManagerPickColorData* _data_;
	GalaScreenshotManager* _tmp0_;
#line 23 "../src/ScreenshotManager.vala"
	g_return_if_fail (self != NULL);
#line 23 "../src/ScreenshotManager.vala"
	_data_ = g_slice_new0 (GalaScreenshotManagerPickColorData);
#line 23 "../src/ScreenshotManager.vala"
	_data_->_async_result = g_task_new (G_OBJECT (self), NULL, _callback_, _user_data_);
#line 23 "../src/ScreenshotManager.vala"
	g_task_set_task_data (_data_->_async_result, _data_, gala_screenshot_manager_pick_color_data_free);
#line 23 "../src/ScreenshotManager.vala"
	_tmp0_ = _g_object_ref0 (self);
#line 23 "../src/ScreenshotManager.vala"
	_data_->self = _tmp0_;
#line 23 "../src/ScreenshotManager.vala"
	gala_screenshot_manager_pick_color_co (_data_);
#line 2966 "ScreenshotManager.c"
}

GHashTable*
gala_screenshot_manager_pick_color_finish (GalaScreenshotManager* self,
                                           GAsyncResult* _res_,
                                           GError** error)
{
	GHashTable* result;
	GalaScreenshotManagerPickColorData* _data_;
#line 23 "../src/ScreenshotManager.vala"
	_data_ = g_task_propagate_pointer (G_TASK (_res_), error);
#line 23 "../src/ScreenshotManager.vala"
	if (NULL == _data_) {
#line 23 "../src/ScreenshotManager.vala"
		return NULL;
#line 2982 "ScreenshotManager.c"
	}
#line 23 "../src/ScreenshotManager.vala"
	result = _data_->result;
#line 23 "../src/ScreenshotManager.vala"
	_data_->result = NULL;
#line 23 "../src/ScreenshotManager.vala"
	return result;
#line 2990 "ScreenshotManager.c"
}

static Block6Data*
block6_data_ref (Block6Data* _data6_)
{
#line 244 "../src/ScreenshotManager.vala"
	g_atomic_int_inc (&_data6_->_ref_count_);
#line 244 "../src/ScreenshotManager.vala"
	return _data6_;
#line 3000 "ScreenshotManager.c"
}

static void
block6_data_unref (void * _userdata_)
{
	Block6Data* _data6_;
	_data6_ = (Block6Data*) _userdata_;
#line 244 "../src/ScreenshotManager.vala"
	if (g_atomic_int_dec_and_test (&_data6_->_ref_count_)) {
#line 3010 "ScreenshotManager.c"
		GalaScreenshotManager* self;
#line 244 "../src/ScreenshotManager.vala"
		self = _data6_->self;
#line 244 "../src/ScreenshotManager.vala"
		_g_object_unref0 (self);
#line 244 "../src/ScreenshotManager.vala"
		g_slice_free (Block6Data, _data6_);
#line 3018 "ScreenshotManager.c"
	}
}

static gboolean
_gala_screenshot_manager_pick_color_co_gsource_func (gpointer self)
{
	gboolean result;
	result = gala_screenshot_manager_pick_color_co (self);
#line 246 "../src/ScreenshotManager.vala"
	return result;
#line 3029 "ScreenshotManager.c"
}

static void
__lambda128_ (Block6Data* _data6_)
{
	GalaScreenshotManager* self;
#line 246 "../src/ScreenshotManager.vala"
	self = _data6_->self;
#line 246 "../src/ScreenshotManager.vala"
	g_idle_add_full (G_PRIORITY_DEFAULT_IDLE, _gala_screenshot_manager_pick_color_co_gsource_func, _data6_->_async_data_, NULL);
#line 3040 "ScreenshotManager.c"
}

static void
___lambda128__gala_pixel_picker_closed (GalaPixelPicker* _sender,
                                        gpointer self)
{
#line 246 "../src/ScreenshotManager.vala"
	__lambda128_ (self);
#line 3049 "ScreenshotManager.c"
}

static void
_g_free0_ (gpointer var)
{
#line 280 "../src/ScreenshotManager.vala"
	var = (g_free (var), NULL);
#line 3057 "ScreenshotManager.c"
}

static void
_g_variant_unref0_ (gpointer var)
{
#line 280 "../src/ScreenshotManager.vala"
	(var == NULL) ? NULL : (var = (g_variant_unref (var), NULL));
#line 3065 "ScreenshotManager.c"
}

static gboolean
gala_screenshot_manager_pick_color_co (GalaScreenshotManagerPickColorData* _data_)
{
#line 244 "../src/ScreenshotManager.vala"
	switch (_data_->_state_) {
#line 244 "../src/ScreenshotManager.vala"
		case 0:
#line 3075 "ScreenshotManager.c"
		goto _state_0;
#line 244 "../src/ScreenshotManager.vala"
		case 1:
#line 3079 "ScreenshotManager.c"
		goto _state_1;
		default:
#line 244 "../src/ScreenshotManager.vala"
		g_assert_not_reached ();
#line 3084 "ScreenshotManager.c"
	}
	_state_0:
#line 244 "../src/ScreenshotManager.vala"
	_data_->_data6_ = g_slice_new0 (Block6Data);
#line 244 "../src/ScreenshotManager.vala"
	_data_->_data6_->_ref_count_ = 1;
#line 244 "../src/ScreenshotManager.vala"
	_data_->_data6_->self = g_object_ref (_data_->self);
#line 244 "../src/ScreenshotManager.vala"
	_data_->_data6_->_async_data_ = _data_;
#line 245 "../src/ScreenshotManager.vala"
	_data_->_tmp0_ = _data_->self->priv->wm;
#line 245 "../src/ScreenshotManager.vala"
	_data_->_tmp1_ = gala_pixel_picker_new (_data_->_tmp0_);
#line 245 "../src/ScreenshotManager.vala"
	g_object_ref_sink (_data_->_tmp1_);
#line 245 "../src/ScreenshotManager.vala"
	_data_->pixel_picker = _data_->_tmp1_;
#line 246 "../src/ScreenshotManager.vala"
	_data_->_tmp2_ = _data_->pixel_picker;
#line 246 "../src/ScreenshotManager.vala"
	g_signal_connect_data (_data_->_tmp2_, "closed", (GCallback) ___lambda128__gala_pixel_picker_closed, block6_data_ref (_data_->_data6_), (GClosureNotify) block6_data_unref, 0);
#line 247 "../src/ScreenshotManager.vala"
	_data_->_tmp3_ = _data_->self->priv->wm;
#line 247 "../src/ScreenshotManager.vala"
	_data_->_tmp4_ = gala_window_manager_get_ui_group (_data_->_tmp3_);
#line 247 "../src/ScreenshotManager.vala"
	_data_->_tmp5_ = _data_->_tmp4_;
#line 247 "../src/ScreenshotManager.vala"
	_data_->_tmp6_ = _data_->pixel_picker;
#line 247 "../src/ScreenshotManager.vala"
	clutter_actor_add_child (_data_->_tmp5_, (ClutterActor*) _data_->_tmp6_);
#line 248 "../src/ScreenshotManager.vala"
	_data_->_tmp7_ = _data_->pixel_picker;
#line 248 "../src/ScreenshotManager.vala"
	gala_pixel_picker_start_selection (_data_->_tmp7_);
#line 250 "../src/ScreenshotManager.vala"
	_data_->_state_ = 1;
#line 250 "../src/ScreenshotManager.vala"
	return FALSE;
#line 3125 "ScreenshotManager.c"
	_state_1:
	;
#line 251 "../src/ScreenshotManager.vala"
	_data_->_tmp8_ = _data_->pixel_picker;
#line 251 "../src/ScreenshotManager.vala"
	clutter_actor_destroy ((ClutterActor*) _data_->_tmp8_);
#line 253 "../src/ScreenshotManager.vala"
	_data_->_tmp9_ = _data_->pixel_picker;
#line 253 "../src/ScreenshotManager.vala"
	_data_->_tmp10_ = gala_pixel_picker_get_cancelled (_data_->_tmp9_);
#line 253 "../src/ScreenshotManager.vala"
	_data_->_tmp11_ = _data_->_tmp10_;
#line 253 "../src/ScreenshotManager.vala"
	if (_data_->_tmp11_) {
#line 254 "../src/ScreenshotManager.vala"
		_data_->_tmp12_ = g_error_new_literal (G_IO_ERROR, G_IO_ERROR_CANCELLED, "Operation was cancelled");
#line 254 "../src/ScreenshotManager.vala"
		_data_->_inner_error0_ = _data_->_tmp12_;
#line 254 "../src/ScreenshotManager.vala"
		if ((_data_->_inner_error0_->domain == G_DBUS_ERROR) || (_data_->_inner_error0_->domain == G_IO_ERROR)) {
#line 254 "../src/ScreenshotManager.vala"
			g_task_return_error (_data_->_async_result, _data_->_inner_error0_);
#line 254 "../src/ScreenshotManager.vala"
			_g_object_unref0 (_data_->pixel_picker);
#line 254 "../src/ScreenshotManager.vala"
			block6_data_unref (_data_->_data6_);
#line 254 "../src/ScreenshotManager.vala"
			_data_->_data6_ = NULL;
#line 254 "../src/ScreenshotManager.vala"
			g_object_unref (_data_->_async_result);
#line 254 "../src/ScreenshotManager.vala"
			return FALSE;
#line 3158 "ScreenshotManager.c"
		} else {
#line 254 "../src/ScreenshotManager.vala"
			_g_object_unref0 (_data_->pixel_picker);
#line 254 "../src/ScreenshotManager.vala"
			block6_data_unref (_data_->_data6_);
#line 254 "../src/ScreenshotManager.vala"
			_data_->_data6_ = NULL;
#line 254 "../src/ScreenshotManager.vala"
			g_critical ("file %s: line %d: uncaught error: %s (%s, %d)", __FILE__, __LINE__, _data_->_inner_error0_->message, g_quark_to_string (_data_->_inner_error0_->domain), _data_->_inner_error0_->code);
#line 254 "../src/ScreenshotManager.vala"
			g_clear_error (&_data_->_inner_error0_);
#line 254 "../src/ScreenshotManager.vala"
			g_object_unref (_data_->_async_result);
#line 254 "../src/ScreenshotManager.vala"
			return FALSE;
#line 3174 "ScreenshotManager.c"
		}
	}
#line 257 "../src/ScreenshotManager.vala"
	_data_->_tmp13_ = _data_->pixel_picker;
#line 257 "../src/ScreenshotManager.vala"
	memset (&_data_->_tmp14_, 0, sizeof (graphene_point_t));
#line 257 "../src/ScreenshotManager.vala"
	gala_pixel_picker_get_point (_data_->_tmp13_, &_data_->_tmp14_);
#line 257 "../src/ScreenshotManager.vala"
	_data_->_tmp15_ = _data_->_tmp14_;
#line 257 "../src/ScreenshotManager.vala"
	_data_->picker_point = _data_->_tmp15_;
#line 258 "../src/ScreenshotManager.vala"
	_data_->_tmp16_ = _data_->picker_point;
#line 258 "../src/ScreenshotManager.vala"
	_data_->_tmp17_ = _data_->picker_point;
#line 258 "../src/ScreenshotManager.vala"
	_data_->_tmp18_ = gala_screenshot_manager_take_screenshot (_data_->self, (gint) roundf (_data_->_tmp16_.x), (gint) roundf (_data_->_tmp17_.y), 1, 1, FALSE);
#line 258 "../src/ScreenshotManager.vala"
	_data_->image = _data_->_tmp18_;
#line 265 "../src/ScreenshotManager.vala"
	_data_->_tmp19_ = _data_->image;
#line 265 "../src/ScreenshotManager.vala"
	_vala_assert (cairo_image_surface_get_format (_data_->_tmp19_) == CAIRO_FORMAT_ARGB32, "image.get_format () == Cairo.Format.ARGB32");
#line 267 "../src/ScreenshotManager.vala"
	_data_->_tmp20_ = _data_->image;
#line 267 "../src/ScreenshotManager.vala"
	_data_->_tmp21_ = cairo_image_surface_get_data (_data_->_tmp20_);
#line 267 "../src/ScreenshotManager.vala"
	_data_->data = _data_->_tmp21_;
#line 267 "../src/ScreenshotManager.vala"
	_data_->data_length1 = -1;
#line 267 "../src/ScreenshotManager.vala"
	_data_->_data_size_ = _data_->data_length1;
#line 270 "../src/ScreenshotManager.vala"
	if (G_BYTE_ORDER == G_LITTLE_ENDIAN) {
#line 271 "../src/ScreenshotManager.vala"
		_data_->_tmp22_ = _data_->data;
#line 271 "../src/ScreenshotManager.vala"
		_data_->_tmp22__length1 = _data_->data_length1;
#line 271 "../src/ScreenshotManager.vala"
		_data_->_tmp23_ = _data_->_tmp22_[2];
#line 271 "../src/ScreenshotManager.vala"
		_data_->r = (gdouble) (_data_->_tmp23_ / 255.0f);
#line 272 "../src/ScreenshotManager.vala"
		_data_->_tmp24_ = _data_->data;
#line 272 "../src/ScreenshotManager.vala"
		_data_->_tmp24__length1 = _data_->data_length1;
#line 272 "../src/ScreenshotManager.vala"
		_data_->_tmp25_ = _data_->_tmp24_[1];
#line 272 "../src/ScreenshotManager.vala"
		_data_->g = (gdouble) (_data_->_tmp25_ / 255.0f);
#line 273 "../src/ScreenshotManager.vala"
		_data_->_tmp26_ = _data_->data;
#line 273 "../src/ScreenshotManager.vala"
		_data_->_tmp26__length1 = _data_->data_length1;
#line 273 "../src/ScreenshotManager.vala"
		_data_->_tmp27_ = _data_->_tmp26_[0];
#line 273 "../src/ScreenshotManager.vala"
		_data_->b = (gdouble) (_data_->_tmp27_ / 255.0f);
#line 3235 "ScreenshotManager.c"
	} else {
#line 275 "../src/ScreenshotManager.vala"
		_data_->_tmp28_ = _data_->data;
#line 275 "../src/ScreenshotManager.vala"
		_data_->_tmp28__length1 = _data_->data_length1;
#line 275 "../src/ScreenshotManager.vala"
		_data_->_tmp29_ = _data_->_tmp28_[1];
#line 275 "../src/ScreenshotManager.vala"
		_data_->r = (gdouble) (_data_->_tmp29_ / 255.0f);
#line 276 "../src/ScreenshotManager.vala"
		_data_->_tmp30_ = _data_->data;
#line 276 "../src/ScreenshotManager.vala"
		_data_->_tmp30__length1 = _data_->data_length1;
#line 276 "../src/ScreenshotManager.vala"
		_data_->_tmp31_ = _data_->_tmp30_[2];
#line 276 "../src/ScreenshotManager.vala"
		_data_->g = (gdouble) (_data_->_tmp31_ / 255.0f);
#line 277 "../src/ScreenshotManager.vala"
		_data_->_tmp32_ = _data_->data;
#line 277 "../src/ScreenshotManager.vala"
		_data_->_tmp32__length1 = _data_->data_length1;
#line 277 "../src/ScreenshotManager.vala"
		_data_->_tmp33_ = _data_->_tmp32_[3];
#line 277 "../src/ScreenshotManager.vala"
		_data_->b = (gdouble) (_data_->_tmp33_ / 255.0f);
#line 3261 "ScreenshotManager.c"
	}
#line 280 "../src/ScreenshotManager.vala"
	_data_->_tmp34_ = g_str_hash;
#line 280 "../src/ScreenshotManager.vala"
	_data_->_tmp35_ = g_str_equal;
#line 280 "../src/ScreenshotManager.vala"
	_data_->_tmp36_ = g_hash_table_new_full (_data_->_tmp34_, _data_->_tmp35_, _g_free0_, _g_variant_unref0_);
#line 280 "../src/ScreenshotManager.vala"
	_data_->_result_ = _data_->_tmp36_;
#line 281 "../src/ScreenshotManager.vala"
	_data_->_tmp37_ = g_strdup ("color");
#line 281 "../src/ScreenshotManager.vala"
	_data_->_tmp38_ = g_variant_new ("(ddd)", _data_->r, _data_->g, _data_->b, NULL);
#line 281 "../src/ScreenshotManager.vala"
	g_variant_ref_sink (_data_->_tmp38_);
#line 281 "../src/ScreenshotManager.vala"
	g_hash_table_insert (_data_->_result_, _data_->_tmp37_, _data_->_tmp38_);
#line 283 "../src/ScreenshotManager.vala"
	_data_->result = _data_->_result_;
#line 283 "../src/ScreenshotManager.vala"
	_cairo_surface_destroy0 (_data_->image);
#line 283 "../src/ScreenshotManager.vala"
	_g_object_unref0 (_data_->pixel_picker);
#line 283 "../src/ScreenshotManager.vala"
	block6_data_unref (_data_->_data6_);
#line 283 "../src/ScreenshotManager.vala"
	_data_->_data6_ = NULL;
#line 283 "../src/ScreenshotManager.vala"
	g_task_return_pointer (_data_->_async_result, _data_, NULL);
#line 283 "../src/ScreenshotManager.vala"
	if (_data_->_state_ != 0) {
#line 283 "../src/ScreenshotManager.vala"
		while (!g_task_get_completed (_data_->_async_result)) {
#line 283 "../src/ScreenshotManager.vala"
			g_main_context_iteration (g_task_get_context (_data_->_async_result), TRUE);
#line 3297 "ScreenshotManager.c"
		}
	}
#line 283 "../src/ScreenshotManager.vala"
	g_object_unref (_data_->_async_result);
#line 283 "../src/ScreenshotManager.vala"
	return FALSE;
#line 3304 "ScreenshotManager.c"
}

static gchar*
gala_screenshot_manager_find_target_path (void)
{
	const gchar* base_path = NULL;
	const gchar* _tmp0_;
	gboolean _tmp1_ = FALSE;
	const gchar* _tmp2_;
	const gchar* _tmp10_;
	gchar* _tmp11_;
	gchar* result;
#line 288 "../src/ScreenshotManager.vala"
	_tmp0_ = g_get_user_special_dir (G_USER_DIRECTORY_PICTURES);
#line 288 "../src/ScreenshotManager.vala"
	base_path = _tmp0_;
#line 289 "../src/ScreenshotManager.vala"
	_tmp2_ = base_path;
#line 289 "../src/ScreenshotManager.vala"
	if (_tmp2_ != NULL) {
#line 3325 "ScreenshotManager.c"
		const gchar* _tmp3_;
#line 289 "../src/ScreenshotManager.vala"
		_tmp3_ = base_path;
#line 289 "../src/ScreenshotManager.vala"
		_tmp1_ = g_file_test (_tmp3_, G_FILE_TEST_EXISTS);
#line 3331 "ScreenshotManager.c"
	} else {
#line 289 "../src/ScreenshotManager.vala"
		_tmp1_ = FALSE;
#line 3335 "ScreenshotManager.c"
	}
#line 289 "../src/ScreenshotManager.vala"
	if (_tmp1_) {
#line 3339 "ScreenshotManager.c"
		gchar* path = NULL;
		const gchar* _tmp4_;
		gchar* _tmp5_;
		const gchar* _tmp6_;
#line 290 "../src/ScreenshotManager.vala"
		_tmp4_ = base_path;
#line 290 "../src/ScreenshotManager.vala"
		_tmp5_ = g_build_path (G_DIR_SEPARATOR_S, _tmp4_, _ ("Screenshots"), NULL);
#line 290 "../src/ScreenshotManager.vala"
		path = _tmp5_;
#line 291 "../src/ScreenshotManager.vala"
		_tmp6_ = path;
#line 291 "../src/ScreenshotManager.vala"
		if (g_file_test (_tmp6_, G_FILE_TEST_EXISTS)) {
#line 292 "../src/ScreenshotManager.vala"
			result = path;
#line 292 "../src/ScreenshotManager.vala"
			return result;
#line 3358 "ScreenshotManager.c"
		} else {
			const gchar* _tmp7_;
#line 293 "../src/ScreenshotManager.vala"
			_tmp7_ = path;
#line 293 "../src/ScreenshotManager.vala"
			if (g_mkdir (_tmp7_, 0755) == 0) {
#line 294 "../src/ScreenshotManager.vala"
				result = path;
#line 294 "../src/ScreenshotManager.vala"
				return result;
#line 3369 "ScreenshotManager.c"
			} else {
				const gchar* _tmp8_;
				gchar* _tmp9_;
#line 296 "../src/ScreenshotManager.vala"
				_tmp8_ = base_path;
#line 296 "../src/ScreenshotManager.vala"
				_tmp9_ = g_strdup (_tmp8_);
#line 296 "../src/ScreenshotManager.vala"
				result = _tmp9_;
#line 296 "../src/ScreenshotManager.vala"
				_g_free0 (path);
#line 296 "../src/ScreenshotManager.vala"
				return result;
#line 3383 "ScreenshotManager.c"
			}
		}
#line 289 "../src/ScreenshotManager.vala"
		_g_free0 (path);
#line 3388 "ScreenshotManager.c"
	}
#line 300 "../src/ScreenshotManager.vala"
	_tmp10_ = g_get_home_dir ();
#line 300 "../src/ScreenshotManager.vala"
	_tmp11_ = g_strdup (_tmp10_);
#line 300 "../src/ScreenshotManager.vala"
	result = _tmp11_;
#line 300 "../src/ScreenshotManager.vala"
	return result;
#line 3398 "ScreenshotManager.c"
}

static void
gala_screenshot_manager_save_image_data_free (gpointer _data)
{
	GalaScreenshotManagerSaveImageData* _data_;
	_data_ = _data;
#line 23 "../src/ScreenshotManager.vala"
	_cairo_surface_destroy0 (_data_->image);
#line 23 "../src/ScreenshotManager.vala"
	_g_free0 (_data_->filename);
#line 23 "../src/ScreenshotManager.vala"
	g_slice_free (GalaScreenshotManagerSaveImageData, _data_);
#line 3412 "ScreenshotManager.c"
}

static gpointer
_cairo_surface_reference0 (gpointer self)
{
#line 23 "../src/ScreenshotManager.vala"
	return self ? cairo_surface_reference (self) : NULL;
#line 3420 "ScreenshotManager.c"
}

static void
gala_screenshot_manager_save_image (cairo_surface_t* image,
                                    const gchar* filename,
                                    gfloat scale,
                                    GAsyncReadyCallback _callback_,
                                    gpointer _user_data_)
{
	GalaScreenshotManagerSaveImageData* _data_;
	cairo_surface_t* _tmp0_;
	gchar* _tmp1_;
#line 23 "../src/ScreenshotManager.vala"
	g_return_if_fail (image != NULL);
#line 23 "../src/ScreenshotManager.vala"
	g_return_if_fail (filename != NULL);
#line 23 "../src/ScreenshotManager.vala"
	_data_ = g_slice_new0 (GalaScreenshotManagerSaveImageData);
#line 23 "../src/ScreenshotManager.vala"
	_data_->_async_result = g_task_new (NULL, NULL, _callback_, _user_data_);
#line 23 "../src/ScreenshotManager.vala"
	g_task_set_task_data (_data_->_async_result, _data_, gala_screenshot_manager_save_image_data_free);
#line 23 "../src/ScreenshotManager.vala"
	_tmp0_ = _cairo_surface_reference0 (image);
#line 23 "../src/ScreenshotManager.vala"
	_cairo_surface_destroy0 (_data_->image);
#line 23 "../src/ScreenshotManager.vala"
	_data_->image = _tmp0_;
#line 23 "../src/ScreenshotManager.vala"
	_tmp1_ = g_strdup (filename);
#line 23 "../src/ScreenshotManager.vala"
	_g_free0 (_data_->filename);
#line 23 "../src/ScreenshotManager.vala"
	_data_->filename = _tmp1_;
#line 23 "../src/ScreenshotManager.vala"
	_data_->scale = scale;
#line 23 "../src/ScreenshotManager.vala"
	gala_screenshot_manager_save_image_co (_data_);
#line 3459 "ScreenshotManager.c"
}

static gboolean
gala_screenshot_manager_save_image_finish (GAsyncResult* _res_,
                                           gchar** used_filename)
{
	gboolean result;
	GalaScreenshotManagerSaveImageData* _data_;
#line 23 "../src/ScreenshotManager.vala"
	_data_ = g_task_propagate_pointer (G_TASK (_res_), NULL);
#line 23 "../src/ScreenshotManager.vala"
	if (used_filename) {
#line 23 "../src/ScreenshotManager.vala"
		*used_filename = _data_->used_filename;
#line 3474 "ScreenshotManager.c"
	} else {
#line 23 "../src/ScreenshotManager.vala"
		_g_free0 (_data_->used_filename);
#line 3478 "ScreenshotManager.c"
	}
#line 23 "../src/ScreenshotManager.vala"
	_data_->used_filename = NULL;
#line 23 "../src/ScreenshotManager.vala"
	result = _data_->result;
#line 23 "../src/ScreenshotManager.vala"
	return result;
#line 3486 "ScreenshotManager.c"
}

static void
gala_screenshot_manager_save_image_ready (GObject* source_object,
                                          GAsyncResult* _res_,
                                          gpointer _user_data_)
{
	GalaScreenshotManagerSaveImageData* _data_;
#line 305 "../src/ScreenshotManager.vala"
	_data_ = _user_data_;
#line 305 "../src/ScreenshotManager.vala"
	_data_->_source_object_ = source_object;
#line 305 "../src/ScreenshotManager.vala"
	_data_->_res_ = _res_;
#line 305 "../src/ScreenshotManager.vala"
	gala_screenshot_manager_save_image_co (_data_);
#line 3503 "ScreenshotManager.c"
}

static gboolean
gala_screenshot_manager_save_image_co (GalaScreenshotManagerSaveImageData* _data_)
{
#line 303 "../src/ScreenshotManager.vala"
	switch (_data_->_state_) {
#line 303 "../src/ScreenshotManager.vala"
		case 0:
#line 3513 "ScreenshotManager.c"
		goto _state_0;
#line 303 "../src/ScreenshotManager.vala"
		case 1:
#line 3517 "ScreenshotManager.c"
		goto _state_1;
		default:
#line 303 "../src/ScreenshotManager.vala"
		g_assert_not_reached ();
#line 3522 "ScreenshotManager.c"
	}
	_state_0:
#line 304 "../src/ScreenshotManager.vala"
	if (g_strcmp0 (_data_->filename, "") != 0) {
#line 305 "../src/ScreenshotManager.vala"
		_data_->_tmp1_ = NULL;
#line 305 "../src/ScreenshotManager.vala"
		_data_->_state_ = 1;
#line 305 "../src/ScreenshotManager.vala"
		gala_screenshot_manager_save_image_to_file (_data_->image, _data_->filename, _data_->scale, gala_screenshot_manager_save_image_ready, _data_);
#line 305 "../src/ScreenshotManager.vala"
		return FALSE;
#line 3535 "ScreenshotManager.c"
		_state_1:
#line 305 "../src/ScreenshotManager.vala"
		_data_->_tmp2_ = gala_screenshot_manager_save_image_to_file_finish (_data_->_res_, &_data_->_tmp1_);
#line 305 "../src/ScreenshotManager.vala"
		_g_free0 (_data_->used_filename);
#line 305 "../src/ScreenshotManager.vala"
		_data_->used_filename = _data_->_tmp1_;
#line 305 "../src/ScreenshotManager.vala"
		_data_->_tmp0_ = _data_->_tmp2_;
#line 3545 "ScreenshotManager.c"
	} else {
#line 306 "../src/ScreenshotManager.vala"
		_data_->_tmp3_ = NULL;
#line 306 "../src/ScreenshotManager.vala"
		_data_->_tmp4_ = gala_screenshot_manager_save_image_to_clipboard (_data_->image, _data_->filename, &_data_->_tmp3_);
#line 306 "../src/ScreenshotManager.vala"
		_g_free0 (_data_->used_filename);
#line 306 "../src/ScreenshotManager.vala"
		_data_->used_filename = _data_->_tmp3_;
#line 306 "../src/ScreenshotManager.vala"
		_data_->_tmp0_ = _data_->_tmp4_;
#line 3557 "ScreenshotManager.c"
	}
#line 304 "../src/ScreenshotManager.vala"
	_data_->result = _data_->_tmp0_;
#line 304 "../src/ScreenshotManager.vala"
	g_task_return_pointer (_data_->_async_result, _data_, NULL);
#line 304 "../src/ScreenshotManager.vala"
	if (_data_->_state_ != 0) {
#line 304 "../src/ScreenshotManager.vala"
		while (!g_task_get_completed (_data_->_async_result)) {
#line 304 "../src/ScreenshotManager.vala"
			g_main_context_iteration (g_task_get_context (_data_->_async_result), TRUE);
#line 3569 "ScreenshotManager.c"
		}
	}
#line 304 "../src/ScreenshotManager.vala"
	g_object_unref (_data_->_async_result);
#line 304 "../src/ScreenshotManager.vala"
	return FALSE;
#line 3576 "ScreenshotManager.c"
}

static void
gala_screenshot_manager_save_image_to_file_data_free (gpointer _data)
{
	GalaScreenshotManagerSaveImageToFileData* _data_;
	_data_ = _data;
#line 23 "../src/ScreenshotManager.vala"
	_cairo_surface_destroy0 (_data_->image);
#line 23 "../src/ScreenshotManager.vala"
	_g_free0 (_data_->filename);
#line 23 "../src/ScreenshotManager.vala"
	g_slice_free (GalaScreenshotManagerSaveImageToFileData, _data_);
#line 3590 "ScreenshotManager.c"
}

static void
gala_screenshot_manager_save_image_to_file (cairo_surface_t* image,
                                            const gchar* filename,
                                            gfloat scale,
                                            GAsyncReadyCallback _callback_,
                                            gpointer _user_data_)
{
	GalaScreenshotManagerSaveImageToFileData* _data_;
	cairo_surface_t* _tmp0_;
	gchar* _tmp1_;
#line 23 "../src/ScreenshotManager.vala"
	g_return_if_fail (image != NULL);
#line 23 "../src/ScreenshotManager.vala"
	g_return_if_fail (filename != NULL);
#line 23 "../src/ScreenshotManager.vala"
	_data_ = g_slice_new0 (GalaScreenshotManagerSaveImageToFileData);
#line 23 "../src/ScreenshotManager.vala"
	_data_->_async_result = g_task_new (NULL, NULL, _callback_, _user_data_);
#line 23 "../src/ScreenshotManager.vala"
	g_task_set_task_data (_data_->_async_result, _data_, gala_screenshot_manager_save_image_to_file_data_free);
#line 23 "../src/ScreenshotManager.vala"
	_tmp0_ = _cairo_surface_reference0 (image);
#line 23 "../src/ScreenshotManager.vala"
	_cairo_surface_destroy0 (_data_->image);
#line 23 "../src/ScreenshotManager.vala"
	_data_->image = _tmp0_;
#line 23 "../src/ScreenshotManager.vala"
	_tmp1_ = g_strdup (filename);
#line 23 "../src/ScreenshotManager.vala"
	_g_free0 (_data_->filename);
#line 23 "../src/ScreenshotManager.vala"
	_data_->filename = _tmp1_;
#line 23 "../src/ScreenshotManager.vala"
	_data_->scale = scale;
#line 23 "../src/ScreenshotManager.vala"
	gala_screenshot_manager_save_image_to_file_co (_data_);
#line 3629 "ScreenshotManager.c"
}

static gboolean
gala_screenshot_manager_save_image_to_file_finish (GAsyncResult* _res_,
                                                   gchar** used_filename)
{
	gboolean result;
	GalaScreenshotManagerSaveImageToFileData* _data_;
#line 23 "../src/ScreenshotManager.vala"
	_data_ = g_task_propagate_pointer (G_TASK (_res_), NULL);
#line 23 "../src/ScreenshotManager.vala"
	if (used_filename) {
#line 23 "../src/ScreenshotManager.vala"
		*used_filename = _data_->used_filename;
#line 3644 "ScreenshotManager.c"
	} else {
#line 23 "../src/ScreenshotManager.vala"
		_g_free0 (_data_->used_filename);
#line 3648 "ScreenshotManager.c"
	}
#line 23 "../src/ScreenshotManager.vala"
	_data_->used_filename = NULL;
#line 23 "../src/ScreenshotManager.vala"
	result = _data_->result;
#line 23 "../src/ScreenshotManager.vala"
	return result;
#line 3656 "ScreenshotManager.c"
}

static gchar*
string_splice (const gchar* self,
               glong start,
               glong end,
               const gchar* str)
{
	glong string_length = 0L;
	gint _tmp0_;
	gint _tmp1_;
	gboolean _tmp2_ = FALSE;
	gboolean _tmp3_ = FALSE;
	gsize str_size = 0UL;
	const gchar* _result_ = NULL;
	void* _tmp6_;
	gchar* dest = NULL;
	const gchar* _tmp7_;
	gchar* _tmp8_;
	gchar* _tmp9_;
	gchar* _tmp12_;
	const gchar* _tmp13_;
	gchar* result;
#line 1548 "glib-2.0.vapi"
	g_return_val_if_fail (self != NULL, NULL);
#line 1549 "glib-2.0.vapi"
	_tmp0_ = strlen (self);
#line 1549 "glib-2.0.vapi"
	_tmp1_ = _tmp0_;
#line 1549 "glib-2.0.vapi"
	string_length = (glong) _tmp1_;
#line 1550 "glib-2.0.vapi"
	if (start < ((glong) 0)) {
#line 1551 "glib-2.0.vapi"
		start = string_length + start;
#line 3692 "ScreenshotManager.c"
	}
#line 1553 "glib-2.0.vapi"
	if (end < ((glong) 0)) {
#line 1554 "glib-2.0.vapi"
		end = string_length + end;
#line 3698 "ScreenshotManager.c"
	}
#line 1556 "glib-2.0.vapi"
	if (start >= ((glong) 0)) {
#line 1556 "glib-2.0.vapi"
		_tmp2_ = start <= string_length;
#line 3704 "ScreenshotManager.c"
	} else {
#line 1556 "glib-2.0.vapi"
		_tmp2_ = FALSE;
#line 3708 "ScreenshotManager.c"
	}
#line 1556 "glib-2.0.vapi"
	g_return_val_if_fail (_tmp2_, NULL);
#line 1557 "glib-2.0.vapi"
	if (end >= ((glong) 0)) {
#line 1557 "glib-2.0.vapi"
		_tmp3_ = end <= string_length;
#line 3716 "ScreenshotManager.c"
	} else {
#line 1557 "glib-2.0.vapi"
		_tmp3_ = FALSE;
#line 3720 "ScreenshotManager.c"
	}
#line 1557 "glib-2.0.vapi"
	g_return_val_if_fail (_tmp3_, NULL);
#line 1558 "glib-2.0.vapi"
	g_return_val_if_fail (start <= end, NULL);
#line 1561 "glib-2.0.vapi"
	if (str == NULL) {
#line 1562 "glib-2.0.vapi"
		str_size = (gsize) 0;
#line 3730 "ScreenshotManager.c"
	} else {
		gint _tmp4_;
		gint _tmp5_;
#line 1564 "glib-2.0.vapi"
		_tmp4_ = strlen ((const gchar*) str);
#line 1564 "glib-2.0.vapi"
		_tmp5_ = _tmp4_;
#line 1564 "glib-2.0.vapi"
		str_size = (gsize) _tmp5_;
#line 3740 "ScreenshotManager.c"
	}
#line 1567 "glib-2.0.vapi"
	_tmp6_ = g_malloc0 (((string_length - (end - start)) + str_size) + 1);
#line 1567 "glib-2.0.vapi"
	_result_ = _tmp6_;
#line 1569 "glib-2.0.vapi"
	_tmp7_ = _result_;
#line 1569 "glib-2.0.vapi"
	dest = (gchar*) _tmp7_;
#line 1571 "glib-2.0.vapi"
	_tmp8_ = dest;
#line 1571 "glib-2.0.vapi"
	memcpy (_tmp8_, self, (gsize) start);
#line 1572 "glib-2.0.vapi"
	_tmp9_ = dest;
#line 1572 "glib-2.0.vapi"
	dest = _tmp9_ + start;
#line 1574 "glib-2.0.vapi"
	if (str != NULL) {
#line 3760 "ScreenshotManager.c"
		gchar* _tmp10_;
		gchar* _tmp11_;
#line 1575 "glib-2.0.vapi"
		_tmp10_ = dest;
#line 1575 "glib-2.0.vapi"
		memcpy (_tmp10_, str, str_size);
#line 1576 "glib-2.0.vapi"
		_tmp11_ = dest;
#line 1576 "glib-2.0.vapi"
		dest = _tmp11_ + str_size;
#line 3771 "ScreenshotManager.c"
	}
#line 1579 "glib-2.0.vapi"
	_tmp12_ = dest;
#line 1579 "glib-2.0.vapi"
	memcpy (_tmp12_, ((gchar*) self) + end, (gsize) (string_length - end));
#line 1581 "glib-2.0.vapi"
	_tmp13_ = _result_;
#line 1581 "glib-2.0.vapi"
	_result_ = NULL;
#line 1581 "glib-2.0.vapi"
	result = (gchar*) _tmp13_;
#line 1581 "glib-2.0.vapi"
	return result;
#line 3785 "ScreenshotManager.c"
}

static void
gala_screenshot_manager_save_image_to_file_ready (GObject* source_object,
                                                  GAsyncResult* _res_,
                                                  gpointer _user_data_)
{
	GalaScreenshotManagerSaveImageToFileData* _data_;
#line 333 "../src/ScreenshotManager.vala"
	_data_ = _user_data_;
#line 333 "../src/ScreenshotManager.vala"
	_data_->_source_object_ = source_object;
#line 333 "../src/ScreenshotManager.vala"
	_data_->_res_ = _res_;
#line 333 "../src/ScreenshotManager.vala"
	gala_screenshot_manager_save_image_to_file_co (_data_);
#line 3802 "ScreenshotManager.c"
}

static gboolean
gala_screenshot_manager_save_image_to_file_co (GalaScreenshotManagerSaveImageToFileData* _data_)
{
#line 309 "../src/ScreenshotManager.vala"
	switch (_data_->_state_) {
#line 309 "../src/ScreenshotManager.vala"
		case 0:
#line 3812 "ScreenshotManager.c"
		goto _state_0;
#line 309 "../src/ScreenshotManager.vala"
		case 1:
#line 3816 "ScreenshotManager.c"
		goto _state_1;
#line 309 "../src/ScreenshotManager.vala"
		case 2:
#line 3820 "ScreenshotManager.c"
		goto _state_2;
#line 309 "../src/ScreenshotManager.vala"
		case 3:
#line 3824 "ScreenshotManager.c"
		goto _state_3;
		default:
#line 309 "../src/ScreenshotManager.vala"
		g_assert_not_reached ();
#line 3829 "ScreenshotManager.c"
	}
	_state_0:
#line 310 "../src/ScreenshotManager.vala"
	_data_->_tmp0_ = g_strdup (_data_->filename);
#line 310 "../src/ScreenshotManager.vala"
	_g_free0 (_data_->used_filename);
#line 310 "../src/ScreenshotManager.vala"
	_data_->used_filename = _data_->_tmp0_;
#line 314 "../src/ScreenshotManager.vala"
	_data_->_tmp1_ = _data_->used_filename;
#line 314 "../src/ScreenshotManager.vala"
	if (!g_path_is_absolute (_data_->_tmp1_)) {
#line 315 "../src/ScreenshotManager.vala"
		_data_->_tmp2_ = _data_->used_filename;
#line 315 "../src/ScreenshotManager.vala"
		if (!g_str_has_suffix (_data_->_tmp2_, GALA_EXTENSION)) {
#line 316 "../src/ScreenshotManager.vala"
			_data_->_tmp3_ = _data_->used_filename;
#line 316 "../src/ScreenshotManager.vala"
			_data_->_tmp4_ = g_strconcat (_data_->_tmp3_, GALA_EXTENSION, NULL);
#line 316 "../src/ScreenshotManager.vala"
			_g_free0 (_data_->used_filename);
#line 316 "../src/ScreenshotManager.vala"
			_data_->used_filename = _data_->_tmp4_;
#line 3854 "ScreenshotManager.c"
		}
#line 319 "../src/ScreenshotManager.vala"
		if (_data_->scale > ((gfloat) 1)) {
#line 320 "../src/ScreenshotManager.vala"
			_data_->_tmp5_ = strlen (GALA_EXTENSION);
#line 320 "../src/ScreenshotManager.vala"
			_data_->_tmp6_ = _data_->_tmp5_;
#line 320 "../src/ScreenshotManager.vala"
			_data_->scale_pos = -_data_->_tmp6_;
#line 321 "../src/ScreenshotManager.vala"
			_data_->_tmp7_ = _data_->used_filename;
#line 321 "../src/ScreenshotManager.vala"
			_data_->_tmp8_ = g_strdup_printf ("@%.1gx", (gdouble) _data_->scale);
#line 321 "../src/ScreenshotManager.vala"
			_data_->_tmp9_ = _data_->_tmp8_;
#line 321 "../src/ScreenshotManager.vala"
			_data_->_tmp10_ = string_splice (_data_->_tmp7_, (glong) _data_->scale_pos, (glong) _data_->scale_pos, _data_->_tmp9_);
#line 321 "../src/ScreenshotManager.vala"
			_g_free0 (_data_->used_filename);
#line 321 "../src/ScreenshotManager.vala"
			_data_->used_filename = _data_->_tmp10_;
#line 321 "../src/ScreenshotManager.vala"
			_g_free0 (_data_->_tmp9_);
#line 3878 "ScreenshotManager.c"
		}
#line 324 "../src/ScreenshotManager.vala"
		_data_->_tmp11_ = gala_screenshot_manager_find_target_path ();
#line 324 "../src/ScreenshotManager.vala"
		_data_->path = _data_->_tmp11_;
#line 325 "../src/ScreenshotManager.vala"
		_data_->_tmp12_ = _data_->path;
#line 325 "../src/ScreenshotManager.vala"
		_data_->_tmp13_ = _data_->used_filename;
#line 325 "../src/ScreenshotManager.vala"
		_data_->_tmp14_ = g_build_filename (_data_->_tmp12_, _data_->_tmp13_, NULL, NULL);
#line 325 "../src/ScreenshotManager.vala"
		_g_free0 (_data_->used_filename);
#line 325 "../src/ScreenshotManager.vala"
		_data_->used_filename = _data_->_tmp14_;
#line 314 "../src/ScreenshotManager.vala"
		_g_free0 (_data_->path);
#line 3896 "ScreenshotManager.c"
	}
	{
#line 329 "../src/ScreenshotManager.vala"
		_data_->_tmp15_ = gdk_pixbuf_get_from_surface (_data_->image, 0, 0, cairo_image_surface_get_width (_data_->image), cairo_image_surface_get_height (_data_->image));
#line 329 "../src/ScreenshotManager.vala"
		_data_->screenshot = _data_->_tmp15_;
#line 330 "../src/ScreenshotManager.vala"
		_data_->_tmp16_ = _data_->used_filename;
#line 330 "../src/ScreenshotManager.vala"
		_data_->_tmp17_ = g_file_new_for_path (_data_->_tmp16_);
#line 330 "../src/ScreenshotManager.vala"
		_data_->file = _data_->_tmp17_;
#line 332 "../src/ScreenshotManager.vala"
		_data_->_tmp18_ = _data_->file;
#line 332 "../src/ScreenshotManager.vala"
		if (g_file_query_exists (_data_->_tmp18_, NULL)) {
#line 333 "../src/ScreenshotManager.vala"
			_data_->_tmp20_ = _data_->file;
#line 333 "../src/ScreenshotManager.vala"
			_data_->_state_ = 1;
#line 333 "../src/ScreenshotManager.vala"
			g_file_open_readwrite_async (_data_->_tmp20_, (gint) G_FILE_CREATE_NONE, NULL, gala_screenshot_manager_save_image_to_file_ready, _data_);
#line 333 "../src/ScreenshotManager.vala"
			return FALSE;
#line 3921 "ScreenshotManager.c"
			_state_1:
#line 333 "../src/ScreenshotManager.vala"
			_data_->_tmp21_ = g_file_open_readwrite_finish (_data_->_tmp20_, _data_->_res_, &_data_->_inner_error0_);
#line 333 "../src/ScreenshotManager.vala"
			_data_->_tmp19_ = _data_->_tmp21_;
#line 333 "../src/ScreenshotManager.vala"
			if (G_UNLIKELY (_data_->_inner_error0_ != NULL)) {
#line 333 "../src/ScreenshotManager.vala"
				_g_object_unref0 (_data_->stream);
#line 333 "../src/ScreenshotManager.vala"
				_g_object_unref0 (_data_->file);
#line 333 "../src/ScreenshotManager.vala"
				_g_object_unref0 (_data_->screenshot);
#line 3935 "ScreenshotManager.c"
				goto __catch0_g_error;
			}
#line 333 "../src/ScreenshotManager.vala"
			_data_->_tmp22_ = _data_->_tmp19_;
#line 333 "../src/ScreenshotManager.vala"
			_data_->_tmp19_ = NULL;
#line 333 "../src/ScreenshotManager.vala"
			_g_object_unref0 (_data_->stream);
#line 333 "../src/ScreenshotManager.vala"
			_data_->stream = _data_->_tmp22_;
#line 332 "../src/ScreenshotManager.vala"
			_g_object_unref0 (_data_->_tmp19_);
#line 3948 "ScreenshotManager.c"
		} else {
#line 335 "../src/ScreenshotManager.vala"
			_data_->_tmp24_ = _data_->file;
#line 335 "../src/ScreenshotManager.vala"
			_data_->_state_ = 2;
#line 335 "../src/ScreenshotManager.vala"
			g_file_create_readwrite_async (_data_->_tmp24_, G_FILE_CREATE_NONE, G_PRIORITY_DEFAULT, NULL, gala_screenshot_manager_save_image_to_file_ready, _data_);
#line 335 "../src/ScreenshotManager.vala"
			return FALSE;
#line 3958 "ScreenshotManager.c"
			_state_2:
#line 335 "../src/ScreenshotManager.vala"
			_data_->_tmp25_ = g_file_create_readwrite_finish (_data_->_tmp24_, _data_->_res_, &_data_->_inner_error0_);
#line 335 "../src/ScreenshotManager.vala"
			_data_->_tmp23_ = _data_->_tmp25_;
#line 335 "../src/ScreenshotManager.vala"
			if (G_UNLIKELY (_data_->_inner_error0_ != NULL)) {
#line 335 "../src/ScreenshotManager.vala"
				_g_object_unref0 (_data_->stream);
#line 335 "../src/ScreenshotManager.vala"
				_g_object_unref0 (_data_->file);
#line 335 "../src/ScreenshotManager.vala"
				_g_object_unref0 (_data_->screenshot);
#line 3972 "ScreenshotManager.c"
				goto __catch0_g_error;
			}
#line 335 "../src/ScreenshotManager.vala"
			_data_->_tmp26_ = _data_->_tmp23_;
#line 335 "../src/ScreenshotManager.vala"
			_data_->_tmp23_ = NULL;
#line 335 "../src/ScreenshotManager.vala"
			_g_object_unref0 (_data_->stream);
#line 335 "../src/ScreenshotManager.vala"
			_data_->stream = _data_->_tmp26_;
#line 332 "../src/ScreenshotManager.vala"
			_g_object_unref0 (_data_->_tmp23_);
#line 3985 "ScreenshotManager.c"
		}
#line 337 "../src/ScreenshotManager.vala"
		_data_->_tmp27_ = _data_->screenshot;
#line 337 "../src/ScreenshotManager.vala"
		_data_->_tmp28_ = _data_->stream;
#line 337 "../src/ScreenshotManager.vala"
		_data_->_tmp29_ = g_io_stream_get_output_stream ((GIOStream*) _data_->_tmp28_);
#line 337 "../src/ScreenshotManager.vala"
		_data_->_tmp30_ = _data_->_tmp29_;
#line 337 "../src/ScreenshotManager.vala"
		_data_->_state_ = 3;
#line 337 "../src/ScreenshotManager.vala"
		gdk_pixbuf_save_to_stream_async (_data_->_tmp27_, _data_->_tmp30_, "png", NULL, gala_screenshot_manager_save_image_to_file_ready, _data_, NULL);
#line 337 "../src/ScreenshotManager.vala"
		return FALSE;
#line 4001 "ScreenshotManager.c"
		_state_3:
#line 337 "../src/ScreenshotManager.vala"
		gdk_pixbuf_save_to_stream_finish (_data_->_res_, &_data_->_inner_error0_);
#line 337 "../src/ScreenshotManager.vala"
		if (G_UNLIKELY (_data_->_inner_error0_ != NULL)) {
#line 337 "../src/ScreenshotManager.vala"
			_g_object_unref0 (_data_->stream);
#line 337 "../src/ScreenshotManager.vala"
			_g_object_unref0 (_data_->file);
#line 337 "../src/ScreenshotManager.vala"
			_g_object_unref0 (_data_->screenshot);
#line 4013 "ScreenshotManager.c"
			goto __catch0_g_error;
		}
#line 338 "../src/ScreenshotManager.vala"
		_data_->result = TRUE;
#line 338 "../src/ScreenshotManager.vala"
		_g_object_unref0 (_data_->stream);
#line 338 "../src/ScreenshotManager.vala"
		_g_object_unref0 (_data_->file);
#line 338 "../src/ScreenshotManager.vala"
		_g_object_unref0 (_data_->screenshot);
#line 338 "../src/ScreenshotManager.vala"
		g_task_return_pointer (_data_->_async_result, _data_, NULL);
#line 338 "../src/ScreenshotManager.vala"
		if (_data_->_state_ != 0) {
#line 338 "../src/ScreenshotManager.vala"
			while (!g_task_get_completed (_data_->_async_result)) {
#line 338 "../src/ScreenshotManager.vala"
				g_main_context_iteration (g_task_get_context (_data_->_async_result), TRUE);
#line 4032 "ScreenshotManager.c"
			}
		}
#line 338 "../src/ScreenshotManager.vala"
		g_object_unref (_data_->_async_result);
#line 338 "../src/ScreenshotManager.vala"
		return FALSE;
#line 4039 "ScreenshotManager.c"
	}
	goto __finally0;
	__catch0_g_error:
	{
#line 328 "../src/ScreenshotManager.vala"
		_data_->e = _data_->_inner_error0_;
#line 328 "../src/ScreenshotManager.vala"
		_data_->_inner_error0_ = NULL;
#line 340 "../src/ScreenshotManager.vala"
		_data_->_tmp31_ = _data_->e;
#line 340 "../src/ScreenshotManager.vala"
		_data_->_tmp32_ = _data_->_tmp31_->message;
#line 340 "../src/ScreenshotManager.vala"
		g_warning ("ScreenshotManager.vala:340: could not save file: %s", _data_->_tmp32_);
#line 341 "../src/ScreenshotManager.vala"
		_data_->result = FALSE;
#line 341 "../src/ScreenshotManager.vala"
		_g_error_free0 (_data_->e);
#line 341 "../src/ScreenshotManager.vala"
		g_task_return_pointer (_data_->_async_result, _data_, NULL);
#line 341 "../src/ScreenshotManager.vala"
		if (_data_->_state_ != 0) {
#line 341 "../src/ScreenshotManager.vala"
			while (!g_task_get_completed (_data_->_async_result)) {
#line 341 "../src/ScreenshotManager.vala"
				g_main_context_iteration (g_task_get_context (_data_->_async_result), TRUE);
#line 4066 "ScreenshotManager.c"
			}
		}
#line 341 "../src/ScreenshotManager.vala"
		g_object_unref (_data_->_async_result);
#line 341 "../src/ScreenshotManager.vala"
		return FALSE;
#line 4073 "ScreenshotManager.c"
	}
	__finally0:
#line 328 "../src/ScreenshotManager.vala"
	_g_free0 (_data_->used_filename);
#line 328 "../src/ScreenshotManager.vala"
	g_critical ("file %s: line %d: uncaught error: %s (%s, %d)", __FILE__, __LINE__, _data_->_inner_error0_->message, g_quark_to_string (_data_->_inner_error0_->domain), _data_->_inner_error0_->code);
#line 328 "../src/ScreenshotManager.vala"
	g_clear_error (&_data_->_inner_error0_);
#line 328 "../src/ScreenshotManager.vala"
	g_object_unref (_data_->_async_result);
#line 328 "../src/ScreenshotManager.vala"
	return FALSE;
#line 4086 "ScreenshotManager.c"
}

static gboolean
gala_screenshot_manager_save_image_to_clipboard (cairo_surface_t* image,
                                                 const gchar* filename,
                                                 gchar** used_filename)
{
	gchar* _vala_used_filename = NULL;
	gchar* _tmp0_;
	GdkDisplay* display = NULL;
	GdkDisplay* _tmp1_;
	GtkClipboard* clipboard = NULL;
	GdkDisplay* _tmp2_;
	GtkClipboard* _tmp3_;
	GdkPixbuf* screenshot = NULL;
	GdkPixbuf* _tmp4_;
	GdkPixbuf* _tmp5_;
	GtkClipboard* _tmp6_;
	GdkPixbuf* _tmp7_;
	gboolean result;
#line 345 "../src/ScreenshotManager.vala"
	g_return_val_if_fail (image != NULL, FALSE);
#line 345 "../src/ScreenshotManager.vala"
	g_return_val_if_fail (filename != NULL, FALSE);
#line 346 "../src/ScreenshotManager.vala"
	_tmp0_ = g_strdup (filename);
#line 346 "../src/ScreenshotManager.vala"
	_g_free0 (_vala_used_filename);
#line 346 "../src/ScreenshotManager.vala"
	_vala_used_filename = _tmp0_;
#line 348 "../src/ScreenshotManager.vala"
	_tmp1_ = gdk_display_get_default ();
#line 348 "../src/ScreenshotManager.vala"
	display = _tmp1_;
#line 349 "../src/ScreenshotManager.vala"
	_tmp2_ = display;
#line 349 "../src/ScreenshotManager.vala"
	_tmp3_ = gtk_clipboard_get_default (_tmp2_);
#line 349 "../src/ScreenshotManager.vala"
	clipboard = _tmp3_;
#line 351 "../src/ScreenshotManager.vala"
	_tmp4_ = gdk_pixbuf_get_from_surface (image, 0, 0, cairo_image_surface_get_width (image), cairo_image_surface_get_height (image));
#line 351 "../src/ScreenshotManager.vala"
	screenshot = _tmp4_;
#line 352 "../src/ScreenshotManager.vala"
	_tmp5_ = screenshot;
#line 352 "../src/ScreenshotManager.vala"
	if (_tmp5_ == NULL) {
#line 353 "../src/ScreenshotManager.vala"
		g_warning ("ScreenshotManager.vala:353: could not save screenshot to clipboard: nu" \
"ll pixbuf");
#line 354 "../src/ScreenshotManager.vala"
		result = FALSE;
#line 354 "../src/ScreenshotManager.vala"
		_g_object_unref0 (screenshot);
#line 354 "../src/ScreenshotManager.vala"
		if (used_filename) {
#line 354 "../src/ScreenshotManager.vala"
			*used_filename = _vala_used_filename;
#line 4145 "ScreenshotManager.c"
		} else {
#line 354 "../src/ScreenshotManager.vala"
			_g_free0 (_vala_used_filename);
#line 4149 "ScreenshotManager.c"
		}
#line 354 "../src/ScreenshotManager.vala"
		return result;
#line 4153 "ScreenshotManager.c"
	}
#line 357 "../src/ScreenshotManager.vala"
	_tmp6_ = clipboard;
#line 357 "../src/ScreenshotManager.vala"
	_tmp7_ = screenshot;
#line 357 "../src/ScreenshotManager.vala"
	gtk_clipboard_set_image (_tmp6_, _tmp7_);
#line 358 "../src/ScreenshotManager.vala"
	result = TRUE;
#line 358 "../src/ScreenshotManager.vala"
	_g_object_unref0 (screenshot);
#line 358 "../src/ScreenshotManager.vala"
	if (used_filename) {
#line 358 "../src/ScreenshotManager.vala"
		*used_filename = _vala_used_filename;
#line 4169 "ScreenshotManager.c"
	} else {
#line 358 "../src/ScreenshotManager.vala"
		_g_free0 (_vala_used_filename);
#line 4173 "ScreenshotManager.c"
	}
#line 358 "../src/ScreenshotManager.vala"
	return result;
#line 4177 "ScreenshotManager.c"
}

static void
gala_screenshot_manager_play_shutter_sound (GalaScreenshotManager* self)
{
	ca_context* context = NULL;
	ca_proplist* props = NULL;
	ca_context* _tmp0_ = NULL;
	ca_proplist* _tmp1_ = NULL;
#line 361 "../src/ScreenshotManager.vala"
	g_return_if_fail (self != NULL);
#line 365 "../src/ScreenshotManager.vala"
	ca_context_create (&_tmp0_);
#line 365 "../src/ScreenshotManager.vala"
	_ca_context_destroy0 (context);
#line 365 "../src/ScreenshotManager.vala"
	context = _tmp0_;
#line 366 "../src/ScreenshotManager.vala"
	ca_proplist_create (&_tmp1_);
#line 366 "../src/ScreenshotManager.vala"
	_ca_proplist_destroy0 (props);
#line 366 "../src/ScreenshotManager.vala"
	props = _tmp1_;
#line 368 "../src/ScreenshotManager.vala"
	ca_proplist_sets (props, CA_PROP_EVENT_ID, "screen-capture");
#line 369 "../src/ScreenshotManager.vala"
	ca_proplist_sets (props, CA_PROP_EVENT_DESCRIPTION, _ ("Screenshot taken"));
#line 370 "../src/ScreenshotManager.vala"
	ca_proplist_sets (props, CA_PROP_CANBERRA_CACHE_CONTROL, "permanent");
#line 372 "../src/ScreenshotManager.vala"
	ca_context_play_full (context, (guint32) 0, props, NULL, NULL);
#line 361 "../src/ScreenshotManager.vala"
	_ca_proplist_destroy0 (props);
#line 361 "../src/ScreenshotManager.vala"
	_ca_context_destroy0 (context);
#line 4213 "ScreenshotManager.c"
}

static cairo_surface_t*
gala_screenshot_manager_take_screenshot (GalaScreenshotManager* self,
                                         gint x,
                                         gint y,
                                         gint width,
                                         gint height,
                                         gboolean include_cursor)
{
	cairo_surface_t* image = NULL;
	gint image_width = 0;
	gint image_height = 0;
	gfloat scale = 0.0F;
	GalaWindowManager* _tmp0_;
	ClutterStage* _tmp1_;
	ClutterStage* _tmp2_;
	MtkRectangle _tmp3_ = {0};
	gint _tmp4_ = 0;
	gint _tmp5_ = 0;
	gfloat _tmp6_ = 0.0F;
	cairo_surface_t* _tmp7_;
	ClutterPaintFlag paint_flags = 0U;
	GError* _inner_error0_ = NULL;
	cairo_surface_t* result;
#line 375 "../src/ScreenshotManager.vala"
	g_return_val_if_fail (self != NULL, NULL);
#line 380 "../src/ScreenshotManager.vala"
	_tmp0_ = self->priv->wm;
#line 380 "../src/ScreenshotManager.vala"
	_tmp1_ = gala_window_manager_get_stage (_tmp0_);
#line 380 "../src/ScreenshotManager.vala"
	_tmp2_ = _tmp1_;
#line 380 "../src/ScreenshotManager.vala"
	_tmp3_.x = x;
#line 380 "../src/ScreenshotManager.vala"
	_tmp3_.y = y;
#line 380 "../src/ScreenshotManager.vala"
	_tmp3_.width = width;
#line 380 "../src/ScreenshotManager.vala"
	_tmp3_.height = height;
#line 380 "../src/ScreenshotManager.vala"
	clutter_stage_get_capture_final_size (_tmp2_, &_tmp3_, &_tmp4_, &_tmp5_, &_tmp6_);
#line 380 "../src/ScreenshotManager.vala"
	image_width = _tmp4_;
#line 380 "../src/ScreenshotManager.vala"
	image_height = _tmp5_;
#line 380 "../src/ScreenshotManager.vala"
	scale = _tmp6_;
#line 382 "../src/ScreenshotManager.vala"
	_tmp7_ = cairo_image_surface_create (CAIRO_FORMAT_ARGB32, image_width, image_height);
#line 382 "../src/ScreenshotManager.vala"
	_cairo_surface_destroy0 (image);
#line 382 "../src/ScreenshotManager.vala"
	image = _tmp7_;
#line 384 "../src/ScreenshotManager.vala"
	paint_flags = CLUTTER_PAINT_FLAG_NO_CURSORS;
#line 385 "../src/ScreenshotManager.vala"
	if (include_cursor) {
#line 386 "../src/ScreenshotManager.vala"
		paint_flags |= CLUTTER_PAINT_FLAG_FORCE_CURSORS;
#line 4275 "ScreenshotManager.c"
	}
	{
#line 390 "../src/ScreenshotManager.vala"
		if (G_BYTE_ORDER == G_LITTLE_ENDIAN) {
#line 4280 "ScreenshotManager.c"
			GalaWindowManager* _tmp8_;
			ClutterStage* _tmp9_;
			ClutterStage* _tmp10_;
			MtkRectangle _tmp11_ = {0};
			cairo_surface_t* _tmp12_;
			guchar* _tmp13_;
			cairo_surface_t* _tmp14_;
#line 391 "../src/ScreenshotManager.vala"
			_tmp8_ = self->priv->wm;
#line 391 "../src/ScreenshotManager.vala"
			_tmp9_ = gala_window_manager_get_stage (_tmp8_);
#line 391 "../src/ScreenshotManager.vala"
			_tmp10_ = _tmp9_;
#line 391 "../src/ScreenshotManager.vala"
			_tmp11_.x = x;
#line 391 "../src/ScreenshotManager.vala"
			_tmp11_.y = y;
#line 391 "../src/ScreenshotManager.vala"
			_tmp11_.width = width;
#line 391 "../src/ScreenshotManager.vala"
			_tmp11_.height = height;
#line 391 "../src/ScreenshotManager.vala"
			_tmp12_ = image;
#line 391 "../src/ScreenshotManager.vala"
			_tmp13_ = cairo_image_surface_get_data (_tmp12_);
#line 391 "../src/ScreenshotManager.vala"
			_tmp14_ = image;
#line 391 "../src/ScreenshotManager.vala"
			clutter_stage_paint_to_buffer (_tmp10_, &_tmp11_, scale, _tmp13_, cairo_image_surface_get_stride (_tmp14_), COGL_PIXEL_FORMAT_BGRA_8888_PRE, paint_flags, &_inner_error0_);
#line 391 "../src/ScreenshotManager.vala"
			if (G_UNLIKELY (_inner_error0_ != NULL)) {
#line 4312 "ScreenshotManager.c"
				goto __catch0_g_error;
			}
		} else {
			GalaWindowManager* _tmp15_;
			ClutterStage* _tmp16_;
			ClutterStage* _tmp17_;
			MtkRectangle _tmp18_ = {0};
			cairo_surface_t* _tmp19_;
			guchar* _tmp20_;
			cairo_surface_t* _tmp21_;
#line 400 "../src/ScreenshotManager.vala"
			_tmp15_ = self->priv->wm;
#line 400 "../src/ScreenshotManager.vala"
			_tmp16_ = gala_window_manager_get_stage (_tmp15_);
#line 400 "../src/ScreenshotManager.vala"
			_tmp17_ = _tmp16_;
#line 400 "../src/ScreenshotManager.vala"
			_tmp18_.x = x;
#line 400 "../src/ScreenshotManager.vala"
			_tmp18_.y = y;
#line 400 "../src/ScreenshotManager.vala"
			_tmp18_.width = width;
#line 400 "../src/ScreenshotManager.vala"
			_tmp18_.height = height;
#line 400 "../src/ScreenshotManager.vala"
			_tmp19_ = image;
#line 400 "../src/ScreenshotManager.vala"
			_tmp20_ = cairo_image_surface_get_data (_tmp19_);
#line 400 "../src/ScreenshotManager.vala"
			_tmp21_ = image;
#line 400 "../src/ScreenshotManager.vala"
			clutter_stage_paint_to_buffer (_tmp17_, &_tmp18_, scale, _tmp20_, cairo_image_surface_get_stride (_tmp21_), COGL_PIXEL_FORMAT_ARGB_8888_PRE, paint_flags, &_inner_error0_);
#line 400 "../src/ScreenshotManager.vala"
			if (G_UNLIKELY (_inner_error0_ != NULL)) {
#line 4347 "ScreenshotManager.c"
				goto __catch0_g_error;
			}
		}
	}
	goto __finally0;
	__catch0_g_error:
	{
		GError* e = NULL;
		GError* _tmp22_;
		const gchar* _tmp23_;
#line 389 "../src/ScreenshotManager.vala"
		e = _inner_error0_;
#line 389 "../src/ScreenshotManager.vala"
		_inner_error0_ = NULL;
#line 410 "../src/ScreenshotManager.vala"
		_tmp22_ = e;
#line 410 "../src/ScreenshotManager.vala"
		_tmp23_ = _tmp22_->message;
#line 410 "../src/ScreenshotManager.vala"
		g_warning ("ScreenshotManager.vala:410: %s", _tmp23_);
#line 389 "../src/ScreenshotManager.vala"
		_g_error_free0 (e);
#line 4370 "ScreenshotManager.c"
	}
	__finally0:
#line 389 "../src/ScreenshotManager.vala"
	if (G_UNLIKELY (_inner_error0_ != NULL)) {
#line 389 "../src/ScreenshotManager.vala"
		_cairo_surface_destroy0 (image);
#line 389 "../src/ScreenshotManager.vala"
		g_critical ("file %s: line %d: uncaught error: %s (%s, %d)", __FILE__, __LINE__, _inner_error0_->message, g_quark_to_string (_inner_error0_->domain), _inner_error0_->code);
#line 389 "../src/ScreenshotManager.vala"
		g_clear_error (&_inner_error0_);
#line 389 "../src/ScreenshotManager.vala"
		return NULL;
#line 4383 "ScreenshotManager.c"
	}
#line 412 "../src/ScreenshotManager.vala"
	result = image;
#line 412 "../src/ScreenshotManager.vala"
	return result;
#line 4389 "ScreenshotManager.c"
}

static cairo_surface_t*
gala_screenshot_manager_composite_stage_cursor (GalaScreenshotManager* self,
                                                cairo_surface_t* image,
                                                cairo_rectangle_int_t* image_rect)
{
	MetaCursorTracker* cursor_tracker = NULL;
	GalaWindowManager* _tmp0_;
	MetaDisplay* _tmp1_;
	MetaCursorTracker* _tmp2_;
	graphene_point_t coords = {0};
	graphene_point_t _tmp3_ = {0};
	MetaCursorTracker* _tmp4_;
	graphene_point_t _tmp5_ = {0};
	cairo_region_t* region = NULL;
	cairo_rectangle_int_t _tmp6_;
	cairo_region_t* _tmp7_;
	cairo_region_t* _tmp8_;
	graphene_point_t _tmp9_;
	graphene_point_t _tmp10_;
	CoglTexture* texture = NULL;
	MetaCursorTracker* _tmp12_;
	CoglTexture* _tmp13_;
	CoglTexture* _tmp14_;
	gint width = 0;
	CoglTexture* _tmp16_;
	gint height = 0;
	CoglTexture* _tmp17_;
	guint8* data = NULL;
	guint8* _tmp18_;
	gint data_length1;
	gint _data_size_;
	CoglTexture* _tmp19_;
	guint8* _tmp20_;
	gint _tmp20__length1;
	cairo_surface_t* cursor_image = NULL;
	guint8* _tmp21_;
	gint _tmp21__length1;
	cairo_surface_t* _tmp22_;
	cairo_surface_t* target = NULL;
	cairo_rectangle_int_t _tmp23_;
	cairo_rectangle_int_t _tmp24_;
	cairo_surface_t* _tmp25_;
	cairo_t* cr = NULL;
	cairo_surface_t* _tmp26_;
	cairo_t* _tmp27_;
	cairo_t* _tmp28_;
	cairo_t* _tmp29_;
	cairo_t* _tmp30_;
	cairo_t* _tmp31_;
	cairo_t* _tmp32_;
	cairo_surface_t* _tmp33_;
	graphene_point_t _tmp34_;
	cairo_rectangle_int_t _tmp35_;
	graphene_point_t _tmp36_;
	cairo_rectangle_int_t _tmp37_;
	cairo_t* _tmp38_;
	cairo_t* _tmp39_;
	cairo_surface_t* _tmp40_;
	cairo_surface_t* _tmp41_;
	cairo_surface_t* result;
#line 415 "../src/ScreenshotManager.vala"
	g_return_val_if_fail (self != NULL, NULL);
#line 415 "../src/ScreenshotManager.vala"
	g_return_val_if_fail (image != NULL, NULL);
#line 415 "../src/ScreenshotManager.vala"
	g_return_val_if_fail (image_rect != NULL, NULL);
#line 416 "../src/ScreenshotManager.vala"
	_tmp0_ = self->priv->wm;
#line 416 "../src/ScreenshotManager.vala"
	_tmp1_ = meta_plugin_get_display ((MetaPlugin*) _tmp0_);
#line 416 "../src/ScreenshotManager.vala"
	_tmp2_ = meta_cursor_tracker_get_for_display (_tmp1_);
#line 416 "../src/ScreenshotManager.vala"
	cursor_tracker = _tmp2_;
#line 417 "../src/ScreenshotManager.vala"
	coords = _tmp3_;
#line 418 "../src/ScreenshotManager.vala"
	_tmp4_ = cursor_tracker;
#line 418 "../src/ScreenshotManager.vala"
	meta_cursor_tracker_get_pointer (_tmp4_, &_tmp5_, NULL);
#line 418 "../src/ScreenshotManager.vala"
	coords = _tmp5_;
#line 420 "../src/ScreenshotManager.vala"
	_tmp6_ = *image_rect;
#line 420 "../src/ScreenshotManager.vala"
	_tmp7_ = cairo_region_create_rectangle (&_tmp6_);
#line 420 "../src/ScreenshotManager.vala"
	region = _tmp7_;
#line 421 "../src/ScreenshotManager.vala"
	_tmp8_ = region;
#line 421 "../src/ScreenshotManager.vala"
	_tmp9_ = coords;
#line 421 "../src/ScreenshotManager.vala"
	_tmp10_ = coords;
#line 421 "../src/ScreenshotManager.vala"
	if (!cairo_region_contains_point (_tmp8_, (gint) _tmp9_.x, (gint) _tmp10_.y)) {
#line 4488 "ScreenshotManager.c"
		cairo_surface_t* _tmp11_;
#line 422 "../src/ScreenshotManager.vala"
		_tmp11_ = _cairo_surface_reference0 (image);
#line 422 "../src/ScreenshotManager.vala"
		result = _tmp11_;
#line 422 "../src/ScreenshotManager.vala"
		_cairo_region_destroy0 (region);
#line 422 "../src/ScreenshotManager.vala"
		return result;
#line 4498 "ScreenshotManager.c"
	}
#line 425 "../src/ScreenshotManager.vala"
	_tmp12_ = cursor_tracker;
#line 425 "../src/ScreenshotManager.vala"
	_tmp13_ = meta_cursor_tracker_get_sprite (_tmp12_);
#line 425 "../src/ScreenshotManager.vala"
	texture = _tmp13_;
#line 426 "../src/ScreenshotManager.vala"
	_tmp14_ = texture;
#line 426 "../src/ScreenshotManager.vala"
	if (_tmp14_ == NULL) {
#line 4510 "ScreenshotManager.c"
		cairo_surface_t* _tmp15_;
#line 427 "../src/ScreenshotManager.vala"
		_tmp15_ = _cairo_surface_reference0 (image);
#line 427 "../src/ScreenshotManager.vala"
		result = _tmp15_;
#line 427 "../src/ScreenshotManager.vala"
		_cairo_region_destroy0 (region);
#line 427 "../src/ScreenshotManager.vala"
		return result;
#line 4520 "ScreenshotManager.c"
	}
#line 430 "../src/ScreenshotManager.vala"
	_tmp16_ = texture;
#line 430 "../src/ScreenshotManager.vala"
	width = (gint) cogl_texture_get_width (_tmp16_);
#line 431 "../src/ScreenshotManager.vala"
	_tmp17_ = texture;
#line 431 "../src/ScreenshotManager.vala"
	height = (gint) cogl_texture_get_height (_tmp17_);
#line 433 "../src/ScreenshotManager.vala"
	_tmp18_ = g_new0 (guint8, (width * height) * 4);
#line 433 "../src/ScreenshotManager.vala"
	data = _tmp18_;
#line 433 "../src/ScreenshotManager.vala"
	data_length1 = (width * height) * 4;
#line 433 "../src/ScreenshotManager.vala"
	_data_size_ = data_length1;
#line 434 "../src/ScreenshotManager.vala"
	_tmp19_ = texture;
#line 434 "../src/ScreenshotManager.vala"
	_tmp20_ = data;
#line 434 "../src/ScreenshotManager.vala"
	_tmp20__length1 = data_length1;
#line 434 "../src/ScreenshotManager.vala"
	cogl_texture_get_data (_tmp19_, COGL_PIXEL_FORMAT_RGBA_8888, (guint) 0, _tmp20_);
#line 436 "../src/ScreenshotManager.vala"
	_tmp21_ = data;
#line 436 "../src/ScreenshotManager.vala"
	_tmp21__length1 = data_length1;
#line 436 "../src/ScreenshotManager.vala"
	_tmp22_ = cairo_image_surface_create_for_data (_tmp21_, CAIRO_FORMAT_ARGB32, width, height, width * 4);
#line 436 "../src/ScreenshotManager.vala"
	cursor_image = _tmp22_;
#line 437 "../src/ScreenshotManager.vala"
	_tmp23_ = *image_rect;
#line 437 "../src/ScreenshotManager.vala"
	_tmp24_ = *image_rect;
#line 437 "../src/ScreenshotManager.vala"
	_tmp25_ = cairo_image_surface_create (CAIRO_FORMAT_ARGB32, _tmp23_.width, _tmp24_.height);
#line 437 "../src/ScreenshotManager.vala"
	target = _tmp25_;
#line 439 "../src/ScreenshotManager.vala"
	_tmp26_ = target;
#line 439 "../src/ScreenshotManager.vala"
	_tmp27_ = cairo_create (_tmp26_);
#line 439 "../src/ScreenshotManager.vala"
	cr = _tmp27_;
#line 440 "../src/ScreenshotManager.vala"
	_tmp28_ = cr;
#line 440 "../src/ScreenshotManager.vala"
	cairo_set_operator (_tmp28_, CAIRO_OPERATOR_OVER);
#line 441 "../src/ScreenshotManager.vala"
	_tmp29_ = cr;
#line 441 "../src/ScreenshotManager.vala"
	cairo_set_source_surface (_tmp29_, image, (gdouble) 0, (gdouble) 0);
#line 442 "../src/ScreenshotManager.vala"
	_tmp30_ = cr;
#line 442 "../src/ScreenshotManager.vala"
	cairo_paint (_tmp30_);
#line 444 "../src/ScreenshotManager.vala"
	_tmp31_ = cr;
#line 444 "../src/ScreenshotManager.vala"
	cairo_set_operator (_tmp31_, CAIRO_OPERATOR_OVER);
#line 445 "../src/ScreenshotManager.vala"
	_tmp32_ = cr;
#line 445 "../src/ScreenshotManager.vala"
	_tmp33_ = cursor_image;
#line 445 "../src/ScreenshotManager.vala"
	_tmp34_ = coords;
#line 445 "../src/ScreenshotManager.vala"
	_tmp35_ = *image_rect;
#line 445 "../src/ScreenshotManager.vala"
	_tmp36_ = coords;
#line 445 "../src/ScreenshotManager.vala"
	_tmp37_ = *image_rect;
#line 445 "../src/ScreenshotManager.vala"
	cairo_set_source_surface (_tmp32_, _tmp33_, (gdouble) (_tmp34_.x - _tmp35_.x), (gdouble) (_tmp36_.y - _tmp37_.y));
#line 446 "../src/ScreenshotManager.vala"
	_tmp38_ = cr;
#line 446 "../src/ScreenshotManager.vala"
	cairo_paint (_tmp38_);
#line 448 "../src/ScreenshotManager.vala"
	_tmp39_ = cr;
#line 448 "../src/ScreenshotManager.vala"
	_tmp40_ = cairo_get_target (_tmp39_);
#line 448 "../src/ScreenshotManager.vala"
	_tmp41_ = _cairo_surface_reference0 ((cairo_surface_t*) _tmp40_);
#line 448 "../src/ScreenshotManager.vala"
	result = _tmp41_;
#line 448 "../src/ScreenshotManager.vala"
	_cairo_destroy0 (cr);
#line 448 "../src/ScreenshotManager.vala"
	_cairo_surface_destroy0 (target);
#line 448 "../src/ScreenshotManager.vala"
	_cairo_surface_destroy0 (cursor_image);
#line 448 "../src/ScreenshotManager.vala"
	data = (g_free (data), NULL);
#line 448 "../src/ScreenshotManager.vala"
	_cairo_region_destroy0 (region);
#line 448 "../src/ScreenshotManager.vala"
	return result;
#line 4622 "ScreenshotManager.c"
}

static void
gala_screenshot_manager_wait_stage_repaint_data_free (gpointer _data)
{
	GalaScreenshotManagerWaitStageRepaintData* _data_;
	_data_ = _data;
#line 23 "../src/ScreenshotManager.vala"
	_g_object_unref0 (_data_->self);
#line 23 "../src/ScreenshotManager.vala"
	g_slice_free (GalaScreenshotManagerWaitStageRepaintData, _data_);
#line 4634 "ScreenshotManager.c"
}

static void
gala_screenshot_manager_wait_stage_repaint (GalaScreenshotManager* self,
                                            GAsyncReadyCallback _callback_,
                                            gpointer _user_data_)
{
	GalaScreenshotManagerWaitStageRepaintData* _data_;
	GalaScreenshotManager* _tmp0_;
#line 23 "../src/ScreenshotManager.vala"
	g_return_if_fail (self != NULL);
#line 23 "../src/ScreenshotManager.vala"
	_data_ = g_slice_new0 (GalaScreenshotManagerWaitStageRepaintData);
#line 23 "../src/ScreenshotManager.vala"
	_data_->_async_result = g_task_new (G_OBJECT (self), NULL, _callback_, _user_data_);
#line 23 "../src/ScreenshotManager.vala"
	g_task_set_task_data (_data_->_async_result, _data_, gala_screenshot_manager_wait_stage_repaint_data_free);
#line 23 "../src/ScreenshotManager.vala"
	_tmp0_ = _g_object_ref0 (self);
#line 23 "../src/ScreenshotManager.vala"
	_data_->self = _tmp0_;
#line 23 "../src/ScreenshotManager.vala"
	gala_screenshot_manager_wait_stage_repaint_co (_data_);
#line 4658 "ScreenshotManager.c"
}

static void
gala_screenshot_manager_wait_stage_repaint_finish (GalaScreenshotManager* self,
                                                   GAsyncResult* _res_)
{
	GalaScreenshotManagerWaitStageRepaintData* _data_;
#line 23 "../src/ScreenshotManager.vala"
	_data_ = g_task_propagate_pointer (G_TASK (_res_), NULL);
#line 4668 "ScreenshotManager.c"
}

static Block7Data*
block7_data_ref (Block7Data* _data7_)
{
#line 451 "../src/ScreenshotManager.vala"
	g_atomic_int_inc (&_data7_->_ref_count_);
#line 451 "../src/ScreenshotManager.vala"
	return _data7_;
#line 4678 "ScreenshotManager.c"
}

static void
block7_data_unref (void * _userdata_)
{
	Block7Data* _data7_;
	_data7_ = (Block7Data*) _userdata_;
#line 451 "../src/ScreenshotManager.vala"
	if (g_atomic_int_dec_and_test (&_data7_->_ref_count_)) {
#line 4688 "ScreenshotManager.c"
		GalaScreenshotManager* self;
#line 451 "../src/ScreenshotManager.vala"
		self = _data7_->self;
#line 451 "../src/ScreenshotManager.vala"
		_g_object_unref0 (self);
#line 451 "../src/ScreenshotManager.vala"
		g_slice_free (Block7Data, _data7_);
#line 4696 "ScreenshotManager.c"
	}
}

static gboolean
_gala_screenshot_manager_wait_stage_repaint_co_gsource_func (gpointer self)
{
	gboolean result;
	result = gala_screenshot_manager_wait_stage_repaint_co (self);
#line 455 "../src/ScreenshotManager.vala"
	return result;
#line 4707 "ScreenshotManager.c"
}

static void
__lambda125_ (Block7Data* _data7_)
{
	GalaScreenshotManager* self;
	GalaWindowManager* _tmp0_;
	ClutterStage* _tmp1_;
	ClutterStage* _tmp2_;
#line 453 "../src/ScreenshotManager.vala"
	self = _data7_->self;
#line 454 "../src/ScreenshotManager.vala"
	_tmp0_ = self->priv->wm;
#line 454 "../src/ScreenshotManager.vala"
	_tmp1_ = gala_window_manager_get_stage (_tmp0_);
#line 454 "../src/ScreenshotManager.vala"
	_tmp2_ = _tmp1_;
#line 454 "../src/ScreenshotManager.vala"
	g_signal_handler_disconnect ((GObject*) _tmp2_, _data7_->signal_id);
#line 455 "../src/ScreenshotManager.vala"
	g_idle_add_full (G_PRIORITY_DEFAULT_IDLE, _gala_screenshot_manager_wait_stage_repaint_co_gsource_func, _data7_->_async_data_, NULL);
#line 4729 "ScreenshotManager.c"
}

static void
___lambda125__clutter_stage_after_paint (ClutterStage* _sender,
                                         ClutterStageView* view,
                                         ClutterFrame* frame,
                                         gpointer self)
{
#line 453 "../src/ScreenshotManager.vala"
	__lambda125_ (self);
#line 4740 "ScreenshotManager.c"
}

static gboolean
gala_screenshot_manager_wait_stage_repaint_co (GalaScreenshotManagerWaitStageRepaintData* _data_)
{
#line 451 "../src/ScreenshotManager.vala"
	switch (_data_->_state_) {
#line 451 "../src/ScreenshotManager.vala"
		case 0:
#line 4750 "ScreenshotManager.c"
		goto _state_0;
#line 451 "../src/ScreenshotManager.vala"
		case 1:
#line 4754 "ScreenshotManager.c"
		goto _state_1;
		default:
#line 451 "../src/ScreenshotManager.vala"
		g_assert_not_reached ();
#line 4759 "ScreenshotManager.c"
	}
	_state_0:
#line 451 "../src/ScreenshotManager.vala"
	_data_->_data7_ = g_slice_new0 (Block7Data);
#line 451 "../src/ScreenshotManager.vala"
	_data_->_data7_->_ref_count_ = 1;
#line 451 "../src/ScreenshotManager.vala"
	_data_->_data7_->self = g_object_ref (_data_->self);
#line 451 "../src/ScreenshotManager.vala"
	_data_->_data7_->_async_data_ = _data_;
#line 452 "../src/ScreenshotManager.vala"
	_data_->_data7_->signal_id = 0UL;
#line 453 "../src/ScreenshotManager.vala"
	_data_->_tmp0_ = _data_->self->priv->wm;
#line 453 "../src/ScreenshotManager.vala"
	_data_->_tmp1_ = gala_window_manager_get_stage (_data_->_tmp0_);
#line 453 "../src/ScreenshotManager.vala"
	_data_->_tmp2_ = _data_->_tmp1_;
#line 453 "../src/ScreenshotManager.vala"
	_data_->_tmp3_ = g_signal_connect_data (_data_->_tmp2_, "after-paint", (GCallback) ___lambda125__clutter_stage_after_paint, block7_data_ref (_data_->_data7_), (GClosureNotify) block7_data_unref, 0);
#line 453 "../src/ScreenshotManager.vala"
	_data_->_data7_->signal_id = _data_->_tmp3_;
#line 458 "../src/ScreenshotManager.vala"
	_data_->_tmp4_ = _data_->self->priv->wm;
#line 458 "../src/ScreenshotManager.vala"
	_data_->_tmp5_ = gala_window_manager_get_stage (_data_->_tmp4_);
#line 458 "../src/ScreenshotManager.vala"
	_data_->_tmp6_ = _data_->_tmp5_;
#line 458 "../src/ScreenshotManager.vala"
	clutter_actor_queue_redraw ((ClutterActor*) _data_->_tmp6_);
#line 459 "../src/ScreenshotManager.vala"
	_data_->_state_ = 1;
#line 459 "../src/ScreenshotManager.vala"
	return FALSE;
#line 4794 "ScreenshotManager.c"
	_state_1:
	;
#line 451 "../src/ScreenshotManager.vala"
	block7_data_unref (_data_->_data7_);
#line 451 "../src/ScreenshotManager.vala"
	_data_->_data7_ = NULL;
#line 451 "../src/ScreenshotManager.vala"
	g_task_return_pointer (_data_->_async_result, _data_, NULL);
#line 451 "../src/ScreenshotManager.vala"
	if (_data_->_state_ != 0) {
#line 451 "../src/ScreenshotManager.vala"
		while (!g_task_get_completed (_data_->_async_result)) {
#line 451 "../src/ScreenshotManager.vala"
			g_main_context_iteration (g_task_get_context (_data_->_async_result), TRUE);
#line 4809 "ScreenshotManager.c"
		}
	}
#line 451 "../src/ScreenshotManager.vala"
	g_object_unref (_data_->_async_result);
#line 451 "../src/ScreenshotManager.vala"
	return FALSE;
#line 4816 "ScreenshotManager.c"
}

static GObject *
gala_screenshot_manager_constructor (GType type,
                                     guint n_construct_properties,
                                     GObjectConstructParam * construct_properties)
{
	GObject * obj;
	GObjectClass * parent_class;
	GalaScreenshotManager * self;
	GSettings* _tmp0_;
#line 42 "../src/ScreenshotManager.vala"
	parent_class = G_OBJECT_CLASS (gala_screenshot_manager_parent_class);
#line 42 "../src/ScreenshotManager.vala"
	obj = parent_class->constructor (type, n_construct_properties, construct_properties);
#line 42 "../src/ScreenshotManager.vala"
	self = G_TYPE_CHECK_INSTANCE_CAST (obj, GALA_TYPE_SCREENSHOT_MANAGER, GalaScreenshotManager);
#line 43 "../src/ScreenshotManager.vala"
	_tmp0_ = g_settings_new ("org.gnome.desktop.interface");
#line 43 "../src/ScreenshotManager.vala"
	_g_object_unref0 (self->priv->desktop_settings);
#line 43 "../src/ScreenshotManager.vala"
	self->priv->desktop_settings = _tmp0_;
#line 42 "../src/ScreenshotManager.vala"
	return obj;
#line 4842 "ScreenshotManager.c"
}

static void
gala_screenshot_manager_class_init (GalaScreenshotManagerClass * klass,
                                    gpointer klass_data)
{
#line 23 "../src/ScreenshotManager.vala"
	gala_screenshot_manager_parent_class = g_type_class_peek_parent (klass);
#line 23 "../src/ScreenshotManager.vala"
	g_type_class_adjust_private_offset (klass, &GalaScreenshotManager_private_offset);
#line 23 "../src/ScreenshotManager.vala"
	G_OBJECT_CLASS (klass)->constructor = gala_screenshot_manager_constructor;
#line 23 "../src/ScreenshotManager.vala"
	G_OBJECT_CLASS (klass)->finalize = gala_screenshot_manager_finalize;
#line 4857 "ScreenshotManager.c"
}

static void
gala_screenshot_manager_instance_init (GalaScreenshotManager * self,
                                       gpointer klass)
{
#line 23 "../src/ScreenshotManager.vala"
	self->priv = gala_screenshot_manager_get_instance_private (self);
#line 4866 "ScreenshotManager.c"
}

static void
gala_screenshot_manager_finalize (GObject * obj)
{
	GalaScreenshotManager * self;
#line 23 "../src/ScreenshotManager.vala"
	self = G_TYPE_CHECK_INSTANCE_CAST (obj, GALA_TYPE_SCREENSHOT_MANAGER, GalaScreenshotManager);
#line 34 "../src/ScreenshotManager.vala"
	_g_object_unref0 (self->priv->wm);
#line 35 "../src/ScreenshotManager.vala"
	_g_object_unref0 (self->priv->desktop_settings);
#line 37 "../src/ScreenshotManager.vala"
	_g_free0 (self->priv->prev_font_regular);
#line 38 "../src/ScreenshotManager.vala"
	_g_free0 (self->priv->prev_font_document);
#line 39 "../src/ScreenshotManager.vala"
	_g_free0 (self->priv->prev_font_mono);
#line 23 "../src/ScreenshotManager.vala"
	G_OBJECT_CLASS (gala_screenshot_manager_parent_class)->finalize (obj);
#line 4887 "ScreenshotManager.c"
}

 G_GNUC_NO_INLINE static GType
gala_screenshot_manager_get_type_once (void)
{
	static const GTypeInfo g_define_type_info = { sizeof (GalaScreenshotManagerClass), (GBaseInitFunc) NULL, (GBaseFinalizeFunc) NULL, (GClassInitFunc) gala_screenshot_manager_class_init, (GClassFinalizeFunc) NULL, NULL, sizeof (GalaScreenshotManager), 0, (GInstanceInitFunc) gala_screenshot_manager_instance_init, NULL };
	GType gala_screenshot_manager_type_id;
	gala_screenshot_manager_type_id = g_type_register_static (G_TYPE_OBJECT, "GalaScreenshotManager", &g_define_type_info, 0);
	g_type_set_qdata (gala_screenshot_manager_type_id, g_quark_from_static_string ("vala-dbus-register-object"), (void*) gala_screenshot_manager_register_object);
	GalaScreenshotManager_private_offset = g_type_add_instance_private (gala_screenshot_manager_type_id, sizeof (GalaScreenshotManagerPrivate));
	return gala_screenshot_manager_type_id;
}

GType
gala_screenshot_manager_get_type (void)
{
	static gsize gala_screenshot_manager_type_id__once = 0;
	if (g_once_init_enter (&gala_screenshot_manager_type_id__once)) {
		GType gala_screenshot_manager_type_id;
		gala_screenshot_manager_type_id = gala_screenshot_manager_get_type_once ();
		g_once_init_leave (&gala_screenshot_manager_type_id__once, gala_screenshot_manager_type_id);
	}
	return gala_screenshot_manager_type_id__once;
}

static void
_dbus_gala_screenshot_manager_flash_area (GalaScreenshotManager* self,
                                          GVariant* _parameters_,
                                          GDBusMethodInvocation* invocation)
{
	GError* error = NULL;
	GVariantIter _arguments_iter;
	gint x = 0;
	GVariant* _tmp96_;
	gint y = 0;
	GVariant* _tmp97_;
	gint width = 0;
	GVariant* _tmp98_;
	gint height = 0;
	GVariant* _tmp99_;
	GDBusMessage* _reply_message = NULL;
	GVariant* _reply;
	GVariantBuilder _reply_builder;
#line 21 "../src/PluginManager.vala"
	g_variant_iter_init (&_arguments_iter, _parameters_);
#line 21 "../src/PluginManager.vala"
	_tmp96_ = g_variant_iter_next_value (&_arguments_iter);
#line 21 "../src/PluginManager.vala"
	x = g_variant_get_int32 (_tmp96_);
#line 21 "../src/PluginManager.vala"
	g_variant_unref (_tmp96_);
#line 21 "../src/PluginManager.vala"
	_tmp97_ = g_variant_iter_next_value (&_arguments_iter);
#line 21 "../src/PluginManager.vala"
	y = g_variant_get_int32 (_tmp97_);
#line 21 "../src/PluginManager.vala"
	g_variant_unref (_tmp97_);
#line 21 "../src/PluginManager.vala"
	_tmp98_ = g_variant_iter_next_value (&_arguments_iter);
#line 21 "../src/PluginManager.vala"
	width = g_variant_get_int32 (_tmp98_);
#line 21 "../src/PluginManager.vala"
	g_variant_unref (_tmp98_);
#line 21 "../src/PluginManager.vala"
	_tmp99_ = g_variant_iter_next_value (&_arguments_iter);
#line 21 "../src/PluginManager.vala"
	height = g_variant_get_int32 (_tmp99_);
#line 21 "../src/PluginManager.vala"
	g_variant_unref (_tmp99_);
#line 21 "../src/PluginManager.vala"
	gala_screenshot_manager_flash_area (self, x, y, width, height, &error);
#line 21 "../src/PluginManager.vala"
	if (error) {
#line 21 "../src/PluginManager.vala"
		g_dbus_method_invocation_take_error (invocation, error);
#line 21 "../src/PluginManager.vala"
		return;
#line 4965 "ScreenshotManager.c"
	}
#line 21 "../src/PluginManager.vala"
	_reply_message = g_dbus_message_new_method_reply (g_dbus_method_invocation_get_message (invocation));
#line 21 "../src/PluginManager.vala"
	g_variant_builder_init (&_reply_builder, G_VARIANT_TYPE_TUPLE);
#line 21 "../src/PluginManager.vala"
	_reply = g_variant_builder_end (&_reply_builder);
#line 21 "../src/PluginManager.vala"
	g_dbus_message_set_body (_reply_message, _reply);
#line 21 "../src/PluginManager.vala"
	g_dbus_connection_send_message (g_dbus_method_invocation_get_connection (invocation), _reply_message, G_DBUS_SEND_MESSAGE_FLAGS_NONE, NULL, NULL);
#line 21 "../src/PluginManager.vala"
	g_object_unref (invocation);
#line 21 "../src/PluginManager.vala"
	g_object_unref (_reply_message);
#line 4981 "ScreenshotManager.c"
}

static void
_dbus_gala_screenshot_manager_screenshot (GalaScreenshotManager* self,
                                          GVariant* _parameters_,
                                          GDBusMethodInvocation* invocation)
{
	GVariantIter _arguments_iter;
	GalaScreenshotManagerScreenshotReadyData* _ready_data;
	GVariant* _tmp100_;
	GVariant* _tmp101_;
	GVariant* _tmp102_;
#line 21 "../src/PluginManager.vala"
	g_variant_iter_init (&_arguments_iter, _parameters_);
#line 21 "../src/PluginManager.vala"
	_ready_data = g_slice_new0 (GalaScreenshotManagerScreenshotReadyData);
#line 21 "../src/PluginManager.vala"
	_ready_data->_invocation_ = invocation;
#line 21 "../src/PluginManager.vala"
	_tmp100_ = g_variant_iter_next_value (&_arguments_iter);
#line 21 "../src/PluginManager.vala"
	_ready_data->include_cursor = g_variant_get_boolean (_tmp100_);
#line 21 "../src/PluginManager.vala"
	g_variant_unref (_tmp100_);
#line 21 "../src/PluginManager.vala"
	_tmp101_ = g_variant_iter_next_value (&_arguments_iter);
#line 21 "../src/PluginManager.vala"
	_ready_data->flash = g_variant_get_boolean (_tmp101_);
#line 21 "../src/PluginManager.vala"
	g_variant_unref (_tmp101_);
#line 21 "../src/PluginManager.vala"
	_tmp102_ = g_variant_iter_next_value (&_arguments_iter);
#line 21 "../src/PluginManager.vala"
	_ready_data->filename = g_variant_dup_string (_tmp102_, NULL);
#line 21 "../src/PluginManager.vala"
	g_variant_unref (_tmp102_);
#line 21 "../src/PluginManager.vala"
	gala_screenshot_manager_screenshot (self, _ready_data->include_cursor, _ready_data->flash, _ready_data->filename, (GAsyncReadyCallback) _dbus_gala_screenshot_manager_screenshot_ready, _ready_data);
#line 5020 "ScreenshotManager.c"
	_error:
	;
}

static void
_dbus_gala_screenshot_manager_screenshot_ready (GObject * source_object,
                                                GAsyncResult * _res_,
                                                gpointer _user_data_)
{
	GalaScreenshotManagerScreenshotReadyData* _ready_data;
	GDBusMethodInvocation* invocation;
	GError* error = NULL;
	GDBusMessage* _reply_message = NULL;
	GVariant* _reply;
	GVariantBuilder _reply_builder;
	gboolean success = FALSE;
	gchar* filename_used = NULL;
	_ready_data = _user_data_;
	invocation = _ready_data->_invocation_;
#line 21 "../src/PluginManager.vala"
	gala_screenshot_manager_screenshot_finish ((GalaScreenshotManager*) source_object, _res_, &success, &filename_used, &error);
#line 21 "../src/PluginManager.vala"
	if (error) {
#line 21 "../src/PluginManager.vala"
		g_dbus_method_invocation_take_error (invocation, error);
#line 5046 "ScreenshotManager.c"
		goto _error;
	}
#line 21 "../src/PluginManager.vala"
	_reply_message = g_dbus_message_new_method_reply (g_dbus_method_invocation_get_message (invocation));
#line 21 "../src/PluginManager.vala"
	g_variant_builder_init (&_reply_builder, G_VARIANT_TYPE_TUPLE);
#line 21 "../src/PluginManager.vala"
	g_variant_builder_add_value (&_reply_builder, g_variant_new_boolean (success));
#line 21 "../src/PluginManager.vala"
	g_variant_builder_add_value (&_reply_builder, g_variant_new_string (filename_used));
#line 21 "../src/PluginManager.vala"
	_reply = g_variant_builder_end (&_reply_builder);
#line 21 "../src/PluginManager.vala"
	g_dbus_message_set_body (_reply_message, _reply);
#line 21 "../src/PluginManager.vala"
	g_dbus_connection_send_message (g_dbus_method_invocation_get_connection (invocation), _reply_message, G_DBUS_SEND_MESSAGE_FLAGS_NONE, NULL, NULL);
#line 21 "../src/PluginManager.vala"
	g_object_unref (invocation);
#line 21 "../src/PluginManager.vala"
	g_object_unref (_reply_message);
#line 5067 "ScreenshotManager.c"
	_error:
#line 21 "../src/PluginManager.vala"
	_g_free0 (_ready_data->filename);
#line 21 "../src/PluginManager.vala"
	_g_free0 (filename_used);
#line 21 "../src/PluginManager.vala"
	g_slice_free (GalaScreenshotManagerScreenshotReadyData, _ready_data);
#line 5075 "ScreenshotManager.c"
}

static void
_dbus_gala_screenshot_manager_screenshot_area (GalaScreenshotManager* self,
                                               GVariant* _parameters_,
                                               GDBusMethodInvocation* invocation)
{
	GVariantIter _arguments_iter;
	GalaScreenshotManagerScreenshotAreaReadyData* _ready_data;
	GVariant* _tmp103_;
	GVariant* _tmp104_;
	GVariant* _tmp105_;
	GVariant* _tmp106_;
	GVariant* _tmp107_;
	GVariant* _tmp108_;
#line 21 "../src/PluginManager.vala"
	g_variant_iter_init (&_arguments_iter, _parameters_);
#line 21 "../src/PluginManager.vala"
	_ready_data = g_slice_new0 (GalaScreenshotManagerScreenshotAreaReadyData);
#line 21 "../src/PluginManager.vala"
	_ready_data->_invocation_ = invocation;
#line 21 "../src/PluginManager.vala"
	_tmp103_ = g_variant_iter_next_value (&_arguments_iter);
#line 21 "../src/PluginManager.vala"
	_ready_data->x = g_variant_get_int32 (_tmp103_);
#line 21 "../src/PluginManager.vala"
	g_variant_unref (_tmp103_);
#line 21 "../src/PluginManager.vala"
	_tmp104_ = g_variant_iter_next_value (&_arguments_iter);
#line 21 "../src/PluginManager.vala"
	_ready_data->y = g_variant_get_int32 (_tmp104_);
#line 21 "../src/PluginManager.vala"
	g_variant_unref (_tmp104_);
#line 21 "../src/PluginManager.vala"
	_tmp105_ = g_variant_iter_next_value (&_arguments_iter);
#line 21 "../src/PluginManager.vala"
	_ready_data->width = g_variant_get_int32 (_tmp105_);
#line 21 "../src/PluginManager.vala"
	g_variant_unref (_tmp105_);
#line 21 "../src/PluginManager.vala"
	_tmp106_ = g_variant_iter_next_value (&_arguments_iter);
#line 21 "../src/PluginManager.vala"
	_ready_data->height = g_variant_get_int32 (_tmp106_);
#line 21 "../src/PluginManager.vala"
	g_variant_unref (_tmp106_);
#line 21 "../src/PluginManager.vala"
	_tmp107_ = g_variant_iter_next_value (&_arguments_iter);
#line 21 "../src/PluginManager.vala"
	_ready_data->flash = g_variant_get_boolean (_tmp107_);
#line 21 "../src/PluginManager.vala"
	g_variant_unref (_tmp107_);
#line 21 "../src/PluginManager.vala"
	_tmp108_ = g_variant_iter_next_value (&_arguments_iter);
#line 21 "../src/PluginManager.vala"
	_ready_data->filename = g_variant_dup_string (_tmp108_, NULL);
#line 21 "../src/PluginManager.vala"
	g_variant_unref (_tmp108_);
#line 21 "../src/PluginManager.vala"
	gala_screenshot_manager_screenshot_area (self, _ready_data->x, _ready_data->y, _ready_data->width, _ready_data->height, _ready_data->flash, _ready_data->filename, (GAsyncReadyCallback) _dbus_gala_screenshot_manager_screenshot_area_ready, _ready_data);
#line 5135 "ScreenshotManager.c"
	_error:
	;
}

static void
_dbus_gala_screenshot_manager_screenshot_area_ready (GObject * source_object,
                                                     GAsyncResult * _res_,
                                                     gpointer _user_data_)
{
	GalaScreenshotManagerScreenshotAreaReadyData* _ready_data;
	GDBusMethodInvocation* invocation;
	GError* error = NULL;
	GDBusMessage* _reply_message = NULL;
	GVariant* _reply;
	GVariantBuilder _reply_builder;
	gboolean success = FALSE;
	gchar* filename_used = NULL;
	_ready_data = _user_data_;
	invocation = _ready_data->_invocation_;
#line 21 "../src/PluginManager.vala"
	gala_screenshot_manager_screenshot_area_finish ((GalaScreenshotManager*) source_object, _res_, &success, &filename_used, &error);
#line 21 "../src/PluginManager.vala"
	if (error) {
#line 21 "../src/PluginManager.vala"
		g_dbus_method_invocation_take_error (invocation, error);
#line 5161 "ScreenshotManager.c"
		goto _error;
	}
#line 21 "../src/PluginManager.vala"
	_reply_message = g_dbus_message_new_method_reply (g_dbus_method_invocation_get_message (invocation));
#line 21 "../src/PluginManager.vala"
	g_variant_builder_init (&_reply_builder, G_VARIANT_TYPE_TUPLE);
#line 21 "../src/PluginManager.vala"
	g_variant_builder_add_value (&_reply_builder, g_variant_new_boolean (success));
#line 21 "../src/PluginManager.vala"
	g_variant_builder_add_value (&_reply_builder, g_variant_new_string (filename_used));
#line 21 "../src/PluginManager.vala"
	_reply = g_variant_builder_end (&_reply_builder);
#line 21 "../src/PluginManager.vala"
	g_dbus_message_set_body (_reply_message, _reply);
#line 21 "../src/PluginManager.vala"
	g_dbus_connection_send_message (g_dbus_method_invocation_get_connection (invocation), _reply_message, G_DBUS_SEND_MESSAGE_FLAGS_NONE, NULL, NULL);
#line 21 "../src/PluginManager.vala"
	g_object_unref (invocation);
#line 21 "../src/PluginManager.vala"
	g_object_unref (_reply_message);
#line 5182 "ScreenshotManager.c"
	_error:
#line 21 "../src/PluginManager.vala"
	_g_free0 (_ready_data->filename);
#line 21 "../src/PluginManager.vala"
	_g_free0 (filename_used);
#line 21 "../src/PluginManager.vala"
	g_slice_free (GalaScreenshotManagerScreenshotAreaReadyData, _ready_data);
#line 5190 "ScreenshotManager.c"
}

static void
_dbus_gala_screenshot_manager_screenshot_area_with_cursor (GalaScreenshotManager* self,
                                                           GVariant* _parameters_,
                                                           GDBusMethodInvocation* invocation)
{
	GVariantIter _arguments_iter;
	GalaScreenshotManagerScreenshotAreaWithCursorReadyData* _ready_data;
	GVariant* _tmp109_;
	GVariant* _tmp110_;
	GVariant* _tmp111_;
	GVariant* _tmp112_;
	GVariant* _tmp113_;
	GVariant* _tmp114_;
	GVariant* _tmp115_;
#line 21 "../src/PluginManager.vala"
	g_variant_iter_init (&_arguments_iter, _parameters_);
#line 21 "../src/PluginManager.vala"
	_ready_data = g_slice_new0 (GalaScreenshotManagerScreenshotAreaWithCursorReadyData);
#line 21 "../src/PluginManager.vala"
	_ready_data->_invocation_ = invocation;
#line 21 "../src/PluginManager.vala"
	_tmp109_ = g_variant_iter_next_value (&_arguments_iter);
#line 21 "../src/PluginManager.vala"
	_ready_data->x = g_variant_get_int32 (_tmp109_);
#line 21 "../src/PluginManager.vala"
	g_variant_unref (_tmp109_);
#line 21 "../src/PluginManager.vala"
	_tmp110_ = g_variant_iter_next_value (&_arguments_iter);
#line 21 "../src/PluginManager.vala"
	_ready_data->y = g_variant_get_int32 (_tmp110_);
#line 21 "../src/PluginManager.vala"
	g_variant_unref (_tmp110_);
#line 21 "../src/PluginManager.vala"
	_tmp111_ = g_variant_iter_next_value (&_arguments_iter);
#line 21 "../src/PluginManager.vala"
	_ready_data->width = g_variant_get_int32 (_tmp111_);
#line 21 "../src/PluginManager.vala"
	g_variant_unref (_tmp111_);
#line 21 "../src/PluginManager.vala"
	_tmp112_ = g_variant_iter_next_value (&_arguments_iter);
#line 21 "../src/PluginManager.vala"
	_ready_data->height = g_variant_get_int32 (_tmp112_);
#line 21 "../src/PluginManager.vala"
	g_variant_unref (_tmp112_);
#line 21 "../src/PluginManager.vala"
	_tmp113_ = g_variant_iter_next_value (&_arguments_iter);
#line 21 "../src/PluginManager.vala"
	_ready_data->include_cursor = g_variant_get_boolean (_tmp113_);
#line 21 "../src/PluginManager.vala"
	g_variant_unref (_tmp113_);
#line 21 "../src/PluginManager.vala"
	_tmp114_ = g_variant_iter_next_value (&_arguments_iter);
#line 21 "../src/PluginManager.vala"
	_ready_data->flash = g_variant_get_boolean (_tmp114_);
#line 21 "../src/PluginManager.vala"
	g_variant_unref (_tmp114_);
#line 21 "../src/PluginManager.vala"
	_tmp115_ = g_variant_iter_next_value (&_arguments_iter);
#line 21 "../src/PluginManager.vala"
	_ready_data->filename = g_variant_dup_string (_tmp115_, NULL);
#line 21 "../src/PluginManager.vala"
	g_variant_unref (_tmp115_);
#line 21 "../src/PluginManager.vala"
	gala_screenshot_manager_screenshot_area_with_cursor (self, _ready_data->x, _ready_data->y, _ready_data->width, _ready_data->height, _ready_data->include_cursor, _ready_data->flash, _ready_data->filename, (GAsyncReadyCallback) _dbus_gala_screenshot_manager_screenshot_area_with_cursor_ready, _ready_data);
#line 5257 "ScreenshotManager.c"
	_error:
	;
}

static void
_dbus_gala_screenshot_manager_screenshot_area_with_cursor_ready (GObject * source_object,
                                                                 GAsyncResult * _res_,
                                                                 gpointer _user_data_)
{
	GalaScreenshotManagerScreenshotAreaWithCursorReadyData* _ready_data;
	GDBusMethodInvocation* invocation;
	GError* error = NULL;
	GDBusMessage* _reply_message = NULL;
	GVariant* _reply;
	GVariantBuilder _reply_builder;
	gboolean success = FALSE;
	gchar* filename_used = NULL;
	_ready_data = _user_data_;
	invocation = _ready_data->_invocation_;
#line 21 "../src/PluginManager.vala"
	gala_screenshot_manager_screenshot_area_with_cursor_finish ((GalaScreenshotManager*) source_object, _res_, &success, &filename_used, &error);
#line 21 "../src/PluginManager.vala"
	if (error) {
#line 21 "../src/PluginManager.vala"
		g_dbus_method_invocation_take_error (invocation, error);
#line 5283 "ScreenshotManager.c"
		goto _error;
	}
#line 21 "../src/PluginManager.vala"
	_reply_message = g_dbus_message_new_method_reply (g_dbus_method_invocation_get_message (invocation));
#line 21 "../src/PluginManager.vala"
	g_variant_builder_init (&_reply_builder, G_VARIANT_TYPE_TUPLE);
#line 21 "../src/PluginManager.vala"
	g_variant_builder_add_value (&_reply_builder, g_variant_new_boolean (success));
#line 21 "../src/PluginManager.vala"
	g_variant_builder_add_value (&_reply_builder, g_variant_new_string (filename_used));
#line 21 "../src/PluginManager.vala"
	_reply = g_variant_builder_end (&_reply_builder);
#line 21 "../src/PluginManager.vala"
	g_dbus_message_set_body (_reply_message, _reply);
#line 21 "../src/PluginManager.vala"
	g_dbus_connection_send_message (g_dbus_method_invocation_get_connection (invocation), _reply_message, G_DBUS_SEND_MESSAGE_FLAGS_NONE, NULL, NULL);
#line 21 "../src/PluginManager.vala"
	g_object_unref (invocation);
#line 21 "../src/PluginManager.vala"
	g_object_unref (_reply_message);
#line 5304 "ScreenshotManager.c"
	_error:
#line 21 "../src/PluginManager.vala"
	_g_free0 (_ready_data->filename);
#line 21 "../src/PluginManager.vala"
	_g_free0 (filename_used);
#line 21 "../src/PluginManager.vala"
	g_slice_free (GalaScreenshotManagerScreenshotAreaWithCursorReadyData, _ready_data);
#line 5312 "ScreenshotManager.c"
}

static void
_dbus_gala_screenshot_manager_screenshot_window (GalaScreenshotManager* self,
                                                 GVariant* _parameters_,
                                                 GDBusMethodInvocation* invocation)
{
	GVariantIter _arguments_iter;
	GalaScreenshotManagerScreenshotWindowReadyData* _ready_data;
	GVariant* _tmp116_;
	GVariant* _tmp117_;
	GVariant* _tmp118_;
	GVariant* _tmp119_;
#line 21 "../src/PluginManager.vala"
	g_variant_iter_init (&_arguments_iter, _parameters_);
#line 21 "../src/PluginManager.vala"
	_ready_data = g_slice_new0 (GalaScreenshotManagerScreenshotWindowReadyData);
#line 21 "../src/PluginManager.vala"
	_ready_data->_invocation_ = invocation;
#line 21 "../src/PluginManager.vala"
	_tmp116_ = g_variant_iter_next_value (&_arguments_iter);
#line 21 "../src/PluginManager.vala"
	_ready_data->include_frame = g_variant_get_boolean (_tmp116_);
#line 21 "../src/PluginManager.vala"
	g_variant_unref (_tmp116_);
#line 21 "../src/PluginManager.vala"
	_tmp117_ = g_variant_iter_next_value (&_arguments_iter);
#line 21 "../src/PluginManager.vala"
	_ready_data->include_cursor = g_variant_get_boolean (_tmp117_);
#line 21 "../src/PluginManager.vala"
	g_variant_unref (_tmp117_);
#line 21 "../src/PluginManager.vala"
	_tmp118_ = g_variant_iter_next_value (&_arguments_iter);
#line 21 "../src/PluginManager.vala"
	_ready_data->flash = g_variant_get_boolean (_tmp118_);
#line 21 "../src/PluginManager.vala"
	g_variant_unref (_tmp118_);
#line 21 "../src/PluginManager.vala"
	_tmp119_ = g_variant_iter_next_value (&_arguments_iter);
#line 21 "../src/PluginManager.vala"
	_ready_data->filename = g_variant_dup_string (_tmp119_, NULL);
#line 21 "../src/PluginManager.vala"
	g_variant_unref (_tmp119_);
#line 21 "../src/PluginManager.vala"
	gala_screenshot_manager_screenshot_window (self, _ready_data->include_frame, _ready_data->include_cursor, _ready_data->flash, _ready_data->filename, (GAsyncReadyCallback) _dbus_gala_screenshot_manager_screenshot_window_ready, _ready_data);
#line 5358 "ScreenshotManager.c"
	_error:
	;
}

static void
_dbus_gala_screenshot_manager_screenshot_window_ready (GObject * source_object,
                                                       GAsyncResult * _res_,
                                                       gpointer _user_data_)
{
	GalaScreenshotManagerScreenshotWindowReadyData* _ready_data;
	GDBusMethodInvocation* invocation;
	GError* error = NULL;
	GDBusMessage* _reply_message = NULL;
	GVariant* _reply;
	GVariantBuilder _reply_builder;
	gboolean success = FALSE;
	gchar* filename_used = NULL;
	_ready_data = _user_data_;
	invocation = _ready_data->_invocation_;
#line 21 "../src/PluginManager.vala"
	gala_screenshot_manager_screenshot_window_finish ((GalaScreenshotManager*) source_object, _res_, &success, &filename_used, &error);
#line 21 "../src/PluginManager.vala"
	if (error) {
#line 21 "../src/PluginManager.vala"
		g_dbus_method_invocation_take_error (invocation, error);
#line 5384 "ScreenshotManager.c"
		goto _error;
	}
#line 21 "../src/PluginManager.vala"
	_reply_message = g_dbus_message_new_method_reply (g_dbus_method_invocation_get_message (invocation));
#line 21 "../src/PluginManager.vala"
	g_variant_builder_init (&_reply_builder, G_VARIANT_TYPE_TUPLE);
#line 21 "../src/PluginManager.vala"
	g_variant_builder_add_value (&_reply_builder, g_variant_new_boolean (success));
#line 21 "../src/PluginManager.vala"
	g_variant_builder_add_value (&_reply_builder, g_variant_new_string (filename_used));
#line 21 "../src/PluginManager.vala"
	_reply = g_variant_builder_end (&_reply_builder);
#line 21 "../src/PluginManager.vala"
	g_dbus_message_set_body (_reply_message, _reply);
#line 21 "../src/PluginManager.vala"
	g_dbus_connection_send_message (g_dbus_method_invocation_get_connection (invocation), _reply_message, G_DBUS_SEND_MESSAGE_FLAGS_NONE, NULL, NULL);
#line 21 "../src/PluginManager.vala"
	g_object_unref (invocation);
#line 21 "../src/PluginManager.vala"
	g_object_unref (_reply_message);
#line 5405 "ScreenshotManager.c"
	_error:
#line 21 "../src/PluginManager.vala"
	_g_free0 (_ready_data->filename);
#line 21 "../src/PluginManager.vala"
	_g_free0 (filename_used);
#line 21 "../src/PluginManager.vala"
	g_slice_free (GalaScreenshotManagerScreenshotWindowReadyData, _ready_data);
#line 5413 "ScreenshotManager.c"
}

static void
_dbus_gala_screenshot_manager_select_area (GalaScreenshotManager* self,
                                           GVariant* _parameters_,
                                           GDBusMethodInvocation* invocation)
{
	GVariantIter _arguments_iter;
	GalaScreenshotManagerSelectAreaReadyData* _ready_data;
#line 21 "../src/PluginManager.vala"
	g_variant_iter_init (&_arguments_iter, _parameters_);
#line 21 "../src/PluginManager.vala"
	_ready_data = g_slice_new0 (GalaScreenshotManagerSelectAreaReadyData);
#line 21 "../src/PluginManager.vala"
	_ready_data->_invocation_ = invocation;
#line 21 "../src/PluginManager.vala"
	gala_screenshot_manager_select_area (self, (GAsyncReadyCallback) _dbus_gala_screenshot_manager_select_area_ready, _ready_data);
#line 5431 "ScreenshotManager.c"
}

static void
_dbus_gala_screenshot_manager_select_area_ready (GObject * source_object,
                                                 GAsyncResult * _res_,
                                                 gpointer _user_data_)
{
	GalaScreenshotManagerSelectAreaReadyData* _ready_data;
	GDBusMethodInvocation* invocation;
	GError* error = NULL;
	GDBusMessage* _reply_message = NULL;
	GVariant* _reply;
	GVariantBuilder _reply_builder;
	gint x = 0;
	gint y = 0;
	gint width = 0;
	gint height = 0;
	_ready_data = _user_data_;
	invocation = _ready_data->_invocation_;
#line 21 "../src/PluginManager.vala"
	gala_screenshot_manager_select_area_finish ((GalaScreenshotManager*) source_object, _res_, &x, &y, &width, &height, &error);
#line 21 "../src/PluginManager.vala"
	if (error) {
#line 21 "../src/PluginManager.vala"
		g_dbus_method_invocation_take_error (invocation, error);
#line 5457 "ScreenshotManager.c"
		goto _error;
	}
#line 21 "../src/PluginManager.vala"
	_reply_message = g_dbus_message_new_method_reply (g_dbus_method_invocation_get_message (invocation));
#line 21 "../src/PluginManager.vala"
	g_variant_builder_init (&_reply_builder, G_VARIANT_TYPE_TUPLE);
#line 21 "../src/PluginManager.vala"
	g_variant_builder_add_value (&_reply_builder, g_variant_new_int32 (x));
#line 21 "../src/PluginManager.vala"
	g_variant_builder_add_value (&_reply_builder, g_variant_new_int32 (y));
#line 21 "../src/PluginManager.vala"
	g_variant_builder_add_value (&_reply_builder, g_variant_new_int32 (width));
#line 21 "../src/PluginManager.vala"
	g_variant_builder_add_value (&_reply_builder, g_variant_new_int32 (height));
#line 21 "../src/PluginManager.vala"
	_reply = g_variant_builder_end (&_reply_builder);
#line 21 "../src/PluginManager.vala"
	g_dbus_message_set_body (_reply_message, _reply);
#line 21 "../src/PluginManager.vala"
	g_dbus_connection_send_message (g_dbus_method_invocation_get_connection (invocation), _reply_message, G_DBUS_SEND_MESSAGE_FLAGS_NONE, NULL, NULL);
#line 21 "../src/PluginManager.vala"
	g_object_unref (invocation);
#line 21 "../src/PluginManager.vala"
	g_object_unref (_reply_message);
#line 5482 "ScreenshotManager.c"
	_error:
#line 21 "../src/PluginManager.vala"
	g_slice_free (GalaScreenshotManagerSelectAreaReadyData, _ready_data);
#line 5486 "ScreenshotManager.c"
}

static void
_dbus_gala_screenshot_manager_conceal_text (GalaScreenshotManager* self,
                                            GVariant* _parameters_,
                                            GDBusMethodInvocation* invocation)
{
	GVariantIter _arguments_iter;
	GalaScreenshotManagerConcealTextReadyData* _ready_data;
#line 21 "../src/PluginManager.vala"
	g_variant_iter_init (&_arguments_iter, _parameters_);
#line 21 "../src/PluginManager.vala"
	_ready_data = g_slice_new0 (GalaScreenshotManagerConcealTextReadyData);
#line 21 "../src/PluginManager.vala"
	_ready_data->_invocation_ = invocation;
#line 21 "../src/PluginManager.vala"
	gala_screenshot_manager_conceal_text (self, (GAsyncReadyCallback) _dbus_gala_screenshot_manager_conceal_text_ready, _ready_data);
#line 5504 "ScreenshotManager.c"
}

static void
_dbus_gala_screenshot_manager_conceal_text_ready (GObject * source_object,
                                                  GAsyncResult * _res_,
                                                  gpointer _user_data_)
{
	GalaScreenshotManagerConcealTextReadyData* _ready_data;
	GDBusMethodInvocation* invocation;
	GError* error = NULL;
	GDBusMessage* _reply_message = NULL;
	GVariant* _reply;
	GVariantBuilder _reply_builder;
	_ready_data = _user_data_;
	invocation = _ready_data->_invocation_;
#line 21 "../src/PluginManager.vala"
	gala_screenshot_manager_conceal_text_finish ((GalaScreenshotManager*) source_object, _res_, &error);
#line 21 "../src/PluginManager.vala"
	if (error) {
#line 21 "../src/PluginManager.vala"
		g_dbus_method_invocation_take_error (invocation, error);
#line 5526 "ScreenshotManager.c"
		goto _error;
	}
#line 21 "../src/PluginManager.vala"
	_reply_message = g_dbus_message_new_method_reply (g_dbus_method_invocation_get_message (invocation));
#line 21 "../src/PluginManager.vala"
	g_variant_builder_init (&_reply_builder, G_VARIANT_TYPE_TUPLE);
#line 21 "../src/PluginManager.vala"
	_reply = g_variant_builder_end (&_reply_builder);
#line 21 "../src/PluginManager.vala"
	g_dbus_message_set_body (_reply_message, _reply);
#line 21 "../src/PluginManager.vala"
	g_dbus_connection_send_message (g_dbus_method_invocation_get_connection (invocation), _reply_message, G_DBUS_SEND_MESSAGE_FLAGS_NONE, NULL, NULL);
#line 21 "../src/PluginManager.vala"
	g_object_unref (invocation);
#line 21 "../src/PluginManager.vala"
	g_object_unref (_reply_message);
#line 5543 "ScreenshotManager.c"
	_error:
#line 21 "../src/PluginManager.vala"
	g_slice_free (GalaScreenshotManagerConcealTextReadyData, _ready_data);
#line 5547 "ScreenshotManager.c"
}

static void
_dbus_gala_screenshot_manager_pick_color (GalaScreenshotManager* self,
                                          GVariant* _parameters_,
                                          GDBusMethodInvocation* invocation)
{
	GVariantIter _arguments_iter;
	GalaScreenshotManagerPickColorReadyData* _ready_data;
#line 21 "../src/PluginManager.vala"
	g_variant_iter_init (&_arguments_iter, _parameters_);
#line 21 "../src/PluginManager.vala"
	_ready_data = g_slice_new0 (GalaScreenshotManagerPickColorReadyData);
#line 21 "../src/PluginManager.vala"
	_ready_data->_invocation_ = invocation;
#line 21 "../src/PluginManager.vala"
	gala_screenshot_manager_pick_color (self, (GAsyncReadyCallback) _dbus_gala_screenshot_manager_pick_color_ready, _ready_data);
#line 5565 "ScreenshotManager.c"
}

static void
_dbus_gala_screenshot_manager_pick_color_ready (GObject * source_object,
                                                GAsyncResult * _res_,
                                                gpointer _user_data_)
{
	GalaScreenshotManagerPickColorReadyData* _ready_data;
	GDBusMethodInvocation* invocation;
	GError* error = NULL;
	GDBusMessage* _reply_message = NULL;
	GVariant* _reply;
	GVariantBuilder _reply_builder;
	GHashTable* result;
	GVariantBuilder _tmp120_;
	GHashTableIter _tmp121_;
	gpointer _tmp122_;
	gpointer _tmp123_;
	_ready_data = _user_data_;
	invocation = _ready_data->_invocation_;
#line 21 "../src/PluginManager.vala"
	result = gala_screenshot_manager_pick_color_finish ((GalaScreenshotManager*) source_object, _res_, &error);
#line 21 "../src/PluginManager.vala"
	if (error) {
#line 21 "../src/PluginManager.vala"
		g_dbus_method_invocation_take_error (invocation, error);
#line 5592 "ScreenshotManager.c"
		goto _error;
	}
#line 21 "../src/PluginManager.vala"
	_reply_message = g_dbus_message_new_method_reply (g_dbus_method_invocation_get_message (invocation));
#line 21 "../src/PluginManager.vala"
	g_variant_builder_init (&_reply_builder, G_VARIANT_TYPE_TUPLE);
#line 21 "../src/PluginManager.vala"
	g_hash_table_iter_init (&_tmp121_, result);
#line 21 "../src/PluginManager.vala"
	g_variant_builder_init (&_tmp120_, G_VARIANT_TYPE ("a{sv}"));
#line 21 "../src/PluginManager.vala"
	while (g_hash_table_iter_next (&_tmp121_, &_tmp122_, &_tmp123_)) {
#line 5605 "ScreenshotManager.c"
		gchar* _key;
		GVariant* _value;
#line 21 "../src/PluginManager.vala"
		_key = (gchar*) _tmp122_;
#line 21 "../src/PluginManager.vala"
		_value = (GVariant*) _tmp123_;
#line 21 "../src/PluginManager.vala"
		g_variant_builder_add (&_tmp120_, "{?*}", g_variant_new_string (_key), g_variant_new_variant (_value));
#line 5614 "ScreenshotManager.c"
	}
#line 21 "../src/PluginManager.vala"
	g_variant_builder_add_value (&_reply_builder, g_variant_builder_end (&_tmp120_));
#line 21 "../src/PluginManager.vala"
	_g_hash_table_unref0 (result);
#line 21 "../src/PluginManager.vala"
	_reply = g_variant_builder_end (&_reply_builder);
#line 21 "../src/PluginManager.vala"
	g_dbus_message_set_body (_reply_message, _reply);
#line 21 "../src/PluginManager.vala"
	g_dbus_connection_send_message (g_dbus_method_invocation_get_connection (invocation), _reply_message, G_DBUS_SEND_MESSAGE_FLAGS_NONE, NULL, NULL);
#line 21 "../src/PluginManager.vala"
	g_object_unref (invocation);
#line 21 "../src/PluginManager.vala"
	g_object_unref (_reply_message);
#line 5630 "ScreenshotManager.c"
	_error:
#line 21 "../src/PluginManager.vala"
	g_slice_free (GalaScreenshotManagerPickColorReadyData, _ready_data);
#line 5634 "ScreenshotManager.c"
}

static void
gala_screenshot_manager_dbus_interface_method_call (GDBusConnection* connection,
                                                    const gchar* sender,
                                                    const gchar* object_path,
                                                    const gchar* interface_name,
                                                    const gchar* method_name,
                                                    GVariant* parameters,
                                                    GDBusMethodInvocation* invocation,
                                                    gpointer user_data)
{
	gpointer* data;
	gpointer object;
	data = user_data;
	object = data[0];
#line 21 "../src/PluginManager.vala"
	if (strcmp (method_name, "FlashArea") == 0) {
#line 21 "../src/PluginManager.vala"
		_dbus_gala_screenshot_manager_flash_area (object, parameters, invocation);
#line 5655 "ScreenshotManager.c"
	} else if (strcmp (method_name, "Screenshot") == 0) {
#line 21 "../src/PluginManager.vala"
		_dbus_gala_screenshot_manager_screenshot (object, parameters, invocation);
#line 5659 "ScreenshotManager.c"
	} else if (strcmp (method_name, "ScreenshotArea") == 0) {
#line 21 "../src/PluginManager.vala"
		_dbus_gala_screenshot_manager_screenshot_area (object, parameters, invocation);
#line 5663 "ScreenshotManager.c"
	} else if (strcmp (method_name, "ScreenshotAreaWithCursor") == 0) {
#line 21 "../src/PluginManager.vala"
		_dbus_gala_screenshot_manager_screenshot_area_with_cursor (object, parameters, invocation);
#line 5667 "ScreenshotManager.c"
	} else if (strcmp (method_name, "ScreenshotWindow") == 0) {
#line 21 "../src/PluginManager.vala"
		_dbus_gala_screenshot_manager_screenshot_window (object, parameters, invocation);
#line 5671 "ScreenshotManager.c"
	} else if (strcmp (method_name, "SelectArea") == 0) {
#line 21 "../src/PluginManager.vala"
		_dbus_gala_screenshot_manager_select_area (object, parameters, invocation);
#line 5675 "ScreenshotManager.c"
	} else if (strcmp (method_name, "ConcealText") == 0) {
#line 21 "../src/PluginManager.vala"
		_dbus_gala_screenshot_manager_conceal_text (object, parameters, invocation);
#line 5679 "ScreenshotManager.c"
	} else if (strcmp (method_name, "PickColor") == 0) {
#line 21 "../src/PluginManager.vala"
		_dbus_gala_screenshot_manager_pick_color (object, parameters, invocation);
#line 5683 "ScreenshotManager.c"
	} else {
#line 21 "../src/PluginManager.vala"
		g_object_unref (invocation);
#line 5687 "ScreenshotManager.c"
	}
}

static GVariant*
gala_screenshot_manager_dbus_interface_get_property (GDBusConnection* connection,
                                                     const gchar* sender,
                                                     const gchar* object_path,
                                                     const gchar* interface_name,
                                                     const gchar* property_name,
                                                     GError** error,
                                                     gpointer user_data)
{
	gpointer* data;
	gpointer object;
	data = user_data;
	object = data[0];
#line 21 "../src/PluginManager.vala"
	return NULL;
#line 5706 "ScreenshotManager.c"
}

static gboolean
gala_screenshot_manager_dbus_interface_set_property (GDBusConnection* connection,
                                                     const gchar* sender,
                                                     const gchar* object_path,
                                                     const gchar* interface_name,
                                                     const gchar* property_name,
                                                     GVariant* value,
                                                     GError** error,
                                                     gpointer user_data)
{
	gpointer* data;
	gpointer object;
	data = user_data;
	object = data[0];
#line 21 "../src/PluginManager.vala"
	return FALSE;
#line 5725 "ScreenshotManager.c"
}

guint
gala_screenshot_manager_register_object (gpointer object,
                                         GDBusConnection* connection,
                                         const gchar* path,
                                         GError** error)
{
	guint result;
	gpointer *data;
#line 21 "../src/PluginManager.vala"
	data = g_new (gpointer, 3);
#line 21 "../src/PluginManager.vala"
	data[0] = g_object_ref (object);
#line 21 "../src/PluginManager.vala"
	data[1] = g_object_ref (connection);
#line 21 "../src/PluginManager.vala"
	data[2] = g_strdup (path);
#line 21 "../src/PluginManager.vala"
	result = g_dbus_connection_register_object (connection, path, (GDBusInterfaceInfo *) (&_gala_screenshot_manager_dbus_interface_info), &_gala_screenshot_manager_dbus_interface_vtable, data, _gala_screenshot_manager_unregister_object, error);
#line 21 "../src/PluginManager.vala"
	if (!result) {
#line 21 "../src/PluginManager.vala"
		return 0;
#line 5750 "ScreenshotManager.c"
	}
#line 21 "../src/PluginManager.vala"
	return result;
#line 5754 "ScreenshotManager.c"
}

static void
_gala_screenshot_manager_unregister_object (gpointer user_data)
{
	gpointer* data;
	data = user_data;
#line 21 "../src/PluginManager.vala"
	g_object_unref (data[0]);
#line 21 "../src/PluginManager.vala"
	g_object_unref (data[1]);
#line 21 "../src/PluginManager.vala"
	g_free (data[2]);
#line 21 "../src/PluginManager.vala"
	g_free (data);
#line 5770 "ScreenshotManager.c"
}

