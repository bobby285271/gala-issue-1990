/* WindowSwitcher.c generated by valac 0.56.17, the Vala compiler
 * generated from WindowSwitcher.vala, do not modify */

/*
 * Copyright 2021 Aral Balkan <mail@ar.al>
 * Copyright 2020 Mark Story <mark@mark-story.com>
 * Copyright 2017 Popye <sailor3101@gmail.com>
 * Copyright 2014 Tom Beckmann
 * Copyright 2023 elementary, Inc. <https://elementary.io>
 * SPDX-License-Identifier: GPL-3.0-or-later
 */

#include "gala.h"
#include <glib-object.h>
#include <glib.h>
#include <clutter/clutter.h>
#include <float.h>
#include <math.h>
#include <cairo-gobject.h>
#include <stdlib.h>
#include <string.h>
#include <meta/meta-plugin.h>
#include <meta/display.h>
#include <mtk/mtk.h>
#include <gdk/gdk.h>
#include <meta/window.h>
#include <meta/keybindings.h>
#include <meta/workspace.h>
#include <meta/meta-workspace-manager.h>
#include <meta/prefs.h>
#include <meta/meta-cursor-tracker.h>
#include <pango/pango.h>
#include <meta/meta-monitor-manager.h>
#include <meta/meta-context.h>
#include <meta/meta-backend.h>

#define GALA_WINDOW_SWITCHER_ICON_SIZE 64
#define GALA_WINDOW_SWITCHER_WRAPPER_PADDING 12
#define GALA_WINDOW_SWITCHER_CAPTION_FONT_NAME "Inter"
#define GALA_WINDOW_SWITCHER_MIN_OFFSET 64
#define GALA_WINDOW_SWITCHER_ANIMATION_DURATION 200
#define GALA_WINDOW_SWITCHER_GESTURE_RANGE_LIMIT 10
#if !defined(VALA_STRICT_C)
#if !defined(__clang__) && defined(__GNUC__) && (__GNUC__ >= 14)
#pragma GCC diagnostic warning "-Wincompatible-pointer-types"
#elif defined(__clang__) && (__clang_major__ >= 16)
#pragma clang diagnostic ignored "-Wincompatible-function-pointer-types"
#pragma clang diagnostic ignored "-Wincompatible-pointer-types"
#endif
#endif
#if !defined(VALA_EXTERN)
#if defined(_MSC_VER)
#define VALA_EXTERN __declspec(dllexport) extern
#elif __GNUC__ >= 4
#define VALA_EXTERN __attribute__((visibility("default"))) extern
#else
#define VALA_EXTERN extern
#endif
#endif

#define GALA_TYPE_WINDOW_SWITCHER (gala_window_switcher_get_type ())
#define GALA_WINDOW_SWITCHER(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), GALA_TYPE_WINDOW_SWITCHER, GalaWindowSwitcher))
#define GALA_WINDOW_SWITCHER_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), GALA_TYPE_WINDOW_SWITCHER, GalaWindowSwitcherClass))
#define GALA_IS_WINDOW_SWITCHER(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), GALA_TYPE_WINDOW_SWITCHER))
#define GALA_IS_WINDOW_SWITCHER_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), GALA_TYPE_WINDOW_SWITCHER))
#define GALA_WINDOW_SWITCHER_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), GALA_TYPE_WINDOW_SWITCHER, GalaWindowSwitcherClass))

typedef struct _GalaWindowSwitcher GalaWindowSwitcher;
typedef struct _GalaWindowSwitcherClass GalaWindowSwitcherClass;
typedef struct _GalaWindowSwitcherPrivate GalaWindowSwitcherPrivate;

#define GALA_TYPE_GESTURE_TRACKER (gala_gesture_tracker_get_type ())
#define GALA_GESTURE_TRACKER(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), GALA_TYPE_GESTURE_TRACKER, GalaGestureTracker))
#define GALA_GESTURE_TRACKER_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), GALA_TYPE_GESTURE_TRACKER, GalaGestureTrackerClass))
#define GALA_IS_GESTURE_TRACKER(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), GALA_TYPE_GESTURE_TRACKER))
#define GALA_IS_GESTURE_TRACKER_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), GALA_TYPE_GESTURE_TRACKER))
#define GALA_GESTURE_TRACKER_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), GALA_TYPE_GESTURE_TRACKER, GalaGestureTrackerClass))

typedef struct _GalaGestureTracker GalaGestureTracker;
typedef struct _GalaGestureTrackerClass GalaGestureTrackerClass;

#define GALA_TYPE_WINDOW_SWITCHER_ICON (gala_window_switcher_icon_get_type ())
#define GALA_WINDOW_SWITCHER_ICON(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), GALA_TYPE_WINDOW_SWITCHER_ICON, GalaWindowSwitcherIcon))
#define GALA_WINDOW_SWITCHER_ICON_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), GALA_TYPE_WINDOW_SWITCHER_ICON, GalaWindowSwitcherIconClass))
#define GALA_IS_WINDOW_SWITCHER_ICON(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), GALA_TYPE_WINDOW_SWITCHER_ICON))
#define GALA_IS_WINDOW_SWITCHER_ICON_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), GALA_TYPE_WINDOW_SWITCHER_ICON))
#define GALA_WINDOW_SWITCHER_ICON_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), GALA_TYPE_WINDOW_SWITCHER_ICON, GalaWindowSwitcherIconClass))

typedef struct _GalaWindowSwitcherIcon GalaWindowSwitcherIcon;
typedef struct _GalaWindowSwitcherIconClass GalaWindowSwitcherIconClass;
enum  {
	GALA_WINDOW_SWITCHER_0_PROPERTY,
	GALA_WINDOW_SWITCHER_WM_PROPERTY,
	GALA_WINDOW_SWITCHER_GESTURE_TRACKER_PROPERTY,
	GALA_WINDOW_SWITCHER_OPENED_PROPERTY,
	GALA_WINDOW_SWITCHER_NUM_PROPERTIES
};
static GParamSpec* gala_window_switcher_properties[GALA_WINDOW_SWITCHER_NUM_PROPERTIES];
#define _g_object_unref0(var) ((var == NULL) ? NULL : (var = (g_object_unref (var), NULL)))
#define _g_free0(var) (var = (g_free (var), NULL))
#define __vala_ClutterColor_free0(var) ((var == NULL) ? NULL : (var = (_vala_ClutterColor_free (var), NULL)))
typedef enum  {
	GALA_GESTURE_DIRECTION_UNKNOWN = 0,
	GALA_GESTURE_DIRECTION_UP = 1,
	GALA_GESTURE_DIRECTION_DOWN = 2,
	GALA_GESTURE_DIRECTION_LEFT = 3,
	GALA_GESTURE_DIRECTION_RIGHT = 4,
	GALA_GESTURE_DIRECTION_IN = 5,
	GALA_GESTURE_DIRECTION_OUT = 6
} GalaGestureDirection;

#define GALA_TYPE_GESTURE_DIRECTION (gala_gesture_direction_get_type ())
typedef struct _Block74Data Block74Data;
typedef void (*GalaGestureTrackerOnUpdate) (gdouble percentage, gpointer user_data);
typedef void (*GalaGestureTrackerOnEnd) (gdouble percentage, gboolean cancel_action, gint calculated_duration, gpointer user_data);
typedef void (*GalaGestureTrackerOnBegin) (gdouble percentage, gpointer user_data);

#define GALA_TYPE_WINDOW_TRACKER (gala_window_tracker_get_type ())
#define GALA_WINDOW_TRACKER(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), GALA_TYPE_WINDOW_TRACKER, GalaWindowTracker))
#define GALA_WINDOW_TRACKER_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), GALA_TYPE_WINDOW_TRACKER, GalaWindowTrackerClass))
#define GALA_IS_WINDOW_TRACKER(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), GALA_TYPE_WINDOW_TRACKER))
#define GALA_IS_WINDOW_TRACKER_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), GALA_TYPE_WINDOW_TRACKER))
#define GALA_WINDOW_TRACKER_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), GALA_TYPE_WINDOW_TRACKER, GalaWindowTrackerClass))

typedef struct _GalaWindowTracker GalaWindowTracker;
typedef struct _GalaWindowTrackerClass GalaWindowTrackerClass;

#define GALA_TYPE_WINDOW_MANAGER_GALA (gala_window_manager_gala_get_type ())
#define GALA_WINDOW_MANAGER_GALA(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), GALA_TYPE_WINDOW_MANAGER_GALA, GalaWindowManagerGala))
#define GALA_WINDOW_MANAGER_GALA_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), GALA_TYPE_WINDOW_MANAGER_GALA, GalaWindowManagerGalaClass))
#define GALA_IS_WINDOW_MANAGER_GALA(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), GALA_TYPE_WINDOW_MANAGER_GALA))
#define GALA_IS_WINDOW_MANAGER_GALA_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), GALA_TYPE_WINDOW_MANAGER_GALA))
#define GALA_WINDOW_MANAGER_GALA_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), GALA_TYPE_WINDOW_MANAGER_GALA, GalaWindowManagerGalaClass))

typedef struct _GalaWindowManagerGala GalaWindowManagerGala;
typedef struct _GalaWindowManagerGalaClass GalaWindowManagerGalaClass;

struct _GalaWindowSwitcher {
	GalaCanvasActor parent_instance;
	GalaWindowSwitcherPrivate * priv;
};

struct _GalaWindowSwitcherClass {
	GalaCanvasActorClass parent_class;
};

struct _GalaWindowSwitcherPrivate {
	GalaWindowManager* _wm;
	GalaGestureTracker* _gesture_tracker;
	gboolean _opened;
	gboolean handling_gesture;
	gint modifier_mask;
	GalaModalProxy* modal_proxy;
	GalaDrawingStyleManager* style_manager;
	ClutterActor* container;
	ClutterText* caption;
	GalaShadowEffect* shadow_effect;
	GalaWindowSwitcherIcon* _current_icon;
	gfloat scaling_factor;
};

struct _Block74Data {
	int _ref_count_;
	GalaWindowSwitcher* self;
	gint last_window_index;
	GalaGestureDirection direction;
};

static gint GalaWindowSwitcher_private_offset;
static gpointer gala_window_switcher_parent_class = NULL;

VALA_EXTERN GType gala_window_switcher_get_type (void) G_GNUC_CONST ;
G_DEFINE_AUTOPTR_CLEANUP_FUNC (GalaWindowSwitcher, g_object_unref)
VALA_EXTERN GType gala_gesture_tracker_get_type (void) G_GNUC_CONST ;
G_DEFINE_AUTOPTR_CLEANUP_FUNC (GalaGestureTracker, g_object_unref)
VALA_EXTERN GType gala_window_switcher_icon_get_type (void) G_GNUC_CONST ;
G_DEFINE_AUTOPTR_CLEANUP_FUNC (GalaWindowSwitcherIcon, g_object_unref)
VALA_EXTERN GalaWindowSwitcher* gala_window_switcher_new (GalaWindowManager* wm,
                                              GalaGestureTracker* gesture_tracker);
VALA_EXTERN GalaWindowSwitcher* gala_window_switcher_construct (GType object_type,
                                                    GalaWindowManager* wm,
                                                    GalaGestureTracker* gesture_tracker);
static void gala_window_switcher_scale (GalaWindowSwitcher* self);
VALA_EXTERN GalaWindowManager* gala_window_switcher_get_wm (GalaWindowSwitcher* self);
VALA_EXTERN gint gala_internal_utils_scale_to_int (gint value,
                                       gfloat scale_factor);
static void gala_window_switcher_real_get_preferred_width (ClutterActor* base,
                                                    gfloat for_height,
                                                    gfloat* min_width,
                                                    gfloat* natural_width);
static void gala_window_switcher_real_draw (GalaCanvasActor* base,
                                     cairo_t* ctx,
                                     gint width,
                                     gint height);
static void _vala_ClutterColor_free (ClutterColor* self);
VALA_EXTERN void gala_window_switcher_handle_switch_windows (MetaDisplay* display,
                                                 MetaWindow* window,
                                                 ClutterKeyEvent* event,
                                                 MetaKeyBinding* binding,
                                                 GalaWindowSwitcher* self);
VALA_EXTERN gboolean gala_window_switcher_get_opened (GalaWindowSwitcher* self);
static gboolean gala_window_switcher_collect_current_windows (GalaWindowSwitcher* self,
                                                       MetaDisplay* display,
                                                       MetaWorkspace* workspace);
static gboolean gala_window_switcher_collect_all_windows (GalaWindowSwitcher* self,
                                                   MetaDisplay* display,
                                                   MetaWorkspace* workspace);
static void gala_window_switcher_open_switcher (GalaWindowSwitcher* self);
static void gala_window_switcher_next_window (GalaWindowSwitcher* self,
                                       gboolean backward);
VALA_EXTERN GType gala_gesture_direction_get_type (void) G_GNUC_CONST ;
VALA_EXTERN void gala_window_switcher_handle_gesture (GalaWindowSwitcher* self,
                                          GalaGestureDirection direction);
static Block74Data* block74_data_ref (Block74Data* _data74_);
static void block74_data_unref (void * _userdata_);
static void __lambda84_ (Block74Data* _data74_,
                  gdouble percentage);
VALA_EXTERN gfloat gala_gesture_tracker_animation_value (gfloat initial_value,
                                             gfloat target_value,
                                             gdouble percentage,
                                             gboolean rounded);
static void ___lambda84__gala_gesture_tracker_on_update (gdouble percentage,
                                                  gpointer self);
static void __lambda85_ (GalaWindowSwitcher* self,
                  gdouble percentage,
                  gboolean cancel_action,
                  gint calculated_duration);
static void gala_window_switcher_close_switcher (GalaWindowSwitcher* self,
                                          guint32 time,
                                          gboolean cancel);
static void ___lambda85__gala_gesture_tracker_on_end (gdouble percentage,
                                               gboolean cancel_action,
                                               gint calculated_duration,
                                               gpointer self);
VALA_EXTERN GalaGestureTracker* gala_window_switcher_get_gesture_tracker (GalaWindowSwitcher* self);
VALA_EXTERN void gala_gesture_tracker_connect_handlers (GalaGestureTracker* self,
                                            GalaGestureTrackerOnBegin on_begin_handler,
                                            gpointer on_begin_handler_target,
                                            GDestroyNotify on_begin_handler_target_destroy_notify,
                                            GalaGestureTrackerOnUpdate on_update_handler,
                                            gpointer on_update_handler_target,
                                            GDestroyNotify on_update_handler_target_destroy_notify,
                                            GalaGestureTrackerOnEnd on_end_handler,
                                            gpointer on_end_handler_target,
                                            GDestroyNotify on_end_handler_target_destroy_notify);
static void gala_window_switcher_set_current_icon (GalaWindowSwitcher* self,
                                            GalaWindowSwitcherIcon* value);
VALA_EXTERN GalaWindowSwitcherIcon* gala_window_switcher_icon_new (MetaWindow* window,
                                                       gint icon_size,
                                                       gfloat scale_factor);
VALA_EXTERN GalaWindowSwitcherIcon* gala_window_switcher_icon_construct (GType object_type,
                                                             MetaWindow* window,
                                                             gint icon_size,
                                                             gfloat scale_factor);
static void gala_window_switcher_add_icon (GalaWindowSwitcher* self,
                                    GalaWindowSwitcherIcon* icon);
VALA_EXTERN GType gala_window_tracker_get_type (void) G_GNUC_CONST ;
G_DEFINE_AUTOPTR_CLEANUP_FUNC (GalaWindowTracker, g_object_unref)
VALA_EXTERN GType gala_window_manager_gala_get_type (void) G_GNUC_CONST ;
G_DEFINE_AUTOPTR_CLEANUP_FUNC (GalaWindowManagerGala, g_object_unref)
VALA_EXTERN GalaWindowTracker* gala_window_manager_gala_get_window_tracker (GalaWindowManagerGala* self);
VALA_EXTERN GalaApp* gala_window_tracker_get_app_for_window (GalaWindowTracker* self,
                                                 MetaWindow* window);
static gboolean __lambda82_ (GalaWindowSwitcher* self,
                      ClutterActor* _icon,
                      ClutterEvent* event);
static GalaWindowSwitcherIcon* gala_window_switcher_get_current_icon (GalaWindowSwitcher* self);
static gboolean ___lambda82__clutter_actor_motion_event (ClutterActor* _sender,
                                                  ClutterEvent* event,
                                                  gpointer self);
static void gala_window_switcher_toggle_display (GalaWindowSwitcher* self,
                                          gboolean show);
static void gala_window_switcher_set_opened (GalaWindowSwitcher* self,
                                      gboolean value);
static void gala_window_switcher_push_modal (GalaWindowSwitcher* self);
static gboolean __lambda83_ (GalaWindowSwitcher* self,
                      MetaKeyBinding* binding);
static gboolean ___lambda83__gala_keybinding_filter (MetaKeyBinding* binding,
                                              gpointer self);
VALA_EXTERN MetaWindow* gala_window_switcher_icon_get_window (GalaWindowSwitcherIcon* self);
static void gala_window_switcher_update_caption_text (GalaWindowSwitcher* self);
static void gala_window_switcher_real_key_focus_out (ClutterActor* base);
static gboolean gala_window_switcher_container_mouse_release (GalaWindowSwitcher* self,
                                                       ClutterEvent* event);
static gboolean gala_window_switcher_real_key_release_event (ClutterActor* base,
                                                      ClutterEvent* event);
static inline ClutterModifierType gala_window_switcher_get_current_modifiers (GalaWindowSwitcher* self);
static gboolean gala_window_switcher_real_key_press_event (ClutterActor* base,
                                                    ClutterEvent* event);
static void gala_window_switcher_set_wm (GalaWindowSwitcher* self,
                                  GalaWindowManager* value);
static void gala_window_switcher_set_gesture_tracker (GalaWindowSwitcher* self,
                                               GalaGestureTracker* value);
VALA_EXTERN void gala_window_switcher_icon_set_selected (GalaWindowSwitcherIcon* self,
                                             gboolean value);
static GObject * gala_window_switcher_constructor (GType type,
                                            guint n_construct_properties,
                                            GObjectConstructParam * construct_properties);
static gboolean _gala_window_switcher_container_mouse_release_clutter_actor_button_release_event (ClutterActor* _sender,
                                                                                           ClutterEvent* event,
                                                                                           gpointer self);
static void _clutter_content_invalidate_g_object_notify (GObject* _sender,
                                                  GParamSpec* pspec,
                                                  gpointer self);
static void _gala_window_switcher_scale_meta_monitor_manager_monitors_changed (MetaMonitorManager* _sender,
                                                                        gpointer self);
static void _gala_window_switcher___lambda86_ (GalaWindowSwitcher* self);
static void __gala_window_switcher___lambda86__g_object_notify (GObject* _sender,
                                                         GParamSpec* pspec,
                                                         gpointer self);
static void gala_window_switcher_finalize (GObject * obj);
static GType gala_window_switcher_get_type_once (void);
static void _vala_gala_window_switcher_get_property (GObject * object,
                                              guint property_id,
                                              GValue * value,
                                              GParamSpec * pspec);
static void _vala_gala_window_switcher_set_property (GObject * object,
                                              guint property_id,
                                              const GValue * value,
                                              GParamSpec * pspec);

static inline gpointer
gala_window_switcher_get_instance_private (GalaWindowSwitcher* self)
{
	return G_STRUCT_MEMBER_P (self, GalaWindowSwitcher_private_offset);
}

GalaWindowSwitcher*
gala_window_switcher_construct (GType object_type,
                                GalaWindowManager* wm,
                                GalaGestureTracker* gesture_tracker)
{
	GalaWindowSwitcher * self = NULL;
#line 53 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	g_return_val_if_fail (wm != NULL, NULL);
#line 53 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	g_return_val_if_fail (gesture_tracker != NULL, NULL);
#line 54 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	self = (GalaWindowSwitcher*) g_object_new (object_type, "wm", wm, "gesture-tracker", gesture_tracker, NULL);
#line 53 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	return self;
#line 343 "WindowSwitcher.c"
}

GalaWindowSwitcher*
gala_window_switcher_new (GalaWindowManager* wm,
                          GalaGestureTracker* gesture_tracker)
{
#line 53 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	return gala_window_switcher_construct (GALA_TYPE_WINDOW_SWITCHER, wm, gesture_tracker);
#line 352 "WindowSwitcher.c"
}

static void
gala_window_switcher_scale (GalaWindowSwitcher* self)
{
	GalaWindowManager* _tmp0_;
	MetaDisplay* _tmp1_;
	GalaWindowManager* _tmp2_;
	MetaDisplay* _tmp3_;
	GalaShadowEffect* _tmp4_;
	gint margin = 0;
	ClutterActor* _tmp5_;
	ClutterActor* _tmp6_;
	ClutterActor* _tmp7_;
	ClutterActor* _tmp8_;
	ClutterText* _tmp9_;
	ClutterText* _tmp10_;
	ClutterText* _tmp11_;
#line 106 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	g_return_if_fail (self != NULL);
#line 107 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	_tmp0_ = self->priv->_wm;
#line 107 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	_tmp1_ = meta_plugin_get_display ((MetaPlugin*) _tmp0_);
#line 107 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	_tmp2_ = self->priv->_wm;
#line 107 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	_tmp3_ = meta_plugin_get_display ((MetaPlugin*) _tmp2_);
#line 107 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	self->priv->scaling_factor = meta_display_get_monitor_scale (_tmp1_, meta_display_get_current_monitor (_tmp3_));
#line 109 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	_tmp4_ = self->priv->shadow_effect;
#line 109 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	gala_shadow_effect_set_scale_factor (_tmp4_, self->priv->scaling_factor);
#line 111 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	margin = gala_internal_utils_scale_to_int (GALA_WINDOW_SWITCHER_WRAPPER_PADDING, self->priv->scaling_factor);
#line 113 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	_tmp5_ = self->priv->container;
#line 113 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	clutter_actor_set_margin_left (_tmp5_, (gfloat) margin);
#line 114 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	_tmp6_ = self->priv->container;
#line 114 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	clutter_actor_set_margin_right (_tmp6_, (gfloat) margin);
#line 115 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	_tmp7_ = self->priv->container;
#line 115 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	clutter_actor_set_margin_bottom (_tmp7_, (gfloat) margin);
#line 116 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	_tmp8_ = self->priv->container;
#line 116 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	clutter_actor_set_margin_top (_tmp8_, (gfloat) margin);
#line 118 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	_tmp9_ = self->priv->caption;
#line 118 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	clutter_actor_set_margin_left ((ClutterActor*) _tmp9_, (gfloat) margin);
#line 119 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	_tmp10_ = self->priv->caption;
#line 119 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	clutter_actor_set_margin_right ((ClutterActor*) _tmp10_, (gfloat) margin);
#line 120 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	_tmp11_ = self->priv->caption;
#line 120 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	clutter_actor_set_margin_bottom ((ClutterActor*) _tmp11_, (gfloat) margin);
#line 417 "WindowSwitcher.c"
}

static void
gala_window_switcher_real_get_preferred_width (ClutterActor* base,
                                               gfloat for_height,
                                               gfloat* min_width,
                                               gfloat* natural_width)
{
	GalaWindowSwitcher * self;
	gfloat _vala_min_width = 0.0F;
	gfloat _vala_natural_width = 0.0F;
	gfloat preferred_nat_width = 0.0F;
	gfloat _tmp0_ = 0.0F;
	MetaDisplay* display = NULL;
	GalaWindowManager* _tmp1_;
	MetaDisplay* _tmp2_;
	gint monitor = 0;
	MtkRectangle geom = {0};
	MtkRectangle _tmp3_ = {0};
	gfloat container_nat_width = 0.0F;
	ClutterActor* _tmp4_;
	gfloat _tmp5_ = 0.0F;
	gfloat max_width = 0.0F;
	MtkRectangle _tmp6_;
#line 123 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	self = (GalaWindowSwitcher*) base;
#line 124 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	_vala_min_width = (gfloat) 0;
#line 127 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	CLUTTER_ACTOR_CLASS (gala_window_switcher_parent_class)->get_preferred_width ((ClutterActor*) G_TYPE_CHECK_INSTANCE_CAST (self, GALA_TYPE_CANVAS_ACTOR, GalaCanvasActor), for_height, NULL, &_tmp0_);
#line 127 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	preferred_nat_width = _tmp0_;
#line 129 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	_tmp1_ = self->priv->_wm;
#line 129 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	_tmp2_ = meta_plugin_get_display ((MetaPlugin*) _tmp1_);
#line 129 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	display = _tmp2_;
#line 130 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	monitor = meta_display_get_current_monitor (display);
#line 131 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	meta_display_get_monitor_geometry (display, monitor, &_tmp3_);
#line 131 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	geom = _tmp3_;
#line 134 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	_tmp4_ = self->priv->container;
#line 134 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	clutter_actor_get_preferred_size (_tmp4_, NULL, NULL, &_tmp5_, NULL);
#line 134 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	container_nat_width = _tmp5_;
#line 136 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	_tmp6_ = geom;
#line 136 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	max_width = MIN ((gfloat) (_tmp6_.width - (gala_internal_utils_scale_to_int (GALA_WINDOW_SWITCHER_MIN_OFFSET, self->priv->scaling_factor) * 2)), container_nat_width);
#line 141 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	_vala_natural_width = MIN (max_width, preferred_nat_width);
#line 123 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	if (min_width) {
#line 123 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
		*min_width = _vala_min_width;
#line 478 "WindowSwitcher.c"
	}
#line 123 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	if (natural_width) {
#line 123 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
		*natural_width = _vala_natural_width;
#line 484 "WindowSwitcher.c"
	}
}

static ClutterColor*
_vala_clutter_color_from_string (const gchar* str)
{
	ClutterColor* color = NULL;
	ClutterColor* _tmp0_;
	ClutterColor* result;
#line 7865 "mutter-clutter-14.vapi"
	g_return_val_if_fail (str != NULL, NULL);
#line 7866 "mutter-clutter-14.vapi"
	_tmp0_ = clutter_color_alloc ();
#line 7866 "mutter-clutter-14.vapi"
	color = _tmp0_;
#line 7867 "mutter-clutter-14.vapi"
	clutter_color_from_string (color, str);
#line 7868 "mutter-clutter-14.vapi"
	result = color;
#line 7868 "mutter-clutter-14.vapi"
	return result;
#line 506 "WindowSwitcher.c"
}

static void
_vala_ClutterColor_free (ClutterColor* self)
{
#line 159 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	g_boxed_free (clutter_color_get_type (), self);
#line 514 "WindowSwitcher.c"
}

static void
gala_window_switcher_real_draw (GalaCanvasActor* base,
                                cairo_t* ctx,
                                gint width,
                                gint height)
{
	GalaWindowSwitcher * self;
	GdkRGBA background_color = {0};
	GdkRGBA border_color = {0};
	gchar* caption_color = NULL;
	gchar* _tmp0_;
	GdkRGBA highlight_color = {0};
	GalaDrawingStyleManager* _tmp1_;
	GalaDrawingStyleManagerColorScheme _tmp2_;
	GalaDrawingStyleManagerColorScheme _tmp3_;
	gfloat stroke_width = 0.0F;
	ClutterText* _tmp5_;
	const gchar* _tmp6_;
	ClutterColor* _tmp7_;
	ClutterColor* _tmp8_;
	ClutterColor _tmp9_;
	GdkRGBA _tmp10_;
	GdkRGBA _tmp11_;
	GdkRGBA _tmp12_;
	GdkRGBA _tmp13_;
	GdkRGBA _tmp14_;
	GdkRGBA _tmp15_;
	GdkRGBA _tmp16_;
	GdkRGBA _tmp17_;
	GdkRGBA _tmp18_;
	GdkRGBA _tmp19_;
	GdkRGBA _tmp20_;
	GdkRGBA _tmp21_;
#line 144 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	self = (GalaWindowSwitcher*) base;
#line 144 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	g_return_if_fail (ctx != NULL);
#line 145 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	background_color = GALA_DRAWING_COLOR_LIGHT_BACKGROUND;
#line 146 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	border_color = GALA_DRAWING_COLOR_LIGHT_BORDER;
#line 147 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	_tmp0_ = g_strdup ("#2e2e31");
#line 147 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	caption_color = _tmp0_;
#line 148 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	highlight_color = GALA_DRAWING_COLOR_LIGHT_HIGHLIGHT;
#line 150 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	_tmp1_ = self->priv->style_manager;
#line 150 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	_tmp2_ = gala_drawing_style_manager_get_prefers_color_scheme (_tmp1_);
#line 150 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	_tmp3_ = _tmp2_;
#line 150 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	if (_tmp3_ == GALA_DRAWING_STYLE_MANAGER_COLOR_SCHEME_DARK) {
#line 572 "WindowSwitcher.c"
		gchar* _tmp4_;
#line 151 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
		background_color = GALA_DRAWING_COLOR_DARK_BACKGROUND;
#line 152 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
		border_color = GALA_DRAWING_COLOR_DARK_BORDER;
#line 153 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
		_tmp4_ = g_strdup ("#fafafa");
#line 153 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
		_g_free0 (caption_color);
#line 153 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
		caption_color = _tmp4_;
#line 154 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
		highlight_color = GALA_DRAWING_COLOR_DARK_HIGHLIGHT;
#line 586 "WindowSwitcher.c"
	}
#line 157 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	stroke_width = self->priv->scaling_factor;
#line 159 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	_tmp5_ = self->priv->caption;
#line 159 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	_tmp6_ = caption_color;
#line 159 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	_tmp7_ = _vala_clutter_color_from_string (_tmp6_);
#line 159 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	_tmp8_ = _tmp7_;
#line 159 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	_tmp9_ = *_tmp8_;
#line 159 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	clutter_text_set_color (_tmp5_, &_tmp9_);
#line 159 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	__vala_ClutterColor_free0 (_tmp8_);
#line 161 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	cairo_save (ctx);
#line 162 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	cairo_set_operator (ctx, CAIRO_OPERATOR_CLEAR);
#line 163 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	cairo_paint (ctx);
#line 164 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	cairo_clip (ctx);
#line 165 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	cairo_reset_clip (ctx);
#line 167 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	cairo_set_operator (ctx, CAIRO_OPERATOR_SOURCE);
#line 170 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	gala_drawing_utilities_cairo_rounded_rectangle (ctx, 0.5, 0.5, (gdouble) (width - stroke_width), (gdouble) (height - stroke_width), (gdouble) gala_internal_utils_scale_to_int (9, self->priv->scaling_factor));
#line 177 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	_tmp10_ = background_color;
#line 177 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	_tmp11_ = background_color;
#line 177 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	_tmp12_ = background_color;
#line 177 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	_tmp13_ = background_color;
#line 177 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	cairo_set_source_rgba (ctx, _tmp10_.red, _tmp11_.green, _tmp12_.blue, _tmp13_.alpha);
#line 183 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	cairo_fill_preserve (ctx);
#line 185 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	cairo_set_line_width (ctx, (gdouble) stroke_width);
#line 186 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	_tmp14_ = border_color;
#line 186 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	_tmp15_ = border_color;
#line 186 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	_tmp16_ = border_color;
#line 186 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	_tmp17_ = border_color;
#line 186 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	cairo_set_source_rgba (ctx, _tmp14_.red, _tmp15_.green, _tmp16_.blue, _tmp17_.alpha);
#line 192 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	cairo_stroke (ctx);
#line 193 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	cairo_restore (ctx);
#line 196 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	gala_drawing_utilities_cairo_rounded_rectangle (ctx, stroke_width + 0.5, stroke_width + 0.5, (gdouble) ((width - (stroke_width * 2)) - 1), (gdouble) ((height - (stroke_width * 2)) - 1), (gdouble) gala_internal_utils_scale_to_int (8, self->priv->scaling_factor));
#line 203 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	cairo_set_line_width (ctx, (gdouble) stroke_width);
#line 204 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	_tmp18_ = highlight_color;
#line 204 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	_tmp19_ = highlight_color;
#line 204 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	_tmp20_ = highlight_color;
#line 204 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	_tmp21_ = highlight_color;
#line 204 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	cairo_set_source_rgba (ctx, _tmp18_.red, _tmp19_.green, _tmp20_.blue, _tmp21_.alpha);
#line 210 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	cairo_stroke (ctx);
#line 211 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	cairo_restore (ctx);
#line 144 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	_g_free0 (caption_color);
#line 666 "WindowSwitcher.c"
}

static gpointer
_g_object_ref0 (gpointer self)
{
#line 223 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	return self ? g_object_ref (self) : NULL;
#line 674 "WindowSwitcher.c"
}

void
gala_window_switcher_handle_switch_windows (MetaDisplay* display,
                                            MetaWindow* window,
                                            ClutterKeyEvent* event,
                                            MetaKeyBinding* binding,
                                            GalaWindowSwitcher* self)
{
	MetaWorkspace* workspace = NULL;
	MetaWorkspaceManager* _tmp0_;
	MetaWorkspace* _tmp1_;
	MetaWorkspace* _tmp2_;
	guint mask = 0U;
	gboolean _tmp3_;
	gchar* binding_name = NULL;
	const gchar* _tmp7_;
	gchar* _tmp8_;
	gboolean backward = FALSE;
	const gchar* _tmp9_;
#line 215 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	g_return_if_fail (self != NULL);
#line 215 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	g_return_if_fail (display != NULL);
#line 215 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	g_return_if_fail (event != NULL);
#line 215 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	g_return_if_fail (binding != NULL);
#line 219 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	if (self->priv->handling_gesture) {
#line 220 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
		return;
#line 707 "WindowSwitcher.c"
	}
#line 223 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	_tmp0_ = meta_display_get_workspace_manager (display);
#line 223 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	_tmp1_ = meta_workspace_manager_get_active_workspace (_tmp0_);
#line 223 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	_tmp2_ = _g_object_ref0 (_tmp1_);
#line 223 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	workspace = _tmp2_;
#line 226 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	mask = meta_key_binding_get_mask (binding);
#line 227 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	if (mask == ((guint) 0)) {
#line 228 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
		self->priv->modifier_mask = 0;
#line 723 "WindowSwitcher.c"
	} else {
#line 230 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
		self->priv->modifier_mask = 1;
#line 231 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
		while (TRUE) {
#line 231 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
			if (!(mask > ((guint) 1))) {
#line 231 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
				break;
#line 733 "WindowSwitcher.c"
			}
#line 232 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
			mask >>= (guint) 1;
#line 233 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
			self->priv->modifier_mask = self->priv->modifier_mask << 1;
#line 739 "WindowSwitcher.c"
		}
	}
#line 237 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	_tmp3_ = self->priv->_opened;
#line 237 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	if (!_tmp3_) {
#line 746 "WindowSwitcher.c"
		gboolean windows_exist = FALSE;
		const gchar* _tmp4_;
#line 239 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
		_tmp4_ = meta_key_binding_get_name (binding);
#line 239 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
		if (g_str_has_prefix (_tmp4_, "switch-group")) {
#line 753 "WindowSwitcher.c"
			MetaWorkspace* _tmp5_;
#line 240 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
			_tmp5_ = workspace;
#line 240 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
			windows_exist = gala_window_switcher_collect_current_windows (self, display, _tmp5_);
#line 759 "WindowSwitcher.c"
		} else {
			MetaWorkspace* _tmp6_;
#line 242 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
			_tmp6_ = workspace;
#line 242 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
			windows_exist = gala_window_switcher_collect_all_windows (self, display, _tmp6_);
#line 766 "WindowSwitcher.c"
		}
#line 245 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
		if (!windows_exist) {
#line 246 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
			_g_object_unref0 (workspace);
#line 246 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
			return;
#line 774 "WindowSwitcher.c"
		}
#line 249 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
		gala_window_switcher_open_switcher (self);
#line 778 "WindowSwitcher.c"
	}
#line 252 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	_tmp7_ = meta_key_binding_get_name (binding);
#line 252 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	_tmp8_ = g_strdup (_tmp7_);
#line 252 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	binding_name = _tmp8_;
#line 253 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	_tmp9_ = binding_name;
#line 253 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	backward = g_str_has_suffix (_tmp9_, "-backward");
#line 255 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	gala_window_switcher_next_window (self, backward);
#line 215 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	_g_free0 (binding_name);
#line 215 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	_g_object_unref0 (workspace);
#line 796 "WindowSwitcher.c"
}

static Block74Data*
block74_data_ref (Block74Data* _data74_)
{
#line 258 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	g_atomic_int_inc (&_data74_->_ref_count_);
#line 258 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	return _data74_;
#line 806 "WindowSwitcher.c"
}

static void
block74_data_unref (void * _userdata_)
{
	Block74Data* _data74_;
	_data74_ = (Block74Data*) _userdata_;
#line 258 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	if (g_atomic_int_dec_and_test (&_data74_->_ref_count_)) {
#line 816 "WindowSwitcher.c"
		GalaWindowSwitcher* self;
#line 258 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
		self = _data74_->self;
#line 258 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
		_g_object_unref0 (self);
#line 258 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
		g_slice_free (Block74Data, _data74_);
#line 824 "WindowSwitcher.c"
	}
}

static void
__lambda84_ (Block74Data* _data74_,
             gdouble percentage)
{
	GalaWindowSwitcher* self;
	gfloat window_index = 0.0F;
	ClutterActor* _tmp0_;
#line 273 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	self = _data74_->self;
#line 274 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	window_index = gala_gesture_tracker_animation_value ((gfloat) 0, (gfloat) GALA_WINDOW_SWITCHER_GESTURE_RANGE_LIMIT, percentage, TRUE);
#line 276 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	_tmp0_ = self->priv->container;
#line 276 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	if (window_index >= ((gfloat) clutter_actor_get_n_children (_tmp0_))) {
#line 277 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
		return;
#line 845 "WindowSwitcher.c"
	}
#line 280 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	if (window_index > ((gfloat) _data74_->last_window_index)) {
#line 281 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
		while (TRUE) {
#line 851 "WindowSwitcher.c"
			gint _tmp1_;
#line 281 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
			if (!(((gfloat) _data74_->last_window_index) < window_index)) {
#line 281 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
				break;
#line 857 "WindowSwitcher.c"
			}
#line 282 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
			gala_window_switcher_next_window (self, _data74_->direction == GALA_GESTURE_DIRECTION_LEFT);
#line 283 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
			_tmp1_ = _data74_->last_window_index;
#line 283 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
			_data74_->last_window_index = _tmp1_ + 1;
#line 865 "WindowSwitcher.c"
		}
	} else {
#line 285 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
		if (window_index < ((gfloat) _data74_->last_window_index)) {
#line 286 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
			while (TRUE) {
#line 872 "WindowSwitcher.c"
				gint _tmp2_;
#line 286 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
				if (!(((gfloat) _data74_->last_window_index) > window_index)) {
#line 286 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
					break;
#line 878 "WindowSwitcher.c"
				}
#line 287 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
				gala_window_switcher_next_window (self, _data74_->direction == GALA_GESTURE_DIRECTION_RIGHT);
#line 288 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
				_tmp2_ = _data74_->last_window_index;
#line 288 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
				_data74_->last_window_index = _tmp2_ - 1;
#line 886 "WindowSwitcher.c"
			}
		}
	}
}

static void
___lambda84__gala_gesture_tracker_on_update (gdouble percentage,
                                             gpointer self)
{
#line 273 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	__lambda84_ (self, percentage);
#line 898 "WindowSwitcher.c"
}

static void
__lambda85_ (GalaWindowSwitcher* self,
             gdouble percentage,
             gboolean cancel_action,
             gint calculated_duration)
{
	GalaWindowManager* _tmp0_;
	MetaDisplay* _tmp1_;
#line 294 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	self->priv->handling_gesture = FALSE;
#line 295 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	_tmp0_ = self->priv->_wm;
#line 295 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	_tmp1_ = meta_plugin_get_display ((MetaPlugin*) _tmp0_);
#line 295 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	gala_window_switcher_close_switcher (self, meta_display_get_current_time (_tmp1_), FALSE);
#line 917 "WindowSwitcher.c"
}

static void
___lambda85__gala_gesture_tracker_on_end (gdouble percentage,
                                          gboolean cancel_action,
                                          gint calculated_duration,
                                          gpointer self)
{
#line 293 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	__lambda85_ ((GalaWindowSwitcher*) self, percentage, cancel_action, calculated_duration);
#line 928 "WindowSwitcher.c"
}

void
gala_window_switcher_handle_gesture (GalaWindowSwitcher* self,
                                     GalaGestureDirection direction)
{
	Block74Data* _data74_;
	MetaDisplay* display = NULL;
	GalaWindowManager* _tmp0_;
	MetaDisplay* _tmp1_;
	MetaWorkspaceManager* workspace_manager = NULL;
	MetaDisplay* _tmp2_;
	MetaWorkspaceManager* _tmp3_;
	MetaWorkspace* active_workspace = NULL;
	MetaWorkspaceManager* _tmp4_;
	MetaWorkspace* _tmp5_;
	gboolean windows_exist = FALSE;
	MetaDisplay* _tmp6_;
	MetaWorkspace* _tmp7_;
	gint _tmp8_ = 0;
	GalaGestureTrackerOnUpdate on_animation_update = NULL;
	gpointer on_animation_update_target;
	GDestroyNotify on_animation_update_target_destroy_notify;
	GalaGestureTrackerOnEnd on_animation_end = NULL;
	gpointer on_animation_end_target;
	GDestroyNotify on_animation_end_target_destroy_notify;
	GalaGestureTracker* _tmp9_;
	GalaGestureTrackerOnUpdate _tmp10_;
	gpointer _tmp10__target;
	GDestroyNotify _tmp10__target_destroy_notify;
	GalaGestureTrackerOnEnd _tmp11_;
	gpointer _tmp11__target;
	GDestroyNotify _tmp11__target_destroy_notify;
#line 258 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	g_return_if_fail (self != NULL);
#line 258 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	_data74_ = g_slice_new0 (Block74Data);
#line 258 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	_data74_->_ref_count_ = 1;
#line 258 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	_data74_->self = g_object_ref (self);
#line 258 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	_data74_->direction = direction;
#line 259 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	self->priv->handling_gesture = TRUE;
#line 261 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	_tmp0_ = self->priv->_wm;
#line 261 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	_tmp1_ = meta_plugin_get_display ((MetaPlugin*) _tmp0_);
#line 261 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	display = _tmp1_;
#line 262 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	_tmp2_ = display;
#line 262 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	_tmp3_ = meta_display_get_workspace_manager (_tmp2_);
#line 262 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	workspace_manager = _tmp3_;
#line 263 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	_tmp4_ = workspace_manager;
#line 263 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	_tmp5_ = meta_workspace_manager_get_active_workspace (_tmp4_);
#line 263 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	active_workspace = _tmp5_;
#line 265 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	_tmp6_ = display;
#line 265 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	_tmp7_ = active_workspace;
#line 265 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	windows_exist = gala_window_switcher_collect_all_windows (self, _tmp6_, _tmp7_);
#line 266 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	if (!windows_exist) {
#line 267 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
		block74_data_unref (_data74_);
#line 267 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
		_data74_ = NULL;
#line 267 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
		return;
#line 1006 "WindowSwitcher.c"
	}
#line 269 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	gala_window_switcher_open_switcher (self);
#line 272 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	if (_data74_->direction == GALA_GESTURE_DIRECTION_RIGHT) {
#line 272 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
		_tmp8_ = 0;
#line 1014 "WindowSwitcher.c"
	} else {
#line 272 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
		_tmp8_ = -1;
#line 1018 "WindowSwitcher.c"
	}
#line 272 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	_data74_->last_window_index = _tmp8_;
#line 273 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	on_animation_update = ___lambda84__gala_gesture_tracker_on_update;
#line 273 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	on_animation_update_target = block74_data_ref (_data74_);
#line 273 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	on_animation_update_target_destroy_notify = block74_data_unref;
#line 293 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	on_animation_end = ___lambda85__gala_gesture_tracker_on_end;
#line 293 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	on_animation_end_target = g_object_ref (self);
#line 293 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	on_animation_end_target_destroy_notify = g_object_unref;
#line 298 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	_tmp9_ = self->priv->_gesture_tracker;
#line 298 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	_tmp10_ = on_animation_update;
#line 298 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	_tmp10__target = on_animation_update_target;
#line 298 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	_tmp10__target_destroy_notify = on_animation_update_target_destroy_notify;
#line 298 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	on_animation_update = NULL;
#line 298 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	on_animation_update_target = NULL;
#line 298 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	on_animation_update_target_destroy_notify = NULL;
#line 298 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	_tmp11_ = on_animation_end;
#line 298 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	_tmp11__target = on_animation_end_target;
#line 298 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	_tmp11__target_destroy_notify = on_animation_end_target_destroy_notify;
#line 298 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	on_animation_end = NULL;
#line 298 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	on_animation_end_target = NULL;
#line 298 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	on_animation_end_target_destroy_notify = NULL;
#line 298 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	gala_gesture_tracker_connect_handlers (_tmp9_, NULL, NULL, NULL, _tmp10_, _tmp10__target, _tmp10__target_destroy_notify, _tmp11_, _tmp11__target, _tmp11__target_destroy_notify);
#line 258 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	(on_animation_end_target_destroy_notify == NULL) ? NULL : (on_animation_end_target_destroy_notify (on_animation_end_target), NULL);
#line 258 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	on_animation_end = NULL;
#line 258 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	on_animation_end_target = NULL;
#line 258 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	on_animation_end_target_destroy_notify = NULL;
#line 258 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	(on_animation_update_target_destroy_notify == NULL) ? NULL : (on_animation_update_target_destroy_notify (on_animation_update_target), NULL);
#line 258 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	on_animation_update = NULL;
#line 258 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	on_animation_update_target = NULL;
#line 258 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	on_animation_update_target_destroy_notify = NULL;
#line 258 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	block74_data_unref (_data74_);
#line 258 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	_data74_ = NULL;
#line 1082 "WindowSwitcher.c"
}

static gboolean
gala_window_switcher_collect_all_windows (GalaWindowSwitcher* self,
                                          MetaDisplay* display,
                                          MetaWorkspace* workspace)
{
	GList* windows = NULL;
	GList* _tmp0_;
	GList* _tmp1_;
	MetaWindow* current_window = NULL;
	MetaWindow* _tmp2_;
	MetaWindow* _tmp3_;
	ClutterActor* _tmp4_;
	GList* _tmp5_;
	gboolean result;
#line 301 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	g_return_val_if_fail (self != NULL, FALSE);
#line 301 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	g_return_val_if_fail (display != NULL, FALSE);
#line 302 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	_tmp0_ = meta_display_get_tab_list (display, META_TAB_LIST_NORMAL, workspace);
#line 302 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	windows = _tmp0_;
#line 303 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	_tmp1_ = windows;
#line 303 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	if (_tmp1_ == NULL) {
#line 304 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
		result = FALSE;
#line 304 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
		(windows == NULL) ? NULL : (windows = (g_list_free (windows), NULL));
#line 304 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
		return result;
#line 1117 "WindowSwitcher.c"
	}
#line 307 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	_tmp2_ = meta_display_get_tab_current (display, META_TAB_LIST_NORMAL, workspace);
#line 307 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	current_window = _tmp2_;
#line 308 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	_tmp3_ = current_window;
#line 308 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	if (_tmp3_ == NULL) {
#line 309 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
		gala_window_switcher_set_current_icon (self, NULL);
#line 1129 "WindowSwitcher.c"
	}
#line 312 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	_tmp4_ = self->priv->container;
#line 312 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	clutter_actor_remove_all_children (_tmp4_);
#line 314 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	_tmp5_ = windows;
#line 1137 "WindowSwitcher.c"
	{
		GList* window_collection = NULL;
		GList* window_it = NULL;
#line 314 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
		window_collection = _tmp5_;
#line 314 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
		for (window_it = window_collection; window_it != NULL; window_it = window_it->next) {
#line 1145 "WindowSwitcher.c"
			MetaWindow* window = NULL;
#line 314 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
			window = (MetaWindow*) window_it->data;
#line 1149 "WindowSwitcher.c"
			{
				GalaWindowSwitcherIcon* icon = NULL;
				MetaWindow* _tmp6_;
				GalaWindowSwitcherIcon* _tmp7_;
				MetaWindow* _tmp8_;
				MetaWindow* _tmp9_;
				GalaWindowSwitcherIcon* _tmp11_;
#line 315 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
				_tmp6_ = window;
#line 315 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
				_tmp7_ = gala_window_switcher_icon_new (_tmp6_, GALA_WINDOW_SWITCHER_ICON_SIZE, self->priv->scaling_factor);
#line 315 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
				g_object_ref_sink (_tmp7_);
#line 315 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
				icon = _tmp7_;
#line 316 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
				_tmp8_ = window;
#line 316 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
				_tmp9_ = current_window;
#line 316 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
				if (_tmp8_ == _tmp9_) {
#line 1171 "WindowSwitcher.c"
					GalaWindowSwitcherIcon* _tmp10_;
#line 317 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
					_tmp10_ = icon;
#line 317 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
					gala_window_switcher_set_current_icon (self, _tmp10_);
#line 1177 "WindowSwitcher.c"
				}
#line 320 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
				_tmp11_ = icon;
#line 320 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
				gala_window_switcher_add_icon (self, _tmp11_);
#line 314 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
				_g_object_unref0 (icon);
#line 1185 "WindowSwitcher.c"
			}
		}
	}
#line 323 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	result = TRUE;
#line 323 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	(windows == NULL) ? NULL : (windows = (g_list_free (windows), NULL));
#line 323 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	return result;
#line 1195 "WindowSwitcher.c"
}

static gboolean
gala_window_switcher_collect_current_windows (GalaWindowSwitcher* self,
                                              MetaDisplay* display,
                                              MetaWorkspace* workspace)
{
	GList* windows = NULL;
	GList* _tmp0_;
	GList* _tmp1_;
	MetaWindow* current_window = NULL;
	MetaWindow* _tmp2_;
	MetaWindow* _tmp3_;
	ClutterActor* _tmp4_;
	GalaWindowTracker* window_tracker = NULL;
	GalaWindowManager* _tmp5_;
	GalaWindowTracker* _tmp6_;
	GalaWindowTracker* _tmp7_;
	GalaApp* app = NULL;
	GalaWindowTracker* _tmp8_;
	MetaWindow* _tmp9_;
	GalaApp* _tmp10_;
	GList* _tmp11_;
	gboolean result;
#line 326 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	g_return_val_if_fail (self != NULL, FALSE);
#line 326 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	g_return_val_if_fail (display != NULL, FALSE);
#line 327 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	_tmp0_ = meta_display_get_tab_list (display, META_TAB_LIST_NORMAL, workspace);
#line 327 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	windows = _tmp0_;
#line 328 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	_tmp1_ = windows;
#line 328 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	if (_tmp1_ == NULL) {
#line 329 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
		result = FALSE;
#line 329 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
		(windows == NULL) ? NULL : (windows = (g_list_free (windows), NULL));
#line 329 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
		return result;
#line 1238 "WindowSwitcher.c"
	}
#line 332 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	_tmp2_ = meta_display_get_tab_current (display, META_TAB_LIST_NORMAL, workspace);
#line 332 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	current_window = _tmp2_;
#line 333 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	_tmp3_ = current_window;
#line 333 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	if (_tmp3_ == NULL) {
#line 334 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
		gala_window_switcher_set_current_icon (self, NULL);
#line 335 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
		result = FALSE;
#line 335 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
		(windows == NULL) ? NULL : (windows = (g_list_free (windows), NULL));
#line 335 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
		return result;
#line 1256 "WindowSwitcher.c"
	}
#line 338 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	_tmp4_ = self->priv->container;
#line 338 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	clutter_actor_remove_all_children (_tmp4_);
#line 340 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	_tmp5_ = self->priv->_wm;
#line 340 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	_tmp6_ = gala_window_manager_gala_get_window_tracker (G_TYPE_CHECK_INSTANCE_CAST (_tmp5_, GALA_TYPE_WINDOW_MANAGER_GALA, GalaWindowManagerGala));
#line 340 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	_tmp7_ = _tmp6_;
#line 340 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	window_tracker = _tmp7_;
#line 341 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	_tmp8_ = window_tracker;
#line 341 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	_tmp9_ = current_window;
#line 341 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	_tmp10_ = gala_window_tracker_get_app_for_window (_tmp8_, _tmp9_);
#line 341 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	app = _tmp10_;
#line 342 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	_tmp11_ = windows;
#line 1280 "WindowSwitcher.c"
	{
		GList* window_collection = NULL;
		GList* window_it = NULL;
#line 342 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
		window_collection = _tmp11_;
#line 342 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
		for (window_it = window_collection; window_it != NULL; window_it = window_it->next) {
#line 1288 "WindowSwitcher.c"
			MetaWindow* window = NULL;
#line 342 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
			window = (MetaWindow*) window_it->data;
#line 1292 "WindowSwitcher.c"
			{
				GalaWindowTracker* _tmp12_;
				MetaWindow* _tmp13_;
				GalaApp* _tmp14_;
				GalaApp* _tmp15_;
				GalaApp* _tmp16_;
				gboolean _tmp17_;
#line 343 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
				_tmp12_ = window_tracker;
#line 343 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
				_tmp13_ = window;
#line 343 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
				_tmp14_ = gala_window_tracker_get_app_for_window (_tmp12_, _tmp13_);
#line 343 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
				_tmp15_ = _tmp14_;
#line 343 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
				_tmp16_ = app;
#line 343 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
				_tmp17_ = _tmp15_ == _tmp16_;
#line 343 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
				_g_object_unref0 (_tmp15_);
#line 343 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
				if (_tmp17_) {
#line 1316 "WindowSwitcher.c"
					GalaWindowSwitcherIcon* icon = NULL;
					MetaWindow* _tmp18_;
					GalaWindowSwitcherIcon* _tmp19_;
					MetaWindow* _tmp20_;
					MetaWindow* _tmp21_;
					GalaWindowSwitcherIcon* _tmp23_;
#line 344 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
					_tmp18_ = window;
#line 344 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
					_tmp19_ = gala_window_switcher_icon_new (_tmp18_, GALA_WINDOW_SWITCHER_ICON_SIZE, self->priv->scaling_factor);
#line 344 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
					g_object_ref_sink (_tmp19_);
#line 344 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
					icon = _tmp19_;
#line 345 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
					_tmp20_ = window;
#line 345 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
					_tmp21_ = current_window;
#line 345 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
					if (_tmp20_ == _tmp21_) {
#line 1337 "WindowSwitcher.c"
						GalaWindowSwitcherIcon* _tmp22_;
#line 346 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
						_tmp22_ = icon;
#line 346 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
						gala_window_switcher_set_current_icon (self, _tmp22_);
#line 1343 "WindowSwitcher.c"
					}
#line 349 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
					_tmp23_ = icon;
#line 349 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
					gala_window_switcher_add_icon (self, _tmp23_);
#line 343 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
					_g_object_unref0 (icon);
#line 1351 "WindowSwitcher.c"
				}
			}
		}
	}
#line 353 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	result = TRUE;
#line 353 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	_g_object_unref0 (app);
#line 353 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	(windows == NULL) ? NULL : (windows = (g_list_free (windows), NULL));
#line 353 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	return result;
#line 1364 "WindowSwitcher.c"
}

static gboolean
__lambda82_ (GalaWindowSwitcher* self,
             ClutterActor* _icon,
             ClutterEvent* event)
{
	gboolean _tmp0_ = FALSE;
	GalaWindowSwitcherIcon* _tmp1_;
	GalaWindowSwitcherIcon* _tmp2_;
	gboolean result;
#line 359 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	g_return_val_if_fail (_icon != NULL, FALSE);
#line 359 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	g_return_val_if_fail (event != NULL, FALSE);
#line 360 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	_tmp1_ = gala_window_switcher_get_current_icon (self);
#line 360 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	_tmp2_ = _tmp1_;
#line 360 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	if (G_TYPE_CHECK_INSTANCE_CAST (_tmp2_, clutter_actor_get_type (), ClutterActor) != _icon) {
#line 360 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
		_tmp0_ = !self->priv->handling_gesture;
#line 1388 "WindowSwitcher.c"
	} else {
#line 360 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
		_tmp0_ = FALSE;
#line 1392 "WindowSwitcher.c"
	}
#line 360 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	if (_tmp0_) {
#line 361 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
		gala_window_switcher_set_current_icon (self, G_TYPE_CHECK_INSTANCE_CAST (_icon, GALA_TYPE_WINDOW_SWITCHER_ICON, GalaWindowSwitcherIcon));
#line 1398 "WindowSwitcher.c"
	}
#line 364 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	result = CLUTTER_EVENT_PROPAGATE;
#line 364 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	return result;
#line 1404 "WindowSwitcher.c"
}

static gboolean
___lambda82__clutter_actor_motion_event (ClutterActor* _sender,
                                         ClutterEvent* event,
                                         gpointer self)
{
	gboolean result;
	result = __lambda82_ ((GalaWindowSwitcher*) self, _sender, event);
#line 359 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	return result;
#line 1416 "WindowSwitcher.c"
}

static void
gala_window_switcher_add_icon (GalaWindowSwitcher* self,
                               GalaWindowSwitcherIcon* icon)
{
	ClutterActor* _tmp0_;
#line 356 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	g_return_if_fail (self != NULL);
#line 356 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	g_return_if_fail (icon != NULL);
#line 357 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	_tmp0_ = self->priv->container;
#line 357 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	clutter_actor_add_child (_tmp0_, (ClutterActor*) icon);
#line 359 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	g_signal_connect_object ((ClutterActor*) icon, "motion-event", (GCallback) ___lambda82__clutter_actor_motion_event, self, 0);
#line 1434 "WindowSwitcher.c"
}

static void
gala_window_switcher_open_switcher (GalaWindowSwitcher* self)
{
	ClutterActor* _tmp0_;
	gboolean _tmp3_;
	gfloat width = 0.0F;
	gfloat height = 0.0F;
	gfloat _tmp4_ = 0.0F;
	gfloat _tmp5_ = 0.0F;
	MetaDisplay* display = NULL;
	GalaWindowManager* _tmp6_;
	MetaDisplay* _tmp7_;
	gint monitor = 0;
	MetaDisplay* _tmp8_;
	MtkRectangle geom = {0};
	MetaDisplay* _tmp9_;
	MtkRectangle _tmp10_ = {0};
	MtkRectangle _tmp11_;
	MtkRectangle _tmp12_;
	MtkRectangle _tmp13_;
	MtkRectangle _tmp14_;
#line 368 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	g_return_if_fail (self != NULL);
#line 369 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	_tmp0_ = self->priv->container;
#line 369 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	if (clutter_actor_get_n_children (_tmp0_) == 0) {
#line 1464 "WindowSwitcher.c"
		ClutterBackend* _tmp1_;
		ClutterSeat* _tmp2_;
#line 370 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
		_tmp1_ = clutter_get_default_backend ();
#line 370 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
		_tmp2_ = clutter_backend_get_default_seat (_tmp1_);
#line 370 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
		clutter_seat_bell_notify (_tmp2_);
#line 371 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
		return;
#line 1475 "WindowSwitcher.c"
	}
#line 374 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	_tmp3_ = self->priv->_opened;
#line 374 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	if (_tmp3_) {
#line 375 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
		return;
#line 1483 "WindowSwitcher.c"
	}
#line 380 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	g_object_set ((ClutterActor*) self, "visible", TRUE, NULL);
#line 383 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	clutter_actor_get_preferred_size ((ClutterActor*) self, NULL, NULL, &_tmp4_, &_tmp5_);
#line 383 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	width = _tmp4_;
#line 383 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	height = _tmp5_;
#line 385 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	_tmp6_ = self->priv->_wm;
#line 385 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	_tmp7_ = meta_plugin_get_display ((MetaPlugin*) _tmp6_);
#line 385 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	display = _tmp7_;
#line 386 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	_tmp8_ = display;
#line 386 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	monitor = meta_display_get_current_monitor (_tmp8_);
#line 387 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	_tmp9_ = display;
#line 387 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	meta_display_get_monitor_geometry (_tmp9_, monitor, &_tmp10_);
#line 387 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	geom = _tmp10_;
#line 389 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	_tmp11_ = geom;
#line 389 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	_tmp12_ = geom;
#line 389 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	_tmp13_ = geom;
#line 389 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	_tmp14_ = geom;
#line 389 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	clutter_actor_set_position ((ClutterActor*) self, (gfloat) ((gint) (_tmp11_.x + ((_tmp12_.width - width) / 2))), (gfloat) ((gint) (_tmp13_.y + ((_tmp14_.height - height) / 2))));
#line 394 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	gala_window_switcher_toggle_display (self, TRUE);
#line 1521 "WindowSwitcher.c"
}

static void
gala_window_switcher_toggle_display (GalaWindowSwitcher* self,
                                     gboolean show)
{
	gboolean _tmp0_;
	gint _tmp3_ = 0;
	GalaWindowManager* _tmp4_;
	gboolean _tmp5_;
	gboolean _tmp6_;
	gint _tmp7_ = 0;
#line 397 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	g_return_if_fail (self != NULL);
#line 398 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	_tmp0_ = self->priv->_opened;
#line 398 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	if (_tmp0_ == show) {
#line 399 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
		return;
#line 1542 "WindowSwitcher.c"
	}
#line 402 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	gala_window_switcher_set_opened (self, show);
#line 403 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	if (show) {
#line 404 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
		gala_window_switcher_push_modal (self);
#line 1550 "WindowSwitcher.c"
	} else {
		GalaWindowManager* _tmp1_;
		GalaModalProxy* _tmp2_;
#line 406 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
		_tmp1_ = self->priv->_wm;
#line 406 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
		_tmp2_ = self->priv->modal_proxy;
#line 406 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
		gala_window_manager_pop_modal (_tmp1_, _tmp2_);
#line 1560 "WindowSwitcher.c"
	}
#line 409 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	clutter_actor_save_easing_state ((ClutterActor*) self);
#line 410 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	_tmp4_ = self->priv->_wm;
#line 410 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	_tmp5_ = gala_window_manager_get_enable_animations (_tmp4_);
#line 410 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	_tmp6_ = _tmp5_;
#line 410 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	if (_tmp6_) {
#line 410 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
		_tmp3_ = GALA_WINDOW_SWITCHER_ANIMATION_DURATION;
#line 1574 "WindowSwitcher.c"
	} else {
#line 410 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
		_tmp3_ = 0;
#line 1578 "WindowSwitcher.c"
	}
#line 410 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	clutter_actor_set_easing_duration ((ClutterActor*) self, (guint) _tmp3_);
#line 411 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	if (show) {
#line 411 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
		_tmp7_ = 255;
#line 1586 "WindowSwitcher.c"
	} else {
#line 411 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
		_tmp7_ = 0;
#line 1590 "WindowSwitcher.c"
	}
#line 411 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	clutter_actor_set_opacity ((ClutterActor*) self, (guint) _tmp7_);
#line 412 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	clutter_actor_restore_easing_state ((ClutterActor*) self);
#line 1596 "WindowSwitcher.c"
}

static gboolean
__lambda83_ (GalaWindowSwitcher* self,
             MetaKeyBinding* binding)
{
	MetaKeyBindingAction action = 0;
	const gchar* _tmp0_;
	gboolean result;
#line 417 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	g_return_val_if_fail (binding != NULL, FALSE);
#line 418 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	_tmp0_ = meta_key_binding_get_name (binding);
#line 418 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	action = meta_prefs_get_keybinding_action (_tmp0_);
#line 420 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	switch (action) {
#line 420 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
		case META_KEYBINDING_ACTION_NONE:
#line 420 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
		case META_KEYBINDING_ACTION_LOCATE_POINTER_KEY:
#line 420 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
		case META_KEYBINDING_ACTION_SWITCH_APPLICATIONS:
#line 420 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
		case META_KEYBINDING_ACTION_SWITCH_APPLICATIONS_BACKWARD:
#line 420 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
		case META_KEYBINDING_ACTION_SWITCH_WINDOWS:
#line 420 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
		case META_KEYBINDING_ACTION_SWITCH_WINDOWS_BACKWARD:
#line 420 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
		case META_KEYBINDING_ACTION_SWITCH_GROUP:
#line 420 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
		case META_KEYBINDING_ACTION_SWITCH_GROUP_BACKWARD:
#line 1630 "WindowSwitcher.c"
		{
#line 429 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
			result = FALSE;
#line 429 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
			return result;
#line 1636 "WindowSwitcher.c"
		}
		default:
		{
#line 431 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
			break;
#line 1642 "WindowSwitcher.c"
		}
	}
#line 434 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	result = TRUE;
#line 434 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	return result;
#line 1649 "WindowSwitcher.c"
}

static gboolean
___lambda83__gala_keybinding_filter (MetaKeyBinding* binding,
                                     gpointer self)
{
	gboolean result;
	result = __lambda83_ ((GalaWindowSwitcher*) self, binding);
#line 417 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	return result;
#line 1660 "WindowSwitcher.c"
}

static void
gala_window_switcher_push_modal (GalaWindowSwitcher* self)
{
	GalaWindowManager* _tmp0_;
	GalaModalProxy* _tmp1_;
	GalaModalProxy* _tmp2_;
#line 415 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	g_return_if_fail (self != NULL);
#line 416 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	_tmp0_ = self->priv->_wm;
#line 416 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	_tmp1_ = gala_window_manager_push_modal (_tmp0_, (ClutterActor*) self);
#line 416 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	_g_object_unref0 (self->priv->modal_proxy);
#line 416 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	self->priv->modal_proxy = _tmp1_;
#line 417 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	_tmp2_ = self->priv->modal_proxy;
#line 417 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	gala_modal_proxy_set_keybinding_filter (_tmp2_, ___lambda83__gala_keybinding_filter, self);
#line 1683 "WindowSwitcher.c"
}

static void
gala_window_switcher_close_switcher (GalaWindowSwitcher* self,
                                     guint32 time,
                                     gboolean cancel)
{
	gboolean _tmp0_;
	MetaWindow* window = NULL;
	GalaWindowSwitcherIcon* _tmp1_;
	GalaWindowSwitcherIcon* _tmp2_;
	MetaWindow* _tmp3_;
	MetaWindow* _tmp4_;
	MetaWindow* _tmp5_;
	MetaWindow* _tmp6_;
#line 439 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	g_return_if_fail (self != NULL);
#line 440 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	_tmp0_ = self->priv->_opened;
#line 440 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	if (!_tmp0_) {
#line 441 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
		return;
#line 1707 "WindowSwitcher.c"
	}
#line 444 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	_tmp1_ = gala_window_switcher_get_current_icon (self);
#line 444 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	_tmp2_ = _tmp1_;
#line 444 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	_tmp3_ = gala_window_switcher_icon_get_window (_tmp2_);
#line 444 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	_tmp4_ = _tmp3_;
#line 444 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	_tmp5_ = _g_object_ref0 (_tmp4_);
#line 444 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	window = _tmp5_;
#line 445 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	_tmp6_ = window;
#line 445 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	if (_tmp6_ == NULL) {
#line 446 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
		_g_object_unref0 (window);
#line 446 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
		return;
#line 1729 "WindowSwitcher.c"
	}
#line 449 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	if (!cancel) {
#line 1733 "WindowSwitcher.c"
		MetaWorkspace* workspace = NULL;
		MetaWindow* _tmp7_;
		MetaWorkspace* _tmp8_;
		MetaWorkspace* _tmp9_;
		GalaWindowManager* _tmp10_;
		MetaDisplay* _tmp11_;
		MetaWorkspaceManager* _tmp12_;
		MetaWorkspace* _tmp13_;
#line 450 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
		_tmp7_ = window;
#line 450 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
		_tmp8_ = meta_window_get_workspace (_tmp7_);
#line 450 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
		workspace = _tmp8_;
#line 451 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
		_tmp9_ = workspace;
#line 451 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
		_tmp10_ = self->priv->_wm;
#line 451 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
		_tmp11_ = meta_plugin_get_display ((MetaPlugin*) _tmp10_);
#line 451 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
		_tmp12_ = meta_display_get_workspace_manager (_tmp11_);
#line 451 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
		_tmp13_ = meta_workspace_manager_get_active_workspace (_tmp12_);
#line 451 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
		if (_tmp9_ != _tmp13_) {
#line 1760 "WindowSwitcher.c"
			MetaWorkspace* _tmp14_;
			MetaWindow* _tmp15_;
#line 452 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
			_tmp14_ = workspace;
#line 452 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
			_tmp15_ = window;
#line 452 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
			meta_workspace_activate_with_focus (_tmp14_, _tmp15_, time);
#line 1769 "WindowSwitcher.c"
		} else {
			MetaWindow* _tmp16_;
#line 454 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
			_tmp16_ = window;
#line 454 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
			meta_window_activate (_tmp16_, time);
#line 1776 "WindowSwitcher.c"
		}
	}
#line 458 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	gala_window_switcher_toggle_display (self, FALSE);
#line 439 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	_g_object_unref0 (window);
#line 1783 "WindowSwitcher.c"
}

static void
gala_window_switcher_next_window (GalaWindowSwitcher* self,
                                  gboolean backward)
{
	ClutterActor* actor = NULL;
	gboolean _tmp0_ = FALSE;
	ClutterActor* _tmp1_;
	GalaWindowSwitcherIcon* _tmp6_;
	GalaWindowSwitcherIcon* _tmp7_;
	ClutterActor* _tmp27_;
#line 461 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	g_return_if_fail (self != NULL);
#line 464 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	_tmp1_ = self->priv->container;
#line 464 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	if (clutter_actor_get_n_children (_tmp1_) == 1) {
#line 1802 "WindowSwitcher.c"
		GalaWindowSwitcherIcon* _tmp2_;
		GalaWindowSwitcherIcon* _tmp3_;
#line 464 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
		_tmp2_ = gala_window_switcher_get_current_icon (self);
#line 464 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
		_tmp3_ = _tmp2_;
#line 464 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
		_tmp0_ = _tmp3_ != NULL;
#line 1811 "WindowSwitcher.c"
	} else {
#line 464 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
		_tmp0_ = FALSE;
#line 1815 "WindowSwitcher.c"
	}
#line 464 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	if (_tmp0_) {
#line 1819 "WindowSwitcher.c"
		ClutterBackend* _tmp4_;
		ClutterSeat* _tmp5_;
#line 465 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
		_tmp4_ = clutter_get_default_backend ();
#line 465 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
		_tmp5_ = clutter_backend_get_default_seat (_tmp4_);
#line 465 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
		clutter_seat_bell_notify (_tmp5_);
#line 466 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
		_g_object_unref0 (actor);
#line 466 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
		return;
#line 1832 "WindowSwitcher.c"
	}
#line 469 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	_tmp6_ = gala_window_switcher_get_current_icon (self);
#line 469 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	_tmp7_ = _tmp6_;
#line 469 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	if (_tmp7_ == NULL) {
#line 1840 "WindowSwitcher.c"
		ClutterActor* _tmp8_;
		ClutterActor* _tmp9_;
		ClutterActor* _tmp10_;
#line 470 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
		_tmp8_ = self->priv->container;
#line 470 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
		_tmp9_ = clutter_actor_get_first_child (_tmp8_);
#line 470 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
		_tmp10_ = _g_object_ref0 (_tmp9_);
#line 470 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
		_g_object_unref0 (actor);
#line 470 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
		actor = _tmp10_;
#line 1854 "WindowSwitcher.c"
	} else {
#line 471 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
		if (!backward) {
#line 1858 "WindowSwitcher.c"
			GalaWindowSwitcherIcon* _tmp11_;
			GalaWindowSwitcherIcon* _tmp12_;
			ClutterActor* _tmp13_;
			ClutterActor* _tmp14_;
			ClutterActor* _tmp15_;
#line 472 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
			_tmp11_ = gala_window_switcher_get_current_icon (self);
#line 472 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
			_tmp12_ = _tmp11_;
#line 472 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
			_tmp13_ = clutter_actor_get_next_sibling ((ClutterActor*) _tmp12_);
#line 472 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
			_tmp14_ = _g_object_ref0 (_tmp13_);
#line 472 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
			_g_object_unref0 (actor);
#line 472 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
			actor = _tmp14_;
#line 473 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
			_tmp15_ = actor;
#line 473 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
			if (_tmp15_ == NULL) {
#line 1880 "WindowSwitcher.c"
				ClutterActor* _tmp16_;
				ClutterActor* _tmp17_;
				ClutterActor* _tmp18_;
#line 474 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
				_tmp16_ = self->priv->container;
#line 474 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
				_tmp17_ = clutter_actor_get_first_child (_tmp16_);
#line 474 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
				_tmp18_ = _g_object_ref0 (_tmp17_);
#line 474 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
				_g_object_unref0 (actor);
#line 474 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
				actor = _tmp18_;
#line 1894 "WindowSwitcher.c"
			}
		} else {
			GalaWindowSwitcherIcon* _tmp19_;
			GalaWindowSwitcherIcon* _tmp20_;
			ClutterActor* _tmp21_;
			ClutterActor* _tmp22_;
			ClutterActor* _tmp23_;
#line 477 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
			_tmp19_ = gala_window_switcher_get_current_icon (self);
#line 477 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
			_tmp20_ = _tmp19_;
#line 477 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
			_tmp21_ = clutter_actor_get_previous_sibling ((ClutterActor*) _tmp20_);
#line 477 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
			_tmp22_ = _g_object_ref0 (_tmp21_);
#line 477 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
			_g_object_unref0 (actor);
#line 477 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
			actor = _tmp22_;
#line 478 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
			_tmp23_ = actor;
#line 478 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
			if (_tmp23_ == NULL) {
#line 1918 "WindowSwitcher.c"
				ClutterActor* _tmp24_;
				ClutterActor* _tmp25_;
				ClutterActor* _tmp26_;
#line 479 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
				_tmp24_ = self->priv->container;
#line 479 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
				_tmp25_ = clutter_actor_get_last_child (_tmp24_);
#line 479 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
				_tmp26_ = _g_object_ref0 (_tmp25_);
#line 479 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
				_g_object_unref0 (actor);
#line 479 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
				actor = _tmp26_;
#line 1932 "WindowSwitcher.c"
			}
		}
	}
#line 483 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	_tmp27_ = actor;
#line 483 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	gala_window_switcher_set_current_icon (self, G_TYPE_CHECK_INSTANCE_CAST (_tmp27_, GALA_TYPE_WINDOW_SWITCHER_ICON, GalaWindowSwitcherIcon));
#line 461 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	_g_object_unref0 (actor);
#line 1942 "WindowSwitcher.c"
}

static void
gala_window_switcher_update_caption_text (GalaWindowSwitcher* self)
{
	MetaWindow* _tmp0_ = NULL;
	GalaWindowSwitcherIcon* _tmp1_;
	GalaWindowSwitcherIcon* _tmp2_;
	MetaWindow* current_window = NULL;
	MetaWindow* _tmp7_;
	const gchar* _tmp8_ = NULL;
	MetaWindow* _tmp9_;
	gchar* current_caption = NULL;
	gchar* _tmp13_;
	ClutterText* _tmp14_;
#line 486 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	g_return_if_fail (self != NULL);
#line 487 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	_tmp1_ = gala_window_switcher_get_current_icon (self);
#line 487 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	_tmp2_ = _tmp1_;
#line 487 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	if (_tmp2_ != NULL) {
#line 1966 "WindowSwitcher.c"
		GalaWindowSwitcherIcon* _tmp3_;
		GalaWindowSwitcherIcon* _tmp4_;
		MetaWindow* _tmp5_;
		MetaWindow* _tmp6_;
#line 487 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
		_tmp3_ = gala_window_switcher_get_current_icon (self);
#line 487 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
		_tmp4_ = _tmp3_;
#line 487 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
		_tmp5_ = gala_window_switcher_icon_get_window (_tmp4_);
#line 487 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
		_tmp6_ = _tmp5_;
#line 487 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
		_tmp0_ = _tmp6_;
#line 1981 "WindowSwitcher.c"
	} else {
#line 487 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
		_tmp0_ = NULL;
#line 1985 "WindowSwitcher.c"
	}
#line 487 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	_tmp7_ = _g_object_ref0 (_tmp0_);
#line 487 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	current_window = _tmp7_;
#line 488 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	_tmp9_ = current_window;
#line 488 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	if (_tmp9_ != NULL) {
#line 1995 "WindowSwitcher.c"
		MetaWindow* _tmp10_;
		const gchar* _tmp11_;
		const gchar* _tmp12_;
#line 488 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
		_tmp10_ = current_window;
#line 488 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
		_tmp11_ = meta_window_get_title (_tmp10_);
#line 488 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
		_tmp12_ = _tmp11_;
#line 488 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
		_tmp8_ = _tmp12_;
#line 2007 "WindowSwitcher.c"
	} else {
#line 488 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
		_tmp8_ = "n/a";
#line 2011 "WindowSwitcher.c"
	}
#line 488 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	_tmp13_ = g_strdup (_tmp8_);
#line 488 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	current_caption = _tmp13_;
#line 489 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	_tmp14_ = self->priv->caption;
#line 489 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	clutter_text_set_text (_tmp14_, current_caption);
#line 486 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	_g_free0 (current_caption);
#line 486 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	_g_object_unref0 (current_window);
#line 2025 "WindowSwitcher.c"
}

static void
gala_window_switcher_real_key_focus_out (ClutterActor* base)
{
	GalaWindowSwitcher * self;
#line 492 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	self = (GalaWindowSwitcher*) base;
#line 493 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	if (!self->priv->handling_gesture) {
#line 2036 "WindowSwitcher.c"
		GalaWindowManager* _tmp0_;
		MetaDisplay* _tmp1_;
#line 494 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
		_tmp0_ = self->priv->_wm;
#line 494 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
		_tmp1_ = meta_plugin_get_display ((MetaPlugin*) _tmp0_);
#line 494 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
		gala_window_switcher_close_switcher (self, meta_display_get_current_time (_tmp1_), FALSE);
#line 2045 "WindowSwitcher.c"
	}
}

static gboolean
gala_window_switcher_container_mouse_release (GalaWindowSwitcher* self,
                                              ClutterEvent* event)
{
	gboolean _tmp0_ = FALSE;
	gboolean _tmp1_ = FALSE;
	gboolean _tmp2_;
	gboolean result;
#line 499 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	g_return_val_if_fail (self != NULL, FALSE);
#line 499 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	g_return_val_if_fail (event != NULL, FALSE);
#line 503 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	_tmp2_ = self->priv->_opened;
#line 503 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	if (_tmp2_) {
#line 503 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
		_tmp1_ = clutter_event_get_button (event) == CLUTTER_BUTTON_PRIMARY;
#line 2067 "WindowSwitcher.c"
	} else {
#line 503 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
		_tmp1_ = FALSE;
#line 2071 "WindowSwitcher.c"
	}
#line 503 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	if (_tmp1_) {
#line 503 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
		_tmp0_ = !self->priv->handling_gesture;
#line 2077 "WindowSwitcher.c"
	} else {
#line 503 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
		_tmp0_ = FALSE;
#line 2081 "WindowSwitcher.c"
	}
#line 503 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	if (_tmp0_) {
#line 504 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
		gala_window_switcher_close_switcher (self, clutter_event_get_time (event), FALSE);
#line 2087 "WindowSwitcher.c"
	}
#line 507 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	result = TRUE;
#line 507 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	return result;
#line 2093 "WindowSwitcher.c"
}

static gboolean
gala_window_switcher_real_key_release_event (ClutterActor* base,
                                             ClutterEvent* event)
{
	GalaWindowSwitcher * self;
	gboolean _tmp0_ = FALSE;
	gboolean result;
#line 511 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	self = (GalaWindowSwitcher*) base;
#line 511 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	g_return_val_if_fail (event != NULL, FALSE);
#line 515 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	if ((gala_window_switcher_get_current_modifiers (self) & self->priv->modifier_mask) == 0) {
#line 515 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
		_tmp0_ = !self->priv->handling_gesture;
#line 2111 "WindowSwitcher.c"
	} else {
#line 515 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
		_tmp0_ = FALSE;
#line 2115 "WindowSwitcher.c"
	}
#line 515 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	if (_tmp0_) {
#line 516 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
		gala_window_switcher_close_switcher (self, clutter_event_get_time (event), FALSE);
#line 2121 "WindowSwitcher.c"
	}
#line 519 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	result = CLUTTER_EVENT_PROPAGATE;
#line 519 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	return result;
#line 2127 "WindowSwitcher.c"
}

static gboolean
gala_window_switcher_real_key_press_event (ClutterActor* base,
                                           ClutterEvent* event)
{
	GalaWindowSwitcher * self;
	gboolean result;
#line 523 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	self = (GalaWindowSwitcher*) base;
#line 523 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	g_return_val_if_fail (event != NULL, FALSE);
#line 527 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	switch (clutter_event_get_key_symbol (event)) {
#line 527 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
		case CLUTTER_KEY_Right:
#line 2144 "WindowSwitcher.c"
		{
#line 529 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
			if (!self->priv->handling_gesture) {
#line 530 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
				gala_window_switcher_next_window (self, FALSE);
#line 2150 "WindowSwitcher.c"
			}
#line 532 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
			result = CLUTTER_EVENT_STOP;
#line 532 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
			return result;
#line 2156 "WindowSwitcher.c"
		}
#line 527 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
		case CLUTTER_KEY_Left:
#line 2160 "WindowSwitcher.c"
		{
#line 534 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
			if (!self->priv->handling_gesture) {
#line 535 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
				gala_window_switcher_next_window (self, TRUE);
#line 2166 "WindowSwitcher.c"
			}
#line 537 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
			result = CLUTTER_EVENT_STOP;
#line 537 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
			return result;
#line 2172 "WindowSwitcher.c"
		}
#line 527 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
		case CLUTTER_KEY_Escape:
#line 2176 "WindowSwitcher.c"
		{
#line 539 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
			gala_window_switcher_close_switcher (self, clutter_event_get_time (event), TRUE);
#line 540 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
			result = CLUTTER_EVENT_PROPAGATE;
#line 540 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
			return result;
#line 2184 "WindowSwitcher.c"
		}
#line 527 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
		case CLUTTER_KEY_Return:
#line 2188 "WindowSwitcher.c"
		{
#line 542 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
			gala_window_switcher_close_switcher (self, clutter_event_get_time (event), FALSE);
#line 543 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
			result = CLUTTER_EVENT_PROPAGATE;
#line 543 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
			return result;
#line 2196 "WindowSwitcher.c"
		}
		default:
#line 527 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
		break;
#line 2201 "WindowSwitcher.c"
	}
#line 546 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	result = CLUTTER_EVENT_PROPAGATE;
#line 546 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	return result;
#line 2207 "WindowSwitcher.c"
}

static inline ClutterModifierType
gala_window_switcher_get_current_modifiers (GalaWindowSwitcher* self)
{
	ClutterModifierType modifiers = 0U;
	GalaWindowManager* _tmp0_;
	MetaDisplay* _tmp1_;
	MetaCursorTracker* _tmp2_;
	ClutterModifierType _tmp3_ = 0U;
	ClutterModifierType result;
#line 550 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	g_return_val_if_fail (self != NULL, 0U);
#line 552 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	_tmp0_ = self->priv->_wm;
#line 552 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	_tmp1_ = meta_plugin_get_display ((MetaPlugin*) _tmp0_);
#line 552 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	_tmp2_ = meta_cursor_tracker_get_for_display (_tmp1_);
#line 552 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	meta_cursor_tracker_get_pointer (_tmp2_, NULL, &_tmp3_);
#line 552 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	modifiers = _tmp3_;
#line 554 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	result = modifiers & CLUTTER_MODIFIER_MASK;
#line 554 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	return result;
#line 2235 "WindowSwitcher.c"
}

GalaWindowManager*
gala_window_switcher_get_wm (GalaWindowSwitcher* self)
{
	GalaWindowManager* result;
	GalaWindowManager* _tmp0_;
#line 20 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	g_return_val_if_fail (self != NULL, NULL);
#line 20 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	_tmp0_ = self->priv->_wm;
#line 20 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	result = _tmp0_;
#line 20 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	return result;
#line 2251 "WindowSwitcher.c"
}

static void
gala_window_switcher_set_wm (GalaWindowSwitcher* self,
                             GalaWindowManager* value)
{
	GalaWindowManager* old_value;
#line 20 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	g_return_if_fail (self != NULL);
#line 20 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	old_value = gala_window_switcher_get_wm (self);
#line 20 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	if (old_value != value) {
#line 2265 "WindowSwitcher.c"
		GalaWindowManager* _tmp0_;
#line 20 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
		_tmp0_ = _g_object_ref0 (value);
#line 20 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
		_g_object_unref0 (self->priv->_wm);
#line 20 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
		self->priv->_wm = _tmp0_;
#line 20 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
		g_object_notify_by_pspec ((GObject *) self, gala_window_switcher_properties[GALA_WINDOW_SWITCHER_WM_PROPERTY]);
#line 2275 "WindowSwitcher.c"
	}
}

GalaGestureTracker*
gala_window_switcher_get_gesture_tracker (GalaWindowSwitcher* self)
{
	GalaGestureTracker* result;
	GalaGestureTracker* _tmp0_;
#line 21 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	g_return_val_if_fail (self != NULL, NULL);
#line 21 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	_tmp0_ = self->priv->_gesture_tracker;
#line 21 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	result = _tmp0_;
#line 21 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	return result;
#line 2292 "WindowSwitcher.c"
}

static void
gala_window_switcher_set_gesture_tracker (GalaWindowSwitcher* self,
                                          GalaGestureTracker* value)
{
	GalaGestureTracker* old_value;
#line 21 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	g_return_if_fail (self != NULL);
#line 21 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	old_value = gala_window_switcher_get_gesture_tracker (self);
#line 21 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	if (old_value != value) {
#line 2306 "WindowSwitcher.c"
		GalaGestureTracker* _tmp0_;
#line 21 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
		_tmp0_ = _g_object_ref0 (value);
#line 21 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
		_g_object_unref0 (self->priv->_gesture_tracker);
#line 21 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
		self->priv->_gesture_tracker = _tmp0_;
#line 21 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
		g_object_notify_by_pspec ((GObject *) self, gala_window_switcher_properties[GALA_WINDOW_SWITCHER_GESTURE_TRACKER_PROPERTY]);
#line 2316 "WindowSwitcher.c"
	}
}

gboolean
gala_window_switcher_get_opened (GalaWindowSwitcher* self)
{
	gboolean result;
#line 22 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	g_return_val_if_fail (self != NULL, FALSE);
#line 22 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	result = self->priv->_opened;
#line 22 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	return result;
#line 2330 "WindowSwitcher.c"
}

static void
gala_window_switcher_set_opened (GalaWindowSwitcher* self,
                                 gboolean value)
{
	gboolean old_value;
#line 22 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	g_return_if_fail (self != NULL);
#line 22 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	old_value = gala_window_switcher_get_opened (self);
#line 22 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	if (old_value != value) {
#line 22 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
		self->priv->_opened = value;
#line 22 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
		g_object_notify_by_pspec ((GObject *) self, gala_window_switcher_properties[GALA_WINDOW_SWITCHER_OPENED_PROPERTY]);
#line 2348 "WindowSwitcher.c"
	}
}

static GalaWindowSwitcherIcon*
gala_window_switcher_get_current_icon (GalaWindowSwitcher* self)
{
	GalaWindowSwitcherIcon* result;
	GalaWindowSwitcherIcon* _tmp0_;
#line 34 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	g_return_val_if_fail (self != NULL, NULL);
#line 35 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	_tmp0_ = self->priv->_current_icon;
#line 35 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	result = _tmp0_;
#line 35 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	return result;
#line 2365 "WindowSwitcher.c"
}

static void
gala_window_switcher_set_current_icon (GalaWindowSwitcher* self,
                                       GalaWindowSwitcherIcon* value)
{
	GalaWindowSwitcherIcon* _tmp0_;
	GalaWindowSwitcherIcon* _tmp2_;
	GalaWindowSwitcherIcon* _tmp3_;
#line 37 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	g_return_if_fail (self != NULL);
#line 38 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	_tmp0_ = self->priv->_current_icon;
#line 38 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	if (_tmp0_ != NULL) {
#line 2381 "WindowSwitcher.c"
		GalaWindowSwitcherIcon* _tmp1_;
#line 39 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
		_tmp1_ = self->priv->_current_icon;
#line 39 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
		gala_window_switcher_icon_set_selected (_tmp1_, FALSE);
#line 2387 "WindowSwitcher.c"
	}
#line 42 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	_tmp2_ = _g_object_ref0 (value);
#line 42 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	_g_object_unref0 (self->priv->_current_icon);
#line 42 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	self->priv->_current_icon = _tmp2_;
#line 43 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	_tmp3_ = self->priv->_current_icon;
#line 43 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	if (_tmp3_ != NULL) {
#line 2399 "WindowSwitcher.c"
		GalaWindowSwitcherIcon* _tmp4_;
#line 44 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
		_tmp4_ = self->priv->_current_icon;
#line 44 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
		gala_window_switcher_icon_set_selected (_tmp4_, TRUE);
#line 2405 "WindowSwitcher.c"
	}
#line 47 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	gala_window_switcher_update_caption_text (self);
#line 2409 "WindowSwitcher.c"
}

static gboolean
_gala_window_switcher_container_mouse_release_clutter_actor_button_release_event (ClutterActor* _sender,
                                                                                  ClutterEvent* event,
                                                                                  gpointer self)
{
	gboolean result;
	result = gala_window_switcher_container_mouse_release ((GalaWindowSwitcher*) self, event);
#line 95 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	return result;
#line 2421 "WindowSwitcher.c"
}

static void
_clutter_content_invalidate_g_object_notify (GObject* _sender,
                                             GParamSpec* pspec,
                                             gpointer self)
{
#line 98 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	clutter_content_invalidate ((ClutterContent*) self);
#line 2431 "WindowSwitcher.c"
}

static void
_gala_window_switcher_scale_meta_monitor_manager_monitors_changed (MetaMonitorManager* _sender,
                                                                   gpointer self)
{
#line 101 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	gala_window_switcher_scale ((GalaWindowSwitcher*) self);
#line 2440 "WindowSwitcher.c"
}

static void
_gala_window_switcher___lambda86_ (GalaWindowSwitcher* self)
{
	guint _tmp0_;
	guint _tmp1_;
#line 103 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	_tmp0_ = clutter_actor_get_opacity ((ClutterActor*) self);
#line 103 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	_tmp1_ = _tmp0_;
#line 103 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	g_object_set ((ClutterActor*) self, "visible", _tmp1_ != ((guint) 0), NULL);
#line 2454 "WindowSwitcher.c"
}

static void
__gala_window_switcher___lambda86__g_object_notify (GObject* _sender,
                                                    GParamSpec* pspec,
                                                    gpointer self)
{
#line 103 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	_gala_window_switcher___lambda86_ ((GalaWindowSwitcher*) self);
#line 2464 "WindowSwitcher.c"
}

static GObject *
gala_window_switcher_constructor (GType type,
                                  guint n_construct_properties,
                                  GObjectConstructParam * construct_properties)
{
	GObject * obj;
	GObjectClass * parent_class;
	GalaWindowSwitcher * self;
	GalaDrawingStyleManager* _tmp0_;
	ClutterFlowLayout* _tmp1_;
	ClutterActor* _tmp2_ = NULL;
	gchar* _tmp3_;
	ClutterText* _tmp4_ = NULL;
	ClutterActor* _tmp5_;
	ClutterText* _tmp6_;
	ClutterBoxLayout* _tmp7_ = NULL;
	ClutterBoxLayout* _tmp8_;
	GalaShadowEffect* _tmp9_ = NULL;
	GalaShadowEffect* _tmp10_;
	ClutterActor* _tmp11_;
	GalaDrawingStyleManager* _tmp12_;
	ClutterContent* _tmp13_;
	ClutterContent* _tmp14_;
	MetaMonitorManager* monitor_manager = NULL;
	GalaWindowManager* _tmp15_;
	MetaDisplay* _tmp16_;
	MetaContext* _tmp17_;
	MetaBackend* _tmp18_;
	MetaMonitorManager* _tmp19_;
	MetaMonitorManager* _tmp20_;
#line 60 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	parent_class = G_OBJECT_CLASS (gala_window_switcher_parent_class);
#line 60 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	obj = parent_class->constructor (type, n_construct_properties, construct_properties);
#line 60 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	self = G_TYPE_CHECK_INSTANCE_CAST (obj, GALA_TYPE_WINDOW_SWITCHER, GalaWindowSwitcher);
#line 61 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	_tmp0_ = gala_drawing_style_manager_get_instance ();
#line 61 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	_g_object_unref0 (self->priv->style_manager);
#line 61 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	self->priv->style_manager = _tmp0_;
#line 63 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	_tmp1_ = (ClutterFlowLayout*) clutter_flow_layout_new (CLUTTER_ORIENTATION_HORIZONTAL);
#line 63 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	g_object_ref_sink (_tmp1_);
#line 63 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	_tmp2_ = clutter_actor_new ();
#line 63 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	clutter_actor_set_reactive (_tmp2_, TRUE);
#line 63 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	clutter_actor_set_layout_manager (_tmp2_, (ClutterLayoutManager*) _tmp1_);
#line 63 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	_g_object_unref0 (_tmp1_);
#line 63 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	g_object_ref_sink (_tmp2_);
#line 63 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	_g_object_unref0 (self->priv->container);
#line 63 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	self->priv->container = _tmp2_;
#line 72 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	_tmp3_ = g_strdup (GALA_WINDOW_SWITCHER_CAPTION_FONT_NAME);
#line 72 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	_tmp4_ = (ClutterText*) clutter_text_new ();
#line 72 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	clutter_text_set_font_name (_tmp4_, _tmp3_);
#line 72 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	_g_free0 (_tmp3_);
#line 72 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	clutter_text_set_ellipsize (_tmp4_, PANGO_ELLIPSIZE_END);
#line 72 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	clutter_text_set_line_alignment (_tmp4_, PANGO_ALIGN_CENTER);
#line 72 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	g_object_ref_sink (_tmp4_);
#line 72 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	_g_object_unref0 (self->priv->caption);
#line 72 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	self->priv->caption = _tmp4_;
#line 78 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	_tmp5_ = self->priv->container;
#line 78 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	clutter_actor_add_child ((ClutterActor*) self, _tmp5_);
#line 79 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	_tmp6_ = self->priv->caption;
#line 79 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	clutter_actor_add_child ((ClutterActor*) self, (ClutterActor*) _tmp6_);
#line 81 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	g_object_set ((ClutterActor*) self, "visible", FALSE, NULL);
#line 82 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	clutter_actor_set_opacity ((ClutterActor*) self, (guint) 0);
#line 83 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	_tmp7_ = (ClutterBoxLayout*) clutter_box_layout_new ();
#line 83 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	clutter_box_layout_set_orientation (_tmp7_, CLUTTER_ORIENTATION_VERTICAL);
#line 83 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	g_object_ref_sink (_tmp7_);
#line 83 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	_tmp8_ = _tmp7_;
#line 83 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	clutter_actor_set_layout_manager ((ClutterActor*) self, (ClutterLayoutManager*) _tmp8_);
#line 83 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	_g_object_unref0 (_tmp8_);
#line 87 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	_tmp9_ = gala_shadow_effect_new ("window-switcher");
#line 87 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	gala_shadow_effect_set_border_radius (_tmp9_, gala_internal_utils_scale_to_int (9, self->priv->scaling_factor));
#line 87 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	gala_shadow_effect_set_shadow_opacity (_tmp9_, (guint8) 100);
#line 87 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	g_object_ref_sink (_tmp9_);
#line 87 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	_g_object_unref0 (self->priv->shadow_effect);
#line 87 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	self->priv->shadow_effect = _tmp9_;
#line 91 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	_tmp10_ = self->priv->shadow_effect;
#line 91 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	clutter_actor_add_effect ((ClutterActor*) self, (ClutterEffect*) _tmp10_);
#line 93 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	gala_window_switcher_scale (self);
#line 95 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	_tmp11_ = self->priv->container;
#line 95 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	g_signal_connect_object (_tmp11_, "button-release-event", (GCallback) _gala_window_switcher_container_mouse_release_clutter_actor_button_release_event, self, 0);
#line 98 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	_tmp12_ = self->priv->style_manager;
#line 98 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	_tmp13_ = clutter_actor_get_content ((ClutterActor*) self);
#line 98 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	_tmp14_ = _tmp13_;
#line 98 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	g_signal_connect_object ((GObject*) _tmp12_, "notify::prefers-color-scheme", (GCallback) _clutter_content_invalidate_g_object_notify, _tmp14_, 0);
#line 100 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	_tmp15_ = self->priv->_wm;
#line 100 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	_tmp16_ = meta_plugin_get_display ((MetaPlugin*) _tmp15_);
#line 100 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	_tmp17_ = meta_display_get_context (_tmp16_);
#line 100 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	_tmp18_ = meta_context_get_backend (_tmp17_);
#line 100 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	_tmp19_ = meta_backend_get_monitor_manager (_tmp18_);
#line 100 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	monitor_manager = _tmp19_;
#line 101 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	_tmp20_ = monitor_manager;
#line 101 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	g_signal_connect_object (_tmp20_, "monitors-changed", (GCallback) _gala_window_switcher_scale_meta_monitor_manager_monitors_changed, self, 0);
#line 103 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	g_signal_connect_object ((GObject*) self, "notify::opacity", (GCallback) __gala_window_switcher___lambda86__g_object_notify, self, 0);
#line 60 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	return obj;
#line 2619 "WindowSwitcher.c"
}

static void
gala_window_switcher_class_init (GalaWindowSwitcherClass * klass,
                                 gpointer klass_data)
{
#line 10 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	gala_window_switcher_parent_class = g_type_class_peek_parent (klass);
#line 10 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	g_type_class_adjust_private_offset (klass, &GalaWindowSwitcher_private_offset);
#line 10 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	((ClutterActorClass *) klass)->get_preferred_width = (void (*) (ClutterActor*, gfloat, gfloat*, gfloat*)) gala_window_switcher_real_get_preferred_width;
#line 10 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	((GalaCanvasActorClass *) klass)->draw = (void (*) (GalaCanvasActor*, cairo_t*, gint, gint)) gala_window_switcher_real_draw;
#line 10 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	((ClutterActorClass *) klass)->key_focus_out = (void (*) (ClutterActor*)) gala_window_switcher_real_key_focus_out;
#line 10 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	((ClutterActorClass *) klass)->key_release_event = (gboolean (*) (ClutterActor*, ClutterEvent*)) gala_window_switcher_real_key_release_event;
#line 10 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	((ClutterActorClass *) klass)->key_press_event = (gboolean (*) (ClutterActor*, ClutterEvent*)) gala_window_switcher_real_key_press_event;
#line 10 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	G_OBJECT_CLASS (klass)->get_property = _vala_gala_window_switcher_get_property;
#line 10 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	G_OBJECT_CLASS (klass)->set_property = _vala_gala_window_switcher_set_property;
#line 10 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	G_OBJECT_CLASS (klass)->constructor = gala_window_switcher_constructor;
#line 10 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	G_OBJECT_CLASS (klass)->finalize = gala_window_switcher_finalize;
#line 10 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	g_object_class_install_property (G_OBJECT_CLASS (klass), GALA_WINDOW_SWITCHER_WM_PROPERTY, gala_window_switcher_properties[GALA_WINDOW_SWITCHER_WM_PROPERTY] = g_param_spec_object ("wm", "wm", "wm", GALA_TYPE_WINDOW_MANAGER, G_PARAM_STATIC_STRINGS | G_PARAM_READABLE | G_PARAM_WRITABLE | G_PARAM_CONSTRUCT_ONLY));
#line 10 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	g_object_class_install_property (G_OBJECT_CLASS (klass), GALA_WINDOW_SWITCHER_GESTURE_TRACKER_PROPERTY, gala_window_switcher_properties[GALA_WINDOW_SWITCHER_GESTURE_TRACKER_PROPERTY] = g_param_spec_object ("gesture-tracker", "gesture-tracker", "gesture-tracker", GALA_TYPE_GESTURE_TRACKER, G_PARAM_STATIC_STRINGS | G_PARAM_READABLE | G_PARAM_WRITABLE | G_PARAM_CONSTRUCT_ONLY));
#line 10 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	g_object_class_install_property (G_OBJECT_CLASS (klass), GALA_WINDOW_SWITCHER_OPENED_PROPERTY, gala_window_switcher_properties[GALA_WINDOW_SWITCHER_OPENED_PROPERTY] = g_param_spec_boolean ("opened", "opened", "opened", FALSE, G_PARAM_STATIC_STRINGS | G_PARAM_READABLE));
#line 2654 "WindowSwitcher.c"
}

static void
gala_window_switcher_instance_init (GalaWindowSwitcher * self,
                                    gpointer klass)
{
#line 10 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	self->priv = gala_window_switcher_get_instance_private (self);
#line 22 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	self->priv->_opened = FALSE;
#line 24 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	self->priv->handling_gesture = FALSE;
#line 26 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	self->priv->modal_proxy = NULL;
#line 32 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	self->priv->_current_icon = NULL;
#line 51 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	self->priv->scaling_factor = 1.0f;
#line 2673 "WindowSwitcher.c"
}

static void
gala_window_switcher_finalize (GObject * obj)
{
	GalaWindowSwitcher * self;
#line 10 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	self = G_TYPE_CHECK_INSTANCE_CAST (obj, GALA_TYPE_WINDOW_SWITCHER, GalaWindowSwitcher);
#line 20 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	_g_object_unref0 (self->priv->_wm);
#line 21 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	_g_object_unref0 (self->priv->_gesture_tracker);
#line 26 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	_g_object_unref0 (self->priv->modal_proxy);
#line 27 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	_g_object_unref0 (self->priv->style_manager);
#line 28 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	_g_object_unref0 (self->priv->container);
#line 29 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	_g_object_unref0 (self->priv->caption);
#line 30 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	_g_object_unref0 (self->priv->shadow_effect);
#line 32 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	_g_object_unref0 (self->priv->_current_icon);
#line 10 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	G_OBJECT_CLASS (gala_window_switcher_parent_class)->finalize (obj);
#line 2700 "WindowSwitcher.c"
}

 G_GNUC_NO_INLINE static GType
gala_window_switcher_get_type_once (void)
{
	static const GTypeInfo g_define_type_info = { sizeof (GalaWindowSwitcherClass), (GBaseInitFunc) NULL, (GBaseFinalizeFunc) NULL, (GClassInitFunc) gala_window_switcher_class_init, (GClassFinalizeFunc) NULL, NULL, sizeof (GalaWindowSwitcher), 0, (GInstanceInitFunc) gala_window_switcher_instance_init, NULL };
	GType gala_window_switcher_type_id;
	gala_window_switcher_type_id = g_type_register_static (GALA_TYPE_CANVAS_ACTOR, "GalaWindowSwitcher", &g_define_type_info, 0);
	GalaWindowSwitcher_private_offset = g_type_add_instance_private (gala_window_switcher_type_id, sizeof (GalaWindowSwitcherPrivate));
	return gala_window_switcher_type_id;
}

GType
gala_window_switcher_get_type (void)
{
	static gsize gala_window_switcher_type_id__once = 0;
	if (g_once_init_enter (&gala_window_switcher_type_id__once)) {
		GType gala_window_switcher_type_id;
		gala_window_switcher_type_id = gala_window_switcher_get_type_once ();
		g_once_init_leave (&gala_window_switcher_type_id__once, gala_window_switcher_type_id);
	}
	return gala_window_switcher_type_id__once;
}

static void
_vala_gala_window_switcher_get_property (GObject * object,
                                         guint property_id,
                                         GValue * value,
                                         GParamSpec * pspec)
{
	GalaWindowSwitcher * self;
	self = G_TYPE_CHECK_INSTANCE_CAST (object, GALA_TYPE_WINDOW_SWITCHER, GalaWindowSwitcher);
#line 10 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	switch (property_id) {
#line 10 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
		case GALA_WINDOW_SWITCHER_WM_PROPERTY:
#line 10 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
		g_value_set_object (value, gala_window_switcher_get_wm (self));
#line 10 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
		break;
#line 10 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
		case GALA_WINDOW_SWITCHER_GESTURE_TRACKER_PROPERTY:
#line 10 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
		g_value_set_object (value, gala_window_switcher_get_gesture_tracker (self));
#line 10 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
		break;
#line 10 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
		case GALA_WINDOW_SWITCHER_OPENED_PROPERTY:
#line 10 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
		g_value_set_boolean (value, gala_window_switcher_get_opened (self));
#line 10 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
		break;
#line 2753 "WindowSwitcher.c"
		default:
#line 10 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
		G_OBJECT_WARN_INVALID_PROPERTY_ID (object, property_id, pspec);
#line 10 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
		break;
#line 2759 "WindowSwitcher.c"
	}
}

static void
_vala_gala_window_switcher_set_property (GObject * object,
                                         guint property_id,
                                         const GValue * value,
                                         GParamSpec * pspec)
{
	GalaWindowSwitcher * self;
	self = G_TYPE_CHECK_INSTANCE_CAST (object, GALA_TYPE_WINDOW_SWITCHER, GalaWindowSwitcher);
#line 10 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
	switch (property_id) {
#line 10 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
		case GALA_WINDOW_SWITCHER_WM_PROPERTY:
#line 10 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
		gala_window_switcher_set_wm (self, g_value_get_object (value));
#line 10 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
		break;
#line 10 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
		case GALA_WINDOW_SWITCHER_GESTURE_TRACKER_PROPERTY:
#line 10 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
		gala_window_switcher_set_gesture_tracker (self, g_value_get_object (value));
#line 10 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
		break;
#line 10 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
		case GALA_WINDOW_SWITCHER_OPENED_PROPERTY:
#line 10 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
		gala_window_switcher_set_opened (self, g_value_get_boolean (value));
#line 10 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
		break;
#line 2791 "WindowSwitcher.c"
		default:
#line 10 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
		G_OBJECT_WARN_INVALID_PROPERTY_ID (object, property_id, pspec);
#line 10 "../src/Widgets/WindowSwitcher/WindowSwitcher.vala"
		break;
#line 2797 "WindowSwitcher.c"
	}
}

