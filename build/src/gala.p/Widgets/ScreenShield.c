/* ScreenShield.c generated by valac 0.56.17, the Vala compiler
 * generated from ScreenShield.vala, do not modify */

/**/
/*  Copyright 2020 elementary, Inc. (https://elementary.io)*/
/**/
/*  This program is free software: you can redistribute it and/or modify*/
/*  it under the terms of the GNU General Public License as published by*/
/*  the Free Software Foundation, either version 3 of the License, or*/
/*  (at your option) any later version.*/
/**/
/*  This program is distributed in the hope that it will be useful,*/
/*  but WITHOUT ANY WARRANTY; without even the implied warranty of*/
/*  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the*/
/*  GNU General Public License for more details.*/
/**/
/*  You should have received a copy of the GNU General Public License*/
/*  along with this program.  If not, see <http://www.gnu.org/licenses/>.*/
/**/

#include <glib-object.h>
#include <gio/gio.h>
#include <stdlib.h>
#include <string.h>
#include <glib.h>
#include <gio/gunixinputstream.h>
#include <gio/gunixfdlist.h>
#include <clutter/clutter.h>
#include "gala.h"
#include <meta/meta-plugin.h>
#include <meta/display.h>
#include <float.h>
#include <math.h>
#include <meta/meta-cursor-tracker.h>

#define GALA_SCREEN_SHIELD_LONG_ANIMATION_TIME ((guint) 3000)
#define GALA_SCREEN_SHIELD_SHORT_ANIMATION_TIME ((guint) 300)
#define GALA_SCREEN_SHIELD_LOCK_ENABLED_KEY "lock-enabled"
#define GALA_SCREEN_SHIELD_LOCK_PROHIBITED_KEY "disable-lock-screen"
#define GALA_SCREEN_SHIELD_LOCK_ON_SUSPEND_KEY "lock-on-suspend"
#if !defined(VALA_STRICT_C)
#if !defined(__clang__) && defined(__GNUC__) && (__GNUC__ >= 14)
#pragma GCC diagnostic warning "-Wincompatible-pointer-types"
#elif defined(__clang__) && (__clang_major__ >= 16)
#pragma clang diagnostic ignored "-Wincompatible-function-pointer-types"
#pragma clang diagnostic ignored "-Wincompatible-pointer-types"
#endif
#endif
#if !defined(VALA_EXTERN)
#if defined(_MSC_VER)
#define VALA_EXTERN __declspec(dllexport) extern
#elif __GNUC__ >= 4
#define VALA_EXTERN __attribute__((visibility("default"))) extern
#else
#define VALA_EXTERN extern
#endif
#endif

#define GALA_TYPE_LOGIN_MANAGER (gala_login_manager_get_type ())
#define GALA_LOGIN_MANAGER(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), GALA_TYPE_LOGIN_MANAGER, GalaLoginManager))
#define GALA_IS_LOGIN_MANAGER(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), GALA_TYPE_LOGIN_MANAGER))
#define GALA_LOGIN_MANAGER_GET_INTERFACE(obj) (G_TYPE_INSTANCE_GET_INTERFACE ((obj), GALA_TYPE_LOGIN_MANAGER, GalaLoginManagerIface))

typedef struct _GalaLoginManager GalaLoginManager;
typedef struct _GalaLoginManagerIface GalaLoginManagerIface;

#define GALA_TYPE_LOGIN_MANAGER_PROXY (gala_login_manager_proxy_get_type ())
enum  {
	GALA_LOGIN_MANAGER_PREPARE_FOR_SLEEP_SIGNAL,
	GALA_LOGIN_MANAGER_NUM_SIGNALS
};
static guint gala_login_manager_signals[GALA_LOGIN_MANAGER_NUM_SIGNALS] = {0};
typedef GDBusProxy GalaLoginManagerProxy;
typedef GDBusProxyClass GalaLoginManagerProxyClass;
#define _g_free0(var) (var = (g_free (var), NULL))
#define _g_object_unref0(var) ((var == NULL) ? NULL : (var = (g_object_unref (var), NULL)))

#define GALA_TYPE_LOGIN_SESSION_MANAGER (gala_login_session_manager_get_type ())
#define GALA_LOGIN_SESSION_MANAGER(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), GALA_TYPE_LOGIN_SESSION_MANAGER, GalaLoginSessionManager))
#define GALA_IS_LOGIN_SESSION_MANAGER(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), GALA_TYPE_LOGIN_SESSION_MANAGER))
#define GALA_LOGIN_SESSION_MANAGER_GET_INTERFACE(obj) (G_TYPE_INSTANCE_GET_INTERFACE ((obj), GALA_TYPE_LOGIN_SESSION_MANAGER, GalaLoginSessionManagerIface))

typedef struct _GalaLoginSessionManager GalaLoginSessionManager;
typedef struct _GalaLoginSessionManagerIface GalaLoginSessionManagerIface;

#define GALA_TYPE_LOGIN_SESSION_MANAGER_PROXY (gala_login_session_manager_proxy_get_type ())
enum  {
	GALA_LOGIN_SESSION_MANAGER_LOCK_SIGNAL,
	GALA_LOGIN_SESSION_MANAGER_UNLOCK_SIGNAL,
	GALA_LOGIN_SESSION_MANAGER_NUM_SIGNALS
};
static guint gala_login_session_manager_signals[GALA_LOGIN_SESSION_MANAGER_NUM_SIGNALS] = {0};
typedef GDBusProxy GalaLoginSessionManagerProxy;
typedef GDBusProxyClass GalaLoginSessionManagerProxyClass;

#define GALA_TYPE_LOGIN_DISPLAY (gala_login_display_get_type ())
typedef struct _GalaLoginDisplay GalaLoginDisplay;

#define GALA_TYPE_LOGIN_USER_MANAGER (gala_login_user_manager_get_type ())
#define GALA_LOGIN_USER_MANAGER(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), GALA_TYPE_LOGIN_USER_MANAGER, GalaLoginUserManager))
#define GALA_IS_LOGIN_USER_MANAGER(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), GALA_TYPE_LOGIN_USER_MANAGER))
#define GALA_LOGIN_USER_MANAGER_GET_INTERFACE(obj) (G_TYPE_INSTANCE_GET_INTERFACE ((obj), GALA_TYPE_LOGIN_USER_MANAGER, GalaLoginUserManagerIface))

typedef struct _GalaLoginUserManager GalaLoginUserManager;
typedef struct _GalaLoginUserManagerIface GalaLoginUserManagerIface;

#define GALA_TYPE_LOGIN_USER_MANAGER_PROXY (gala_login_user_manager_proxy_get_type ())
typedef GDBusProxy GalaLoginUserManagerProxy;
typedef GDBusProxyClass GalaLoginUserManagerProxyClass;
#define _gala_login_display_free0(var) ((var == NULL) ? NULL : (var = (gala_login_display_free (var), NULL)))
typedef enum  {
	GALA_PRESENCE_STATUS_AVAILABLE = 0,
	GALA_PRESENCE_STATUS_INVISIBLE = 1,
	GALA_PRESENCE_STATUS_BUSY = 2,
	GALA_PRESENCE_STATUS_IDLE = 3
} GalaPresenceStatus;

#define GALA_TYPE_PRESENCE_STATUS (gala_presence_status_get_type ())

#define GALA_TYPE_SESSION_PRESENCE (gala_session_presence_get_type ())
#define GALA_SESSION_PRESENCE(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), GALA_TYPE_SESSION_PRESENCE, GalaSessionPresence))
#define GALA_IS_SESSION_PRESENCE(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), GALA_TYPE_SESSION_PRESENCE))
#define GALA_SESSION_PRESENCE_GET_INTERFACE(obj) (G_TYPE_INSTANCE_GET_INTERFACE ((obj), GALA_TYPE_SESSION_PRESENCE, GalaSessionPresenceIface))

typedef struct _GalaSessionPresence GalaSessionPresence;
typedef struct _GalaSessionPresenceIface GalaSessionPresenceIface;

#define GALA_TYPE_SESSION_PRESENCE_PROXY (gala_session_presence_proxy_get_type ())
enum  {
	GALA_SESSION_PRESENCE_STATUS_CHANGED_SIGNAL,
	GALA_SESSION_PRESENCE_NUM_SIGNALS
};
static guint gala_session_presence_signals[GALA_SESSION_PRESENCE_NUM_SIGNALS] = {0};
typedef GDBusProxy GalaSessionPresenceProxy;
typedef GDBusProxyClass GalaSessionPresenceProxyClass;

#define GALA_TYPE_DISPLAY_MANAGER_SEAT (gala_display_manager_seat_get_type ())
#define GALA_DISPLAY_MANAGER_SEAT(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), GALA_TYPE_DISPLAY_MANAGER_SEAT, GalaDisplayManagerSeat))
#define GALA_IS_DISPLAY_MANAGER_SEAT(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), GALA_TYPE_DISPLAY_MANAGER_SEAT))
#define GALA_DISPLAY_MANAGER_SEAT_GET_INTERFACE(obj) (G_TYPE_INSTANCE_GET_INTERFACE ((obj), GALA_TYPE_DISPLAY_MANAGER_SEAT, GalaDisplayManagerSeatIface))

typedef struct _GalaDisplayManagerSeat GalaDisplayManagerSeat;
typedef struct _GalaDisplayManagerSeatIface GalaDisplayManagerSeatIface;

#define GALA_TYPE_DISPLAY_MANAGER_SEAT_PROXY (gala_display_manager_seat_proxy_get_type ())
typedef GDBusProxy GalaDisplayManagerSeatProxy;
typedef GDBusProxyClass GalaDisplayManagerSeatProxyClass;

#define GALA_TYPE_SCREEN_SHIELD (gala_screen_shield_get_type ())
#define GALA_SCREEN_SHIELD(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), GALA_TYPE_SCREEN_SHIELD, GalaScreenShield))
#define GALA_SCREEN_SHIELD_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), GALA_TYPE_SCREEN_SHIELD, GalaScreenShieldClass))
#define GALA_IS_SCREEN_SHIELD(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), GALA_TYPE_SCREEN_SHIELD))
#define GALA_IS_SCREEN_SHIELD_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), GALA_TYPE_SCREEN_SHIELD))
#define GALA_SCREEN_SHIELD_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), GALA_TYPE_SCREEN_SHIELD, GalaScreenShieldClass))

typedef struct _GalaScreenShield GalaScreenShield;
typedef struct _GalaScreenShieldClass GalaScreenShieldClass;
typedef struct _GalaScreenShieldPrivate GalaScreenShieldPrivate;
enum  {
	GALA_SCREEN_SHIELD_0_PROPERTY,
	GALA_SCREEN_SHIELD_ACTIVE_PROPERTY,
	GALA_SCREEN_SHIELD_IS_LOCKED_PROPERTY,
	GALA_SCREEN_SHIELD_IN_GREETER_PROPERTY,
	GALA_SCREEN_SHIELD_ACTIVATION_TIME_PROPERTY,
	GALA_SCREEN_SHIELD_WM_PROPERTY,
	GALA_SCREEN_SHIELD_NUM_PROPERTIES
};
static GParamSpec* gala_screen_shield_properties[GALA_SCREEN_SHIELD_NUM_PROPERTIES];
#define _g_error_free0(var) ((var == NULL) ? NULL : (var = (g_error_free (var), NULL)))
typedef struct _GalaScreenShieldInitDbusInterfacesData GalaScreenShieldInitDbusInterfacesData;
#define __vala_ClutterColor_free0(var) ((var == NULL) ? NULL : (var = (_vala_ClutterColor_free (var), NULL)))
enum  {
	GALA_SCREEN_SHIELD_ACTIVE_CHANGED_SIGNAL,
	GALA_SCREEN_SHIELD_NUM_SIGNALS
};
static guint gala_screen_shield_signals[GALA_SCREEN_SHIELD_NUM_SIGNALS] = {0};

struct _GalaLoginManagerIface {
	GTypeInterface parent_iface;
	char* (*get_session) (GalaLoginManager* self, const gchar* session_id, GError** error);
	GUnixInputStream* (*inhibit) (GalaLoginManager* self, const gchar* what, const gchar* who, const gchar* why, const gchar* mode, GError** error);
};

struct _GalaLoginSessionManagerIface {
	GTypeInterface parent_iface;
	void (*set_locked_hint) (GalaLoginSessionManager* self, gboolean locked, GError** error);
	gboolean (*get_active) (GalaLoginSessionManager* self);
};

struct _GalaLoginDisplay {
	gchar* session;
	char* objectpath;
};

struct _GalaLoginUserManagerIface {
	GTypeInterface parent_iface;
	GalaLoginDisplay* (*get_display) (GalaLoginUserManager* self);
};

struct _GalaSessionPresenceIface {
	GTypeInterface parent_iface;
	GalaPresenceStatus (*get_status) (GalaSessionPresence* self);
};

struct _GalaDisplayManagerSeatIface {
	GTypeInterface parent_iface;
	void (*switch_to_greeter) (GalaDisplayManagerSeat* self, GError** error);
};

struct _GalaScreenShield {
	ClutterActor parent_instance;
	GalaScreenShieldPrivate * priv;
};

struct _GalaScreenShieldClass {
	ClutterActorClass parent_class;
};

struct _GalaScreenShieldPrivate {
	gboolean _active;
	gboolean _is_locked;
	gboolean _in_greeter;
	gint64 _activation_time;
	GalaWindowManager* _wm;
	GalaModalProxy* modal_proxy;
	GalaLoginManager* login_manager;
	GalaLoginUserManager* login_user_manager;
	GalaLoginSessionManager* login_session;
	GalaSessionPresence* session_presence;
	GalaDisplayManagerSeat* display_manager;
	guint animate_id;
	GUnixInputStream* inhibitor;
	GSettings* screensaver_settings;
	GSettings* lockdown_settings;
	GSettings* gala_settings;
	gboolean connected_to_buses;
};

struct _GalaScreenShieldInitDbusInterfacesData {
	int _state_;
	GObject* _source_object_;
	GAsyncResult* _res_;
	GTask* _async_result;
	GalaScreenShield* self;
	gboolean success;
	GalaLoginManager* _tmp0_;
	GalaLoginManager* _tmp1_;
	GalaLoginManager* _tmp2_;
	GalaLoginUserManager* _tmp3_;
	GalaLoginUserManager* _tmp4_;
	GalaLoginUserManager* _tmp5_;
	GalaLoginManager* _tmp6_;
	GalaLoginSessionManager* _tmp7_;
	GalaLoginSessionManager* _tmp8_;
	GalaLoginSessionManager* _tmp9_;
	GalaLoginSessionManager* _tmp10_;
	GalaLoginSessionManager* _tmp11_;
	GalaLoginSessionManager* _tmp12_;
	GalaLoginSessionManager* _tmp13_;
	GError* e;
	GError* _tmp14_;
	const gchar* _tmp15_;
	GalaSessionPresence* _tmp16_;
	GalaSessionPresence* _tmp17_;
	GalaSessionPresence* _tmp18_;
	GalaSessionPresence* _tmp19_;
	GalaPresenceStatus _tmp20_;
	GalaPresenceStatus _tmp21_;
	GalaSessionPresence* _tmp22_;
	GError* _vala1_e;
	GError* _tmp23_;
	const gchar* _tmp24_;
	gchar* seat_path;
	const gchar* _tmp25_;
	gchar* _tmp26_;
	const gchar* _tmp27_;
	GalaDisplayManagerSeat* _tmp28_;
	const gchar* _tmp29_;
	GalaDisplayManagerSeat* _tmp30_;
	GalaDisplayManagerSeat* _tmp31_;
	GError* _inner_error0_;
};

static gint GalaScreenShield_private_offset;
static gpointer gala_screen_shield_parent_class = NULL;

VALA_EXTERN GType gala_login_manager_proxy_get_type (void) G_GNUC_CONST ;
 G_GNUC_INTERNAL guint gala_login_manager_register_object (void* object,
                                          GDBusConnection* connection,
                                          const gchar* path,
                                          GError** error);
 G_GNUC_INTERNAL GType gala_login_manager_get_type (void) G_GNUC_CONST  G_GNUC_UNUSED ;
G_DEFINE_AUTOPTR_CLEANUP_FUNC (GalaLoginManager, g_object_unref)
 G_GNUC_INTERNAL char* gala_login_manager_get_session (GalaLoginManager* self,
                                      const gchar* session_id,
                                      GError** error);
 G_GNUC_INTERNAL GUnixInputStream* gala_login_manager_inhibit (GalaLoginManager* self,
                                              const gchar* what,
                                              const gchar* who,
                                              const gchar* why,
                                              const gchar* mode,
                                              GError** error);
static GType gala_login_manager_get_type_once (void);
static void gala_login_manager_proxy_g_signal (GDBusProxy* proxy,
                                        const gchar* sender_name,
                                        const gchar* signal_name,
                                        GVariant* parameters);
static void _dbus_handle_gala_login_manager_prepare_for_sleep (GalaLoginManager* self,
                                                        GVariant* parameters);
static char* gala_login_manager_proxy_get_session (GalaLoginManager* self,
                                            const gchar* session_id,
                                            GError** error);
static GUnixInputStream* gala_login_manager_proxy_inhibit (GalaLoginManager* self,
                                                    const gchar* what,
                                                    const gchar* who,
                                                    const gchar* why,
                                                    const gchar* mode,
                                                    GError** error);
static void gala_login_manager_proxy_gala_login_manager_interface_init (GalaLoginManagerIface* iface);
static void _dbus_gala_login_manager_get_session (GalaLoginManager* self,
                                           GVariant* _parameters_,
                                           GDBusMethodInvocation* invocation);
static void _dbus_gala_login_manager_inhibit (GalaLoginManager* self,
                                       GVariant* _parameters_,
                                       GDBusMethodInvocation* invocation);
static void gala_login_manager_dbus_interface_method_call (GDBusConnection* connection,
                                                    const gchar* sender,
                                                    const gchar* object_path,
                                                    const gchar* interface_name,
                                                    const gchar* method_name,
                                                    GVariant* parameters,
                                                    GDBusMethodInvocation* invocation,
                                                    gpointer user_data);
static GVariant* gala_login_manager_dbus_interface_get_property (GDBusConnection* connection,
                                                          const gchar* sender,
                                                          const gchar* object_path,
                                                          const gchar* interface_name,
                                                          const gchar* property_name,
                                                          GError** error,
                                                          gpointer user_data);
static gboolean gala_login_manager_dbus_interface_set_property (GDBusConnection* connection,
                                                         const gchar* sender,
                                                         const gchar* object_path,
                                                         const gchar* interface_name,
                                                         const gchar* property_name,
                                                         GVariant* value,
                                                         GError** error,
                                                         gpointer user_data);
static void _dbus_gala_login_manager_prepare_for_sleep (GObject* _sender,
                                                 gboolean about_to_suspend,
                                                 gpointer* _data);
static void _gala_login_manager_unregister_object (gpointer user_data);
VALA_EXTERN GType gala_login_session_manager_proxy_get_type (void) G_GNUC_CONST ;
 G_GNUC_INTERNAL guint gala_login_session_manager_register_object (void* object,
                                                  GDBusConnection* connection,
                                                  const gchar* path,
                                                  GError** error);
 G_GNUC_INTERNAL GType gala_login_session_manager_get_type (void) G_GNUC_CONST  G_GNUC_UNUSED ;
G_DEFINE_AUTOPTR_CLEANUP_FUNC (GalaLoginSessionManager, g_object_unref)
 G_GNUC_INTERNAL void gala_login_session_manager_set_locked_hint (GalaLoginSessionManager* self,
                                                 gboolean locked,
                                                 GError** error);
 G_GNUC_INTERNAL gboolean gala_login_session_manager_get_active (GalaLoginSessionManager* self);
static GType gala_login_session_manager_get_type_once (void);
static void gala_login_session_manager_proxy_g_signal (GDBusProxy* proxy,
                                                const gchar* sender_name,
                                                const gchar* signal_name,
                                                GVariant* parameters);
static void _dbus_handle_gala_login_session_manager_lock (GalaLoginSessionManager* self,
                                                   GVariant* parameters);
static void _dbus_handle_gala_login_session_manager_unlock (GalaLoginSessionManager* self,
                                                     GVariant* parameters);
static void gala_login_session_manager_proxy_set_locked_hint (GalaLoginSessionManager* self,
                                                       gboolean locked,
                                                       GError** error);
static gboolean gala_login_session_manager_dbus_proxy_get_active (GalaLoginSessionManager* self);
static void gala_login_session_manager_proxy_gala_login_session_manager_interface_init (GalaLoginSessionManagerIface* iface);
static void _dbus_gala_login_session_manager_set_locked_hint (GalaLoginSessionManager* self,
                                                       GVariant* _parameters_,
                                                       GDBusMethodInvocation* invocation);
static void gala_login_session_manager_dbus_interface_method_call (GDBusConnection* connection,
                                                            const gchar* sender,
                                                            const gchar* object_path,
                                                            const gchar* interface_name,
                                                            const gchar* method_name,
                                                            GVariant* parameters,
                                                            GDBusMethodInvocation* invocation,
                                                            gpointer user_data);
static GVariant* gala_login_session_manager_dbus_interface_get_property (GDBusConnection* connection,
                                                                  const gchar* sender,
                                                                  const gchar* object_path,
                                                                  const gchar* interface_name,
                                                                  const gchar* property_name,
                                                                  GError** error,
                                                                  gpointer user_data);
static GVariant* _dbus_gala_login_session_manager_get_active (GalaLoginSessionManager* self);
static gboolean gala_login_session_manager_dbus_interface_set_property (GDBusConnection* connection,
                                                                 const gchar* sender,
                                                                 const gchar* object_path,
                                                                 const gchar* interface_name,
                                                                 const gchar* property_name,
                                                                 GVariant* value,
                                                                 GError** error,
                                                                 gpointer user_data);
static void _dbus_gala_login_session_manager_lock (GObject* _sender,
                                            gpointer* _data);
static void _dbus_gala_login_session_manager_unlock (GObject* _sender,
                                              gpointer* _data);
static void _gala_login_session_manager_unregister_object (gpointer user_data);
VALA_EXTERN GType gala_login_display_get_type (void) G_GNUC_CONST ;
VALA_EXTERN GalaLoginDisplay* gala_login_display_dup (const GalaLoginDisplay* self);
VALA_EXTERN void gala_login_display_free (GalaLoginDisplay* self);
VALA_EXTERN void gala_login_display_copy (const GalaLoginDisplay* self,
                              GalaLoginDisplay* dest);
VALA_EXTERN void gala_login_display_destroy (GalaLoginDisplay* self);
G_DEFINE_AUTO_CLEANUP_CLEAR_FUNC (GalaLoginDisplay, gala_login_display_destroy)
 G_GNUC_INTERNAL GType gala_login_user_manager_get_type (void) G_GNUC_CONST  G_GNUC_UNUSED ;
G_DEFINE_AUTOPTR_CLEANUP_FUNC (GalaLoginUserManager, g_object_unref)
VALA_EXTERN GType gala_login_user_manager_proxy_get_type (void) G_GNUC_CONST ;
 G_GNUC_INTERNAL guint gala_login_user_manager_register_object (void* object,
                                               GDBusConnection* connection,
                                               const gchar* path,
                                               GError** error);
 G_GNUC_INTERNAL GalaLoginDisplay* gala_login_user_manager_get_display (GalaLoginUserManager* self);
static GType gala_login_user_manager_get_type_once (void);
static void gala_login_user_manager_proxy_g_signal (GDBusProxy* proxy,
                                             const gchar* sender_name,
                                             const gchar* signal_name,
                                             GVariant* parameters);
static GalaLoginDisplay* gala_login_user_manager_dbus_proxy_get_display (GalaLoginUserManager* self);
static void gala_login_user_manager_proxy_gala_login_user_manager_interface_init (GalaLoginUserManagerIface* iface);
static void gala_login_user_manager_dbus_interface_method_call (GDBusConnection* connection,
                                                         const gchar* sender,
                                                         const gchar* object_path,
                                                         const gchar* interface_name,
                                                         const gchar* method_name,
                                                         GVariant* parameters,
                                                         GDBusMethodInvocation* invocation,
                                                         gpointer user_data);
static GVariant* gala_login_user_manager_dbus_interface_get_property (GDBusConnection* connection,
                                                               const gchar* sender,
                                                               const gchar* object_path,
                                                               const gchar* interface_name,
                                                               const gchar* property_name,
                                                               GError** error,
                                                               gpointer user_data);
static GVariant* _dbus_gala_login_user_manager_get_display (GalaLoginUserManager* self);
static gboolean gala_login_user_manager_dbus_interface_set_property (GDBusConnection* connection,
                                                              const gchar* sender,
                                                              const gchar* object_path,
                                                              const gchar* interface_name,
                                                              const gchar* property_name,
                                                              GVariant* value,
                                                              GError** error,
                                                              gpointer user_data);
static void _gala_login_user_manager_unregister_object (gpointer user_data);
 G_GNUC_INTERNAL GType gala_presence_status_get_type (void) G_GNUC_CONST ;
 G_GNUC_INTERNAL GType gala_session_presence_get_type (void) G_GNUC_CONST  G_GNUC_UNUSED ;
G_DEFINE_AUTOPTR_CLEANUP_FUNC (GalaSessionPresence, g_object_unref)
VALA_EXTERN GType gala_session_presence_proxy_get_type (void) G_GNUC_CONST ;
 G_GNUC_INTERNAL guint gala_session_presence_register_object (void* object,
                                             GDBusConnection* connection,
                                             const gchar* path,
                                             GError** error);
 G_GNUC_INTERNAL GalaPresenceStatus gala_session_presence_get_status (GalaSessionPresence* self);
static GType gala_session_presence_get_type_once (void);
static void gala_session_presence_proxy_g_signal (GDBusProxy* proxy,
                                           const gchar* sender_name,
                                           const gchar* signal_name,
                                           GVariant* parameters);
static void _dbus_handle_gala_session_presence_status_changed (GalaSessionPresence* self,
                                                        GVariant* parameters);
static GalaPresenceStatus gala_session_presence_dbus_proxy_get_status (GalaSessionPresence* self);
static void gala_session_presence_proxy_gala_session_presence_interface_init (GalaSessionPresenceIface* iface);
static void gala_session_presence_dbus_interface_method_call (GDBusConnection* connection,
                                                       const gchar* sender,
                                                       const gchar* object_path,
                                                       const gchar* interface_name,
                                                       const gchar* method_name,
                                                       GVariant* parameters,
                                                       GDBusMethodInvocation* invocation,
                                                       gpointer user_data);
static GVariant* gala_session_presence_dbus_interface_get_property (GDBusConnection* connection,
                                                             const gchar* sender,
                                                             const gchar* object_path,
                                                             const gchar* interface_name,
                                                             const gchar* property_name,
                                                             GError** error,
                                                             gpointer user_data);
static GVariant* _dbus_gala_session_presence_get_status (GalaSessionPresence* self);
static gboolean gala_session_presence_dbus_interface_set_property (GDBusConnection* connection,
                                                            const gchar* sender,
                                                            const gchar* object_path,
                                                            const gchar* interface_name,
                                                            const gchar* property_name,
                                                            GVariant* value,
                                                            GError** error,
                                                            gpointer user_data);
static void _dbus_gala_session_presence_status_changed (GObject* _sender,
                                                 GalaPresenceStatus new_status,
                                                 gpointer* _data);
static void _gala_session_presence_unregister_object (gpointer user_data);
VALA_EXTERN GType gala_display_manager_seat_proxy_get_type (void) G_GNUC_CONST ;
 G_GNUC_INTERNAL guint gala_display_manager_seat_register_object (void* object,
                                                 GDBusConnection* connection,
                                                 const gchar* path,
                                                 GError** error);
 G_GNUC_INTERNAL GType gala_display_manager_seat_get_type (void) G_GNUC_CONST  G_GNUC_UNUSED ;
G_DEFINE_AUTOPTR_CLEANUP_FUNC (GalaDisplayManagerSeat, g_object_unref)
 G_GNUC_INTERNAL void gala_display_manager_seat_switch_to_greeter (GalaDisplayManagerSeat* self,
                                                  GError** error);
static GType gala_display_manager_seat_get_type_once (void);
static void gala_display_manager_seat_proxy_g_signal (GDBusProxy* proxy,
                                               const gchar* sender_name,
                                               const gchar* signal_name,
                                               GVariant* parameters);
static void gala_display_manager_seat_proxy_switch_to_greeter (GalaDisplayManagerSeat* self,
                                                        GError** error);
static void gala_display_manager_seat_proxy_gala_display_manager_seat_interface_init (GalaDisplayManagerSeatIface* iface);
static void _dbus_gala_display_manager_seat_switch_to_greeter (GalaDisplayManagerSeat* self,
                                                        GVariant* _parameters_,
                                                        GDBusMethodInvocation* invocation);
static void gala_display_manager_seat_dbus_interface_method_call (GDBusConnection* connection,
                                                           const gchar* sender,
                                                           const gchar* object_path,
                                                           const gchar* interface_name,
                                                           const gchar* method_name,
                                                           GVariant* parameters,
                                                           GDBusMethodInvocation* invocation,
                                                           gpointer user_data);
static GVariant* gala_display_manager_seat_dbus_interface_get_property (GDBusConnection* connection,
                                                                 const gchar* sender,
                                                                 const gchar* object_path,
                                                                 const gchar* interface_name,
                                                                 const gchar* property_name,
                                                                 GError** error,
                                                                 gpointer user_data);
static gboolean gala_display_manager_seat_dbus_interface_set_property (GDBusConnection* connection,
                                                                const gchar* sender,
                                                                const gchar* object_path,
                                                                const gchar* interface_name,
                                                                const gchar* property_name,
                                                                GVariant* value,
                                                                GError** error,
                                                                gpointer user_data);
static void _gala_display_manager_seat_unregister_object (gpointer user_data);
VALA_EXTERN GType gala_screen_shield_get_type (void) G_GNUC_CONST ;
G_DEFINE_AUTOPTR_CLEANUP_FUNC (GalaScreenShield, g_object_unref)
VALA_EXTERN GalaScreenShield* gala_screen_shield_new (GalaWindowManager* wm);
VALA_EXTERN GalaScreenShield* gala_screen_shield_construct (GType object_type,
                                                GalaWindowManager* wm);
static void gala_screen_shield_init_dbus_interfaces_data_free (gpointer _data);
static void gala_screen_shield_init_dbus_interfaces (GalaScreenShield* self,
                                              GAsyncReadyCallback _callback_,
                                              gpointer _user_data_);
static void gala_screen_shield_init_dbus_interfaces_finish (GalaScreenShield* self,
                                                     GAsyncResult* _res_);
static gboolean gala_screen_shield_init_dbus_interfaces_co (GalaScreenShieldInitDbusInterfacesData* _data_);
static void gala_screen_shield_init_dbus_interfaces_ready (GObject* source_object,
                                                    GAsyncResult* _res_,
                                                    gpointer _user_data_);
static void gala_screen_shield_prepare_for_sleep (GalaScreenShield* self,
                                           gboolean about_to_suspend);
static void _gala_screen_shield_prepare_for_sleep_gala_login_manager_prepare_for_sleep (GalaLoginManager* _sender,
                                                                                 gboolean about_to_suspend,
                                                                                 gpointer self);
static GalaLoginSessionManager* gala_screen_shield_get_current_session_manager (GalaScreenShield* self,
                                                                         GError** error);
static void ____lambda5_ (GalaScreenShield* self);
VALA_EXTERN void gala_screen_shield_lock (GalaScreenShield* self,
                              gboolean animate);
static void _____lambda5__gala_login_session_manager_lock (GalaLoginSessionManager* _sender,
                                                    gpointer self);
static void ____lambda6_ (GalaScreenShield* self);
VALA_EXTERN void gala_screen_shield_deactivate (GalaScreenShield* self,
                                    gboolean animate);
static void gala_screen_shield_set_in_greeter (GalaScreenShield* self,
                                        gboolean value);
static void _____lambda6__gala_login_session_manager_unlock (GalaLoginSessionManager* _sender,
                                                      gpointer self);
static void gala_screen_shield_sync_inhibitor (GalaScreenShield* self);
static void _gala_screen_shield_sync_inhibitor_g_dbus_proxy_g_properties_changed (GDBusProxy* _sender,
                                                                           GVariant* changed_properties,
                                                                           gchar** invalidated_properties,
                                                                           gpointer self);
static void gala_screen_shield_on_status_changed (GalaScreenShield* self,
                                           GalaPresenceStatus status);
static void ___lambda7_ (GalaScreenShield* self,
                  GalaPresenceStatus status);
static void ____lambda7__gala_session_presence_status_changed (GalaSessionPresence* _sender,
                                                        GalaPresenceStatus new_status,
                                                        gpointer self);
VALA_EXTERN void gala_screen_shield_expand_to_screen_size (GalaScreenShield* self);
VALA_EXTERN GalaWindowManager* gala_screen_shield_get_wm (GalaScreenShield* self);
static void gala_screen_shield_on_user_became_active (GalaScreenShield* self);
VALA_EXTERN void gala_screen_shield_activate (GalaScreenShield* self,
                                  gboolean animate,
                                  guint animation_time);
VALA_EXTERN gboolean gala_screen_shield_get_active (GalaScreenShield* self);
VALA_EXTERN gboolean gala_screen_shield_get_is_locked (GalaScreenShield* self);
VALA_EXTERN gboolean gala_screen_shield_get_in_greeter (GalaScreenShield* self);
static void gala_screen_shield_cancel_animation (GalaScreenShield* self);
static void gala_screen_shield_set_is_locked (GalaScreenShield* self,
                                       gboolean value);
VALA_EXTERN gint64 gala_screen_shield_get_activation_time (GalaScreenShield* self);
static void gala_screen_shield_set_activation_time (GalaScreenShield* self,
                                             gint64 value);
static void gala_screen_shield_animate_and_lock (GalaScreenShield* self,
                                          guint animation_time);
static void _gala_screen_shield_set_active (GalaScreenShield* self,
                                     gboolean new_active);
static gboolean __lambda4_ (GalaScreenShield* self);
static gboolean ___lambda4__gsource_func (gpointer self);
static void gala_screen_shield_set_active (GalaScreenShield* self,
                                    gboolean value);
static void gala_screen_shield_set_wm (GalaScreenShield* self,
                                GalaWindowManager* value);
static GObject * gala_screen_shield_constructor (GType type,
                                          guint n_construct_properties,
                                          GObjectConstructParam * construct_properties);
static gboolean _gala_screen_shield___lambda8_ (GalaScreenShield* self,
                                         ClutterEvent* event);
static gboolean __gala_screen_shield___lambda8__clutter_actor_key_press_event (ClutterActor* _sender,
                                                                        ClutterEvent* event,
                                                                        gpointer self);
static gboolean _gala_screen_shield___lambda9_ (GalaScreenShield* self,
                                         ClutterEvent* event);
static gboolean __gala_screen_shield___lambda9__clutter_actor_motion_event (ClutterActor* _sender,
                                                                     ClutterEvent* event,
                                                                     gpointer self);
static void _vala_ClutterColor_free (ClutterColor* self);
static void gala_screen_shield_finalize (GObject * obj);
static GType gala_screen_shield_get_type_once (void);
static void _vala_gala_screen_shield_get_property (GObject * object,
                                            guint property_id,
                                            GValue * value,
                                            GParamSpec * pspec);
static void _vala_gala_screen_shield_set_property (GObject * object,
                                            guint property_id,
                                            const GValue * value,
                                            GParamSpec * pspec);

static const GDBusArgInfo _gala_login_manager_dbus_arg_info_get_session_session_id = {-1, "session_id", "s", NULL};
static const GDBusArgInfo _gala_login_manager_dbus_arg_info_get_session_result = {-1, "result", "o", NULL};
static const GDBusArgInfo * const _gala_login_manager_dbus_arg_info_get_session_in[] = {&_gala_login_manager_dbus_arg_info_get_session_session_id, NULL};
static const GDBusArgInfo * const _gala_login_manager_dbus_arg_info_get_session_out[] = {&_gala_login_manager_dbus_arg_info_get_session_result, NULL};
static const GDBusMethodInfo _gala_login_manager_dbus_method_info_get_session = {-1, "GetSession", (GDBusArgInfo **) (&_gala_login_manager_dbus_arg_info_get_session_in), (GDBusArgInfo **) (&_gala_login_manager_dbus_arg_info_get_session_out), NULL};
static const GDBusArgInfo _gala_login_manager_dbus_arg_info_inhibit_what = {-1, "what", "s", NULL};
static const GDBusArgInfo _gala_login_manager_dbus_arg_info_inhibit_who = {-1, "who", "s", NULL};
static const GDBusArgInfo _gala_login_manager_dbus_arg_info_inhibit_why = {-1, "why", "s", NULL};
static const GDBusArgInfo _gala_login_manager_dbus_arg_info_inhibit_mode = {-1, "mode", "s", NULL};
static const GDBusArgInfo _gala_login_manager_dbus_arg_info_inhibit_result = {-1, "result", "h", NULL};
static const GDBusArgInfo * const _gala_login_manager_dbus_arg_info_inhibit_in[] = {&_gala_login_manager_dbus_arg_info_inhibit_what, &_gala_login_manager_dbus_arg_info_inhibit_who, &_gala_login_manager_dbus_arg_info_inhibit_why, &_gala_login_manager_dbus_arg_info_inhibit_mode, NULL};
static const GDBusArgInfo * const _gala_login_manager_dbus_arg_info_inhibit_out[] = {&_gala_login_manager_dbus_arg_info_inhibit_result, NULL};
static const GDBusMethodInfo _gala_login_manager_dbus_method_info_inhibit = {-1, "Inhibit", (GDBusArgInfo **) (&_gala_login_manager_dbus_arg_info_inhibit_in), (GDBusArgInfo **) (&_gala_login_manager_dbus_arg_info_inhibit_out), NULL};
static const GDBusMethodInfo * const _gala_login_manager_dbus_method_info[] = {&_gala_login_manager_dbus_method_info_get_session, &_gala_login_manager_dbus_method_info_inhibit, NULL};
static const GDBusArgInfo _gala_login_manager_dbus_arg_info_prepare_for_sleep_about_to_suspend = {-1, "about_to_suspend", "b", NULL};
static const GDBusArgInfo * const _gala_login_manager_dbus_arg_info_prepare_for_sleep[] = {&_gala_login_manager_dbus_arg_info_prepare_for_sleep_about_to_suspend, NULL};
static const GDBusSignalInfo _gala_login_manager_dbus_signal_info_prepare_for_sleep = {-1, "PrepareForSleep", (GDBusArgInfo **) (&_gala_login_manager_dbus_arg_info_prepare_for_sleep), NULL};
static const GDBusSignalInfo * const _gala_login_manager_dbus_signal_info[] = {&_gala_login_manager_dbus_signal_info_prepare_for_sleep, NULL};
static const GDBusPropertyInfo * const _gala_login_manager_dbus_property_info[] = {NULL};
static const GDBusInterfaceInfo _gala_login_manager_dbus_interface_info = {-1, "org.freedesktop.login1.Manager", (GDBusMethodInfo **) (&_gala_login_manager_dbus_method_info), (GDBusSignalInfo **) (&_gala_login_manager_dbus_signal_info), (GDBusPropertyInfo **) (&_gala_login_manager_dbus_property_info), NULL};
static const GDBusInterfaceVTable _gala_login_manager_dbus_interface_vtable = {gala_login_manager_dbus_interface_method_call, gala_login_manager_dbus_interface_get_property, gala_login_manager_dbus_interface_set_property};
static const GDBusArgInfo _gala_login_session_manager_dbus_arg_info_set_locked_hint_locked = {-1, "locked", "b", NULL};
static const GDBusArgInfo * const _gala_login_session_manager_dbus_arg_info_set_locked_hint_in[] = {&_gala_login_session_manager_dbus_arg_info_set_locked_hint_locked, NULL};
static const GDBusArgInfo * const _gala_login_session_manager_dbus_arg_info_set_locked_hint_out[] = {NULL};
static const GDBusMethodInfo _gala_login_session_manager_dbus_method_info_set_locked_hint = {-1, "SetLockedHint", (GDBusArgInfo **) (&_gala_login_session_manager_dbus_arg_info_set_locked_hint_in), (GDBusArgInfo **) (&_gala_login_session_manager_dbus_arg_info_set_locked_hint_out), NULL};
static const GDBusMethodInfo * const _gala_login_session_manager_dbus_method_info[] = {&_gala_login_session_manager_dbus_method_info_set_locked_hint, NULL};
static const GDBusArgInfo * const _gala_login_session_manager_dbus_arg_info_lock[] = {NULL};
static const GDBusSignalInfo _gala_login_session_manager_dbus_signal_info_lock = {-1, "Lock", (GDBusArgInfo **) (&_gala_login_session_manager_dbus_arg_info_lock), NULL};
static const GDBusArgInfo * const _gala_login_session_manager_dbus_arg_info_unlock[] = {NULL};
static const GDBusSignalInfo _gala_login_session_manager_dbus_signal_info_unlock = {-1, "Unlock", (GDBusArgInfo **) (&_gala_login_session_manager_dbus_arg_info_unlock), NULL};
static const GDBusSignalInfo * const _gala_login_session_manager_dbus_signal_info[] = {&_gala_login_session_manager_dbus_signal_info_lock, &_gala_login_session_manager_dbus_signal_info_unlock, NULL};
static const GDBusPropertyInfo _gala_login_session_manager_dbus_property_info_active = {-1, "Active", "b", G_DBUS_PROPERTY_INFO_FLAGS_READABLE, NULL};
static const GDBusPropertyInfo * const _gala_login_session_manager_dbus_property_info[] = {&_gala_login_session_manager_dbus_property_info_active, NULL};
static const GDBusInterfaceInfo _gala_login_session_manager_dbus_interface_info = {-1, "org.freedesktop.login1.Session", (GDBusMethodInfo **) (&_gala_login_session_manager_dbus_method_info), (GDBusSignalInfo **) (&_gala_login_session_manager_dbus_signal_info), (GDBusPropertyInfo **) (&_gala_login_session_manager_dbus_property_info), NULL};
static const GDBusInterfaceVTable _gala_login_session_manager_dbus_interface_vtable = {gala_login_session_manager_dbus_interface_method_call, gala_login_session_manager_dbus_interface_get_property, gala_login_session_manager_dbus_interface_set_property};
static const GDBusMethodInfo * const _gala_login_user_manager_dbus_method_info[] = {NULL};
static const GDBusSignalInfo * const _gala_login_user_manager_dbus_signal_info[] = {NULL};
static const GDBusPropertyInfo _gala_login_user_manager_dbus_property_info_display = {-1, "Display", "(so)", G_DBUS_PROPERTY_INFO_FLAGS_READABLE, NULL};
static const GDBusPropertyInfo * const _gala_login_user_manager_dbus_property_info[] = {&_gala_login_user_manager_dbus_property_info_display, NULL};
static const GDBusInterfaceInfo _gala_login_user_manager_dbus_interface_info = {-1, "org.freedesktop.login1.User", (GDBusMethodInfo **) (&_gala_login_user_manager_dbus_method_info), (GDBusSignalInfo **) (&_gala_login_user_manager_dbus_signal_info), (GDBusPropertyInfo **) (&_gala_login_user_manager_dbus_property_info), NULL};
static const GDBusInterfaceVTable _gala_login_user_manager_dbus_interface_vtable = {gala_login_user_manager_dbus_interface_method_call, gala_login_user_manager_dbus_interface_get_property, gala_login_user_manager_dbus_interface_set_property};
static const GDBusMethodInfo * const _gala_session_presence_dbus_method_info[] = {NULL};
static const GDBusArgInfo _gala_session_presence_dbus_arg_info_status_changed_new_status = {-1, "new_status", "u", NULL};
static const GDBusArgInfo * const _gala_session_presence_dbus_arg_info_status_changed[] = {&_gala_session_presence_dbus_arg_info_status_changed_new_status, NULL};
static const GDBusSignalInfo _gala_session_presence_dbus_signal_info_status_changed = {-1, "StatusChanged", (GDBusArgInfo **) (&_gala_session_presence_dbus_arg_info_status_changed), NULL};
static const GDBusSignalInfo * const _gala_session_presence_dbus_signal_info[] = {&_gala_session_presence_dbus_signal_info_status_changed, NULL};
static const GDBusPropertyInfo _gala_session_presence_dbus_property_info_status = {-1, "Status", "u", G_DBUS_PROPERTY_INFO_FLAGS_READABLE, NULL};
static const GDBusPropertyInfo * const _gala_session_presence_dbus_property_info[] = {&_gala_session_presence_dbus_property_info_status, NULL};
static const GDBusInterfaceInfo _gala_session_presence_dbus_interface_info = {-1, "org.gnome.SessionManager.Presence", (GDBusMethodInfo **) (&_gala_session_presence_dbus_method_info), (GDBusSignalInfo **) (&_gala_session_presence_dbus_signal_info), (GDBusPropertyInfo **) (&_gala_session_presence_dbus_property_info), NULL};
static const GDBusInterfaceVTable _gala_session_presence_dbus_interface_vtable = {gala_session_presence_dbus_interface_method_call, gala_session_presence_dbus_interface_get_property, gala_session_presence_dbus_interface_set_property};
static const GDBusArgInfo * const _gala_display_manager_seat_dbus_arg_info_switch_to_greeter_in[] = {NULL};
static const GDBusArgInfo * const _gala_display_manager_seat_dbus_arg_info_switch_to_greeter_out[] = {NULL};
static const GDBusMethodInfo _gala_display_manager_seat_dbus_method_info_switch_to_greeter = {-1, "SwitchToGreeter", (GDBusArgInfo **) (&_gala_display_manager_seat_dbus_arg_info_switch_to_greeter_in), (GDBusArgInfo **) (&_gala_display_manager_seat_dbus_arg_info_switch_to_greeter_out), NULL};
static const GDBusMethodInfo * const _gala_display_manager_seat_dbus_method_info[] = {&_gala_display_manager_seat_dbus_method_info_switch_to_greeter, NULL};
static const GDBusSignalInfo * const _gala_display_manager_seat_dbus_signal_info[] = {NULL};
static const GDBusPropertyInfo * const _gala_display_manager_seat_dbus_property_info[] = {NULL};
static const GDBusInterfaceInfo _gala_display_manager_seat_dbus_interface_info = {-1, "org.freedesktop.DisplayManager.Seat", (GDBusMethodInfo **) (&_gala_display_manager_seat_dbus_method_info), (GDBusSignalInfo **) (&_gala_display_manager_seat_dbus_signal_info), (GDBusPropertyInfo **) (&_gala_display_manager_seat_dbus_property_info), NULL};
static const GDBusInterfaceVTable _gala_display_manager_seat_dbus_interface_vtable = {gala_display_manager_seat_dbus_interface_method_call, gala_display_manager_seat_dbus_interface_get_property, gala_display_manager_seat_dbus_interface_set_property};

char*
gala_login_manager_get_session (GalaLoginManager* self,
                                const gchar* session_id,
                                GError** error)
{
	GalaLoginManagerIface* _iface_;
#line 23 "../src/Widgets/ScreenShield.vala"
	g_return_val_if_fail (self != NULL, NULL);
#line 23 "../src/Widgets/ScreenShield.vala"
	_iface_ = GALA_LOGIN_MANAGER_GET_INTERFACE (self);
#line 23 "../src/Widgets/ScreenShield.vala"
	if (_iface_->get_session) {
#line 23 "../src/Widgets/ScreenShield.vala"
		return _iface_->get_session (self, session_id, error);
#line 717 "ScreenShield.c"
	}
#line 23 "../src/Widgets/ScreenShield.vala"
	return NULL;
#line 721 "ScreenShield.c"
}

GUnixInputStream*
gala_login_manager_inhibit (GalaLoginManager* self,
                            const gchar* what,
                            const gchar* who,
                            const gchar* why,
                            const gchar* mode,
                            GError** error)
{
	GalaLoginManagerIface* _iface_;
#line 25 "../src/Widgets/ScreenShield.vala"
	g_return_val_if_fail (self != NULL, NULL);
#line 25 "../src/Widgets/ScreenShield.vala"
	_iface_ = GALA_LOGIN_MANAGER_GET_INTERFACE (self);
#line 25 "../src/Widgets/ScreenShield.vala"
	if (_iface_->inhibit) {
#line 25 "../src/Widgets/ScreenShield.vala"
		return _iface_->inhibit (self, what, who, why, mode, error);
#line 741 "ScreenShield.c"
	}
#line 25 "../src/Widgets/ScreenShield.vala"
	return NULL;
#line 745 "ScreenShield.c"
}

static void
gala_login_manager_default_init (GalaLoginManagerIface * iface,
                                 gpointer iface_data)
{
#line 20 "../src/Widgets/ScreenShield.vala"
	gala_login_manager_signals[GALA_LOGIN_MANAGER_PREPARE_FOR_SLEEP_SIGNAL] = g_signal_new ("prepare-for-sleep", GALA_TYPE_LOGIN_MANAGER, G_SIGNAL_RUN_LAST, 0, NULL, NULL, g_cclosure_marshal_VOID__BOOLEAN, G_TYPE_NONE, 1, G_TYPE_BOOLEAN);
#line 754 "ScreenShield.c"
}

 G_GNUC_NO_INLINE static GType
gala_login_manager_get_type_once (void)
{
	static const GTypeInfo g_define_type_info = { sizeof (GalaLoginManagerIface), (GBaseInitFunc) NULL, (GBaseFinalizeFunc) NULL, (GClassInitFunc) gala_login_manager_default_init, (GClassFinalizeFunc) NULL, NULL, 0, 0, (GInstanceInitFunc) NULL, NULL };
	GType gala_login_manager_type_id;
	gala_login_manager_type_id = g_type_register_static (G_TYPE_INTERFACE, "GalaLoginManager", &g_define_type_info, 0);
	g_type_interface_add_prerequisite (gala_login_manager_type_id, G_TYPE_OBJECT);
	g_type_set_qdata (gala_login_manager_type_id, g_quark_from_static_string ("vala-dbus-proxy-type"), (void*) gala_login_manager_proxy_get_type);
	g_type_set_qdata (gala_login_manager_type_id, g_quark_from_static_string ("vala-dbus-interface-name"), "org.freedesktop.login1.Manager");
	g_type_set_qdata (gala_login_manager_type_id, g_quark_from_static_string ("vala-dbus-interface-info"), (void*) (&_gala_login_manager_dbus_interface_info));
	g_type_set_qdata (gala_login_manager_type_id, g_quark_from_static_string ("vala-dbus-register-object"), (void*) gala_login_manager_register_object);
	return gala_login_manager_type_id;
}

 G_GNUC_INTERNAL GType
gala_login_manager_get_type (void)
{
	static gsize gala_login_manager_type_id__once = 0;
	if (g_once_init_enter (&gala_login_manager_type_id__once)) {
		GType gala_login_manager_type_id;
		gala_login_manager_type_id = gala_login_manager_get_type_once ();
		g_once_init_leave (&gala_login_manager_type_id__once, gala_login_manager_type_id);
	}
	return gala_login_manager_type_id__once;
}

G_DEFINE_TYPE_EXTENDED (GalaLoginManagerProxy, gala_login_manager_proxy, G_TYPE_DBUS_PROXY, 0, G_IMPLEMENT_INTERFACE (GALA_TYPE_LOGIN_MANAGER, gala_login_manager_proxy_gala_login_manager_interface_init) )
static void
gala_login_manager_proxy_class_init (GalaLoginManagerProxyClass* klass)
{
#line 21 "../src/PluginManager.vala"
	G_DBUS_PROXY_CLASS (klass)->g_signal = gala_login_manager_proxy_g_signal;
#line 789 "ScreenShield.c"
}

static void
_dbus_handle_gala_login_manager_prepare_for_sleep (GalaLoginManager* self,
                                                   GVariant* parameters)
{
	GVariantIter _arguments_iter;
	gboolean about_to_suspend = FALSE;
	GVariant* _tmp141_;
#line 21 "../src/PluginManager.vala"
	g_variant_iter_init (&_arguments_iter, parameters);
#line 21 "../src/PluginManager.vala"
	_tmp141_ = g_variant_iter_next_value (&_arguments_iter);
#line 21 "../src/PluginManager.vala"
	about_to_suspend = g_variant_get_boolean (_tmp141_);
#line 21 "../src/PluginManager.vala"
	g_variant_unref (_tmp141_);
#line 21 "../src/PluginManager.vala"
	g_signal_emit_by_name (self, "prepare-for-sleep", about_to_suspend);
#line 809 "ScreenShield.c"
}

static void
gala_login_manager_proxy_g_signal (GDBusProxy* proxy,
                                   const gchar* sender_name,
                                   const gchar* signal_name,
                                   GVariant* parameters)
{
#line 21 "../src/PluginManager.vala"
	if (strcmp (signal_name, "PrepareForSleep") == 0) {
#line 21 "../src/PluginManager.vala"
		_dbus_handle_gala_login_manager_prepare_for_sleep ((GalaLoginManager*) proxy, parameters);
#line 822 "ScreenShield.c"
	}
}

static void
gala_login_manager_proxy_init (GalaLoginManagerProxy* self)
{
#line 21 "../src/PluginManager.vala"
	g_dbus_proxy_set_interface_info (G_DBUS_PROXY (self), (GDBusInterfaceInfo *) (&_gala_login_manager_dbus_interface_info));
#line 831 "ScreenShield.c"
}

static char*
gala_login_manager_proxy_get_session (GalaLoginManager* self,
                                      const gchar* session_id,
                                      GError** error)
{
	GDBusMessage *_message;
	GVariant *_arguments;
	GVariantBuilder _arguments_builder;
	GDBusMessage *_reply_message;
	GVariant *_reply;
	GVariantIter _reply_iter;
	char* _result = NULL;
	GVariant* _tmp142_;
#line 21 "../src/PluginManager.vala"
	_message = g_dbus_message_new_method_call (g_dbus_proxy_get_name ((GDBusProxy *) self), g_dbus_proxy_get_object_path ((GDBusProxy *) self), "org.freedesktop.login1.Manager", "GetSession");
#line 21 "../src/PluginManager.vala"
	g_variant_builder_init (&_arguments_builder, G_VARIANT_TYPE_TUPLE);
#line 21 "../src/PluginManager.vala"
	g_variant_builder_add_value (&_arguments_builder, g_variant_new_string (session_id));
#line 21 "../src/PluginManager.vala"
	_arguments = g_variant_builder_end (&_arguments_builder);
#line 21 "../src/PluginManager.vala"
	g_dbus_message_set_body (_message, _arguments);
#line 21 "../src/PluginManager.vala"
	_reply_message = g_dbus_connection_send_message_with_reply_sync (g_dbus_proxy_get_connection ((GDBusProxy *) self), _message, G_DBUS_SEND_MESSAGE_FLAGS_NONE, g_dbus_proxy_get_default_timeout ((GDBusProxy *) self), NULL, NULL, error);
#line 21 "../src/PluginManager.vala"
	g_object_unref (_message);
#line 21 "../src/PluginManager.vala"
	if (!_reply_message) {
#line 21 "../src/PluginManager.vala"
		return NULL;
#line 865 "ScreenShield.c"
	}
#line 21 "../src/PluginManager.vala"
	if (g_dbus_message_to_gerror (_reply_message, error)) {
#line 21 "../src/PluginManager.vala"
		g_object_unref (_reply_message);
#line 21 "../src/PluginManager.vala"
		return NULL;
#line 873 "ScreenShield.c"
	}
#line 21 "../src/PluginManager.vala"
	_reply = g_dbus_message_get_body (_reply_message);
#line 21 "../src/PluginManager.vala"
	g_variant_iter_init (&_reply_iter, _reply);
#line 21 "../src/PluginManager.vala"
	_tmp142_ = g_variant_iter_next_value (&_reply_iter);
#line 21 "../src/PluginManager.vala"
	_result = g_variant_dup_string (_tmp142_, NULL);
#line 21 "../src/PluginManager.vala"
	g_variant_unref (_tmp142_);
#line 21 "../src/PluginManager.vala"
	g_object_unref (_reply_message);
#line 21 "../src/PluginManager.vala"
	return _result;
#line 889 "ScreenShield.c"
}

static GUnixInputStream*
gala_login_manager_proxy_inhibit (GalaLoginManager* self,
                                  const gchar* what,
                                  const gchar* who,
                                  const gchar* why,
                                  const gchar* mode,
                                  GError** error)
{
	GUnixFDList* _fd_list;
	GDBusMessage *_message;
	GVariant *_arguments;
	GVariantBuilder _arguments_builder;
	GDBusMessage *_reply_message;
	gint _fd_index = 0;
	gint _fd;
	GVariant *_reply;
	GVariantIter _reply_iter;
	GUnixInputStream* _result = NULL;
#line 21 "../src/PluginManager.vala"
	_message = g_dbus_message_new_method_call (g_dbus_proxy_get_name ((GDBusProxy *) self), g_dbus_proxy_get_object_path ((GDBusProxy *) self), "org.freedesktop.login1.Manager", "Inhibit");
#line 21 "../src/PluginManager.vala"
	g_variant_builder_init (&_arguments_builder, G_VARIANT_TYPE_TUPLE);
#line 21 "../src/PluginManager.vala"
	_fd_list = g_unix_fd_list_new ();
#line 21 "../src/PluginManager.vala"
	g_variant_builder_add_value (&_arguments_builder, g_variant_new_string (what));
#line 21 "../src/PluginManager.vala"
	g_variant_builder_add_value (&_arguments_builder, g_variant_new_string (who));
#line 21 "../src/PluginManager.vala"
	g_variant_builder_add_value (&_arguments_builder, g_variant_new_string (why));
#line 21 "../src/PluginManager.vala"
	g_variant_builder_add_value (&_arguments_builder, g_variant_new_string (mode));
#line 21 "../src/PluginManager.vala"
	_arguments = g_variant_builder_end (&_arguments_builder);
#line 21 "../src/PluginManager.vala"
	g_dbus_message_set_body (_message, _arguments);
#line 21 "../src/PluginManager.vala"
	g_dbus_message_set_unix_fd_list (_message, _fd_list);
#line 21 "../src/PluginManager.vala"
	g_object_unref (_fd_list);
#line 21 "../src/PluginManager.vala"
	_reply_message = g_dbus_connection_send_message_with_reply_sync (g_dbus_proxy_get_connection ((GDBusProxy *) self), _message, G_DBUS_SEND_MESSAGE_FLAGS_NONE, g_dbus_proxy_get_default_timeout ((GDBusProxy *) self), NULL, NULL, error);
#line 21 "../src/PluginManager.vala"
	g_object_unref (_message);
#line 21 "../src/PluginManager.vala"
	if (!_reply_message) {
#line 21 "../src/PluginManager.vala"
		return NULL;
#line 940 "ScreenShield.c"
	}
#line 21 "../src/PluginManager.vala"
	if (g_dbus_message_to_gerror (_reply_message, error)) {
#line 21 "../src/PluginManager.vala"
		g_object_unref (_reply_message);
#line 21 "../src/PluginManager.vala"
		return NULL;
#line 948 "ScreenShield.c"
	}
#line 21 "../src/PluginManager.vala"
	_reply = g_dbus_message_get_body (_reply_message);
#line 21 "../src/PluginManager.vala"
	g_variant_iter_init (&_reply_iter, _reply);
#line 21 "../src/PluginManager.vala"
	_fd_list = g_dbus_message_get_unix_fd_list (_reply_message);
#line 21 "../src/PluginManager.vala"
	if (_fd_list) {
#line 21 "../src/PluginManager.vala"
		g_variant_iter_next (&_reply_iter, "h", &_fd_index);
#line 21 "../src/PluginManager.vala"
		_fd = g_unix_fd_list_get (_fd_list, _fd_index, error);
#line 21 "../src/PluginManager.vala"
		if (_fd >= 0) {
#line 21 "../src/PluginManager.vala"
			_result = (GUnixInputStream *) g_unix_input_stream_new (_fd, TRUE);
#line 966 "ScreenShield.c"
		}
	} else {
#line 21 "../src/PluginManager.vala"
		g_set_error_literal (error, G_IO_ERROR, G_IO_ERROR_FAILED, "FD List is NULL");
#line 971 "ScreenShield.c"
	}
#line 21 "../src/PluginManager.vala"
	if (error && (*error)) {
#line 21 "../src/PluginManager.vala"
		g_object_unref (_reply_message);
#line 21 "../src/PluginManager.vala"
		return NULL;
#line 979 "ScreenShield.c"
	}
#line 21 "../src/PluginManager.vala"
	g_object_unref (_reply_message);
#line 21 "../src/PluginManager.vala"
	return _result;
#line 985 "ScreenShield.c"
}

static void
gala_login_manager_proxy_gala_login_manager_interface_init (GalaLoginManagerIface* iface)
{
#line 21 "../src/PluginManager.vala"
	iface->get_session = gala_login_manager_proxy_get_session;
#line 21 "../src/PluginManager.vala"
	iface->inhibit = gala_login_manager_proxy_inhibit;
#line 995 "ScreenShield.c"
}

static void
_dbus_gala_login_manager_get_session (GalaLoginManager* self,
                                      GVariant* _parameters_,
                                      GDBusMethodInvocation* invocation)
{
	GError* error = NULL;
	GVariantIter _arguments_iter;
	gchar* session_id = NULL;
	GVariant* _tmp143_;
	GDBusMessage* _reply_message = NULL;
	GVariant* _reply;
	GVariantBuilder _reply_builder;
	char* result;
#line 21 "../src/PluginManager.vala"
	g_variant_iter_init (&_arguments_iter, _parameters_);
#line 21 "../src/PluginManager.vala"
	_tmp143_ = g_variant_iter_next_value (&_arguments_iter);
#line 21 "../src/PluginManager.vala"
	session_id = g_variant_dup_string (_tmp143_, NULL);
#line 21 "../src/PluginManager.vala"
	g_variant_unref (_tmp143_);
#line 21 "../src/PluginManager.vala"
	result = gala_login_manager_get_session (self, session_id, &error);
#line 21 "../src/PluginManager.vala"
	if (error) {
#line 21 "../src/PluginManager.vala"
		g_dbus_method_invocation_take_error (invocation, error);
#line 1025 "ScreenShield.c"
		goto _error;
	}
#line 21 "../src/PluginManager.vala"
	_reply_message = g_dbus_message_new_method_reply (g_dbus_method_invocation_get_message (invocation));
#line 21 "../src/PluginManager.vala"
	g_variant_builder_init (&_reply_builder, G_VARIANT_TYPE_TUPLE);
#line 21 "../src/PluginManager.vala"
	g_variant_builder_add_value (&_reply_builder, g_variant_new_object_path (result));
#line 21 "../src/PluginManager.vala"
	_g_free0 (result);
#line 21 "../src/PluginManager.vala"
	_reply = g_variant_builder_end (&_reply_builder);
#line 21 "../src/PluginManager.vala"
	g_dbus_message_set_body (_reply_message, _reply);
#line 21 "../src/PluginManager.vala"
	g_dbus_connection_send_message (g_dbus_method_invocation_get_connection (invocation), _reply_message, G_DBUS_SEND_MESSAGE_FLAGS_NONE, NULL, NULL);
#line 21 "../src/PluginManager.vala"
	g_object_unref (invocation);
#line 21 "../src/PluginManager.vala"
	g_object_unref (_reply_message);
#line 1046 "ScreenShield.c"
	_error:
#line 21 "../src/PluginManager.vala"
	_g_free0 (session_id);
#line 1050 "ScreenShield.c"
	;
}

static void
_dbus_gala_login_manager_inhibit (GalaLoginManager* self,
                                  GVariant* _parameters_,
                                  GDBusMethodInvocation* invocation)
{
	GUnixFDList* _fd_list;
	GError* error = NULL;
	GVariantIter _arguments_iter;
	gint _fd_index = 0;
	gint _fd;
	gchar* what = NULL;
	GVariant* _tmp144_;
	gchar* who = NULL;
	GVariant* _tmp145_;
	gchar* why = NULL;
	GVariant* _tmp146_;
	gchar* mode = NULL;
	GVariant* _tmp147_;
	GDBusMessage* _reply_message = NULL;
	GVariant* _reply;
	GVariantBuilder _reply_builder;
	GUnixInputStream* result;
#line 21 "../src/PluginManager.vala"
	g_variant_iter_init (&_arguments_iter, _parameters_);
#line 21 "../src/PluginManager.vala"
	_tmp144_ = g_variant_iter_next_value (&_arguments_iter);
#line 21 "../src/PluginManager.vala"
	what = g_variant_dup_string (_tmp144_, NULL);
#line 21 "../src/PluginManager.vala"
	g_variant_unref (_tmp144_);
#line 21 "../src/PluginManager.vala"
	_tmp145_ = g_variant_iter_next_value (&_arguments_iter);
#line 21 "../src/PluginManager.vala"
	who = g_variant_dup_string (_tmp145_, NULL);
#line 21 "../src/PluginManager.vala"
	g_variant_unref (_tmp145_);
#line 21 "../src/PluginManager.vala"
	_tmp146_ = g_variant_iter_next_value (&_arguments_iter);
#line 21 "../src/PluginManager.vala"
	why = g_variant_dup_string (_tmp146_, NULL);
#line 21 "../src/PluginManager.vala"
	g_variant_unref (_tmp146_);
#line 21 "../src/PluginManager.vala"
	_tmp147_ = g_variant_iter_next_value (&_arguments_iter);
#line 21 "../src/PluginManager.vala"
	mode = g_variant_dup_string (_tmp147_, NULL);
#line 21 "../src/PluginManager.vala"
	g_variant_unref (_tmp147_);
#line 21 "../src/PluginManager.vala"
	result = gala_login_manager_inhibit (self, what, who, why, mode, &error);
#line 21 "../src/PluginManager.vala"
	if (error) {
#line 21 "../src/PluginManager.vala"
		g_dbus_method_invocation_take_error (invocation, error);
#line 1108 "ScreenShield.c"
		goto _error;
	}
#line 21 "../src/PluginManager.vala"
	_reply_message = g_dbus_message_new_method_reply (g_dbus_method_invocation_get_message (invocation));
#line 21 "../src/PluginManager.vala"
	g_variant_builder_init (&_reply_builder, G_VARIANT_TYPE_TUPLE);
#line 21 "../src/PluginManager.vala"
	_fd_list = g_unix_fd_list_new ();
#line 21 "../src/PluginManager.vala"
	g_variant_builder_add (&_reply_builder, "h", g_unix_fd_list_append (_fd_list, g_unix_input_stream_get_fd (result), NULL));
#line 21 "../src/PluginManager.vala"
	_g_object_unref0 (result);
#line 21 "../src/PluginManager.vala"
	_reply = g_variant_builder_end (&_reply_builder);
#line 21 "../src/PluginManager.vala"
	g_dbus_message_set_body (_reply_message, _reply);
#line 21 "../src/PluginManager.vala"
	g_dbus_message_set_unix_fd_list (_reply_message, _fd_list);
#line 21 "../src/PluginManager.vala"
	g_object_unref (_fd_list);
#line 21 "../src/PluginManager.vala"
	g_dbus_connection_send_message (g_dbus_method_invocation_get_connection (invocation), _reply_message, G_DBUS_SEND_MESSAGE_FLAGS_NONE, NULL, NULL);
#line 21 "../src/PluginManager.vala"
	g_object_unref (invocation);
#line 21 "../src/PluginManager.vala"
	g_object_unref (_reply_message);
#line 1135 "ScreenShield.c"
	_error:
#line 21 "../src/PluginManager.vala"
	_g_free0 (what);
#line 21 "../src/PluginManager.vala"
	_g_free0 (who);
#line 21 "../src/PluginManager.vala"
	_g_free0 (why);
#line 21 "../src/PluginManager.vala"
	_g_free0 (mode);
#line 1145 "ScreenShield.c"
	;
}

static void
gala_login_manager_dbus_interface_method_call (GDBusConnection* connection,
                                               const gchar* sender,
                                               const gchar* object_path,
                                               const gchar* interface_name,
                                               const gchar* method_name,
                                               GVariant* parameters,
                                               GDBusMethodInvocation* invocation,
                                               gpointer user_data)
{
	gpointer* data;
	gpointer object;
	data = user_data;
	object = data[0];
#line 21 "../src/PluginManager.vala"
	if (strcmp (method_name, "GetSession") == 0) {
#line 21 "../src/PluginManager.vala"
		_dbus_gala_login_manager_get_session (object, parameters, invocation);
#line 1167 "ScreenShield.c"
	} else if (strcmp (method_name, "Inhibit") == 0) {
#line 21 "../src/PluginManager.vala"
		_dbus_gala_login_manager_inhibit (object, parameters, invocation);
#line 1171 "ScreenShield.c"
	} else {
#line 21 "../src/PluginManager.vala"
		g_object_unref (invocation);
#line 1175 "ScreenShield.c"
	}
}

static GVariant*
gala_login_manager_dbus_interface_get_property (GDBusConnection* connection,
                                                const gchar* sender,
                                                const gchar* object_path,
                                                const gchar* interface_name,
                                                const gchar* property_name,
                                                GError** error,
                                                gpointer user_data)
{
	gpointer* data;
	gpointer object;
	data = user_data;
	object = data[0];
#line 21 "../src/PluginManager.vala"
	return NULL;
#line 1194 "ScreenShield.c"
}

static gboolean
gala_login_manager_dbus_interface_set_property (GDBusConnection* connection,
                                                const gchar* sender,
                                                const gchar* object_path,
                                                const gchar* interface_name,
                                                const gchar* property_name,
                                                GVariant* value,
                                                GError** error,
                                                gpointer user_data)
{
	gpointer* data;
	gpointer object;
	data = user_data;
	object = data[0];
#line 21 "../src/PluginManager.vala"
	return FALSE;
#line 1213 "ScreenShield.c"
}

static void
_dbus_gala_login_manager_prepare_for_sleep (GObject* _sender,
                                            gboolean about_to_suspend,
                                            gpointer* _data)
{
	GDBusConnection * _connection;
	const gchar * _path;
	GVariant *_arguments;
	GVariantBuilder _arguments_builder;
	_connection = _data[1];
	_path = _data[2];
#line 21 "../src/PluginManager.vala"
	g_variant_builder_init (&_arguments_builder, G_VARIANT_TYPE_TUPLE);
#line 21 "../src/PluginManager.vala"
	g_variant_builder_add_value (&_arguments_builder, g_variant_new_boolean (about_to_suspend));
#line 21 "../src/PluginManager.vala"
	_arguments = g_variant_builder_end (&_arguments_builder);
#line 21 "../src/PluginManager.vala"
	g_dbus_connection_emit_signal (_connection, NULL, _path, "org.freedesktop.login1.Manager", "PrepareForSleep", _arguments, NULL);
#line 1235 "ScreenShield.c"
}

 G_GNUC_INTERNAL guint
gala_login_manager_register_object (gpointer object,
                                    GDBusConnection* connection,
                                    const gchar* path,
                                    GError** error)
{
	guint result;
	gpointer *data;
#line 21 "../src/PluginManager.vala"
	data = g_new (gpointer, 3);
#line 21 "../src/PluginManager.vala"
	data[0] = g_object_ref (object);
#line 21 "../src/PluginManager.vala"
	data[1] = g_object_ref (connection);
#line 21 "../src/PluginManager.vala"
	data[2] = g_strdup (path);
#line 21 "../src/PluginManager.vala"
	result = g_dbus_connection_register_object (connection, path, (GDBusInterfaceInfo *) (&_gala_login_manager_dbus_interface_info), &_gala_login_manager_dbus_interface_vtable, data, _gala_login_manager_unregister_object, error);
#line 21 "../src/PluginManager.vala"
	if (!result) {
#line 21 "../src/PluginManager.vala"
		return 0;
#line 1260 "ScreenShield.c"
	}
#line 21 "../src/PluginManager.vala"
	g_signal_connect (object, "prepare-for-sleep", (GCallback) _dbus_gala_login_manager_prepare_for_sleep, data);
#line 21 "../src/PluginManager.vala"
	return result;
#line 1266 "ScreenShield.c"
}

static void
_gala_login_manager_unregister_object (gpointer user_data)
{
	gpointer* data;
	data = user_data;
#line 21 "../src/PluginManager.vala"
	g_signal_handlers_disconnect_by_func (data[0], _dbus_gala_login_manager_prepare_for_sleep, data);
#line 21 "../src/PluginManager.vala"
	g_object_unref (data[0]);
#line 21 "../src/PluginManager.vala"
	g_object_unref (data[1]);
#line 21 "../src/PluginManager.vala"
	g_free (data[2]);
#line 21 "../src/PluginManager.vala"
	g_free (data);
#line 1284 "ScreenShield.c"
}

void
gala_login_session_manager_set_locked_hint (GalaLoginSessionManager* self,
                                            gboolean locked,
                                            GError** error)
{
	GalaLoginSessionManagerIface* _iface_;
#line 35 "../src/Widgets/ScreenShield.vala"
	g_return_if_fail (self != NULL);
#line 35 "../src/Widgets/ScreenShield.vala"
	_iface_ = GALA_LOGIN_SESSION_MANAGER_GET_INTERFACE (self);
#line 35 "../src/Widgets/ScreenShield.vala"
	if (_iface_->set_locked_hint) {
#line 35 "../src/Widgets/ScreenShield.vala"
		_iface_->set_locked_hint (self, locked, error);
#line 1301 "ScreenShield.c"
	}
}

 G_GNUC_INTERNAL gboolean
gala_login_session_manager_get_active (GalaLoginSessionManager* self)
{
	GalaLoginSessionManagerIface* _iface_;
#line 30 "../src/Widgets/ScreenShield.vala"
	g_return_val_if_fail (self != NULL, FALSE);
#line 30 "../src/Widgets/ScreenShield.vala"
	_iface_ = GALA_LOGIN_SESSION_MANAGER_GET_INTERFACE (self);
#line 30 "../src/Widgets/ScreenShield.vala"
	if (_iface_->get_active) {
#line 30 "../src/Widgets/ScreenShield.vala"
		return _iface_->get_active (self);
#line 1317 "ScreenShield.c"
	}
#line 30 "../src/Widgets/ScreenShield.vala"
	return FALSE;
#line 1321 "ScreenShield.c"
}

static void
gala_login_session_manager_default_init (GalaLoginSessionManagerIface * iface,
                                         gpointer iface_data)
{
#line 29 "../src/Widgets/ScreenShield.vala"
	gala_login_session_manager_signals[GALA_LOGIN_SESSION_MANAGER_LOCK_SIGNAL] = g_signal_new ("lock", GALA_TYPE_LOGIN_SESSION_MANAGER, G_SIGNAL_RUN_LAST, 0, NULL, NULL, g_cclosure_marshal_VOID__VOID, G_TYPE_NONE, 0);
#line 29 "../src/Widgets/ScreenShield.vala"
	gala_login_session_manager_signals[GALA_LOGIN_SESSION_MANAGER_UNLOCK_SIGNAL] = g_signal_new ("unlock", GALA_TYPE_LOGIN_SESSION_MANAGER, G_SIGNAL_RUN_LAST, 0, NULL, NULL, g_cclosure_marshal_VOID__VOID, G_TYPE_NONE, 0);
#line 1332 "ScreenShield.c"
}

 G_GNUC_NO_INLINE static GType
gala_login_session_manager_get_type_once (void)
{
	static const GTypeInfo g_define_type_info = { sizeof (GalaLoginSessionManagerIface), (GBaseInitFunc) NULL, (GBaseFinalizeFunc) NULL, (GClassInitFunc) gala_login_session_manager_default_init, (GClassFinalizeFunc) NULL, NULL, 0, 0, (GInstanceInitFunc) NULL, NULL };
	GType gala_login_session_manager_type_id;
	gala_login_session_manager_type_id = g_type_register_static (G_TYPE_INTERFACE, "GalaLoginSessionManager", &g_define_type_info, 0);
	g_type_interface_add_prerequisite (gala_login_session_manager_type_id, G_TYPE_OBJECT);
	g_type_set_qdata (gala_login_session_manager_type_id, g_quark_from_static_string ("vala-dbus-proxy-type"), (void*) gala_login_session_manager_proxy_get_type);
	g_type_set_qdata (gala_login_session_manager_type_id, g_quark_from_static_string ("vala-dbus-interface-name"), "org.freedesktop.login1.Session");
	g_type_set_qdata (gala_login_session_manager_type_id, g_quark_from_static_string ("vala-dbus-interface-info"), (void*) (&_gala_login_session_manager_dbus_interface_info));
	g_type_set_qdata (gala_login_session_manager_type_id, g_quark_from_static_string ("vala-dbus-register-object"), (void*) gala_login_session_manager_register_object);
	return gala_login_session_manager_type_id;
}

 G_GNUC_INTERNAL GType
gala_login_session_manager_get_type (void)
{
	static gsize gala_login_session_manager_type_id__once = 0;
	if (g_once_init_enter (&gala_login_session_manager_type_id__once)) {
		GType gala_login_session_manager_type_id;
		gala_login_session_manager_type_id = gala_login_session_manager_get_type_once ();
		g_once_init_leave (&gala_login_session_manager_type_id__once, gala_login_session_manager_type_id);
	}
	return gala_login_session_manager_type_id__once;
}

G_DEFINE_TYPE_EXTENDED (GalaLoginSessionManagerProxy, gala_login_session_manager_proxy, G_TYPE_DBUS_PROXY, 0, G_IMPLEMENT_INTERFACE (GALA_TYPE_LOGIN_SESSION_MANAGER, gala_login_session_manager_proxy_gala_login_session_manager_interface_init) )
static void
gala_login_session_manager_proxy_class_init (GalaLoginSessionManagerProxyClass* klass)
{
#line 21 "../src/PluginManager.vala"
	G_DBUS_PROXY_CLASS (klass)->g_signal = gala_login_session_manager_proxy_g_signal;
#line 1367 "ScreenShield.c"
}

static void
_dbus_handle_gala_login_session_manager_lock (GalaLoginSessionManager* self,
                                              GVariant* parameters)
{
	GVariantIter _arguments_iter;
#line 21 "../src/PluginManager.vala"
	g_variant_iter_init (&_arguments_iter, parameters);
#line 21 "../src/PluginManager.vala"
	g_signal_emit_by_name (self, "lock");
#line 1379 "ScreenShield.c"
}

static void
_dbus_handle_gala_login_session_manager_unlock (GalaLoginSessionManager* self,
                                                GVariant* parameters)
{
	GVariantIter _arguments_iter;
#line 21 "../src/PluginManager.vala"
	g_variant_iter_init (&_arguments_iter, parameters);
#line 21 "../src/PluginManager.vala"
	g_signal_emit_by_name (self, "unlock");
#line 1391 "ScreenShield.c"
}

static void
gala_login_session_manager_proxy_g_signal (GDBusProxy* proxy,
                                           const gchar* sender_name,
                                           const gchar* signal_name,
                                           GVariant* parameters)
{
#line 21 "../src/PluginManager.vala"
	if (strcmp (signal_name, "Lock") == 0) {
#line 21 "../src/PluginManager.vala"
		_dbus_handle_gala_login_session_manager_lock ((GalaLoginSessionManager*) proxy, parameters);
#line 1404 "ScreenShield.c"
	} else if (strcmp (signal_name, "Unlock") == 0) {
#line 21 "../src/PluginManager.vala"
		_dbus_handle_gala_login_session_manager_unlock ((GalaLoginSessionManager*) proxy, parameters);
#line 1408 "ScreenShield.c"
	}
}

static void
gala_login_session_manager_proxy_init (GalaLoginSessionManagerProxy* self)
{
#line 21 "../src/PluginManager.vala"
	g_dbus_proxy_set_interface_info (G_DBUS_PROXY (self), (GDBusInterfaceInfo *) (&_gala_login_session_manager_dbus_interface_info));
#line 1417 "ScreenShield.c"
}

static void
gala_login_session_manager_proxy_set_locked_hint (GalaLoginSessionManager* self,
                                                  gboolean locked,
                                                  GError** error)
{
	GDBusMessage *_message;
	GVariant *_arguments;
	GVariantBuilder _arguments_builder;
	GDBusMessage *_reply_message;
#line 21 "../src/PluginManager.vala"
	_message = g_dbus_message_new_method_call (g_dbus_proxy_get_name ((GDBusProxy *) self), g_dbus_proxy_get_object_path ((GDBusProxy *) self), "org.freedesktop.login1.Session", "SetLockedHint");
#line 21 "../src/PluginManager.vala"
	g_variant_builder_init (&_arguments_builder, G_VARIANT_TYPE_TUPLE);
#line 21 "../src/PluginManager.vala"
	g_variant_builder_add_value (&_arguments_builder, g_variant_new_boolean (locked));
#line 21 "../src/PluginManager.vala"
	_arguments = g_variant_builder_end (&_arguments_builder);
#line 21 "../src/PluginManager.vala"
	g_dbus_message_set_body (_message, _arguments);
#line 21 "../src/PluginManager.vala"
	_reply_message = g_dbus_connection_send_message_with_reply_sync (g_dbus_proxy_get_connection ((GDBusProxy *) self), _message, G_DBUS_SEND_MESSAGE_FLAGS_NONE, g_dbus_proxy_get_default_timeout ((GDBusProxy *) self), NULL, NULL, error);
#line 21 "../src/PluginManager.vala"
	g_object_unref (_message);
#line 21 "../src/PluginManager.vala"
	if (!_reply_message) {
#line 21 "../src/PluginManager.vala"
		return;
#line 1447 "ScreenShield.c"
	}
#line 21 "../src/PluginManager.vala"
	if (g_dbus_message_to_gerror (_reply_message, error)) {
#line 21 "../src/PluginManager.vala"
		g_object_unref (_reply_message);
#line 21 "../src/PluginManager.vala"
		return;
#line 1455 "ScreenShield.c"
	}
#line 21 "../src/PluginManager.vala"
	g_object_unref (_reply_message);
#line 1459 "ScreenShield.c"
}

static gboolean
gala_login_session_manager_dbus_proxy_get_active (GalaLoginSessionManager* self)
{
	GVariant *_inner_reply;
	gboolean _result;
#line 21 "../src/PluginManager.vala"
	_inner_reply = g_dbus_proxy_get_cached_property ((GDBusProxy *) self, "Active");
#line 21 "../src/PluginManager.vala"
	if (!_inner_reply) {
#line 1471 "ScreenShield.c"
		GVariant *_arguments;
		GVariant *_reply;
		GVariantBuilder _arguments_builder;
#line 21 "../src/PluginManager.vala"
		g_variant_builder_init (&_arguments_builder, G_VARIANT_TYPE_TUPLE);
#line 21 "../src/PluginManager.vala"
		g_variant_builder_add_value (&_arguments_builder, g_variant_new_string ("org.freedesktop.login1.Session"));
#line 21 "../src/PluginManager.vala"
		g_variant_builder_add_value (&_arguments_builder, g_variant_new_string ("Active"));
#line 21 "../src/PluginManager.vala"
		_arguments = g_variant_builder_end (&_arguments_builder);
#line 21 "../src/PluginManager.vala"
		_reply = g_dbus_proxy_call_sync ((GDBusProxy *) self, "org.freedesktop.DBus.Properties.Get", _arguments, G_DBUS_CALL_FLAGS_NONE, -1, NULL, NULL);
#line 21 "../src/PluginManager.vala"
		if (!_reply) {
#line 1487 "ScreenShield.c"
			gboolean _tmp148_ = FALSE;
#line 21 "../src/PluginManager.vala"
			return _tmp148_;
#line 1491 "ScreenShield.c"
		}
#line 21 "../src/PluginManager.vala"
		g_variant_get (_reply, "(v)", &_inner_reply);
#line 21 "../src/PluginManager.vala"
		g_variant_unref (_reply);
#line 1497 "ScreenShield.c"
	}
#line 21 "../src/PluginManager.vala"
	_result = g_variant_get_boolean (_inner_reply);
#line 21 "../src/PluginManager.vala"
	g_variant_unref (_inner_reply);
#line 21 "../src/PluginManager.vala"
	return _result;
#line 1505 "ScreenShield.c"
}

static void
gala_login_session_manager_proxy_gala_login_session_manager_interface_init (GalaLoginSessionManagerIface* iface)
{
#line 21 "../src/PluginManager.vala"
	iface->set_locked_hint = gala_login_session_manager_proxy_set_locked_hint;
#line 21 "../src/PluginManager.vala"
	iface->get_active = gala_login_session_manager_dbus_proxy_get_active;
#line 1515 "ScreenShield.c"
}

static void
_dbus_gala_login_session_manager_set_locked_hint (GalaLoginSessionManager* self,
                                                  GVariant* _parameters_,
                                                  GDBusMethodInvocation* invocation)
{
	GError* error = NULL;
	GVariantIter _arguments_iter;
	gboolean locked = FALSE;
	GVariant* _tmp149_;
	GDBusMessage* _reply_message = NULL;
	GVariant* _reply;
	GVariantBuilder _reply_builder;
#line 21 "../src/PluginManager.vala"
	g_variant_iter_init (&_arguments_iter, _parameters_);
#line 21 "../src/PluginManager.vala"
	_tmp149_ = g_variant_iter_next_value (&_arguments_iter);
#line 21 "../src/PluginManager.vala"
	locked = g_variant_get_boolean (_tmp149_);
#line 21 "../src/PluginManager.vala"
	g_variant_unref (_tmp149_);
#line 21 "../src/PluginManager.vala"
	gala_login_session_manager_set_locked_hint (self, locked, &error);
#line 21 "../src/PluginManager.vala"
	if (error) {
#line 21 "../src/PluginManager.vala"
		g_dbus_method_invocation_take_error (invocation, error);
#line 21 "../src/PluginManager.vala"
		return;
#line 1546 "ScreenShield.c"
	}
#line 21 "../src/PluginManager.vala"
	_reply_message = g_dbus_message_new_method_reply (g_dbus_method_invocation_get_message (invocation));
#line 21 "../src/PluginManager.vala"
	g_variant_builder_init (&_reply_builder, G_VARIANT_TYPE_TUPLE);
#line 21 "../src/PluginManager.vala"
	_reply = g_variant_builder_end (&_reply_builder);
#line 21 "../src/PluginManager.vala"
	g_dbus_message_set_body (_reply_message, _reply);
#line 21 "../src/PluginManager.vala"
	g_dbus_connection_send_message (g_dbus_method_invocation_get_connection (invocation), _reply_message, G_DBUS_SEND_MESSAGE_FLAGS_NONE, NULL, NULL);
#line 21 "../src/PluginManager.vala"
	g_object_unref (invocation);
#line 21 "../src/PluginManager.vala"
	g_object_unref (_reply_message);
#line 1562 "ScreenShield.c"
}

static void
gala_login_session_manager_dbus_interface_method_call (GDBusConnection* connection,
                                                       const gchar* sender,
                                                       const gchar* object_path,
                                                       const gchar* interface_name,
                                                       const gchar* method_name,
                                                       GVariant* parameters,
                                                       GDBusMethodInvocation* invocation,
                                                       gpointer user_data)
{
	gpointer* data;
	gpointer object;
	data = user_data;
	object = data[0];
#line 21 "../src/PluginManager.vala"
	if (strcmp (method_name, "SetLockedHint") == 0) {
#line 21 "../src/PluginManager.vala"
		_dbus_gala_login_session_manager_set_locked_hint (object, parameters, invocation);
#line 1583 "ScreenShield.c"
	} else {
#line 21 "../src/PluginManager.vala"
		g_object_unref (invocation);
#line 1587 "ScreenShield.c"
	}
}

static GVariant*
_dbus_gala_login_session_manager_get_active (GalaLoginSessionManager* self)
{
	gboolean result;
	GVariant* _reply;
#line 21 "../src/PluginManager.vala"
	result = gala_login_session_manager_get_active (self);
#line 21 "../src/PluginManager.vala"
	_reply = g_variant_new_boolean (result);
#line 21 "../src/PluginManager.vala"
	return _reply;
#line 1602 "ScreenShield.c"
}

static GVariant*
gala_login_session_manager_dbus_interface_get_property (GDBusConnection* connection,
                                                        const gchar* sender,
                                                        const gchar* object_path,
                                                        const gchar* interface_name,
                                                        const gchar* property_name,
                                                        GError** error,
                                                        gpointer user_data)
{
	gpointer* data;
	gpointer object;
	data = user_data;
	object = data[0];
#line 21 "../src/PluginManager.vala"
	if (strcmp (property_name, "Active") == 0) {
#line 21 "../src/PluginManager.vala"
		return _dbus_gala_login_session_manager_get_active (object);
#line 1622 "ScreenShield.c"
	}
#line 21 "../src/PluginManager.vala"
	return NULL;
#line 1626 "ScreenShield.c"
}

static gboolean
gala_login_session_manager_dbus_interface_set_property (GDBusConnection* connection,
                                                        const gchar* sender,
                                                        const gchar* object_path,
                                                        const gchar* interface_name,
                                                        const gchar* property_name,
                                                        GVariant* value,
                                                        GError** error,
                                                        gpointer user_data)
{
	gpointer* data;
	gpointer object;
	data = user_data;
	object = data[0];
#line 21 "../src/PluginManager.vala"
	return FALSE;
#line 1645 "ScreenShield.c"
}

static void
_dbus_gala_login_session_manager_lock (GObject* _sender,
                                       gpointer* _data)
{
	GDBusConnection * _connection;
	const gchar * _path;
	GVariant *_arguments;
	GVariantBuilder _arguments_builder;
	_connection = _data[1];
	_path = _data[2];
#line 21 "../src/PluginManager.vala"
	g_variant_builder_init (&_arguments_builder, G_VARIANT_TYPE_TUPLE);
#line 21 "../src/PluginManager.vala"
	_arguments = g_variant_builder_end (&_arguments_builder);
#line 21 "../src/PluginManager.vala"
	g_dbus_connection_emit_signal (_connection, NULL, _path, "org.freedesktop.login1.Session", "Lock", _arguments, NULL);
#line 1664 "ScreenShield.c"
}

static void
_dbus_gala_login_session_manager_unlock (GObject* _sender,
                                         gpointer* _data)
{
	GDBusConnection * _connection;
	const gchar * _path;
	GVariant *_arguments;
	GVariantBuilder _arguments_builder;
	_connection = _data[1];
	_path = _data[2];
#line 21 "../src/PluginManager.vala"
	g_variant_builder_init (&_arguments_builder, G_VARIANT_TYPE_TUPLE);
#line 21 "../src/PluginManager.vala"
	_arguments = g_variant_builder_end (&_arguments_builder);
#line 21 "../src/PluginManager.vala"
	g_dbus_connection_emit_signal (_connection, NULL, _path, "org.freedesktop.login1.Session", "Unlock", _arguments, NULL);
#line 1683 "ScreenShield.c"
}

 G_GNUC_INTERNAL guint
gala_login_session_manager_register_object (gpointer object,
                                            GDBusConnection* connection,
                                            const gchar* path,
                                            GError** error)
{
	guint result;
	gpointer *data;
#line 21 "../src/PluginManager.vala"
	data = g_new (gpointer, 3);
#line 21 "../src/PluginManager.vala"
	data[0] = g_object_ref (object);
#line 21 "../src/PluginManager.vala"
	data[1] = g_object_ref (connection);
#line 21 "../src/PluginManager.vala"
	data[2] = g_strdup (path);
#line 21 "../src/PluginManager.vala"
	result = g_dbus_connection_register_object (connection, path, (GDBusInterfaceInfo *) (&_gala_login_session_manager_dbus_interface_info), &_gala_login_session_manager_dbus_interface_vtable, data, _gala_login_session_manager_unregister_object, error);
#line 21 "../src/PluginManager.vala"
	if (!result) {
#line 21 "../src/PluginManager.vala"
		return 0;
#line 1708 "ScreenShield.c"
	}
#line 21 "../src/PluginManager.vala"
	g_signal_connect (object, "lock", (GCallback) _dbus_gala_login_session_manager_lock, data);
#line 21 "../src/PluginManager.vala"
	g_signal_connect (object, "unlock", (GCallback) _dbus_gala_login_session_manager_unlock, data);
#line 21 "../src/PluginManager.vala"
	return result;
#line 1716 "ScreenShield.c"
}

static void
_gala_login_session_manager_unregister_object (gpointer user_data)
{
	gpointer* data;
	data = user_data;
#line 21 "../src/PluginManager.vala"
	g_signal_handlers_disconnect_by_func (data[0], _dbus_gala_login_session_manager_lock, data);
#line 21 "../src/PluginManager.vala"
	g_signal_handlers_disconnect_by_func (data[0], _dbus_gala_login_session_manager_unlock, data);
#line 21 "../src/PluginManager.vala"
	g_object_unref (data[0]);
#line 21 "../src/PluginManager.vala"
	g_object_unref (data[1]);
#line 21 "../src/PluginManager.vala"
	g_free (data[2]);
#line 21 "../src/PluginManager.vala"
	g_free (data);
#line 1736 "ScreenShield.c"
}

void
gala_login_display_copy (const GalaLoginDisplay* self,
                         GalaLoginDisplay* dest)
{
	const gchar* _tmp0_;
	gchar* _tmp1_;
	const char* _tmp2_;
	char* _tmp3_;
#line 38 "../src/Widgets/ScreenShield.vala"
	_tmp0_ = (*self).session;
#line 38 "../src/Widgets/ScreenShield.vala"
	_tmp1_ = g_strdup (_tmp0_);
#line 38 "../src/Widgets/ScreenShield.vala"
	_g_free0 ((*dest).session);
#line 38 "../src/Widgets/ScreenShield.vala"
	(*dest).session = _tmp1_;
#line 38 "../src/Widgets/ScreenShield.vala"
	_tmp2_ = (*self).objectpath;
#line 38 "../src/Widgets/ScreenShield.vala"
	_tmp3_ = g_strdup (_tmp2_);
#line 38 "../src/Widgets/ScreenShield.vala"
	_g_free0 ((*dest).objectpath);
#line 38 "../src/Widgets/ScreenShield.vala"
	(*dest).objectpath = _tmp3_;
#line 1763 "ScreenShield.c"
}

void
gala_login_display_destroy (GalaLoginDisplay* self)
{
#line 39 "../src/Widgets/ScreenShield.vala"
	_g_free0 ((*self).session);
#line 40 "../src/Widgets/ScreenShield.vala"
	_g_free0 ((*self).objectpath);
#line 1773 "ScreenShield.c"
}

GalaLoginDisplay*
gala_login_display_dup (const GalaLoginDisplay* self)
{
	GalaLoginDisplay* dup;
#line 38 "../src/Widgets/ScreenShield.vala"
	dup = g_new0 (GalaLoginDisplay, 1);
#line 38 "../src/Widgets/ScreenShield.vala"
	gala_login_display_copy (self, dup);
#line 38 "../src/Widgets/ScreenShield.vala"
	return dup;
#line 1786 "ScreenShield.c"
}

void
gala_login_display_free (GalaLoginDisplay* self)
{
#line 38 "../src/Widgets/ScreenShield.vala"
	gala_login_display_destroy (self);
#line 38 "../src/Widgets/ScreenShield.vala"
	g_free (self);
#line 1796 "ScreenShield.c"
}

 G_GNUC_NO_INLINE static GType
gala_login_display_get_type_once (void)
{
	GType gala_login_display_type_id;
	gala_login_display_type_id = g_boxed_type_register_static ("GalaLoginDisplay", (GBoxedCopyFunc) gala_login_display_dup, (GBoxedFreeFunc) gala_login_display_free);
	return gala_login_display_type_id;
}

GType
gala_login_display_get_type (void)
{
	static gsize gala_login_display_type_id__once = 0;
	if (g_once_init_enter (&gala_login_display_type_id__once)) {
		GType gala_login_display_type_id;
		gala_login_display_type_id = gala_login_display_get_type_once ();
		g_once_init_leave (&gala_login_display_type_id__once, gala_login_display_type_id);
	}
	return gala_login_display_type_id__once;
}

 G_GNUC_INTERNAL GalaLoginDisplay*
gala_login_user_manager_get_display (GalaLoginUserManager* self)
{
	GalaLoginUserManagerIface* _iface_;
#line 45 "../src/Widgets/ScreenShield.vala"
	g_return_val_if_fail (self != NULL, NULL);
#line 45 "../src/Widgets/ScreenShield.vala"
	_iface_ = GALA_LOGIN_USER_MANAGER_GET_INTERFACE (self);
#line 45 "../src/Widgets/ScreenShield.vala"
	if (_iface_->get_display) {
#line 45 "../src/Widgets/ScreenShield.vala"
		return _iface_->get_display (self);
#line 1831 "ScreenShield.c"
	}
#line 45 "../src/Widgets/ScreenShield.vala"
	return NULL;
#line 1835 "ScreenShield.c"
}

static void
gala_login_user_manager_default_init (GalaLoginUserManagerIface * iface,
                                      gpointer iface_data)
{
}

 G_GNUC_NO_INLINE static GType
gala_login_user_manager_get_type_once (void)
{
	static const GTypeInfo g_define_type_info = { sizeof (GalaLoginUserManagerIface), (GBaseInitFunc) NULL, (GBaseFinalizeFunc) NULL, (GClassInitFunc) gala_login_user_manager_default_init, (GClassFinalizeFunc) NULL, NULL, 0, 0, (GInstanceInitFunc) NULL, NULL };
	GType gala_login_user_manager_type_id;
	gala_login_user_manager_type_id = g_type_register_static (G_TYPE_INTERFACE, "GalaLoginUserManager", &g_define_type_info, 0);
	g_type_interface_add_prerequisite (gala_login_user_manager_type_id, G_TYPE_OBJECT);
	g_type_set_qdata (gala_login_user_manager_type_id, g_quark_from_static_string ("vala-dbus-proxy-type"), (void*) gala_login_user_manager_proxy_get_type);
	g_type_set_qdata (gala_login_user_manager_type_id, g_quark_from_static_string ("vala-dbus-interface-name"), "org.freedesktop.login1.User");
	g_type_set_qdata (gala_login_user_manager_type_id, g_quark_from_static_string ("vala-dbus-interface-info"), (void*) (&_gala_login_user_manager_dbus_interface_info));
	g_type_set_qdata (gala_login_user_manager_type_id, g_quark_from_static_string ("vala-dbus-register-object"), (void*) gala_login_user_manager_register_object);
	return gala_login_user_manager_type_id;
}

 G_GNUC_INTERNAL GType
gala_login_user_manager_get_type (void)
{
	static gsize gala_login_user_manager_type_id__once = 0;
	if (g_once_init_enter (&gala_login_user_manager_type_id__once)) {
		GType gala_login_user_manager_type_id;
		gala_login_user_manager_type_id = gala_login_user_manager_get_type_once ();
		g_once_init_leave (&gala_login_user_manager_type_id__once, gala_login_user_manager_type_id);
	}
	return gala_login_user_manager_type_id__once;
}

G_DEFINE_TYPE_EXTENDED (GalaLoginUserManagerProxy, gala_login_user_manager_proxy, G_TYPE_DBUS_PROXY, 0, G_IMPLEMENT_INTERFACE (GALA_TYPE_LOGIN_USER_MANAGER, gala_login_user_manager_proxy_gala_login_user_manager_interface_init) )
static void
gala_login_user_manager_proxy_class_init (GalaLoginUserManagerProxyClass* klass)
{
#line 21 "../src/PluginManager.vala"
	G_DBUS_PROXY_CLASS (klass)->g_signal = gala_login_user_manager_proxy_g_signal;
#line 1876 "ScreenShield.c"
}

static void
gala_login_user_manager_proxy_g_signal (GDBusProxy* proxy,
                                        const gchar* sender_name,
                                        const gchar* signal_name,
                                        GVariant* parameters)
{
}

static void
gala_login_user_manager_proxy_init (GalaLoginUserManagerProxy* self)
{
#line 21 "../src/PluginManager.vala"
	g_dbus_proxy_set_interface_info (G_DBUS_PROXY (self), (GDBusInterfaceInfo *) (&_gala_login_user_manager_dbus_interface_info));
#line 1892 "ScreenShield.c"
}

static GalaLoginDisplay*
gala_login_user_manager_dbus_proxy_get_display (GalaLoginUserManager* self)
{
	GVariant *_inner_reply;
	GalaLoginDisplay* _result;
	GalaLoginDisplay _tmp150_;
	GVariantIter _tmp151_;
	GVariant* _tmp152_;
	GVariant* _tmp153_;
#line 21 "../src/PluginManager.vala"
	_inner_reply = g_dbus_proxy_get_cached_property ((GDBusProxy *) self, "Display");
#line 21 "../src/PluginManager.vala"
	if (!_inner_reply) {
#line 1908 "ScreenShield.c"
		GVariant *_arguments;
		GVariant *_reply;
		GVariantBuilder _arguments_builder;
#line 21 "../src/PluginManager.vala"
		g_variant_builder_init (&_arguments_builder, G_VARIANT_TYPE_TUPLE);
#line 21 "../src/PluginManager.vala"
		g_variant_builder_add_value (&_arguments_builder, g_variant_new_string ("org.freedesktop.login1.User"));
#line 21 "../src/PluginManager.vala"
		g_variant_builder_add_value (&_arguments_builder, g_variant_new_string ("Display"));
#line 21 "../src/PluginManager.vala"
		_arguments = g_variant_builder_end (&_arguments_builder);
#line 21 "../src/PluginManager.vala"
		_reply = g_dbus_proxy_call_sync ((GDBusProxy *) self, "org.freedesktop.DBus.Properties.Get", _arguments, G_DBUS_CALL_FLAGS_NONE, -1, NULL, NULL);
#line 21 "../src/PluginManager.vala"
		if (!_reply) {
#line 21 "../src/PluginManager.vala"
			return NULL;
#line 1926 "ScreenShield.c"
		}
#line 21 "../src/PluginManager.vala"
		g_variant_get (_reply, "(v)", &_inner_reply);
#line 21 "../src/PluginManager.vala"
		g_variant_unref (_reply);
#line 1932 "ScreenShield.c"
	}
#line 21 "../src/PluginManager.vala"
	g_variant_iter_init (&_tmp151_, _inner_reply);
#line 21 "../src/PluginManager.vala"
	_tmp152_ = g_variant_iter_next_value (&_tmp151_);
#line 21 "../src/PluginManager.vala"
	_tmp150_.session = g_variant_dup_string (_tmp152_, NULL);
#line 21 "../src/PluginManager.vala"
	g_variant_unref (_tmp152_);
#line 21 "../src/PluginManager.vala"
	_tmp153_ = g_variant_iter_next_value (&_tmp151_);
#line 21 "../src/PluginManager.vala"
	_tmp150_.objectpath = g_variant_dup_string (_tmp153_, NULL);
#line 21 "../src/PluginManager.vala"
	g_variant_unref (_tmp153_);
#line 21 "../src/PluginManager.vala"
	_result = g_memdup2 (&_tmp150_, sizeof (GalaLoginDisplay));
#line 21 "../src/PluginManager.vala"
	g_variant_unref (_inner_reply);
#line 21 "../src/PluginManager.vala"
	return _result;
#line 1954 "ScreenShield.c"
}

static void
gala_login_user_manager_proxy_gala_login_user_manager_interface_init (GalaLoginUserManagerIface* iface)
{
#line 21 "../src/PluginManager.vala"
	iface->get_display = gala_login_user_manager_dbus_proxy_get_display;
#line 1962 "ScreenShield.c"
}

static void
gala_login_user_manager_dbus_interface_method_call (GDBusConnection* connection,
                                                    const gchar* sender,
                                                    const gchar* object_path,
                                                    const gchar* interface_name,
                                                    const gchar* method_name,
                                                    GVariant* parameters,
                                                    GDBusMethodInvocation* invocation,
                                                    gpointer user_data)
{
	gpointer* data;
	gpointer object;
	data = user_data;
	object = data[0];
#line 21 "../src/PluginManager.vala"
	g_object_unref (invocation);
#line 1981 "ScreenShield.c"
}

static GVariant*
_dbus_gala_login_user_manager_get_display (GalaLoginUserManager* self)
{
	GalaLoginDisplay* result;
	GVariant* _reply;
	GVariantBuilder _tmp154_;
#line 21 "../src/PluginManager.vala"
	result = gala_login_user_manager_get_display (self);
#line 21 "../src/PluginManager.vala"
	g_variant_builder_init (&_tmp154_, G_VARIANT_TYPE_TUPLE);
#line 21 "../src/PluginManager.vala"
	g_variant_builder_add_value (&_tmp154_, g_variant_new_string ((*result).session));
#line 21 "../src/PluginManager.vala"
	g_variant_builder_add_value (&_tmp154_, g_variant_new_object_path ((*result).objectpath));
#line 21 "../src/PluginManager.vala"
	_reply = g_variant_builder_end (&_tmp154_);
#line 21 "../src/PluginManager.vala"
	_gala_login_display_free0 (result);
#line 21 "../src/PluginManager.vala"
	return _reply;
#line 2004 "ScreenShield.c"
}

static GVariant*
gala_login_user_manager_dbus_interface_get_property (GDBusConnection* connection,
                                                     const gchar* sender,
                                                     const gchar* object_path,
                                                     const gchar* interface_name,
                                                     const gchar* property_name,
                                                     GError** error,
                                                     gpointer user_data)
{
	gpointer* data;
	gpointer object;
	data = user_data;
	object = data[0];
#line 21 "../src/PluginManager.vala"
	if (strcmp (property_name, "Display") == 0) {
#line 21 "../src/PluginManager.vala"
		return _dbus_gala_login_user_manager_get_display (object);
#line 2024 "ScreenShield.c"
	}
#line 21 "../src/PluginManager.vala"
	return NULL;
#line 2028 "ScreenShield.c"
}

static gboolean
gala_login_user_manager_dbus_interface_set_property (GDBusConnection* connection,
                                                     const gchar* sender,
                                                     const gchar* object_path,
                                                     const gchar* interface_name,
                                                     const gchar* property_name,
                                                     GVariant* value,
                                                     GError** error,
                                                     gpointer user_data)
{
	gpointer* data;
	gpointer object;
	data = user_data;
	object = data[0];
#line 21 "../src/PluginManager.vala"
	return FALSE;
#line 2047 "ScreenShield.c"
}

 G_GNUC_INTERNAL guint
gala_login_user_manager_register_object (gpointer object,
                                         GDBusConnection* connection,
                                         const gchar* path,
                                         GError** error)
{
	guint result;
	gpointer *data;
#line 21 "../src/PluginManager.vala"
	data = g_new (gpointer, 3);
#line 21 "../src/PluginManager.vala"
	data[0] = g_object_ref (object);
#line 21 "../src/PluginManager.vala"
	data[1] = g_object_ref (connection);
#line 21 "../src/PluginManager.vala"
	data[2] = g_strdup (path);
#line 21 "../src/PluginManager.vala"
	result = g_dbus_connection_register_object (connection, path, (GDBusInterfaceInfo *) (&_gala_login_user_manager_dbus_interface_info), &_gala_login_user_manager_dbus_interface_vtable, data, _gala_login_user_manager_unregister_object, error);
#line 21 "../src/PluginManager.vala"
	if (!result) {
#line 21 "../src/PluginManager.vala"
		return 0;
#line 2072 "ScreenShield.c"
	}
#line 21 "../src/PluginManager.vala"
	return result;
#line 2076 "ScreenShield.c"
}

static void
_gala_login_user_manager_unregister_object (gpointer user_data)
{
	gpointer* data;
	data = user_data;
#line 21 "../src/PluginManager.vala"
	g_object_unref (data[0]);
#line 21 "../src/PluginManager.vala"
	g_object_unref (data[1]);
#line 21 "../src/PluginManager.vala"
	g_free (data[2]);
#line 21 "../src/PluginManager.vala"
	g_free (data);
#line 2092 "ScreenShield.c"
}

 G_GNUC_NO_INLINE static GType
gala_presence_status_get_type_once (void)
{
	static const GEnumValue values[] = {{GALA_PRESENCE_STATUS_AVAILABLE, "GALA_PRESENCE_STATUS_AVAILABLE", "available"}, {GALA_PRESENCE_STATUS_INVISIBLE, "GALA_PRESENCE_STATUS_INVISIBLE", "invisible"}, {GALA_PRESENCE_STATUS_BUSY, "GALA_PRESENCE_STATUS_BUSY", "busy"}, {GALA_PRESENCE_STATUS_IDLE, "GALA_PRESENCE_STATUS_IDLE", "idle"}, {0, NULL, NULL}};
	GType gala_presence_status_type_id;
	gala_presence_status_type_id = g_enum_register_static ("GalaPresenceStatus", values);
	return gala_presence_status_type_id;
}

 G_GNUC_INTERNAL GType
gala_presence_status_get_type (void)
{
	static gsize gala_presence_status_type_id__once = 0;
	if (g_once_init_enter (&gala_presence_status_type_id__once)) {
		GType gala_presence_status_type_id;
		gala_presence_status_type_id = gala_presence_status_get_type_once ();
		g_once_init_leave (&gala_presence_status_type_id__once, gala_presence_status_type_id);
	}
	return gala_presence_status_type_id__once;
}

 G_GNUC_INTERNAL GalaPresenceStatus
gala_session_presence_get_status (GalaSessionPresence* self)
{
	GalaSessionPresenceIface* _iface_;
#line 58 "../src/Widgets/ScreenShield.vala"
	g_return_val_if_fail (self != NULL, 0);
#line 58 "../src/Widgets/ScreenShield.vala"
	_iface_ = GALA_SESSION_PRESENCE_GET_INTERFACE (self);
#line 58 "../src/Widgets/ScreenShield.vala"
	if (_iface_->get_status) {
#line 58 "../src/Widgets/ScreenShield.vala"
		return _iface_->get_status (self);
#line 2128 "ScreenShield.c"
	}
#line 58 "../src/Widgets/ScreenShield.vala"
	return 0;
#line 2132 "ScreenShield.c"
}

static void
gala_session_presence_default_init (GalaSessionPresenceIface * iface,
                                    gpointer iface_data)
{
#line 57 "../src/Widgets/ScreenShield.vala"
	gala_session_presence_signals[GALA_SESSION_PRESENCE_STATUS_CHANGED_SIGNAL] = g_signal_new ("status-changed", GALA_TYPE_SESSION_PRESENCE, G_SIGNAL_RUN_LAST, 0, NULL, NULL, g_cclosure_marshal_VOID__ENUM, G_TYPE_NONE, 1, GALA_TYPE_PRESENCE_STATUS);
#line 2141 "ScreenShield.c"
}

 G_GNUC_NO_INLINE static GType
gala_session_presence_get_type_once (void)
{
	static const GTypeInfo g_define_type_info = { sizeof (GalaSessionPresenceIface), (GBaseInitFunc) NULL, (GBaseFinalizeFunc) NULL, (GClassInitFunc) gala_session_presence_default_init, (GClassFinalizeFunc) NULL, NULL, 0, 0, (GInstanceInitFunc) NULL, NULL };
	GType gala_session_presence_type_id;
	gala_session_presence_type_id = g_type_register_static (G_TYPE_INTERFACE, "GalaSessionPresence", &g_define_type_info, 0);
	g_type_interface_add_prerequisite (gala_session_presence_type_id, G_TYPE_OBJECT);
	g_type_set_qdata (gala_session_presence_type_id, g_quark_from_static_string ("vala-dbus-proxy-type"), (void*) gala_session_presence_proxy_get_type);
	g_type_set_qdata (gala_session_presence_type_id, g_quark_from_static_string ("vala-dbus-interface-name"), "org.gnome.SessionManager.Presence");
	g_type_set_qdata (gala_session_presence_type_id, g_quark_from_static_string ("vala-dbus-interface-info"), (void*) (&_gala_session_presence_dbus_interface_info));
	g_type_set_qdata (gala_session_presence_type_id, g_quark_from_static_string ("vala-dbus-register-object"), (void*) gala_session_presence_register_object);
	return gala_session_presence_type_id;
}

 G_GNUC_INTERNAL GType
gala_session_presence_get_type (void)
{
	static gsize gala_session_presence_type_id__once = 0;
	if (g_once_init_enter (&gala_session_presence_type_id__once)) {
		GType gala_session_presence_type_id;
		gala_session_presence_type_id = gala_session_presence_get_type_once ();
		g_once_init_leave (&gala_session_presence_type_id__once, gala_session_presence_type_id);
	}
	return gala_session_presence_type_id__once;
}

G_DEFINE_TYPE_EXTENDED (GalaSessionPresenceProxy, gala_session_presence_proxy, G_TYPE_DBUS_PROXY, 0, G_IMPLEMENT_INTERFACE (GALA_TYPE_SESSION_PRESENCE, gala_session_presence_proxy_gala_session_presence_interface_init) )
static void
gala_session_presence_proxy_class_init (GalaSessionPresenceProxyClass* klass)
{
#line 21 "../src/PluginManager.vala"
	G_DBUS_PROXY_CLASS (klass)->g_signal = gala_session_presence_proxy_g_signal;
#line 2176 "ScreenShield.c"
}

static void
_dbus_handle_gala_session_presence_status_changed (GalaSessionPresence* self,
                                                   GVariant* parameters)
{
	GVariantIter _arguments_iter;
	GalaPresenceStatus new_status = 0;
	GVariant* _tmp155_;
#line 21 "../src/PluginManager.vala"
	g_variant_iter_init (&_arguments_iter, parameters);
#line 21 "../src/PluginManager.vala"
	_tmp155_ = g_variant_iter_next_value (&_arguments_iter);
#line 21 "../src/PluginManager.vala"
	new_status = g_variant_get_uint32 (_tmp155_);
#line 21 "../src/PluginManager.vala"
	g_variant_unref (_tmp155_);
#line 21 "../src/PluginManager.vala"
	g_signal_emit_by_name (self, "status-changed", new_status);
#line 2196 "ScreenShield.c"
}

static void
gala_session_presence_proxy_g_signal (GDBusProxy* proxy,
                                      const gchar* sender_name,
                                      const gchar* signal_name,
                                      GVariant* parameters)
{
#line 21 "../src/PluginManager.vala"
	if (strcmp (signal_name, "StatusChanged") == 0) {
#line 21 "../src/PluginManager.vala"
		_dbus_handle_gala_session_presence_status_changed ((GalaSessionPresence*) proxy, parameters);
#line 2209 "ScreenShield.c"
	}
}

static void
gala_session_presence_proxy_init (GalaSessionPresenceProxy* self)
{
#line 21 "../src/PluginManager.vala"
	g_dbus_proxy_set_interface_info (G_DBUS_PROXY (self), (GDBusInterfaceInfo *) (&_gala_session_presence_dbus_interface_info));
#line 2218 "ScreenShield.c"
}

static GalaPresenceStatus
gala_session_presence_dbus_proxy_get_status (GalaSessionPresence* self)
{
	GVariant *_inner_reply;
	GalaPresenceStatus _result;
#line 21 "../src/PluginManager.vala"
	_inner_reply = g_dbus_proxy_get_cached_property ((GDBusProxy *) self, "Status");
#line 21 "../src/PluginManager.vala"
	if (!_inner_reply) {
#line 2230 "ScreenShield.c"
		GVariant *_arguments;
		GVariant *_reply;
		GVariantBuilder _arguments_builder;
#line 21 "../src/PluginManager.vala"
		g_variant_builder_init (&_arguments_builder, G_VARIANT_TYPE_TUPLE);
#line 21 "../src/PluginManager.vala"
		g_variant_builder_add_value (&_arguments_builder, g_variant_new_string ("org.gnome.SessionManager.Presence"));
#line 21 "../src/PluginManager.vala"
		g_variant_builder_add_value (&_arguments_builder, g_variant_new_string ("Status"));
#line 21 "../src/PluginManager.vala"
		_arguments = g_variant_builder_end (&_arguments_builder);
#line 21 "../src/PluginManager.vala"
		_reply = g_dbus_proxy_call_sync ((GDBusProxy *) self, "org.freedesktop.DBus.Properties.Get", _arguments, G_DBUS_CALL_FLAGS_NONE, -1, NULL, NULL);
#line 21 "../src/PluginManager.vala"
		if (!_reply) {
#line 21 "../src/PluginManager.vala"
			return 0;
#line 2248 "ScreenShield.c"
		}
#line 21 "../src/PluginManager.vala"
		g_variant_get (_reply, "(v)", &_inner_reply);
#line 21 "../src/PluginManager.vala"
		g_variant_unref (_reply);
#line 2254 "ScreenShield.c"
	}
#line 21 "../src/PluginManager.vala"
	_result = g_variant_get_uint32 (_inner_reply);
#line 21 "../src/PluginManager.vala"
	g_variant_unref (_inner_reply);
#line 21 "../src/PluginManager.vala"
	return _result;
#line 2262 "ScreenShield.c"
}

static void
gala_session_presence_proxy_gala_session_presence_interface_init (GalaSessionPresenceIface* iface)
{
#line 21 "../src/PluginManager.vala"
	iface->get_status = gala_session_presence_dbus_proxy_get_status;
#line 2270 "ScreenShield.c"
}

static void
gala_session_presence_dbus_interface_method_call (GDBusConnection* connection,
                                                  const gchar* sender,
                                                  const gchar* object_path,
                                                  const gchar* interface_name,
                                                  const gchar* method_name,
                                                  GVariant* parameters,
                                                  GDBusMethodInvocation* invocation,
                                                  gpointer user_data)
{
	gpointer* data;
	gpointer object;
	data = user_data;
	object = data[0];
#line 21 "../src/PluginManager.vala"
	g_object_unref (invocation);
#line 2289 "ScreenShield.c"
}

static GVariant*
_dbus_gala_session_presence_get_status (GalaSessionPresence* self)
{
	GalaPresenceStatus result;
	GVariant* _reply;
#line 21 "../src/PluginManager.vala"
	result = gala_session_presence_get_status (self);
#line 21 "../src/PluginManager.vala"
	_reply = g_variant_new_uint32 (result);
#line 21 "../src/PluginManager.vala"
	return _reply;
#line 2303 "ScreenShield.c"
}

static GVariant*
gala_session_presence_dbus_interface_get_property (GDBusConnection* connection,
                                                   const gchar* sender,
                                                   const gchar* object_path,
                                                   const gchar* interface_name,
                                                   const gchar* property_name,
                                                   GError** error,
                                                   gpointer user_data)
{
	gpointer* data;
	gpointer object;
	data = user_data;
	object = data[0];
#line 21 "../src/PluginManager.vala"
	if (strcmp (property_name, "Status") == 0) {
#line 21 "../src/PluginManager.vala"
		return _dbus_gala_session_presence_get_status (object);
#line 2323 "ScreenShield.c"
	}
#line 21 "../src/PluginManager.vala"
	return NULL;
#line 2327 "ScreenShield.c"
}

static gboolean
gala_session_presence_dbus_interface_set_property (GDBusConnection* connection,
                                                   const gchar* sender,
                                                   const gchar* object_path,
                                                   const gchar* interface_name,
                                                   const gchar* property_name,
                                                   GVariant* value,
                                                   GError** error,
                                                   gpointer user_data)
{
	gpointer* data;
	gpointer object;
	data = user_data;
	object = data[0];
#line 21 "../src/PluginManager.vala"
	return FALSE;
#line 2346 "ScreenShield.c"
}

static void
_dbus_gala_session_presence_status_changed (GObject* _sender,
                                            GalaPresenceStatus new_status,
                                            gpointer* _data)
{
	GDBusConnection * _connection;
	const gchar * _path;
	GVariant *_arguments;
	GVariantBuilder _arguments_builder;
	_connection = _data[1];
	_path = _data[2];
#line 21 "../src/PluginManager.vala"
	g_variant_builder_init (&_arguments_builder, G_VARIANT_TYPE_TUPLE);
#line 21 "../src/PluginManager.vala"
	g_variant_builder_add_value (&_arguments_builder, g_variant_new_uint32 (new_status));
#line 21 "../src/PluginManager.vala"
	_arguments = g_variant_builder_end (&_arguments_builder);
#line 21 "../src/PluginManager.vala"
	g_dbus_connection_emit_signal (_connection, NULL, _path, "org.gnome.SessionManager.Presence", "StatusChanged", _arguments, NULL);
#line 2368 "ScreenShield.c"
}

 G_GNUC_INTERNAL guint
gala_session_presence_register_object (gpointer object,
                                       GDBusConnection* connection,
                                       const gchar* path,
                                       GError** error)
{
	guint result;
	gpointer *data;
#line 21 "../src/PluginManager.vala"
	data = g_new (gpointer, 3);
#line 21 "../src/PluginManager.vala"
	data[0] = g_object_ref (object);
#line 21 "../src/PluginManager.vala"
	data[1] = g_object_ref (connection);
#line 21 "../src/PluginManager.vala"
	data[2] = g_strdup (path);
#line 21 "../src/PluginManager.vala"
	result = g_dbus_connection_register_object (connection, path, (GDBusInterfaceInfo *) (&_gala_session_presence_dbus_interface_info), &_gala_session_presence_dbus_interface_vtable, data, _gala_session_presence_unregister_object, error);
#line 21 "../src/PluginManager.vala"
	if (!result) {
#line 21 "../src/PluginManager.vala"
		return 0;
#line 2393 "ScreenShield.c"
	}
#line 21 "../src/PluginManager.vala"
	g_signal_connect (object, "status-changed", (GCallback) _dbus_gala_session_presence_status_changed, data);
#line 21 "../src/PluginManager.vala"
	return result;
#line 2399 "ScreenShield.c"
}

static void
_gala_session_presence_unregister_object (gpointer user_data)
{
	gpointer* data;
	data = user_data;
#line 21 "../src/PluginManager.vala"
	g_signal_handlers_disconnect_by_func (data[0], _dbus_gala_session_presence_status_changed, data);
#line 21 "../src/PluginManager.vala"
	g_object_unref (data[0]);
#line 21 "../src/PluginManager.vala"
	g_object_unref (data[1]);
#line 21 "../src/PluginManager.vala"
	g_free (data[2]);
#line 21 "../src/PluginManager.vala"
	g_free (data);
#line 2417 "ScreenShield.c"
}

void
gala_display_manager_seat_switch_to_greeter (GalaDisplayManagerSeat* self,
                                             GError** error)
{
	GalaDisplayManagerSeatIface* _iface_;
#line 64 "../src/Widgets/ScreenShield.vala"
	g_return_if_fail (self != NULL);
#line 64 "../src/Widgets/ScreenShield.vala"
	_iface_ = GALA_DISPLAY_MANAGER_SEAT_GET_INTERFACE (self);
#line 64 "../src/Widgets/ScreenShield.vala"
	if (_iface_->switch_to_greeter) {
#line 64 "../src/Widgets/ScreenShield.vala"
		_iface_->switch_to_greeter (self, error);
#line 2433 "ScreenShield.c"
	}
}

static void
gala_display_manager_seat_default_init (GalaDisplayManagerSeatIface * iface,
                                        gpointer iface_data)
{
}

 G_GNUC_NO_INLINE static GType
gala_display_manager_seat_get_type_once (void)
{
	static const GTypeInfo g_define_type_info = { sizeof (GalaDisplayManagerSeatIface), (GBaseInitFunc) NULL, (GBaseFinalizeFunc) NULL, (GClassInitFunc) gala_display_manager_seat_default_init, (GClassFinalizeFunc) NULL, NULL, 0, 0, (GInstanceInitFunc) NULL, NULL };
	GType gala_display_manager_seat_type_id;
	gala_display_manager_seat_type_id = g_type_register_static (G_TYPE_INTERFACE, "GalaDisplayManagerSeat", &g_define_type_info, 0);
	g_type_interface_add_prerequisite (gala_display_manager_seat_type_id, G_TYPE_OBJECT);
	g_type_set_qdata (gala_display_manager_seat_type_id, g_quark_from_static_string ("vala-dbus-proxy-type"), (void*) gala_display_manager_seat_proxy_get_type);
	g_type_set_qdata (gala_display_manager_seat_type_id, g_quark_from_static_string ("vala-dbus-interface-name"), "org.freedesktop.DisplayManager.Seat");
	g_type_set_qdata (gala_display_manager_seat_type_id, g_quark_from_static_string ("vala-dbus-interface-info"), (void*) (&_gala_display_manager_seat_dbus_interface_info));
	g_type_set_qdata (gala_display_manager_seat_type_id, g_quark_from_static_string ("vala-dbus-register-object"), (void*) gala_display_manager_seat_register_object);
	return gala_display_manager_seat_type_id;
}

 G_GNUC_INTERNAL GType
gala_display_manager_seat_get_type (void)
{
	static gsize gala_display_manager_seat_type_id__once = 0;
	if (g_once_init_enter (&gala_display_manager_seat_type_id__once)) {
		GType gala_display_manager_seat_type_id;
		gala_display_manager_seat_type_id = gala_display_manager_seat_get_type_once ();
		g_once_init_leave (&gala_display_manager_seat_type_id__once, gala_display_manager_seat_type_id);
	}
	return gala_display_manager_seat_type_id__once;
}

G_DEFINE_TYPE_EXTENDED (GalaDisplayManagerSeatProxy, gala_display_manager_seat_proxy, G_TYPE_DBUS_PROXY, 0, G_IMPLEMENT_INTERFACE (GALA_TYPE_DISPLAY_MANAGER_SEAT, gala_display_manager_seat_proxy_gala_display_manager_seat_interface_init) )
static void
gala_display_manager_seat_proxy_class_init (GalaDisplayManagerSeatProxyClass* klass)
{
#line 21 "../src/PluginManager.vala"
	G_DBUS_PROXY_CLASS (klass)->g_signal = gala_display_manager_seat_proxy_g_signal;
#line 2475 "ScreenShield.c"
}

static void
gala_display_manager_seat_proxy_g_signal (GDBusProxy* proxy,
                                          const gchar* sender_name,
                                          const gchar* signal_name,
                                          GVariant* parameters)
{
}

static void
gala_display_manager_seat_proxy_init (GalaDisplayManagerSeatProxy* self)
{
#line 21 "../src/PluginManager.vala"
	g_dbus_proxy_set_interface_info (G_DBUS_PROXY (self), (GDBusInterfaceInfo *) (&_gala_display_manager_seat_dbus_interface_info));
#line 2491 "ScreenShield.c"
}

static void
gala_display_manager_seat_proxy_switch_to_greeter (GalaDisplayManagerSeat* self,
                                                   GError** error)
{
	GDBusMessage *_message;
	GVariant *_arguments;
	GVariantBuilder _arguments_builder;
	GDBusMessage *_reply_message;
#line 21 "../src/PluginManager.vala"
	_message = g_dbus_message_new_method_call (g_dbus_proxy_get_name ((GDBusProxy *) self), g_dbus_proxy_get_object_path ((GDBusProxy *) self), "org.freedesktop.DisplayManager.Seat", "SwitchToGreeter");
#line 21 "../src/PluginManager.vala"
	g_variant_builder_init (&_arguments_builder, G_VARIANT_TYPE_TUPLE);
#line 21 "../src/PluginManager.vala"
	_arguments = g_variant_builder_end (&_arguments_builder);
#line 21 "../src/PluginManager.vala"
	g_dbus_message_set_body (_message, _arguments);
#line 21 "../src/PluginManager.vala"
	_reply_message = g_dbus_connection_send_message_with_reply_sync (g_dbus_proxy_get_connection ((GDBusProxy *) self), _message, G_DBUS_SEND_MESSAGE_FLAGS_NONE, g_dbus_proxy_get_default_timeout ((GDBusProxy *) self), NULL, NULL, error);
#line 21 "../src/PluginManager.vala"
	g_object_unref (_message);
#line 21 "../src/PluginManager.vala"
	if (!_reply_message) {
#line 21 "../src/PluginManager.vala"
		return;
#line 2518 "ScreenShield.c"
	}
#line 21 "../src/PluginManager.vala"
	if (g_dbus_message_to_gerror (_reply_message, error)) {
#line 21 "../src/PluginManager.vala"
		g_object_unref (_reply_message);
#line 21 "../src/PluginManager.vala"
		return;
#line 2526 "ScreenShield.c"
	}
#line 21 "../src/PluginManager.vala"
	g_object_unref (_reply_message);
#line 2530 "ScreenShield.c"
}

static void
gala_display_manager_seat_proxy_gala_display_manager_seat_interface_init (GalaDisplayManagerSeatIface* iface)
{
#line 21 "../src/PluginManager.vala"
	iface->switch_to_greeter = gala_display_manager_seat_proxy_switch_to_greeter;
#line 2538 "ScreenShield.c"
}

static void
_dbus_gala_display_manager_seat_switch_to_greeter (GalaDisplayManagerSeat* self,
                                                   GVariant* _parameters_,
                                                   GDBusMethodInvocation* invocation)
{
	GError* error = NULL;
	GVariantIter _arguments_iter;
	GDBusMessage* _reply_message = NULL;
	GVariant* _reply;
	GVariantBuilder _reply_builder;
#line 21 "../src/PluginManager.vala"
	g_variant_iter_init (&_arguments_iter, _parameters_);
#line 21 "../src/PluginManager.vala"
	gala_display_manager_seat_switch_to_greeter (self, &error);
#line 21 "../src/PluginManager.vala"
	if (error) {
#line 21 "../src/PluginManager.vala"
		g_dbus_method_invocation_take_error (invocation, error);
#line 21 "../src/PluginManager.vala"
		return;
#line 2561 "ScreenShield.c"
	}
#line 21 "../src/PluginManager.vala"
	_reply_message = g_dbus_message_new_method_reply (g_dbus_method_invocation_get_message (invocation));
#line 21 "../src/PluginManager.vala"
	g_variant_builder_init (&_reply_builder, G_VARIANT_TYPE_TUPLE);
#line 21 "../src/PluginManager.vala"
	_reply = g_variant_builder_end (&_reply_builder);
#line 21 "../src/PluginManager.vala"
	g_dbus_message_set_body (_reply_message, _reply);
#line 21 "../src/PluginManager.vala"
	g_dbus_connection_send_message (g_dbus_method_invocation_get_connection (invocation), _reply_message, G_DBUS_SEND_MESSAGE_FLAGS_NONE, NULL, NULL);
#line 21 "../src/PluginManager.vala"
	g_object_unref (invocation);
#line 21 "../src/PluginManager.vala"
	g_object_unref (_reply_message);
#line 2577 "ScreenShield.c"
}

static void
gala_display_manager_seat_dbus_interface_method_call (GDBusConnection* connection,
                                                      const gchar* sender,
                                                      const gchar* object_path,
                                                      const gchar* interface_name,
                                                      const gchar* method_name,
                                                      GVariant* parameters,
                                                      GDBusMethodInvocation* invocation,
                                                      gpointer user_data)
{
	gpointer* data;
	gpointer object;
	data = user_data;
	object = data[0];
#line 21 "../src/PluginManager.vala"
	if (strcmp (method_name, "SwitchToGreeter") == 0) {
#line 21 "../src/PluginManager.vala"
		_dbus_gala_display_manager_seat_switch_to_greeter (object, parameters, invocation);
#line 2598 "ScreenShield.c"
	} else {
#line 21 "../src/PluginManager.vala"
		g_object_unref (invocation);
#line 2602 "ScreenShield.c"
	}
}

static GVariant*
gala_display_manager_seat_dbus_interface_get_property (GDBusConnection* connection,
                                                       const gchar* sender,
                                                       const gchar* object_path,
                                                       const gchar* interface_name,
                                                       const gchar* property_name,
                                                       GError** error,
                                                       gpointer user_data)
{
	gpointer* data;
	gpointer object;
	data = user_data;
	object = data[0];
#line 21 "../src/PluginManager.vala"
	return NULL;
#line 2621 "ScreenShield.c"
}

static gboolean
gala_display_manager_seat_dbus_interface_set_property (GDBusConnection* connection,
                                                       const gchar* sender,
                                                       const gchar* object_path,
                                                       const gchar* interface_name,
                                                       const gchar* property_name,
                                                       GVariant* value,
                                                       GError** error,
                                                       gpointer user_data)
{
	gpointer* data;
	gpointer object;
	data = user_data;
	object = data[0];
#line 21 "../src/PluginManager.vala"
	return FALSE;
#line 2640 "ScreenShield.c"
}

 G_GNUC_INTERNAL guint
gala_display_manager_seat_register_object (gpointer object,
                                           GDBusConnection* connection,
                                           const gchar* path,
                                           GError** error)
{
	guint result;
	gpointer *data;
#line 21 "../src/PluginManager.vala"
	data = g_new (gpointer, 3);
#line 21 "../src/PluginManager.vala"
	data[0] = g_object_ref (object);
#line 21 "../src/PluginManager.vala"
	data[1] = g_object_ref (connection);
#line 21 "../src/PluginManager.vala"
	data[2] = g_strdup (path);
#line 21 "../src/PluginManager.vala"
	result = g_dbus_connection_register_object (connection, path, (GDBusInterfaceInfo *) (&_gala_display_manager_seat_dbus_interface_info), &_gala_display_manager_seat_dbus_interface_vtable, data, _gala_display_manager_seat_unregister_object, error);
#line 21 "../src/PluginManager.vala"
	if (!result) {
#line 21 "../src/PluginManager.vala"
		return 0;
#line 2665 "ScreenShield.c"
	}
#line 21 "../src/PluginManager.vala"
	return result;
#line 2669 "ScreenShield.c"
}

static void
_gala_display_manager_seat_unregister_object (gpointer user_data)
{
	gpointer* data;
	data = user_data;
#line 21 "../src/PluginManager.vala"
	g_object_unref (data[0]);
#line 21 "../src/PluginManager.vala"
	g_object_unref (data[1]);
#line 21 "../src/PluginManager.vala"
	g_free (data[2]);
#line 21 "../src/PluginManager.vala"
	g_free (data);
#line 2685 "ScreenShield.c"
}

static inline gpointer
gala_screen_shield_get_instance_private (GalaScreenShield* self)
{
	return G_STRUCT_MEMBER_P (self, GalaScreenShield_private_offset);
}

GalaScreenShield*
gala_screen_shield_construct (GType object_type,
                              GalaWindowManager* wm)
{
	GalaScreenShield * self = NULL;
#line 108 "../src/Widgets/ScreenShield.vala"
	g_return_val_if_fail (wm != NULL, NULL);
#line 109 "../src/Widgets/ScreenShield.vala"
	self = (GalaScreenShield*) g_object_new (object_type, "wm", wm, NULL);
#line 108 "../src/Widgets/ScreenShield.vala"
	return self;
#line 2705 "ScreenShield.c"
}

GalaScreenShield*
gala_screen_shield_new (GalaWindowManager* wm)
{
#line 108 "../src/Widgets/ScreenShield.vala"
	return gala_screen_shield_construct (GALA_TYPE_SCREEN_SHIELD, wm);
#line 2713 "ScreenShield.c"
}

static void
gala_screen_shield_init_dbus_interfaces_data_free (gpointer _data)
{
	GalaScreenShieldInitDbusInterfacesData* _data_;
	_data_ = _data;
#line 67 "../src/Widgets/ScreenShield.vala"
	_g_object_unref0 (_data_->self);
#line 67 "../src/Widgets/ScreenShield.vala"
	g_slice_free (GalaScreenShieldInitDbusInterfacesData, _data_);
#line 2725 "ScreenShield.c"
}

static gpointer
_g_object_ref0 (gpointer self)
{
#line 67 "../src/Widgets/ScreenShield.vala"
	return self ? g_object_ref (self) : NULL;
#line 2733 "ScreenShield.c"
}

static void
gala_screen_shield_init_dbus_interfaces (GalaScreenShield* self,
                                         GAsyncReadyCallback _callback_,
                                         gpointer _user_data_)
{
	GalaScreenShieldInitDbusInterfacesData* _data_;
	GalaScreenShield* _tmp0_;
#line 67 "../src/Widgets/ScreenShield.vala"
	g_return_if_fail (self != NULL);
#line 67 "../src/Widgets/ScreenShield.vala"
	_data_ = g_slice_new0 (GalaScreenShieldInitDbusInterfacesData);
#line 67 "../src/Widgets/ScreenShield.vala"
	_data_->_async_result = g_task_new (G_OBJECT (self), NULL, _callback_, _user_data_);
#line 67 "../src/Widgets/ScreenShield.vala"
	g_task_set_task_data (_data_->_async_result, _data_, gala_screen_shield_init_dbus_interfaces_data_free);
#line 67 "../src/Widgets/ScreenShield.vala"
	_tmp0_ = _g_object_ref0 (self);
#line 67 "../src/Widgets/ScreenShield.vala"
	_data_->self = _tmp0_;
#line 67 "../src/Widgets/ScreenShield.vala"
	gala_screen_shield_init_dbus_interfaces_co (_data_);
#line 2757 "ScreenShield.c"
}

static void
gala_screen_shield_init_dbus_interfaces_finish (GalaScreenShield* self,
                                                GAsyncResult* _res_)
{
	GalaScreenShieldInitDbusInterfacesData* _data_;
#line 67 "../src/Widgets/ScreenShield.vala"
	_data_ = g_task_propagate_pointer (G_TASK (_res_), NULL);
#line 2767 "ScreenShield.c"
}

static void
gala_screen_shield_init_dbus_interfaces_ready (GObject* source_object,
                                               GAsyncResult* _res_,
                                               gpointer _user_data_)
{
	GalaScreenShieldInitDbusInterfacesData* _data_;
#line 147 "../src/Widgets/ScreenShield.vala"
	_data_ = _user_data_;
#line 147 "../src/Widgets/ScreenShield.vala"
	_data_->_source_object_ = source_object;
#line 147 "../src/Widgets/ScreenShield.vala"
	_data_->_res_ = _res_;
#line 147 "../src/Widgets/ScreenShield.vala"
	gala_screen_shield_init_dbus_interfaces_co (_data_);
#line 2784 "ScreenShield.c"
}

static void
_gala_screen_shield_prepare_for_sleep_gala_login_manager_prepare_for_sleep (GalaLoginManager* _sender,
                                                                            gboolean about_to_suspend,
                                                                            gpointer self)
{
#line 151 "../src/Widgets/ScreenShield.vala"
	gala_screen_shield_prepare_for_sleep ((GalaScreenShield*) self, about_to_suspend);
#line 2794 "ScreenShield.c"
}

static void
____lambda5_ (GalaScreenShield* self)
{
#line 155 "../src/Widgets/ScreenShield.vala"
	gala_screen_shield_lock (self, FALSE);
#line 2802 "ScreenShield.c"
}

static void
_____lambda5__gala_login_session_manager_lock (GalaLoginSessionManager* _sender,
                                               gpointer self)
{
#line 155 "../src/Widgets/ScreenShield.vala"
	____lambda5_ ((GalaScreenShield*) self);
#line 2811 "ScreenShield.c"
}

static void
____lambda6_ (GalaScreenShield* self)
{
#line 157 "../src/Widgets/ScreenShield.vala"
	gala_screen_shield_deactivate (self, FALSE);
#line 158 "../src/Widgets/ScreenShield.vala"
	gala_screen_shield_set_in_greeter (self, FALSE);
#line 2821 "ScreenShield.c"
}

static void
_____lambda6__gala_login_session_manager_unlock (GalaLoginSessionManager* _sender,
                                                 gpointer self)
{
#line 156 "../src/Widgets/ScreenShield.vala"
	____lambda6_ ((GalaScreenShield*) self);
#line 2830 "ScreenShield.c"
}

static void
_gala_screen_shield_sync_inhibitor_g_dbus_proxy_g_properties_changed (GDBusProxy* _sender,
                                                                      GVariant* changed_properties,
                                                                      gchar** invalidated_properties,
                                                                      gpointer self)
{
#line 161 "../src/Widgets/ScreenShield.vala"
	gala_screen_shield_sync_inhibitor ((GalaScreenShield*) self);
#line 2841 "ScreenShield.c"
}

static void
___lambda7_ (GalaScreenShield* self,
             GalaPresenceStatus status)
{
#line 172 "../src/Widgets/ScreenShield.vala"
	gala_screen_shield_on_status_changed (self, status);
#line 2850 "ScreenShield.c"
}

static void
____lambda7__gala_session_presence_status_changed (GalaSessionPresence* _sender,
                                                   GalaPresenceStatus new_status,
                                                   gpointer self)
{
#line 172 "../src/Widgets/ScreenShield.vala"
	___lambda7_ ((GalaScreenShield*) self, new_status);
#line 2860 "ScreenShield.c"
}

static gboolean
gala_screen_shield_init_dbus_interfaces_co (GalaScreenShieldInitDbusInterfacesData* _data_)
{
#line 143 "../src/Widgets/ScreenShield.vala"
	switch (_data_->_state_) {
#line 143 "../src/Widgets/ScreenShield.vala"
		case 0:
#line 2870 "ScreenShield.c"
		goto _state_0;
#line 143 "../src/Widgets/ScreenShield.vala"
		case 1:
#line 2874 "ScreenShield.c"
		goto _state_1;
#line 143 "../src/Widgets/ScreenShield.vala"
		case 2:
#line 2878 "ScreenShield.c"
		goto _state_2;
#line 143 "../src/Widgets/ScreenShield.vala"
		case 3:
#line 2882 "ScreenShield.c"
		goto _state_3;
#line 143 "../src/Widgets/ScreenShield.vala"
		case 4:
#line 2886 "ScreenShield.c"
		goto _state_4;
		default:
#line 143 "../src/Widgets/ScreenShield.vala"
		g_assert_not_reached ();
#line 2891 "ScreenShield.c"
	}
	_state_0:
#line 144 "../src/Widgets/ScreenShield.vala"
	_data_->success = TRUE;
#line 2896 "ScreenShield.c"
	{
#line 147 "../src/Widgets/ScreenShield.vala"
		_data_->_state_ = 1;
#line 147 "../src/Widgets/ScreenShield.vala"
		g_async_initable_new_async (GALA_TYPE_LOGIN_MANAGER_PROXY, 0, NULL, gala_screen_shield_init_dbus_interfaces_ready, _data_, "g-flags", 0, "g-name", "org.freedesktop.login1", "g-bus-type", G_BUS_TYPE_SYSTEM, "g-object-path", "/org/freedesktop/login1", "g-interface-name", "org.freedesktop.login1.Manager", NULL);
#line 147 "../src/Widgets/ScreenShield.vala"
		return FALSE;
#line 2904 "ScreenShield.c"
		_state_1:
#line 147 "../src/Widgets/ScreenShield.vala"
		_data_->_tmp1_ = (GalaLoginManager*) g_async_initable_new_finish ((GAsyncInitable *) _data_->_source_object_, _data_->_res_, &_data_->_inner_error0_);
#line 147 "../src/Widgets/ScreenShield.vala"
		_data_->_tmp0_ = (GalaLoginManager*) _data_->_tmp1_;
#line 147 "../src/Widgets/ScreenShield.vala"
		if (G_UNLIKELY (_data_->_inner_error0_ != NULL)) {
#line 2912 "ScreenShield.c"
			goto __catch0_g_error;
		}
#line 147 "../src/Widgets/ScreenShield.vala"
		_data_->_tmp2_ = _data_->_tmp0_;
#line 147 "../src/Widgets/ScreenShield.vala"
		_data_->_tmp0_ = NULL;
#line 147 "../src/Widgets/ScreenShield.vala"
		_g_object_unref0 (_data_->self->priv->login_manager);
#line 147 "../src/Widgets/ScreenShield.vala"
		_data_->self->priv->login_manager = _data_->_tmp2_;
#line 148 "../src/Widgets/ScreenShield.vala"
		_data_->_state_ = 2;
#line 148 "../src/Widgets/ScreenShield.vala"
		g_async_initable_new_async (GALA_TYPE_LOGIN_USER_MANAGER_PROXY, 0, NULL, gala_screen_shield_init_dbus_interfaces_ready, _data_, "g-flags", 0, "g-name", "org.freedesktop.login1", "g-bus-type", G_BUS_TYPE_SYSTEM, "g-object-path", "/org/freedesktop/login1/user/self", "g-interface-name", "org.freedesktop.login1.User", NULL);
#line 148 "../src/Widgets/ScreenShield.vala"
		return FALSE;
#line 2929 "ScreenShield.c"
		_state_2:
#line 148 "../src/Widgets/ScreenShield.vala"
		_data_->_tmp4_ = (GalaLoginUserManager*) g_async_initable_new_finish ((GAsyncInitable *) _data_->_source_object_, _data_->_res_, &_data_->_inner_error0_);
#line 148 "../src/Widgets/ScreenShield.vala"
		_data_->_tmp3_ = (GalaLoginUserManager*) _data_->_tmp4_;
#line 148 "../src/Widgets/ScreenShield.vala"
		if (G_UNLIKELY (_data_->_inner_error0_ != NULL)) {
#line 148 "../src/Widgets/ScreenShield.vala"
			_g_object_unref0 (_data_->_tmp0_);
#line 2939 "ScreenShield.c"
			goto __catch0_g_error;
		}
#line 148 "../src/Widgets/ScreenShield.vala"
		_data_->_tmp5_ = _data_->_tmp3_;
#line 148 "../src/Widgets/ScreenShield.vala"
		_data_->_tmp3_ = NULL;
#line 148 "../src/Widgets/ScreenShield.vala"
		_g_object_unref0 (_data_->self->priv->login_user_manager);
#line 148 "../src/Widgets/ScreenShield.vala"
		_data_->self->priv->login_user_manager = _data_->_tmp5_;
#line 151 "../src/Widgets/ScreenShield.vala"
		_data_->_tmp6_ = _data_->self->priv->login_manager;
#line 151 "../src/Widgets/ScreenShield.vala"
		g_signal_connect_object (_data_->_tmp6_, "prepare-for-sleep", (GCallback) _gala_screen_shield_prepare_for_sleep_gala_login_manager_prepare_for_sleep, _data_->self, 0);
#line 152 "../src/Widgets/ScreenShield.vala"
		_data_->_tmp8_ = gala_screen_shield_get_current_session_manager (_data_->self, &_data_->_inner_error0_);
#line 152 "../src/Widgets/ScreenShield.vala"
		_data_->_tmp7_ = _data_->_tmp8_;
#line 152 "../src/Widgets/ScreenShield.vala"
		if (G_UNLIKELY (_data_->_inner_error0_ != NULL)) {
#line 152 "../src/Widgets/ScreenShield.vala"
			_g_object_unref0 (_data_->_tmp3_);
#line 152 "../src/Widgets/ScreenShield.vala"
			_g_object_unref0 (_data_->_tmp0_);
#line 2964 "ScreenShield.c"
			goto __catch0_g_error;
		}
#line 152 "../src/Widgets/ScreenShield.vala"
		_data_->_tmp9_ = _data_->_tmp7_;
#line 152 "../src/Widgets/ScreenShield.vala"
		_data_->_tmp7_ = NULL;
#line 152 "../src/Widgets/ScreenShield.vala"
		_g_object_unref0 (_data_->self->priv->login_session);
#line 152 "../src/Widgets/ScreenShield.vala"
		_data_->self->priv->login_session = _data_->_tmp9_;
#line 153 "../src/Widgets/ScreenShield.vala"
		_data_->_tmp10_ = _data_->self->priv->login_session;
#line 153 "../src/Widgets/ScreenShield.vala"
		if (_data_->_tmp10_ != NULL) {
#line 155 "../src/Widgets/ScreenShield.vala"
			_data_->_tmp11_ = _data_->self->priv->login_session;
#line 155 "../src/Widgets/ScreenShield.vala"
			g_signal_connect_object (_data_->_tmp11_, "lock", (GCallback) _____lambda5__gala_login_session_manager_lock, _data_->self, 0);
#line 156 "../src/Widgets/ScreenShield.vala"
			_data_->_tmp12_ = _data_->self->priv->login_session;
#line 156 "../src/Widgets/ScreenShield.vala"
			g_signal_connect_object (_data_->_tmp12_, "unlock", (GCallback) _____lambda6__gala_login_session_manager_unlock, _data_->self, 0);
#line 161 "../src/Widgets/ScreenShield.vala"
			_data_->_tmp13_ = _data_->self->priv->login_session;
#line 161 "../src/Widgets/ScreenShield.vala"
			g_signal_connect_object (G_TYPE_CHECK_INSTANCE_CAST (_data_->_tmp13_, g_dbus_proxy_get_type (), GDBusProxy), "g-properties-changed", (GCallback) _gala_screen_shield_sync_inhibitor_g_dbus_proxy_g_properties_changed, _data_->self, 0);
#line 162 "../src/Widgets/ScreenShield.vala"
			gala_screen_shield_sync_inhibitor (_data_->self);
#line 2993 "ScreenShield.c"
		}
#line 146 "../src/Widgets/ScreenShield.vala"
		_g_object_unref0 (_data_->_tmp7_);
#line 146 "../src/Widgets/ScreenShield.vala"
		_g_object_unref0 (_data_->_tmp3_);
#line 146 "../src/Widgets/ScreenShield.vala"
		_g_object_unref0 (_data_->_tmp0_);
#line 3001 "ScreenShield.c"
	}
	goto __finally0;
	__catch0_g_error:
	{
#line 146 "../src/Widgets/ScreenShield.vala"
		_data_->e = _data_->_inner_error0_;
#line 146 "../src/Widgets/ScreenShield.vala"
		_data_->_inner_error0_ = NULL;
#line 165 "../src/Widgets/ScreenShield.vala"
		_data_->success = FALSE;
#line 166 "../src/Widgets/ScreenShield.vala"
		_data_->_tmp14_ = _data_->e;
#line 166 "../src/Widgets/ScreenShield.vala"
		_data_->_tmp15_ = _data_->_tmp14_->message;
#line 166 "../src/Widgets/ScreenShield.vala"
		g_critical ("ScreenShield.vala:166: Unable to connect to logind bus, screen locking" \
" disabled: %s", _data_->_tmp15_);
#line 146 "../src/Widgets/ScreenShield.vala"
		_g_error_free0 (_data_->e);
#line 3020 "ScreenShield.c"
	}
	__finally0:
#line 146 "../src/Widgets/ScreenShield.vala"
	if (G_UNLIKELY (_data_->_inner_error0_ != NULL)) {
#line 146 "../src/Widgets/ScreenShield.vala"
		g_critical ("file %s: line %d: uncaught error: %s (%s, %d)", __FILE__, __LINE__, _data_->_inner_error0_->message, g_quark_to_string (_data_->_inner_error0_->domain), _data_->_inner_error0_->code);
#line 146 "../src/Widgets/ScreenShield.vala"
		g_clear_error (&_data_->_inner_error0_);
#line 146 "../src/Widgets/ScreenShield.vala"
		g_object_unref (_data_->_async_result);
#line 146 "../src/Widgets/ScreenShield.vala"
		return FALSE;
#line 3033 "ScreenShield.c"
	}
	{
#line 170 "../src/Widgets/ScreenShield.vala"
		_data_->_state_ = 3;
#line 170 "../src/Widgets/ScreenShield.vala"
		g_async_initable_new_async (GALA_TYPE_SESSION_PRESENCE_PROXY, 0, NULL, gala_screen_shield_init_dbus_interfaces_ready, _data_, "g-flags", 0, "g-name", "org.gnome.SessionManager", "g-bus-type", G_BUS_TYPE_SESSION, "g-object-path", "/org/gnome/SessionManager/Presence", "g-interface-name", "org.gnome.SessionManager.Presence", NULL);
#line 170 "../src/Widgets/ScreenShield.vala"
		return FALSE;
#line 3042 "ScreenShield.c"
		_state_3:
#line 170 "../src/Widgets/ScreenShield.vala"
		_data_->_tmp17_ = (GalaSessionPresence*) g_async_initable_new_finish ((GAsyncInitable *) _data_->_source_object_, _data_->_res_, &_data_->_inner_error0_);
#line 170 "../src/Widgets/ScreenShield.vala"
		_data_->_tmp16_ = (GalaSessionPresence*) _data_->_tmp17_;
#line 170 "../src/Widgets/ScreenShield.vala"
		if (G_UNLIKELY (_data_->_inner_error0_ != NULL)) {
#line 3050 "ScreenShield.c"
			goto __catch1_g_error;
		}
#line 170 "../src/Widgets/ScreenShield.vala"
		_data_->_tmp18_ = _data_->_tmp16_;
#line 170 "../src/Widgets/ScreenShield.vala"
		_data_->_tmp16_ = NULL;
#line 170 "../src/Widgets/ScreenShield.vala"
		_g_object_unref0 (_data_->self->priv->session_presence);
#line 170 "../src/Widgets/ScreenShield.vala"
		_data_->self->priv->session_presence = _data_->_tmp18_;
#line 171 "../src/Widgets/ScreenShield.vala"
		_data_->_tmp19_ = _data_->self->priv->session_presence;
#line 171 "../src/Widgets/ScreenShield.vala"
		_data_->_tmp20_ = gala_session_presence_get_status (_data_->_tmp19_);
#line 171 "../src/Widgets/ScreenShield.vala"
		_data_->_tmp21_ = _data_->_tmp20_;
#line 171 "../src/Widgets/ScreenShield.vala"
		gala_screen_shield_on_status_changed (_data_->self, _data_->_tmp21_);
#line 172 "../src/Widgets/ScreenShield.vala"
		_data_->_tmp22_ = _data_->self->priv->session_presence;
#line 172 "../src/Widgets/ScreenShield.vala"
		g_signal_connect_object (_data_->_tmp22_, "status-changed", (GCallback) ____lambda7__gala_session_presence_status_changed, _data_->self, 0);
#line 169 "../src/Widgets/ScreenShield.vala"
		_g_object_unref0 (_data_->_tmp16_);
#line 3075 "ScreenShield.c"
	}
	goto __finally1;
	__catch1_g_error:
	{
#line 169 "../src/Widgets/ScreenShield.vala"
		_data_->_vala1_e = _data_->_inner_error0_;
#line 169 "../src/Widgets/ScreenShield.vala"
		_data_->_inner_error0_ = NULL;
#line 174 "../src/Widgets/ScreenShield.vala"
		_data_->success = FALSE;
#line 175 "../src/Widgets/ScreenShield.vala"
		_data_->_tmp23_ = _data_->_vala1_e;
#line 175 "../src/Widgets/ScreenShield.vala"
		_data_->_tmp24_ = _data_->_tmp23_->message;
#line 175 "../src/Widgets/ScreenShield.vala"
		g_critical ("ScreenShield.vala:175: Unable to connect to session presence bus, scre" \
"en locking disabled: %s", _data_->_tmp24_);
#line 169 "../src/Widgets/ScreenShield.vala"
		_g_error_free0 (_data_->_vala1_e);
#line 3094 "ScreenShield.c"
	}
	__finally1:
#line 169 "../src/Widgets/ScreenShield.vala"
	if (G_UNLIKELY (_data_->_inner_error0_ != NULL)) {
#line 169 "../src/Widgets/ScreenShield.vala"
		g_critical ("file %s: line %d: uncaught error: %s (%s, %d)", __FILE__, __LINE__, _data_->_inner_error0_->message, g_quark_to_string (_data_->_inner_error0_->domain), _data_->_inner_error0_->code);
#line 169 "../src/Widgets/ScreenShield.vala"
		g_clear_error (&_data_->_inner_error0_);
#line 169 "../src/Widgets/ScreenShield.vala"
		g_object_unref (_data_->_async_result);
#line 169 "../src/Widgets/ScreenShield.vala"
		return FALSE;
#line 3107 "ScreenShield.c"
	}
#line 179 "../src/Widgets/ScreenShield.vala"
	_data_->_tmp25_ = g_getenv ("XDG_SEAT_PATH");
#line 179 "../src/Widgets/ScreenShield.vala"
	_data_->_tmp26_ = g_strdup (_data_->_tmp25_);
#line 179 "../src/Widgets/ScreenShield.vala"
	_data_->seat_path = _data_->_tmp26_;
#line 180 "../src/Widgets/ScreenShield.vala"
	_data_->_tmp27_ = _data_->seat_path;
#line 180 "../src/Widgets/ScreenShield.vala"
	if (_data_->_tmp27_ != NULL) {
#line 3119 "ScreenShield.c"
		{
#line 182 "../src/Widgets/ScreenShield.vala"
			_data_->_tmp29_ = _data_->seat_path;
#line 182 "../src/Widgets/ScreenShield.vala"
			_data_->_state_ = 4;
#line 182 "../src/Widgets/ScreenShield.vala"
			g_async_initable_new_async (GALA_TYPE_DISPLAY_MANAGER_SEAT_PROXY, 0, NULL, gala_screen_shield_init_dbus_interfaces_ready, _data_, "g-flags", 0, "g-name", "org.freedesktop.DisplayManager", "g-bus-type", G_BUS_TYPE_SYSTEM, "g-object-path", _data_->_tmp29_, "g-interface-name", "org.freedesktop.DisplayManager.Seat", NULL);
#line 182 "../src/Widgets/ScreenShield.vala"
			return FALSE;
#line 3129 "ScreenShield.c"
			_state_4:
#line 182 "../src/Widgets/ScreenShield.vala"
			_data_->_tmp30_ = (GalaDisplayManagerSeat*) g_async_initable_new_finish ((GAsyncInitable *) _data_->_source_object_, _data_->_res_, &_data_->_inner_error0_);
#line 182 "../src/Widgets/ScreenShield.vala"
			_data_->_tmp28_ = (GalaDisplayManagerSeat*) _data_->_tmp30_;
#line 182 "../src/Widgets/ScreenShield.vala"
			if (G_UNLIKELY (_data_->_inner_error0_ != NULL)) {
#line 3137 "ScreenShield.c"
				goto __catch2_g_error;
			}
#line 182 "../src/Widgets/ScreenShield.vala"
			_data_->_tmp31_ = _data_->_tmp28_;
#line 182 "../src/Widgets/ScreenShield.vala"
			_data_->_tmp28_ = NULL;
#line 182 "../src/Widgets/ScreenShield.vala"
			_g_object_unref0 (_data_->self->priv->display_manager);
#line 182 "../src/Widgets/ScreenShield.vala"
			_data_->self->priv->display_manager = _data_->_tmp31_;
#line 181 "../src/Widgets/ScreenShield.vala"
			_g_object_unref0 (_data_->_tmp28_);
#line 3150 "ScreenShield.c"
		}
		goto __finally2;
		__catch2_g_error:
		{
#line 181 "../src/Widgets/ScreenShield.vala"
			g_clear_error (&_data_->_inner_error0_);
#line 184 "../src/Widgets/ScreenShield.vala"
			_data_->success = FALSE;
#line 185 "../src/Widgets/ScreenShield.vala"
			g_critical ("ScreenShield.vala:185: Unable to connect to display manager bus, scree" \
"n locking disabled");
#line 3161 "ScreenShield.c"
		}
		__finally2:
#line 181 "../src/Widgets/ScreenShield.vala"
		if (G_UNLIKELY (_data_->_inner_error0_ != NULL)) {
#line 181 "../src/Widgets/ScreenShield.vala"
			_g_free0 (_data_->seat_path);
#line 181 "../src/Widgets/ScreenShield.vala"
			g_critical ("file %s: line %d: uncaught error: %s (%s, %d)", __FILE__, __LINE__, _data_->_inner_error0_->message, g_quark_to_string (_data_->_inner_error0_->domain), _data_->_inner_error0_->code);
#line 181 "../src/Widgets/ScreenShield.vala"
			g_clear_error (&_data_->_inner_error0_);
#line 181 "../src/Widgets/ScreenShield.vala"
			g_object_unref (_data_->_async_result);
#line 181 "../src/Widgets/ScreenShield.vala"
			return FALSE;
#line 3176 "ScreenShield.c"
		}
	} else {
#line 188 "../src/Widgets/ScreenShield.vala"
		_data_->success = FALSE;
#line 189 "../src/Widgets/ScreenShield.vala"
		g_critical ("ScreenShield.vala:189: XDG_SEAT_PATH unset, screen locking disabled");
#line 3183 "ScreenShield.c"
	}
#line 192 "../src/Widgets/ScreenShield.vala"
	_data_->self->priv->connected_to_buses = _data_->success;
#line 143 "../src/Widgets/ScreenShield.vala"
	_g_free0 (_data_->seat_path);
#line 143 "../src/Widgets/ScreenShield.vala"
	g_task_return_pointer (_data_->_async_result, _data_, NULL);
#line 143 "../src/Widgets/ScreenShield.vala"
	if (_data_->_state_ != 0) {
#line 143 "../src/Widgets/ScreenShield.vala"
		while (!g_task_get_completed (_data_->_async_result)) {
#line 143 "../src/Widgets/ScreenShield.vala"
			g_main_context_iteration (g_task_get_context (_data_->_async_result), TRUE);
#line 3197 "ScreenShield.c"
		}
	}
#line 143 "../src/Widgets/ScreenShield.vala"
	g_object_unref (_data_->_async_result);
#line 143 "../src/Widgets/ScreenShield.vala"
	return FALSE;
#line 3204 "ScreenShield.c"
}

void
gala_screen_shield_expand_to_screen_size (GalaScreenShield* self)
{
	gint screen_width = 0;
	gint screen_height = 0;
	GalaWindowManager* _tmp0_;
	MetaDisplay* _tmp1_;
	gint _tmp2_ = 0;
	gint _tmp3_ = 0;
#line 195 "../src/Widgets/ScreenShield.vala"
	g_return_if_fail (self != NULL);
#line 197 "../src/Widgets/ScreenShield.vala"
	_tmp0_ = self->priv->_wm;
#line 197 "../src/Widgets/ScreenShield.vala"
	_tmp1_ = meta_plugin_get_display ((MetaPlugin*) _tmp0_);
#line 197 "../src/Widgets/ScreenShield.vala"
	meta_display_get_size (_tmp1_, &_tmp2_, &_tmp3_);
#line 197 "../src/Widgets/ScreenShield.vala"
	screen_width = _tmp2_;
#line 197 "../src/Widgets/ScreenShield.vala"
	screen_height = _tmp3_;
#line 198 "../src/Widgets/ScreenShield.vala"
	clutter_actor_set_width ((ClutterActor*) self, (gfloat) screen_width);
#line 199 "../src/Widgets/ScreenShield.vala"
	clutter_actor_set_height ((ClutterActor*) self, (gfloat) screen_height);
#line 3232 "ScreenShield.c"
}

static void
gala_screen_shield_prepare_for_sleep (GalaScreenShield* self,
                                      gboolean about_to_suspend)
{
#line 202 "../src/Widgets/ScreenShield.vala"
	g_return_if_fail (self != NULL);
#line 203 "../src/Widgets/ScreenShield.vala"
	if (!self->priv->connected_to_buses) {
#line 204 "../src/Widgets/ScreenShield.vala"
		return;
#line 3245 "ScreenShield.c"
	}
#line 207 "../src/Widgets/ScreenShield.vala"
	if (about_to_suspend) {
#line 3249 "ScreenShield.c"
		GSettings* _tmp0_;
#line 208 "../src/Widgets/ScreenShield.vala"
		_tmp0_ = self->priv->gala_settings;
#line 208 "../src/Widgets/ScreenShield.vala"
		if (g_settings_get_boolean (_tmp0_, GALA_SCREEN_SHIELD_LOCK_ON_SUSPEND_KEY)) {
#line 209 "../src/Widgets/ScreenShield.vala"
			g_debug ("ScreenShield.vala:209: about to sleep, locking screen");
#line 210 "../src/Widgets/ScreenShield.vala"
			gala_screen_shield_lock (self, FALSE);
#line 3259 "ScreenShield.c"
		}
	} else {
#line 213 "../src/Widgets/ScreenShield.vala"
		g_debug ("ScreenShield.vala:213: resumed from suspend, waking screen");
#line 214 "../src/Widgets/ScreenShield.vala"
		gala_screen_shield_on_user_became_active (self);
#line 215 "../src/Widgets/ScreenShield.vala"
		gala_screen_shield_expand_to_screen_size (self);
#line 3268 "ScreenShield.c"
	}
}

static void
gala_screen_shield_on_status_changed (GalaScreenShield* self,
                                      GalaPresenceStatus status)
{
	gboolean _tmp0_ = FALSE;
#line 220 "../src/Widgets/ScreenShield.vala"
	g_return_if_fail (self != NULL);
#line 221 "../src/Widgets/ScreenShield.vala"
	if (status != GALA_PRESENCE_STATUS_IDLE) {
#line 221 "../src/Widgets/ScreenShield.vala"
		_tmp0_ = TRUE;
#line 3283 "ScreenShield.c"
	} else {
#line 221 "../src/Widgets/ScreenShield.vala"
		_tmp0_ = !self->priv->connected_to_buses;
#line 3287 "ScreenShield.c"
	}
#line 221 "../src/Widgets/ScreenShield.vala"
	if (_tmp0_) {
#line 222 "../src/Widgets/ScreenShield.vala"
		return;
#line 3293 "ScreenShield.c"
	}
#line 225 "../src/Widgets/ScreenShield.vala"
	g_debug ("ScreenShield.vala:225: session became idle, activating screensaver");
#line 227 "../src/Widgets/ScreenShield.vala"
	gala_screen_shield_activate (self, TRUE, GALA_SCREEN_SHIELD_LONG_ANIMATION_TIME);
#line 3299 "ScreenShield.c"
}

static void
gala_screen_shield_sync_inhibitor (GalaScreenShield* self)
{
	gboolean lock_enabled = FALSE;
	GSettings* _tmp0_;
	gboolean lock_prohibited = FALSE;
	GSettings* _tmp1_;
	gboolean _tmp2_ = FALSE;
	gboolean _tmp3_ = FALSE;
	gboolean _tmp4_ = FALSE;
	gboolean _tmp5_ = FALSE;
	GalaLoginSessionManager* _tmp6_;
	gboolean inhibit = FALSE;
	GError* _inner_error0_ = NULL;
#line 231 "../src/Widgets/ScreenShield.vala"
	g_return_if_fail (self != NULL);
#line 232 "../src/Widgets/ScreenShield.vala"
	if (!self->priv->connected_to_buses) {
#line 233 "../src/Widgets/ScreenShield.vala"
		return;
#line 3322 "ScreenShield.c"
	}
#line 236 "../src/Widgets/ScreenShield.vala"
	_tmp0_ = self->priv->gala_settings;
#line 236 "../src/Widgets/ScreenShield.vala"
	lock_enabled = g_settings_get_boolean (_tmp0_, GALA_SCREEN_SHIELD_LOCK_ON_SUSPEND_KEY);
#line 237 "../src/Widgets/ScreenShield.vala"
	_tmp1_ = self->priv->lockdown_settings;
#line 237 "../src/Widgets/ScreenShield.vala"
	lock_prohibited = g_settings_get_boolean (_tmp1_, GALA_SCREEN_SHIELD_LOCK_PROHIBITED_KEY);
#line 239 "../src/Widgets/ScreenShield.vala"
	_tmp6_ = self->priv->login_session;
#line 239 "../src/Widgets/ScreenShield.vala"
	if (_tmp6_ != NULL) {
#line 3336 "ScreenShield.c"
		GalaLoginSessionManager* _tmp7_;
		gboolean _tmp8_;
		gboolean _tmp9_;
#line 239 "../src/Widgets/ScreenShield.vala"
		_tmp7_ = self->priv->login_session;
#line 239 "../src/Widgets/ScreenShield.vala"
		_tmp8_ = gala_login_session_manager_get_active (_tmp7_);
#line 239 "../src/Widgets/ScreenShield.vala"
		_tmp9_ = _tmp8_;
#line 239 "../src/Widgets/ScreenShield.vala"
		_tmp5_ = _tmp9_;
#line 3348 "ScreenShield.c"
	} else {
#line 239 "../src/Widgets/ScreenShield.vala"
		_tmp5_ = FALSE;
#line 3352 "ScreenShield.c"
	}
#line 239 "../src/Widgets/ScreenShield.vala"
	if (_tmp5_) {
#line 3356 "ScreenShield.c"
		gboolean _tmp10_;
#line 239 "../src/Widgets/ScreenShield.vala"
		_tmp10_ = self->priv->_active;
#line 239 "../src/Widgets/ScreenShield.vala"
		_tmp4_ = !_tmp10_;
#line 3362 "ScreenShield.c"
	} else {
#line 239 "../src/Widgets/ScreenShield.vala"
		_tmp4_ = FALSE;
#line 3366 "ScreenShield.c"
	}
#line 239 "../src/Widgets/ScreenShield.vala"
	if (_tmp4_) {
#line 239 "../src/Widgets/ScreenShield.vala"
		_tmp3_ = lock_enabled;
#line 3372 "ScreenShield.c"
	} else {
#line 239 "../src/Widgets/ScreenShield.vala"
		_tmp3_ = FALSE;
#line 3376 "ScreenShield.c"
	}
#line 239 "../src/Widgets/ScreenShield.vala"
	if (_tmp3_) {
#line 239 "../src/Widgets/ScreenShield.vala"
		_tmp2_ = !lock_prohibited;
#line 3382 "ScreenShield.c"
	} else {
#line 239 "../src/Widgets/ScreenShield.vala"
		_tmp2_ = FALSE;
#line 3386 "ScreenShield.c"
	}
#line 239 "../src/Widgets/ScreenShield.vala"
	inhibit = _tmp2_;
#line 240 "../src/Widgets/ScreenShield.vala"
	if (inhibit) {
#line 3392 "ScreenShield.c"
		{
			GUnixInputStream* new_inhibitor = NULL;
			GalaLoginManager* _tmp11_;
			GUnixInputStream* _tmp12_;
			GUnixInputStream* _tmp13_;
			GUnixInputStream* _tmp15_;
			GUnixInputStream* _tmp16_;
#line 242 "../src/Widgets/ScreenShield.vala"
			_tmp11_ = self->priv->login_manager;
#line 242 "../src/Widgets/ScreenShield.vala"
			_tmp12_ = gala_login_manager_inhibit (_tmp11_, "sleep", "Pantheon", "Pantheon needs to lock the screen", "delay", &_inner_error0_);
#line 242 "../src/Widgets/ScreenShield.vala"
			new_inhibitor = _tmp12_;
#line 242 "../src/Widgets/ScreenShield.vala"
			if (G_UNLIKELY (_inner_error0_ != NULL)) {
#line 3408 "ScreenShield.c"
				goto __catch0_g_error;
			}
#line 243 "../src/Widgets/ScreenShield.vala"
			_tmp13_ = self->priv->inhibitor;
#line 243 "../src/Widgets/ScreenShield.vala"
			if (_tmp13_ != NULL) {
#line 3415 "ScreenShield.c"
				GUnixInputStream* _tmp14_;
#line 244 "../src/Widgets/ScreenShield.vala"
				_tmp14_ = self->priv->inhibitor;
#line 244 "../src/Widgets/ScreenShield.vala"
				g_input_stream_close ((GInputStream*) _tmp14_, NULL, &_inner_error0_);
#line 244 "../src/Widgets/ScreenShield.vala"
				if (G_UNLIKELY (_inner_error0_ != NULL)) {
#line 244 "../src/Widgets/ScreenShield.vala"
					_g_object_unref0 (new_inhibitor);
#line 3425 "ScreenShield.c"
					goto __catch0_g_error;
				}
#line 245 "../src/Widgets/ScreenShield.vala"
				_g_object_unref0 (self->priv->inhibitor);
#line 245 "../src/Widgets/ScreenShield.vala"
				self->priv->inhibitor = NULL;
#line 3432 "ScreenShield.c"
			}
#line 248 "../src/Widgets/ScreenShield.vala"
			_tmp15_ = new_inhibitor;
#line 248 "../src/Widgets/ScreenShield.vala"
			_tmp16_ = _g_object_ref0 (_tmp15_);
#line 248 "../src/Widgets/ScreenShield.vala"
			_g_object_unref0 (self->priv->inhibitor);
#line 248 "../src/Widgets/ScreenShield.vala"
			self->priv->inhibitor = _tmp16_;
#line 241 "../src/Widgets/ScreenShield.vala"
			_g_object_unref0 (new_inhibitor);
#line 3444 "ScreenShield.c"
		}
		goto __finally0;
		__catch0_g_error:
		{
			GError* e = NULL;
			GError* _tmp17_;
			const gchar* _tmp18_;
#line 241 "../src/Widgets/ScreenShield.vala"
			e = _inner_error0_;
#line 241 "../src/Widgets/ScreenShield.vala"
			_inner_error0_ = NULL;
#line 250 "../src/Widgets/ScreenShield.vala"
			_tmp17_ = e;
#line 250 "../src/Widgets/ScreenShield.vala"
			_tmp18_ = _tmp17_->message;
#line 250 "../src/Widgets/ScreenShield.vala"
			g_warning ("ScreenShield.vala:250: Unable to inhibit sleep, may be unable to lock " \
"before sleep starts: %s", _tmp18_);
#line 241 "../src/Widgets/ScreenShield.vala"
			_g_error_free0 (e);
#line 3464 "ScreenShield.c"
		}
		__finally0:
#line 241 "../src/Widgets/ScreenShield.vala"
		if (G_UNLIKELY (_inner_error0_ != NULL)) {
#line 241 "../src/Widgets/ScreenShield.vala"
			g_critical ("file %s: line %d: uncaught error: %s (%s, %d)", __FILE__, __LINE__, _inner_error0_->message, g_quark_to_string (_inner_error0_->domain), _inner_error0_->code);
#line 241 "../src/Widgets/ScreenShield.vala"
			g_clear_error (&_inner_error0_);
#line 241 "../src/Widgets/ScreenShield.vala"
			return;
#line 3475 "ScreenShield.c"
		}
	} else {
		GUnixInputStream* _tmp19_;
#line 253 "../src/Widgets/ScreenShield.vala"
		_tmp19_ = self->priv->inhibitor;
#line 253 "../src/Widgets/ScreenShield.vala"
		if (_tmp19_ != NULL) {
#line 3483 "ScreenShield.c"
			{
				GUnixInputStream* _tmp20_;
#line 255 "../src/Widgets/ScreenShield.vala"
				_tmp20_ = self->priv->inhibitor;
#line 255 "../src/Widgets/ScreenShield.vala"
				g_input_stream_close ((GInputStream*) _tmp20_, NULL, &_inner_error0_);
#line 255 "../src/Widgets/ScreenShield.vala"
				if (G_UNLIKELY (_inner_error0_ != NULL)) {
#line 3492 "ScreenShield.c"
					goto __catch1_g_error;
				}
			}
			goto __finally1;
			__catch1_g_error:
			{
				GError* e = NULL;
				GError* _tmp21_;
				const gchar* _tmp22_;
#line 254 "../src/Widgets/ScreenShield.vala"
				e = _inner_error0_;
#line 254 "../src/Widgets/ScreenShield.vala"
				_inner_error0_ = NULL;
#line 257 "../src/Widgets/ScreenShield.vala"
				_tmp21_ = e;
#line 257 "../src/Widgets/ScreenShield.vala"
				_tmp22_ = _tmp21_->message;
#line 257 "../src/Widgets/ScreenShield.vala"
				g_warning ("ScreenShield.vala:257: Unable to remove sleep inhibitor: %s", _tmp22_);
#line 254 "../src/Widgets/ScreenShield.vala"
				_g_error_free0 (e);
#line 3514 "ScreenShield.c"
			}
			__finally1:
#line 254 "../src/Widgets/ScreenShield.vala"
			if (G_UNLIKELY (_inner_error0_ != NULL)) {
#line 254 "../src/Widgets/ScreenShield.vala"
				g_critical ("file %s: line %d: uncaught error: %s (%s, %d)", __FILE__, __LINE__, _inner_error0_->message, g_quark_to_string (_inner_error0_->domain), _inner_error0_->code);
#line 254 "../src/Widgets/ScreenShield.vala"
				g_clear_error (&_inner_error0_);
#line 254 "../src/Widgets/ScreenShield.vala"
				return;
#line 3525 "ScreenShield.c"
			}
#line 260 "../src/Widgets/ScreenShield.vala"
			_g_object_unref0 (self->priv->inhibitor);
#line 260 "../src/Widgets/ScreenShield.vala"
			self->priv->inhibitor = NULL;
#line 3531 "ScreenShield.c"
		}
	}
}

static void
gala_screen_shield_on_user_became_active (GalaScreenShield* self)
{
	gboolean _tmp0_ = FALSE;
	gboolean _tmp1_;
	GError* _inner_error0_ = NULL;
#line 265 "../src/Widgets/ScreenShield.vala"
	g_return_if_fail (self != NULL);
#line 266 "../src/Widgets/ScreenShield.vala"
	if (!self->priv->connected_to_buses) {
#line 267 "../src/Widgets/ScreenShield.vala"
		return;
#line 3548 "ScreenShield.c"
	}
#line 271 "../src/Widgets/ScreenShield.vala"
	_tmp1_ = self->priv->_is_locked;
#line 271 "../src/Widgets/ScreenShield.vala"
	if (_tmp1_) {
#line 3554 "ScreenShield.c"
		gboolean _tmp2_;
#line 271 "../src/Widgets/ScreenShield.vala"
		_tmp2_ = self->priv->_in_greeter;
#line 271 "../src/Widgets/ScreenShield.vala"
		_tmp0_ = !_tmp2_;
#line 3560 "ScreenShield.c"
	} else {
#line 271 "../src/Widgets/ScreenShield.vala"
		_tmp0_ = FALSE;
#line 3564 "ScreenShield.c"
	}
#line 271 "../src/Widgets/ScreenShield.vala"
	if (_tmp0_) {
#line 272 "../src/Widgets/ScreenShield.vala"
		g_debug ("ScreenShield.vala:272: user became active, switching to greeter");
#line 273 "../src/Widgets/ScreenShield.vala"
		gala_screen_shield_cancel_animation (self);
#line 3572 "ScreenShield.c"
		{
			GalaDisplayManagerSeat* _tmp3_;
#line 275 "../src/Widgets/ScreenShield.vala"
			_tmp3_ = self->priv->display_manager;
#line 275 "../src/Widgets/ScreenShield.vala"
			gala_display_manager_seat_switch_to_greeter (_tmp3_, &_inner_error0_);
#line 275 "../src/Widgets/ScreenShield.vala"
			if (G_UNLIKELY (_inner_error0_ != NULL)) {
#line 3581 "ScreenShield.c"
				goto __catch0_g_error;
			}
#line 276 "../src/Widgets/ScreenShield.vala"
			gala_screen_shield_set_in_greeter (self, TRUE);
#line 3586 "ScreenShield.c"
		}
		goto __finally0;
		__catch0_g_error:
		{
			GError* e = NULL;
			GError* _tmp4_;
			const gchar* _tmp5_;
#line 274 "../src/Widgets/ScreenShield.vala"
			e = _inner_error0_;
#line 274 "../src/Widgets/ScreenShield.vala"
			_inner_error0_ = NULL;
#line 278 "../src/Widgets/ScreenShield.vala"
			_tmp4_ = e;
#line 278 "../src/Widgets/ScreenShield.vala"
			_tmp5_ = _tmp4_->message;
#line 278 "../src/Widgets/ScreenShield.vala"
			g_critical ("ScreenShield.vala:278: Unable to switch to greeter to unlock: %s", _tmp5_);
#line 274 "../src/Widgets/ScreenShield.vala"
			_g_error_free0 (e);
#line 3606 "ScreenShield.c"
		}
		__finally0:
#line 274 "../src/Widgets/ScreenShield.vala"
		if (G_UNLIKELY (_inner_error0_ != NULL)) {
#line 274 "../src/Widgets/ScreenShield.vala"
			g_critical ("file %s: line %d: uncaught error: %s (%s, %d)", __FILE__, __LINE__, _inner_error0_->message, g_quark_to_string (_inner_error0_->domain), _inner_error0_->code);
#line 274 "../src/Widgets/ScreenShield.vala"
			g_clear_error (&_inner_error0_);
#line 274 "../src/Widgets/ScreenShield.vala"
			return;
#line 3617 "ScreenShield.c"
		}
	} else {
		gboolean _tmp6_;
#line 281 "../src/Widgets/ScreenShield.vala"
		_tmp6_ = self->priv->_is_locked;
#line 281 "../src/Widgets/ScreenShield.vala"
		if (!_tmp6_) {
#line 282 "../src/Widgets/ScreenShield.vala"
			g_debug ("ScreenShield.vala:282: user became active in unlocked session, closing" \
" screensaver");
#line 283 "../src/Widgets/ScreenShield.vala"
			gala_screen_shield_deactivate (self, FALSE);
#line 3629 "ScreenShield.c"
		}
	}
}

static GalaLoginSessionManager*
gala_screen_shield_get_current_session_manager (GalaScreenShield* self,
                                                GError** error)
{
	gchar* session_id = NULL;
	const gchar* _tmp0_;
	gchar* _tmp1_;
	const gchar* _tmp2_;
	const gchar* _tmp10_;
	char* session_path = NULL;
	GalaLoginManager* _tmp11_;
	const gchar* _tmp12_;
	char* _tmp13_;
	GalaLoginSessionManager* session = NULL;
	const char* _tmp14_;
	GalaLoginSessionManager* _tmp15_;
	GError* _inner_error0_ = NULL;
	GalaLoginSessionManager* result;
#line 287 "../src/Widgets/ScreenShield.vala"
	g_return_val_if_fail (self != NULL, NULL);
#line 288 "../src/Widgets/ScreenShield.vala"
	_tmp0_ = g_getenv ("XDG_SESSION_ID");
#line 288 "../src/Widgets/ScreenShield.vala"
	_tmp1_ = g_strdup (_tmp0_);
#line 288 "../src/Widgets/ScreenShield.vala"
	session_id = _tmp1_;
#line 289 "../src/Widgets/ScreenShield.vala"
	_tmp2_ = session_id;
#line 289 "../src/Widgets/ScreenShield.vala"
	if (_tmp2_ == NULL) {
#line 3664 "ScreenShield.c"
		GalaLoginUserManager* _tmp3_;
		GalaLoginUserManager* _tmp4_;
		GalaLoginDisplay* _tmp5_;
		GalaLoginDisplay* _tmp6_;
		GalaLoginDisplay* _tmp7_;
		const gchar* _tmp8_;
		gchar* _tmp9_;
#line 290 "../src/Widgets/ScreenShield.vala"
		g_debug ("ScreenShield.vala:290: Unset XDG_SESSION_ID, asking logind");
#line 291 "../src/Widgets/ScreenShield.vala"
		_tmp3_ = self->priv->login_user_manager;
#line 291 "../src/Widgets/ScreenShield.vala"
		if (_tmp3_ == NULL) {
#line 292 "../src/Widgets/ScreenShield.vala"
			result = NULL;
#line 292 "../src/Widgets/ScreenShield.vala"
			_g_free0 (session_id);
#line 292 "../src/Widgets/ScreenShield.vala"
			return result;
#line 3684 "ScreenShield.c"
		}
#line 295 "../src/Widgets/ScreenShield.vala"
		_tmp4_ = self->priv->login_user_manager;
#line 295 "../src/Widgets/ScreenShield.vala"
		_tmp5_ = gala_login_user_manager_get_display (_tmp4_);
#line 295 "../src/Widgets/ScreenShield.vala"
		_tmp6_ = _tmp5_;
#line 295 "../src/Widgets/ScreenShield.vala"
		_tmp7_ = _tmp6_;
#line 295 "../src/Widgets/ScreenShield.vala"
		_tmp8_ = (*_tmp7_).session;
#line 295 "../src/Widgets/ScreenShield.vala"
		_tmp9_ = g_strdup (_tmp8_);
#line 295 "../src/Widgets/ScreenShield.vala"
		_g_free0 (session_id);
#line 295 "../src/Widgets/ScreenShield.vala"
		session_id = _tmp9_;
#line 295 "../src/Widgets/ScreenShield.vala"
		_gala_login_display_free0 (_tmp7_);
#line 3704 "ScreenShield.c"
	}
#line 298 "../src/Widgets/ScreenShield.vala"
	_tmp10_ = session_id;
#line 298 "../src/Widgets/ScreenShield.vala"
	if (_tmp10_ == NULL) {
#line 299 "../src/Widgets/ScreenShield.vala"
		result = NULL;
#line 299 "../src/Widgets/ScreenShield.vala"
		_g_free0 (session_id);
#line 299 "../src/Widgets/ScreenShield.vala"
		return result;
#line 3716 "ScreenShield.c"
	}
#line 302 "../src/Widgets/ScreenShield.vala"
	_tmp11_ = self->priv->login_manager;
#line 302 "../src/Widgets/ScreenShield.vala"
	_tmp12_ = session_id;
#line 302 "../src/Widgets/ScreenShield.vala"
	_tmp13_ = gala_login_manager_get_session (_tmp11_, _tmp12_, &_inner_error0_);
#line 302 "../src/Widgets/ScreenShield.vala"
	session_path = _tmp13_;
#line 302 "../src/Widgets/ScreenShield.vala"
	if (G_UNLIKELY (_inner_error0_ != NULL)) {
#line 302 "../src/Widgets/ScreenShield.vala"
		g_propagate_error (error, _inner_error0_);
#line 302 "../src/Widgets/ScreenShield.vala"
		_g_free0 (session_id);
#line 302 "../src/Widgets/ScreenShield.vala"
		return NULL;
#line 3734 "ScreenShield.c"
	}
#line 303 "../src/Widgets/ScreenShield.vala"
	_tmp14_ = session_path;
#line 303 "../src/Widgets/ScreenShield.vala"
	_tmp15_ = (GalaLoginSessionManager*) g_initable_new (GALA_TYPE_LOGIN_SESSION_MANAGER_PROXY, NULL, &_inner_error0_, "g-flags", 0, "g-name", "org.freedesktop.login1", "g-bus-type", G_BUS_TYPE_SYSTEM, "g-object-path", (const gchar*) _tmp14_, "g-interface-name", "org.freedesktop.login1.Session", NULL);
#line 303 "../src/Widgets/ScreenShield.vala"
	session = (GalaLoginSessionManager*) _tmp15_;
#line 303 "../src/Widgets/ScreenShield.vala"
	if (G_UNLIKELY (_inner_error0_ != NULL)) {
#line 303 "../src/Widgets/ScreenShield.vala"
		g_propagate_error (error, _inner_error0_);
#line 303 "../src/Widgets/ScreenShield.vala"
		_g_free0 (session_path);
#line 303 "../src/Widgets/ScreenShield.vala"
		_g_free0 (session_id);
#line 303 "../src/Widgets/ScreenShield.vala"
		return NULL;
#line 3752 "ScreenShield.c"
	}
#line 305 "../src/Widgets/ScreenShield.vala"
	result = session;
#line 305 "../src/Widgets/ScreenShield.vala"
	_g_free0 (session_path);
#line 305 "../src/Widgets/ScreenShield.vala"
	_g_free0 (session_id);
#line 305 "../src/Widgets/ScreenShield.vala"
	return result;
#line 3762 "ScreenShield.c"
}

void
gala_screen_shield_lock (GalaScreenShield* self,
                         gboolean animate)
{
	gboolean _tmp0_ = FALSE;
	gboolean _tmp1_;
	GSettings* _tmp2_;
#line 308 "../src/Widgets/ScreenShield.vala"
	g_return_if_fail (self != NULL);
#line 309 "../src/Widgets/ScreenShield.vala"
	_tmp1_ = self->priv->_is_locked;
#line 309 "../src/Widgets/ScreenShield.vala"
	if (_tmp1_) {
#line 309 "../src/Widgets/ScreenShield.vala"
		_tmp0_ = TRUE;
#line 3780 "ScreenShield.c"
	} else {
#line 309 "../src/Widgets/ScreenShield.vala"
		_tmp0_ = !self->priv->connected_to_buses;
#line 3784 "ScreenShield.c"
	}
#line 309 "../src/Widgets/ScreenShield.vala"
	if (_tmp0_) {
#line 310 "../src/Widgets/ScreenShield.vala"
		return;
#line 3790 "ScreenShield.c"
	}
#line 313 "../src/Widgets/ScreenShield.vala"
	_tmp2_ = self->priv->lockdown_settings;
#line 313 "../src/Widgets/ScreenShield.vala"
	if (g_settings_get_boolean (_tmp2_, GALA_SCREEN_SHIELD_LOCK_PROHIBITED_KEY)) {
#line 314 "../src/Widgets/ScreenShield.vala"
		g_debug ("ScreenShield.vala:314: Lock prohibited, ignoring lock request");
#line 315 "../src/Widgets/ScreenShield.vala"
		return;
#line 3800 "ScreenShield.c"
	}
#line 318 "../src/Widgets/ScreenShield.vala"
	gala_screen_shield_set_is_locked (self, TRUE);
#line 320 "../src/Widgets/ScreenShield.vala"
	gala_screen_shield_activate (self, animate, GALA_SCREEN_SHIELD_SHORT_ANIMATION_TIME);
#line 3806 "ScreenShield.c"
}

void
gala_screen_shield_activate (GalaScreenShield* self,
                             gboolean animate,
                             guint animation_time)
{
	gboolean _tmp0_ = FALSE;
	gboolean _tmp1_;
	gboolean _tmp2_;
	gint64 _tmp3_;
	GalaWindowManager* _tmp4_;
	MetaDisplay* _tmp5_;
	MetaCursorTracker* _tmp6_;
	GalaWindowManager* _tmp7_;
	GalaModalProxy* _tmp8_;
	gboolean _tmp9_ = FALSE;
	GalaWindowManager* _tmp10_;
	gboolean _tmp11_;
	gboolean _tmp12_;
#line 323 "../src/Widgets/ScreenShield.vala"
	g_return_if_fail (self != NULL);
#line 324 "../src/Widgets/ScreenShield.vala"
	g_object_get ((ClutterActor*) self, "visible", &_tmp1_, NULL);
#line 324 "../src/Widgets/ScreenShield.vala"
	_tmp2_ = _tmp1_;
#line 324 "../src/Widgets/ScreenShield.vala"
	if (_tmp2_) {
#line 324 "../src/Widgets/ScreenShield.vala"
		_tmp0_ = TRUE;
#line 3837 "ScreenShield.c"
	} else {
#line 324 "../src/Widgets/ScreenShield.vala"
		_tmp0_ = !self->priv->connected_to_buses;
#line 3841 "ScreenShield.c"
	}
#line 324 "../src/Widgets/ScreenShield.vala"
	if (_tmp0_) {
#line 325 "../src/Widgets/ScreenShield.vala"
		return;
#line 3847 "ScreenShield.c"
	}
#line 328 "../src/Widgets/ScreenShield.vala"
	gala_screen_shield_expand_to_screen_size (self);
#line 330 "../src/Widgets/ScreenShield.vala"
	_tmp3_ = self->priv->_activation_time;
#line 330 "../src/Widgets/ScreenShield.vala"
	if (_tmp3_ == ((gint64) 0)) {
#line 331 "../src/Widgets/ScreenShield.vala"
		gala_screen_shield_set_activation_time (self, g_get_monotonic_time ());
#line 3857 "ScreenShield.c"
	}
#line 334 "../src/Widgets/ScreenShield.vala"
	_tmp4_ = self->priv->_wm;
#line 334 "../src/Widgets/ScreenShield.vala"
	_tmp5_ = meta_plugin_get_display ((MetaPlugin*) _tmp4_);
#line 334 "../src/Widgets/ScreenShield.vala"
	_tmp6_ = meta_cursor_tracker_get_for_display (_tmp5_);
#line 334 "../src/Widgets/ScreenShield.vala"
	meta_cursor_tracker_set_pointer_visible (_tmp6_, FALSE);
#line 335 "../src/Widgets/ScreenShield.vala"
	g_object_set ((ClutterActor*) self, "visible", TRUE, NULL);
#line 336 "../src/Widgets/ScreenShield.vala"
	clutter_actor_grab_key_focus ((ClutterActor*) self);
#line 337 "../src/Widgets/ScreenShield.vala"
	_tmp7_ = self->priv->_wm;
#line 337 "../src/Widgets/ScreenShield.vala"
	_tmp8_ = gala_window_manager_push_modal (_tmp7_, (ClutterActor*) self);
#line 337 "../src/Widgets/ScreenShield.vala"
	_g_object_unref0 (self->priv->modal_proxy);
#line 337 "../src/Widgets/ScreenShield.vala"
	self->priv->modal_proxy = _tmp8_;
#line 339 "../src/Widgets/ScreenShield.vala"
	_tmp10_ = self->priv->_wm;
#line 339 "../src/Widgets/ScreenShield.vala"
	_tmp11_ = gala_window_manager_get_enable_animations (_tmp10_);
#line 339 "../src/Widgets/ScreenShield.vala"
	_tmp12_ = _tmp11_;
#line 339 "../src/Widgets/ScreenShield.vala"
	if (_tmp12_) {
#line 339 "../src/Widgets/ScreenShield.vala"
		_tmp9_ = animate;
#line 3889 "ScreenShield.c"
	} else {
#line 339 "../src/Widgets/ScreenShield.vala"
		_tmp9_ = FALSE;
#line 3893 "ScreenShield.c"
	}
#line 339 "../src/Widgets/ScreenShield.vala"
	if (_tmp9_) {
#line 340 "../src/Widgets/ScreenShield.vala"
		gala_screen_shield_animate_and_lock (self, animation_time);
#line 3899 "ScreenShield.c"
	} else {
		GSettings* _tmp13_;
#line 342 "../src/Widgets/ScreenShield.vala"
		_gala_screen_shield_set_active (self, TRUE);
#line 344 "../src/Widgets/ScreenShield.vala"
		clutter_actor_set_opacity ((ClutterActor*) self, (guint) 255);
#line 346 "../src/Widgets/ScreenShield.vala"
		_tmp13_ = self->priv->screensaver_settings;
#line 346 "../src/Widgets/ScreenShield.vala"
		if (g_settings_get_boolean (_tmp13_, GALA_SCREEN_SHIELD_LOCK_ENABLED_KEY)) {
#line 347 "../src/Widgets/ScreenShield.vala"
			gala_screen_shield_lock (self, FALSE);
#line 3912 "ScreenShield.c"
		}
	}
}

static gboolean
__lambda4_ (GalaScreenShield* self)
{
	GSettings* _tmp0_;
	gboolean result;
#line 360 "../src/Widgets/ScreenShield.vala"
	self->priv->animate_id = (guint) 0;
#line 362 "../src/Widgets/ScreenShield.vala"
	clutter_actor_restore_easing_state ((ClutterActor*) self);
#line 364 "../src/Widgets/ScreenShield.vala"
	_gala_screen_shield_set_active (self, TRUE);
#line 366 "../src/Widgets/ScreenShield.vala"
	_tmp0_ = self->priv->screensaver_settings;
#line 366 "../src/Widgets/ScreenShield.vala"
	if (g_settings_get_boolean (_tmp0_, GALA_SCREEN_SHIELD_LOCK_ENABLED_KEY)) {
#line 367 "../src/Widgets/ScreenShield.vala"
		gala_screen_shield_lock (self, FALSE);
#line 3934 "ScreenShield.c"
	}
#line 370 "../src/Widgets/ScreenShield.vala"
	result = G_SOURCE_REMOVE;
#line 370 "../src/Widgets/ScreenShield.vala"
	return result;
#line 3940 "ScreenShield.c"
}

static gboolean
___lambda4__gsource_func (gpointer self)
{
	gboolean result;
	result = __lambda4_ ((GalaScreenShield*) self);
#line 359 "../src/Widgets/ScreenShield.vala"
	return result;
#line 3950 "ScreenShield.c"
}

static void
gala_screen_shield_animate_and_lock (GalaScreenShield* self,
                                     guint animation_time)
{
#line 352 "../src/Widgets/ScreenShield.vala"
	g_return_if_fail (self != NULL);
#line 353 "../src/Widgets/ScreenShield.vala"
	clutter_actor_set_opacity ((ClutterActor*) self, (guint) 0);
#line 354 "../src/Widgets/ScreenShield.vala"
	clutter_actor_save_easing_state ((ClutterActor*) self);
#line 355 "../src/Widgets/ScreenShield.vala"
	clutter_actor_set_easing_mode ((ClutterActor*) self, CLUTTER_EASE_OUT_QUAD);
#line 356 "../src/Widgets/ScreenShield.vala"
	clutter_actor_set_easing_duration ((ClutterActor*) self, animation_time);
#line 357 "../src/Widgets/ScreenShield.vala"
	clutter_actor_set_opacity ((ClutterActor*) self, (guint) 255);
#line 359 "../src/Widgets/ScreenShield.vala"
	self->priv->animate_id = g_timeout_add_full (G_PRIORITY_DEFAULT, animation_time, ___lambda4__gsource_func, g_object_ref (self), g_object_unref);
#line 3971 "ScreenShield.c"
}

static void
gala_screen_shield_cancel_animation (GalaScreenShield* self)
{
#line 374 "../src/Widgets/ScreenShield.vala"
	g_return_if_fail (self != NULL);
#line 375 "../src/Widgets/ScreenShield.vala"
	if (self->priv->animate_id != ((guint) 0)) {
#line 376 "../src/Widgets/ScreenShield.vala"
		g_source_remove (self->priv->animate_id);
#line 377 "../src/Widgets/ScreenShield.vala"
		self->priv->animate_id = (guint) 0;
#line 379 "../src/Widgets/ScreenShield.vala"
		clutter_actor_restore_easing_state ((ClutterActor*) self);
#line 3987 "ScreenShield.c"
	}
}

void
gala_screen_shield_deactivate (GalaScreenShield* self,
                               gboolean animate)
{
	GalaModalProxy* _tmp0_;
	GalaWindowManager* _tmp3_;
	MetaDisplay* _tmp4_;
	MetaCursorTracker* _tmp5_;
#line 383 "../src/Widgets/ScreenShield.vala"
	g_return_if_fail (self != NULL);
#line 384 "../src/Widgets/ScreenShield.vala"
	if (!self->priv->connected_to_buses) {
#line 385 "../src/Widgets/ScreenShield.vala"
		return;
#line 4005 "ScreenShield.c"
	}
#line 388 "../src/Widgets/ScreenShield.vala"
	gala_screen_shield_cancel_animation (self);
#line 390 "../src/Widgets/ScreenShield.vala"
	gala_screen_shield_set_is_locked (self, FALSE);
#line 392 "../src/Widgets/ScreenShield.vala"
	_tmp0_ = self->priv->modal_proxy;
#line 392 "../src/Widgets/ScreenShield.vala"
	if (_tmp0_ != NULL) {
#line 4015 "ScreenShield.c"
		GalaWindowManager* _tmp1_;
		GalaModalProxy* _tmp2_;
#line 393 "../src/Widgets/ScreenShield.vala"
		_tmp1_ = self->priv->_wm;
#line 393 "../src/Widgets/ScreenShield.vala"
		_tmp2_ = self->priv->modal_proxy;
#line 393 "../src/Widgets/ScreenShield.vala"
		gala_window_manager_pop_modal (_tmp1_, _tmp2_);
#line 394 "../src/Widgets/ScreenShield.vala"
		_g_object_unref0 (self->priv->modal_proxy);
#line 394 "../src/Widgets/ScreenShield.vala"
		self->priv->modal_proxy = NULL;
#line 4028 "ScreenShield.c"
	}
#line 397 "../src/Widgets/ScreenShield.vala"
	_tmp3_ = self->priv->_wm;
#line 397 "../src/Widgets/ScreenShield.vala"
	_tmp4_ = meta_plugin_get_display ((MetaPlugin*) _tmp3_);
#line 397 "../src/Widgets/ScreenShield.vala"
	_tmp5_ = meta_cursor_tracker_get_for_display (_tmp4_);
#line 397 "../src/Widgets/ScreenShield.vala"
	meta_cursor_tracker_set_pointer_visible (_tmp5_, TRUE);
#line 398 "../src/Widgets/ScreenShield.vala"
	g_object_set ((ClutterActor*) self, "visible", FALSE, NULL);
#line 400 "../src/Widgets/ScreenShield.vala"
	gala_screen_shield_set_activation_time (self, (gint64) 0);
#line 401 "../src/Widgets/ScreenShield.vala"
	_gala_screen_shield_set_active (self, FALSE);
#line 4044 "ScreenShield.c"
}

static void
_gala_screen_shield_set_active (GalaScreenShield* self,
                                gboolean new_active)
{
	gboolean prev_is_active = FALSE;
	gboolean _tmp0_;
	gboolean _tmp1_;
	GError* _inner_error0_ = NULL;
#line 404 "../src/Widgets/ScreenShield.vala"
	g_return_if_fail (self != NULL);
#line 405 "../src/Widgets/ScreenShield.vala"
	if (!self->priv->connected_to_buses) {
#line 406 "../src/Widgets/ScreenShield.vala"
		return;
#line 4061 "ScreenShield.c"
	}
#line 409 "../src/Widgets/ScreenShield.vala"
	_tmp0_ = self->priv->_active;
#line 409 "../src/Widgets/ScreenShield.vala"
	prev_is_active = _tmp0_;
#line 410 "../src/Widgets/ScreenShield.vala"
	gala_screen_shield_set_active (self, new_active);
#line 412 "../src/Widgets/ScreenShield.vala"
	_tmp1_ = self->priv->_active;
#line 412 "../src/Widgets/ScreenShield.vala"
	if (prev_is_active != _tmp1_) {
#line 413 "../src/Widgets/ScreenShield.vala"
		g_signal_emit (self, gala_screen_shield_signals[GALA_SCREEN_SHIELD_ACTIVE_CHANGED_SIGNAL], 0);
#line 4075 "ScreenShield.c"
	}
	{
		GalaLoginSessionManager* _tmp2_;
		gboolean _tmp3_;
#line 417 "../src/Widgets/ScreenShield.vala"
		_tmp2_ = self->priv->login_session;
#line 417 "../src/Widgets/ScreenShield.vala"
		_tmp3_ = self->priv->_active;
#line 417 "../src/Widgets/ScreenShield.vala"
		gala_login_session_manager_set_locked_hint (_tmp2_, _tmp3_, &_inner_error0_);
#line 417 "../src/Widgets/ScreenShield.vala"
		if (G_UNLIKELY (_inner_error0_ != NULL)) {
#line 4088 "ScreenShield.c"
			goto __catch0_g_error;
		}
	}
	goto __finally0;
	__catch0_g_error:
	{
		GError* e = NULL;
		GError* _tmp4_;
		const gchar* _tmp5_;
#line 416 "../src/Widgets/ScreenShield.vala"
		e = _inner_error0_;
#line 416 "../src/Widgets/ScreenShield.vala"
		_inner_error0_ = NULL;
#line 419 "../src/Widgets/ScreenShield.vala"
		_tmp4_ = e;
#line 419 "../src/Widgets/ScreenShield.vala"
		_tmp5_ = _tmp4_->message;
#line 419 "../src/Widgets/ScreenShield.vala"
		g_warning ("ScreenShield.vala:419: Unable to set locked hint on login session: %s", _tmp5_);
#line 416 "../src/Widgets/ScreenShield.vala"
		_g_error_free0 (e);
#line 4110 "ScreenShield.c"
	}
	__finally0:
#line 416 "../src/Widgets/ScreenShield.vala"
	if (G_UNLIKELY (_inner_error0_ != NULL)) {
#line 416 "../src/Widgets/ScreenShield.vala"
		g_critical ("file %s: line %d: uncaught error: %s (%s, %d)", __FILE__, __LINE__, _inner_error0_->message, g_quark_to_string (_inner_error0_->domain), _inner_error0_->code);
#line 416 "../src/Widgets/ScreenShield.vala"
		g_clear_error (&_inner_error0_);
#line 416 "../src/Widgets/ScreenShield.vala"
		return;
#line 4121 "ScreenShield.c"
	}
#line 422 "../src/Widgets/ScreenShield.vala"
	gala_screen_shield_sync_inhibitor (self);
#line 4125 "ScreenShield.c"
}

gboolean
gala_screen_shield_get_active (GalaScreenShield* self)
{
	gboolean result;
#line 81 "../src/Widgets/ScreenShield.vala"
	g_return_val_if_fail (self != NULL, FALSE);
#line 81 "../src/Widgets/ScreenShield.vala"
	result = self->priv->_active;
#line 81 "../src/Widgets/ScreenShield.vala"
	return result;
#line 4138 "ScreenShield.c"
}

static void
gala_screen_shield_set_active (GalaScreenShield* self,
                               gboolean value)
{
	gboolean old_value;
#line 81 "../src/Widgets/ScreenShield.vala"
	g_return_if_fail (self != NULL);
#line 81 "../src/Widgets/ScreenShield.vala"
	old_value = gala_screen_shield_get_active (self);
#line 81 "../src/Widgets/ScreenShield.vala"
	if (old_value != value) {
#line 81 "../src/Widgets/ScreenShield.vala"
		self->priv->_active = value;
#line 81 "../src/Widgets/ScreenShield.vala"
		g_object_notify_by_pspec ((GObject *) self, gala_screen_shield_properties[GALA_SCREEN_SHIELD_ACTIVE_PROPERTY]);
#line 4156 "ScreenShield.c"
	}
}

gboolean
gala_screen_shield_get_is_locked (GalaScreenShield* self)
{
	gboolean result;
#line 83 "../src/Widgets/ScreenShield.vala"
	g_return_val_if_fail (self != NULL, FALSE);
#line 83 "../src/Widgets/ScreenShield.vala"
	result = self->priv->_is_locked;
#line 83 "../src/Widgets/ScreenShield.vala"
	return result;
#line 4170 "ScreenShield.c"
}

static void
gala_screen_shield_set_is_locked (GalaScreenShield* self,
                                  gboolean value)
{
	gboolean old_value;
#line 83 "../src/Widgets/ScreenShield.vala"
	g_return_if_fail (self != NULL);
#line 83 "../src/Widgets/ScreenShield.vala"
	old_value = gala_screen_shield_get_is_locked (self);
#line 83 "../src/Widgets/ScreenShield.vala"
	if (old_value != value) {
#line 83 "../src/Widgets/ScreenShield.vala"
		self->priv->_is_locked = value;
#line 83 "../src/Widgets/ScreenShield.vala"
		g_object_notify_by_pspec ((GObject *) self, gala_screen_shield_properties[GALA_SCREEN_SHIELD_IS_LOCKED_PROPERTY]);
#line 4188 "ScreenShield.c"
	}
}

gboolean
gala_screen_shield_get_in_greeter (GalaScreenShield* self)
{
	gboolean result;
#line 84 "../src/Widgets/ScreenShield.vala"
	g_return_val_if_fail (self != NULL, FALSE);
#line 84 "../src/Widgets/ScreenShield.vala"
	result = self->priv->_in_greeter;
#line 84 "../src/Widgets/ScreenShield.vala"
	return result;
#line 4202 "ScreenShield.c"
}

static void
gala_screen_shield_set_in_greeter (GalaScreenShield* self,
                                   gboolean value)
{
	gboolean old_value;
#line 84 "../src/Widgets/ScreenShield.vala"
	g_return_if_fail (self != NULL);
#line 84 "../src/Widgets/ScreenShield.vala"
	old_value = gala_screen_shield_get_in_greeter (self);
#line 84 "../src/Widgets/ScreenShield.vala"
	if (old_value != value) {
#line 84 "../src/Widgets/ScreenShield.vala"
		self->priv->_in_greeter = value;
#line 84 "../src/Widgets/ScreenShield.vala"
		g_object_notify_by_pspec ((GObject *) self, gala_screen_shield_properties[GALA_SCREEN_SHIELD_IN_GREETER_PROPERTY]);
#line 4220 "ScreenShield.c"
	}
}

gint64
gala_screen_shield_get_activation_time (GalaScreenShield* self)
{
	gint64 result;
#line 85 "../src/Widgets/ScreenShield.vala"
	g_return_val_if_fail (self != NULL, 0LL);
#line 85 "../src/Widgets/ScreenShield.vala"
	result = self->priv->_activation_time;
#line 85 "../src/Widgets/ScreenShield.vala"
	return result;
#line 4234 "ScreenShield.c"
}

static void
gala_screen_shield_set_activation_time (GalaScreenShield* self,
                                        gint64 value)
{
	gint64 old_value;
#line 85 "../src/Widgets/ScreenShield.vala"
	g_return_if_fail (self != NULL);
#line 85 "../src/Widgets/ScreenShield.vala"
	old_value = gala_screen_shield_get_activation_time (self);
#line 85 "../src/Widgets/ScreenShield.vala"
	if (old_value != value) {
#line 85 "../src/Widgets/ScreenShield.vala"
		self->priv->_activation_time = value;
#line 85 "../src/Widgets/ScreenShield.vala"
		g_object_notify_by_pspec ((GObject *) self, gala_screen_shield_properties[GALA_SCREEN_SHIELD_ACTIVATION_TIME_PROPERTY]);
#line 4252 "ScreenShield.c"
	}
}

GalaWindowManager*
gala_screen_shield_get_wm (GalaScreenShield* self)
{
	GalaWindowManager* result;
	GalaWindowManager* _tmp0_;
#line 87 "../src/Widgets/ScreenShield.vala"
	g_return_val_if_fail (self != NULL, NULL);
#line 87 "../src/Widgets/ScreenShield.vala"
	_tmp0_ = self->priv->_wm;
#line 87 "../src/Widgets/ScreenShield.vala"
	result = _tmp0_;
#line 87 "../src/Widgets/ScreenShield.vala"
	return result;
#line 4269 "ScreenShield.c"
}

static void
gala_screen_shield_set_wm (GalaScreenShield* self,
                           GalaWindowManager* value)
{
	GalaWindowManager* old_value;
#line 87 "../src/Widgets/ScreenShield.vala"
	g_return_if_fail (self != NULL);
#line 87 "../src/Widgets/ScreenShield.vala"
	old_value = gala_screen_shield_get_wm (self);
#line 87 "../src/Widgets/ScreenShield.vala"
	if (old_value != value) {
#line 4283 "ScreenShield.c"
		GalaWindowManager* _tmp0_;
#line 87 "../src/Widgets/ScreenShield.vala"
		_tmp0_ = _g_object_ref0 (value);
#line 87 "../src/Widgets/ScreenShield.vala"
		_g_object_unref0 (self->priv->_wm);
#line 87 "../src/Widgets/ScreenShield.vala"
		self->priv->_wm = _tmp0_;
#line 87 "../src/Widgets/ScreenShield.vala"
		g_object_notify_by_pspec ((GObject *) self, gala_screen_shield_properties[GALA_SCREEN_SHIELD_WM_PROPERTY]);
#line 4293 "ScreenShield.c"
	}
}

static gboolean
_gala_screen_shield___lambda8_ (GalaScreenShield* self,
                                ClutterEvent* event)
{
	gboolean result;
#line 126 "../src/Widgets/ScreenShield.vala"
	g_return_val_if_fail (event != NULL, FALSE);
#line 127 "../src/Widgets/ScreenShield.vala"
	gala_screen_shield_on_user_became_active (self);
#line 128 "../src/Widgets/ScreenShield.vala"
	result = CLUTTER_EVENT_STOP;
#line 128 "../src/Widgets/ScreenShield.vala"
	return result;
#line 4310 "ScreenShield.c"
}

static gboolean
__gala_screen_shield___lambda8__clutter_actor_key_press_event (ClutterActor* _sender,
                                                               ClutterEvent* event,
                                                               gpointer self)
{
	gboolean result;
	result = _gala_screen_shield___lambda8_ ((GalaScreenShield*) self, event);
#line 126 "../src/Widgets/ScreenShield.vala"
	return result;
#line 4322 "ScreenShield.c"
}

static gboolean
_gala_screen_shield___lambda9_ (GalaScreenShield* self,
                                ClutterEvent* event)
{
	gboolean result;
#line 131 "../src/Widgets/ScreenShield.vala"
	g_return_val_if_fail (event != NULL, FALSE);
#line 132 "../src/Widgets/ScreenShield.vala"
	gala_screen_shield_on_user_became_active (self);
#line 133 "../src/Widgets/ScreenShield.vala"
	result = CLUTTER_EVENT_STOP;
#line 133 "../src/Widgets/ScreenShield.vala"
	return result;
#line 4338 "ScreenShield.c"
}

static gboolean
__gala_screen_shield___lambda9__clutter_actor_motion_event (ClutterActor* _sender,
                                                            ClutterEvent* event,
                                                            gpointer self)
{
	gboolean result;
	result = _gala_screen_shield___lambda9_ ((GalaScreenShield*) self, event);
#line 131 "../src/Widgets/ScreenShield.vala"
	return result;
#line 4350 "ScreenShield.c"
}

static ClutterColor*
_vala_clutter_color_from_string (const gchar* str)
{
	ClutterColor* color = NULL;
	ClutterColor* _tmp0_;
	ClutterColor* result;
#line 7865 "mutter-clutter-14.vapi"
	g_return_val_if_fail (str != NULL, NULL);
#line 7866 "mutter-clutter-14.vapi"
	_tmp0_ = clutter_color_alloc ();
#line 7866 "mutter-clutter-14.vapi"
	color = _tmp0_;
#line 7867 "mutter-clutter-14.vapi"
	clutter_color_from_string (color, str);
#line 7868 "mutter-clutter-14.vapi"
	result = color;
#line 7868 "mutter-clutter-14.vapi"
	return result;
#line 4371 "ScreenShield.c"
}

static void
_vala_ClutterColor_free (ClutterColor* self)
{
#line 136 "../src/Widgets/ScreenShield.vala"
	g_boxed_free (clutter_color_get_type (), self);
#line 4379 "ScreenShield.c"
}

static GObject *
gala_screen_shield_constructor (GType type,
                                guint n_construct_properties,
                                GObjectConstructParam * construct_properties)
{
	GObject * obj;
	GObjectClass * parent_class;
	GalaScreenShield * self;
	GSettings* _tmp0_;
	GSettings* _tmp1_;
	GSettings* _tmp2_;
	ClutterColor* _tmp3_;
	ClutterColor* _tmp4_;
	ClutterColor _tmp5_;
#line 112 "../src/Widgets/ScreenShield.vala"
	parent_class = G_OBJECT_CLASS (gala_screen_shield_parent_class);
#line 112 "../src/Widgets/ScreenShield.vala"
	obj = parent_class->constructor (type, n_construct_properties, construct_properties);
#line 112 "../src/Widgets/ScreenShield.vala"
	self = G_TYPE_CHECK_INSTANCE_CAST (obj, GALA_TYPE_SCREEN_SHIELD, GalaScreenShield);
#line 115 "../src/Widgets/ScreenShield.vala"
	_tmp0_ = g_settings_new ("org.gnome.desktop.screensaver");
#line 115 "../src/Widgets/ScreenShield.vala"
	_g_object_unref0 (self->priv->screensaver_settings);
#line 115 "../src/Widgets/ScreenShield.vala"
	self->priv->screensaver_settings = _tmp0_;
#line 119 "../src/Widgets/ScreenShield.vala"
	_tmp1_ = g_settings_new ("io.elementary.desktop.screensaver");
#line 119 "../src/Widgets/ScreenShield.vala"
	_g_object_unref0 (self->priv->gala_settings);
#line 119 "../src/Widgets/ScreenShield.vala"
	self->priv->gala_settings = _tmp1_;
#line 120 "../src/Widgets/ScreenShield.vala"
	_tmp2_ = g_settings_new ("org.gnome.desktop.lockdown");
#line 120 "../src/Widgets/ScreenShield.vala"
	_g_object_unref0 (self->priv->lockdown_settings);
#line 120 "../src/Widgets/ScreenShield.vala"
	self->priv->lockdown_settings = _tmp2_;
#line 122 "../src/Widgets/ScreenShield.vala"
	g_object_set ((ClutterActor*) self, "visible", FALSE, NULL);
#line 123 "../src/Widgets/ScreenShield.vala"
	clutter_actor_set_reactive ((ClutterActor*) self, TRUE);
#line 126 "../src/Widgets/ScreenShield.vala"
	g_signal_connect_object ((ClutterActor*) self, "key-press-event", (GCallback) __gala_screen_shield___lambda8__clutter_actor_key_press_event, self, 0);
#line 131 "../src/Widgets/ScreenShield.vala"
	g_signal_connect_object ((ClutterActor*) self, "motion-event", (GCallback) __gala_screen_shield___lambda9__clutter_actor_motion_event, self, 0);
#line 136 "../src/Widgets/ScreenShield.vala"
	_tmp3_ = _vala_clutter_color_from_string ("black");
#line 136 "../src/Widgets/ScreenShield.vala"
	_tmp4_ = _tmp3_;
#line 136 "../src/Widgets/ScreenShield.vala"
	_tmp5_ = *_tmp4_;
#line 136 "../src/Widgets/ScreenShield.vala"
	clutter_actor_set_background_color ((ClutterActor*) self, &_tmp5_);
#line 136 "../src/Widgets/ScreenShield.vala"
	__vala_ClutterColor_free0 (_tmp4_);
#line 138 "../src/Widgets/ScreenShield.vala"
	gala_screen_shield_expand_to_screen_size (self);
#line 140 "../src/Widgets/ScreenShield.vala"
	gala_screen_shield_init_dbus_interfaces (self, NULL, NULL);
#line 112 "../src/Widgets/ScreenShield.vala"
	return obj;
#line 4444 "ScreenShield.c"
}

static void
gala_screen_shield_class_init (GalaScreenShieldClass * klass,
                               gpointer klass_data)
{
#line 67 "../src/Widgets/ScreenShield.vala"
	gala_screen_shield_parent_class = g_type_class_peek_parent (klass);
#line 67 "../src/Widgets/ScreenShield.vala"
	g_type_class_adjust_private_offset (klass, &GalaScreenShield_private_offset);
#line 67 "../src/Widgets/ScreenShield.vala"
	G_OBJECT_CLASS (klass)->get_property = _vala_gala_screen_shield_get_property;
#line 67 "../src/Widgets/ScreenShield.vala"
	G_OBJECT_CLASS (klass)->set_property = _vala_gala_screen_shield_set_property;
#line 67 "../src/Widgets/ScreenShield.vala"
	G_OBJECT_CLASS (klass)->constructor = gala_screen_shield_constructor;
#line 67 "../src/Widgets/ScreenShield.vala"
	G_OBJECT_CLASS (klass)->finalize = gala_screen_shield_finalize;
#line 67 "../src/Widgets/ScreenShield.vala"
	g_object_class_install_property (G_OBJECT_CLASS (klass), GALA_SCREEN_SHIELD_ACTIVE_PROPERTY, gala_screen_shield_properties[GALA_SCREEN_SHIELD_ACTIVE_PROPERTY] = g_param_spec_boolean ("active", "active", "active", FALSE, G_PARAM_STATIC_STRINGS | G_PARAM_READABLE));
#line 67 "../src/Widgets/ScreenShield.vala"
	g_object_class_install_property (G_OBJECT_CLASS (klass), GALA_SCREEN_SHIELD_IS_LOCKED_PROPERTY, gala_screen_shield_properties[GALA_SCREEN_SHIELD_IS_LOCKED_PROPERTY] = g_param_spec_boolean ("is-locked", "is-locked", "is-locked", FALSE, G_PARAM_STATIC_STRINGS | G_PARAM_READABLE));
#line 67 "../src/Widgets/ScreenShield.vala"
	g_object_class_install_property (G_OBJECT_CLASS (klass), GALA_SCREEN_SHIELD_IN_GREETER_PROPERTY, gala_screen_shield_properties[GALA_SCREEN_SHIELD_IN_GREETER_PROPERTY] = g_param_spec_boolean ("in-greeter", "in-greeter", "in-greeter", FALSE, G_PARAM_STATIC_STRINGS | G_PARAM_READABLE));
#line 67 "../src/Widgets/ScreenShield.vala"
	g_object_class_install_property (G_OBJECT_CLASS (klass), GALA_SCREEN_SHIELD_ACTIVATION_TIME_PROPERTY, gala_screen_shield_properties[GALA_SCREEN_SHIELD_ACTIVATION_TIME_PROPERTY] = g_param_spec_int64 ("activation-time", "activation-time", "activation-time", G_MININT64, G_MAXINT64, (gint64) 0, G_PARAM_STATIC_STRINGS | G_PARAM_READABLE));
#line 67 "../src/Widgets/ScreenShield.vala"
	g_object_class_install_property (G_OBJECT_CLASS (klass), GALA_SCREEN_SHIELD_WM_PROPERTY, gala_screen_shield_properties[GALA_SCREEN_SHIELD_WM_PROPERTY] = g_param_spec_object ("wm", "wm", "wm", GALA_TYPE_WINDOW_MANAGER, G_PARAM_STATIC_STRINGS | G_PARAM_READABLE | G_PARAM_WRITABLE | G_PARAM_CONSTRUCT_ONLY));
#line 67 "../src/Widgets/ScreenShield.vala"
	gala_screen_shield_signals[GALA_SCREEN_SHIELD_ACTIVE_CHANGED_SIGNAL] = g_signal_new ("active-changed", GALA_TYPE_SCREEN_SHIELD, G_SIGNAL_RUN_LAST, 0, NULL, NULL, g_cclosure_marshal_VOID__VOID, G_TYPE_NONE, 0);
#line 4475 "ScreenShield.c"
}

static void
gala_screen_shield_instance_init (GalaScreenShield * self,
                                  gpointer klass)
{
#line 67 "../src/Widgets/ScreenShield.vala"
	self->priv = gala_screen_shield_get_instance_private (self);
#line 81 "../src/Widgets/ScreenShield.vala"
	self->priv->_active = FALSE;
#line 83 "../src/Widgets/ScreenShield.vala"
	self->priv->_is_locked = FALSE;
#line 84 "../src/Widgets/ScreenShield.vala"
	self->priv->_in_greeter = FALSE;
#line 85 "../src/Widgets/ScreenShield.vala"
	self->priv->_activation_time = (gint64) 0;
#line 98 "../src/Widgets/ScreenShield.vala"
	self->priv->animate_id = (guint) 0;
#line 106 "../src/Widgets/ScreenShield.vala"
	self->priv->connected_to_buses = FALSE;
#line 4496 "ScreenShield.c"
}

static void
gala_screen_shield_finalize (GObject * obj)
{
	GalaScreenShield * self;
#line 67 "../src/Widgets/ScreenShield.vala"
	self = G_TYPE_CHECK_INSTANCE_CAST (obj, GALA_TYPE_SCREEN_SHIELD, GalaScreenShield);
#line 87 "../src/Widgets/ScreenShield.vala"
	_g_object_unref0 (self->priv->_wm);
#line 89 "../src/Widgets/ScreenShield.vala"
	_g_object_unref0 (self->priv->modal_proxy);
#line 91 "../src/Widgets/ScreenShield.vala"
	_g_object_unref0 (self->priv->login_manager);
#line 92 "../src/Widgets/ScreenShield.vala"
	_g_object_unref0 (self->priv->login_user_manager);
#line 93 "../src/Widgets/ScreenShield.vala"
	_g_object_unref0 (self->priv->login_session);
#line 94 "../src/Widgets/ScreenShield.vala"
	_g_object_unref0 (self->priv->session_presence);
#line 96 "../src/Widgets/ScreenShield.vala"
	_g_object_unref0 (self->priv->display_manager);
#line 100 "../src/Widgets/ScreenShield.vala"
	_g_object_unref0 (self->priv->inhibitor);
#line 102 "../src/Widgets/ScreenShield.vala"
	_g_object_unref0 (self->priv->screensaver_settings);
#line 103 "../src/Widgets/ScreenShield.vala"
	_g_object_unref0 (self->priv->lockdown_settings);
#line 104 "../src/Widgets/ScreenShield.vala"
	_g_object_unref0 (self->priv->gala_settings);
#line 67 "../src/Widgets/ScreenShield.vala"
	G_OBJECT_CLASS (gala_screen_shield_parent_class)->finalize (obj);
#line 4529 "ScreenShield.c"
}

 G_GNUC_NO_INLINE static GType
gala_screen_shield_get_type_once (void)
{
	static const GTypeInfo g_define_type_info = { sizeof (GalaScreenShieldClass), (GBaseInitFunc) NULL, (GBaseFinalizeFunc) NULL, (GClassInitFunc) gala_screen_shield_class_init, (GClassFinalizeFunc) NULL, NULL, sizeof (GalaScreenShield), 0, (GInstanceInitFunc) gala_screen_shield_instance_init, NULL };
	GType gala_screen_shield_type_id;
	gala_screen_shield_type_id = g_type_register_static (clutter_actor_get_type (), "GalaScreenShield", &g_define_type_info, 0);
	GalaScreenShield_private_offset = g_type_add_instance_private (gala_screen_shield_type_id, sizeof (GalaScreenShieldPrivate));
	return gala_screen_shield_type_id;
}

GType
gala_screen_shield_get_type (void)
{
	static gsize gala_screen_shield_type_id__once = 0;
	if (g_once_init_enter (&gala_screen_shield_type_id__once)) {
		GType gala_screen_shield_type_id;
		gala_screen_shield_type_id = gala_screen_shield_get_type_once ();
		g_once_init_leave (&gala_screen_shield_type_id__once, gala_screen_shield_type_id);
	}
	return gala_screen_shield_type_id__once;
}

static void
_vala_gala_screen_shield_get_property (GObject * object,
                                       guint property_id,
                                       GValue * value,
                                       GParamSpec * pspec)
{
	GalaScreenShield * self;
	self = G_TYPE_CHECK_INSTANCE_CAST (object, GALA_TYPE_SCREEN_SHIELD, GalaScreenShield);
#line 67 "../src/Widgets/ScreenShield.vala"
	switch (property_id) {
#line 67 "../src/Widgets/ScreenShield.vala"
		case GALA_SCREEN_SHIELD_ACTIVE_PROPERTY:
#line 67 "../src/Widgets/ScreenShield.vala"
		g_value_set_boolean (value, gala_screen_shield_get_active (self));
#line 67 "../src/Widgets/ScreenShield.vala"
		break;
#line 67 "../src/Widgets/ScreenShield.vala"
		case GALA_SCREEN_SHIELD_IS_LOCKED_PROPERTY:
#line 67 "../src/Widgets/ScreenShield.vala"
		g_value_set_boolean (value, gala_screen_shield_get_is_locked (self));
#line 67 "../src/Widgets/ScreenShield.vala"
		break;
#line 67 "../src/Widgets/ScreenShield.vala"
		case GALA_SCREEN_SHIELD_IN_GREETER_PROPERTY:
#line 67 "../src/Widgets/ScreenShield.vala"
		g_value_set_boolean (value, gala_screen_shield_get_in_greeter (self));
#line 67 "../src/Widgets/ScreenShield.vala"
		break;
#line 67 "../src/Widgets/ScreenShield.vala"
		case GALA_SCREEN_SHIELD_ACTIVATION_TIME_PROPERTY:
#line 67 "../src/Widgets/ScreenShield.vala"
		g_value_set_int64 (value, gala_screen_shield_get_activation_time (self));
#line 67 "../src/Widgets/ScreenShield.vala"
		break;
#line 67 "../src/Widgets/ScreenShield.vala"
		case GALA_SCREEN_SHIELD_WM_PROPERTY:
#line 67 "../src/Widgets/ScreenShield.vala"
		g_value_set_object (value, gala_screen_shield_get_wm (self));
#line 67 "../src/Widgets/ScreenShield.vala"
		break;
#line 4594 "ScreenShield.c"
		default:
#line 67 "../src/Widgets/ScreenShield.vala"
		G_OBJECT_WARN_INVALID_PROPERTY_ID (object, property_id, pspec);
#line 67 "../src/Widgets/ScreenShield.vala"
		break;
#line 4600 "ScreenShield.c"
	}
}

static void
_vala_gala_screen_shield_set_property (GObject * object,
                                       guint property_id,
                                       const GValue * value,
                                       GParamSpec * pspec)
{
	GalaScreenShield * self;
	self = G_TYPE_CHECK_INSTANCE_CAST (object, GALA_TYPE_SCREEN_SHIELD, GalaScreenShield);
#line 67 "../src/Widgets/ScreenShield.vala"
	switch (property_id) {
#line 67 "../src/Widgets/ScreenShield.vala"
		case GALA_SCREEN_SHIELD_ACTIVE_PROPERTY:
#line 67 "../src/Widgets/ScreenShield.vala"
		gala_screen_shield_set_active (self, g_value_get_boolean (value));
#line 67 "../src/Widgets/ScreenShield.vala"
		break;
#line 67 "../src/Widgets/ScreenShield.vala"
		case GALA_SCREEN_SHIELD_IS_LOCKED_PROPERTY:
#line 67 "../src/Widgets/ScreenShield.vala"
		gala_screen_shield_set_is_locked (self, g_value_get_boolean (value));
#line 67 "../src/Widgets/ScreenShield.vala"
		break;
#line 67 "../src/Widgets/ScreenShield.vala"
		case GALA_SCREEN_SHIELD_IN_GREETER_PROPERTY:
#line 67 "../src/Widgets/ScreenShield.vala"
		gala_screen_shield_set_in_greeter (self, g_value_get_boolean (value));
#line 67 "../src/Widgets/ScreenShield.vala"
		break;
#line 67 "../src/Widgets/ScreenShield.vala"
		case GALA_SCREEN_SHIELD_ACTIVATION_TIME_PROPERTY:
#line 67 "../src/Widgets/ScreenShield.vala"
		gala_screen_shield_set_activation_time (self, g_value_get_int64 (value));
#line 67 "../src/Widgets/ScreenShield.vala"
		break;
#line 67 "../src/Widgets/ScreenShield.vala"
		case GALA_SCREEN_SHIELD_WM_PROPERTY:
#line 67 "../src/Widgets/ScreenShield.vala"
		gala_screen_shield_set_wm (self, g_value_get_object (value));
#line 67 "../src/Widgets/ScreenShield.vala"
		break;
#line 4644 "ScreenShield.c"
		default:
#line 67 "../src/Widgets/ScreenShield.vala"
		G_OBJECT_WARN_INVALID_PROPERTY_ID (object, property_id, pspec);
#line 67 "../src/Widgets/ScreenShield.vala"
		break;
#line 4650 "ScreenShield.c"
	}
}

