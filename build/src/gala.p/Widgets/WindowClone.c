/* WindowClone.c generated by valac 0.56.17, the Vala compiler
 * generated from WindowClone.vala, do not modify */

/*
 * SPDX-License-Identifier: GPL-3.0-or-later
 * SPDX-FileCopyrightText: 2022-2023 elementary, Inc. (https://elementary.io)
 *                         2014 Tom Beckmann
 */

#include <clutter/clutter.h>
#include <glib-object.h>
#include "gala.h"
#include <meta/window.h>
#include <mtk/mtk.h>
#include <glib.h>
#include <float.h>
#include <math.h>
#include <meta/meta-window-actor.h>
#include <meta/workspace.h>
#include <meta/display.h>
#include <meta/meta-workspace-manager.h>
#include <meta/meta-plugin.h>
#include <stdlib.h>
#include <string.h>
#include <meta/common.h>
#include <meta/prefs.h>
#include <meta/meta-background-group.h>
#include <cairo-gobject.h>
#include <gdk/gdk.h>

#define GALA_WINDOW_CLONE_CLOSE_WINDOW_ICON_SIZE 36
#define GALA_WINDOW_CLONE_WINDOW_ICON_SIZE 64
#define GALA_WINDOW_CLONE_ACTIVE_SHAPE_SIZE 12
#define GALA_WINDOW_CLONE_FADE_ANIMATION_DURATION 200
#define GALA_WINDOW_CLONE_TITLE_MAX_WIDTH_MARGIN 60
#define GALA_MULTITASKING_VIEW_ANIMATION_DURATION 250
#define GALA_WINDOW_CLONE_ACTIVE_SHAPE_BORDER_RADIUS 16
#define GALA_WINDOW_CLONE_ACTIVE_SHAPE_COLOR_OPACITY 0.8
#if !defined(VALA_STRICT_C)
#if !defined(__clang__) && defined(__GNUC__) && (__GNUC__ >= 14)
#pragma GCC diagnostic warning "-Wincompatible-pointer-types"
#elif defined(__clang__) && (__clang_major__ >= 16)
#pragma clang diagnostic ignored "-Wincompatible-function-pointer-types"
#pragma clang diagnostic ignored "-Wincompatible-pointer-types"
#endif
#endif
#if !defined(VALA_EXTERN)
#if defined(_MSC_VER)
#define VALA_EXTERN __declspec(dllexport) extern
#elif __GNUC__ >= 4
#define VALA_EXTERN __attribute__((visibility("default"))) extern
#else
#define VALA_EXTERN extern
#endif
#endif

#define GALA_TYPE_WINDOW_CLONE (gala_window_clone_get_type ())
#define GALA_WINDOW_CLONE(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), GALA_TYPE_WINDOW_CLONE, GalaWindowClone))
#define GALA_WINDOW_CLONE_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), GALA_TYPE_WINDOW_CLONE, GalaWindowCloneClass))
#define GALA_IS_WINDOW_CLONE(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), GALA_TYPE_WINDOW_CLONE))
#define GALA_IS_WINDOW_CLONE_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), GALA_TYPE_WINDOW_CLONE))
#define GALA_WINDOW_CLONE_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), GALA_TYPE_WINDOW_CLONE, GalaWindowCloneClass))

typedef struct _GalaWindowClone GalaWindowClone;
typedef struct _GalaWindowCloneClass GalaWindowCloneClass;
typedef struct _GalaWindowClonePrivate GalaWindowClonePrivate;

#define GALA_TYPE_GESTURE_TRACKER (gala_gesture_tracker_get_type ())
#define GALA_GESTURE_TRACKER(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), GALA_TYPE_GESTURE_TRACKER, GalaGestureTracker))
#define GALA_GESTURE_TRACKER_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), GALA_TYPE_GESTURE_TRACKER, GalaGestureTrackerClass))
#define GALA_IS_GESTURE_TRACKER(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), GALA_TYPE_GESTURE_TRACKER))
#define GALA_IS_GESTURE_TRACKER_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), GALA_TYPE_GESTURE_TRACKER))
#define GALA_GESTURE_TRACKER_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), GALA_TYPE_GESTURE_TRACKER, GalaGestureTrackerClass))

typedef struct _GalaGestureTracker GalaGestureTracker;
typedef struct _GalaGestureTrackerClass GalaGestureTrackerClass;

#define GALA_WINDOW_CLONE_TYPE_ACTIVE_SHAPE (gala_window_clone_active_shape_get_type ())
#define GALA_WINDOW_CLONE_ACTIVE_SHAPE(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), GALA_WINDOW_CLONE_TYPE_ACTIVE_SHAPE, GalaWindowCloneActiveShape))
#define GALA_WINDOW_CLONE_ACTIVE_SHAPE_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), GALA_WINDOW_CLONE_TYPE_ACTIVE_SHAPE, GalaWindowCloneActiveShapeClass))
#define GALA_WINDOW_CLONE_IS_ACTIVE_SHAPE(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), GALA_WINDOW_CLONE_TYPE_ACTIVE_SHAPE))
#define GALA_WINDOW_CLONE_IS_ACTIVE_SHAPE_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), GALA_WINDOW_CLONE_TYPE_ACTIVE_SHAPE))
#define GALA_WINDOW_CLONE_ACTIVE_SHAPE_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), GALA_WINDOW_CLONE_TYPE_ACTIVE_SHAPE, GalaWindowCloneActiveShapeClass))

typedef struct _GalaWindowCloneActiveShape GalaWindowCloneActiveShape;
typedef struct _GalaWindowCloneActiveShapeClass GalaWindowCloneActiveShapeClass;

#define GALA_TYPE_TOOLTIP (gala_tooltip_get_type ())
#define GALA_TOOLTIP(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), GALA_TYPE_TOOLTIP, GalaTooltip))
#define GALA_TOOLTIP_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), GALA_TYPE_TOOLTIP, GalaTooltipClass))
#define GALA_IS_TOOLTIP(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), GALA_TYPE_TOOLTIP))
#define GALA_IS_TOOLTIP_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), GALA_TYPE_TOOLTIP))
#define GALA_TOOLTIP_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), GALA_TYPE_TOOLTIP, GalaTooltipClass))

typedef struct _GalaTooltip GalaTooltip;
typedef struct _GalaTooltipClass GalaTooltipClass;
enum  {
	GALA_WINDOW_CLONE_0_PROPERTY,
	GALA_WINDOW_CLONE_WM_PROPERTY,
	GALA_WINDOW_CLONE_WINDOW_PROPERTY,
	GALA_WINDOW_CLONE_SLOT_PROPERTY,
	GALA_WINDOW_CLONE_ACTIVE_PROPERTY,
	GALA_WINDOW_CLONE_OVERVIEW_MODE_PROPERTY,
	GALA_WINDOW_CLONE_GESTURE_TRACKER_PROPERTY,
	GALA_WINDOW_CLONE_MONITOR_SCALE_FACTOR_PROPERTY,
	GALA_WINDOW_CLONE_SHADOW_OPACITY_PROPERTY,
	GALA_WINDOW_CLONE_NUM_PROPERTIES
};
static GParamSpec* gala_window_clone_properties[GALA_WINDOW_CLONE_NUM_PROPERTIES];
#define _g_object_unref0(var) ((var == NULL) ? NULL : (var = (g_object_unref (var), NULL)))
#define __vala_MtkRectangle_free0(var) ((var == NULL) ? NULL : (var = (_vala_MtkRectangle_free (var), NULL)))
typedef struct _Block71Data Block71Data;
typedef void (*GalaGestureTrackerOnUpdate) (gdouble percentage, gpointer user_data);
typedef void (*GalaGestureTrackerOnEnd) (gdouble percentage, gboolean cancel_action, gint calculated_duration, gpointer user_data);
typedef void (*GalaGestureTrackerOnBegin) (gdouble percentage, gpointer user_data);
typedef struct _Block72Data Block72Data;

#define GALA_TYPE_ICON_GROUP (gala_icon_group_get_type ())
#define GALA_ICON_GROUP(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), GALA_TYPE_ICON_GROUP, GalaIconGroup))
#define GALA_ICON_GROUP_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), GALA_TYPE_ICON_GROUP, GalaIconGroupClass))
#define GALA_IS_ICON_GROUP(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), GALA_TYPE_ICON_GROUP))
#define GALA_IS_ICON_GROUP_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), GALA_TYPE_ICON_GROUP))
#define GALA_ICON_GROUP_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), GALA_TYPE_ICON_GROUP, GalaIconGroupClass))

typedef struct _GalaIconGroup GalaIconGroup;
typedef struct _GalaIconGroupClass GalaIconGroupClass;

#define GALA_TYPE_WORKSPACE_INSERT_THUMB (gala_workspace_insert_thumb_get_type ())
#define GALA_WORKSPACE_INSERT_THUMB(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), GALA_TYPE_WORKSPACE_INSERT_THUMB, GalaWorkspaceInsertThumb))
#define GALA_WORKSPACE_INSERT_THUMB_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), GALA_TYPE_WORKSPACE_INSERT_THUMB, GalaWorkspaceInsertThumbClass))
#define GALA_IS_WORKSPACE_INSERT_THUMB(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), GALA_TYPE_WORKSPACE_INSERT_THUMB))
#define GALA_IS_WORKSPACE_INSERT_THUMB_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), GALA_TYPE_WORKSPACE_INSERT_THUMB))
#define GALA_WORKSPACE_INSERT_THUMB_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), GALA_TYPE_WORKSPACE_INSERT_THUMB, GalaWorkspaceInsertThumbClass))

typedef struct _GalaWorkspaceInsertThumb GalaWorkspaceInsertThumb;
typedef struct _GalaWorkspaceInsertThumbClass GalaWorkspaceInsertThumbClass;

#define GALA_TYPE_BACKGROUND_MANAGER (gala_background_manager_get_type ())
#define GALA_BACKGROUND_MANAGER(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), GALA_TYPE_BACKGROUND_MANAGER, GalaBackgroundManager))
#define GALA_BACKGROUND_MANAGER_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), GALA_TYPE_BACKGROUND_MANAGER, GalaBackgroundManagerClass))
#define GALA_IS_BACKGROUND_MANAGER(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), GALA_TYPE_BACKGROUND_MANAGER))
#define GALA_IS_BACKGROUND_MANAGER_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), GALA_TYPE_BACKGROUND_MANAGER))
#define GALA_BACKGROUND_MANAGER_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), GALA_TYPE_BACKGROUND_MANAGER, GalaBackgroundManagerClass))

typedef struct _GalaBackgroundManager GalaBackgroundManager;
typedef struct _GalaBackgroundManagerClass GalaBackgroundManagerClass;

#define GALA_TYPE_FRAMED_BACKGROUND (gala_framed_background_get_type ())
#define GALA_FRAMED_BACKGROUND(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), GALA_TYPE_FRAMED_BACKGROUND, GalaFramedBackground))
#define GALA_FRAMED_BACKGROUND_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), GALA_TYPE_FRAMED_BACKGROUND, GalaFramedBackgroundClass))
#define GALA_IS_FRAMED_BACKGROUND(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), GALA_TYPE_FRAMED_BACKGROUND))
#define GALA_IS_FRAMED_BACKGROUND_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), GALA_TYPE_FRAMED_BACKGROUND))
#define GALA_FRAMED_BACKGROUND_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), GALA_TYPE_FRAMED_BACKGROUND, GalaFramedBackgroundClass))

typedef struct _GalaFramedBackground GalaFramedBackground;
typedef struct _GalaFramedBackgroundClass GalaFramedBackgroundClass;

#define GALA_TYPE_WORKSPACE_CLONE (gala_workspace_clone_get_type ())
#define GALA_WORKSPACE_CLONE(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), GALA_TYPE_WORKSPACE_CLONE, GalaWorkspaceClone))
#define GALA_WORKSPACE_CLONE_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), GALA_TYPE_WORKSPACE_CLONE, GalaWorkspaceCloneClass))
#define GALA_IS_WORKSPACE_CLONE(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), GALA_TYPE_WORKSPACE_CLONE))
#define GALA_IS_WORKSPACE_CLONE_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), GALA_TYPE_WORKSPACE_CLONE))
#define GALA_WORKSPACE_CLONE_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), GALA_TYPE_WORKSPACE_CLONE, GalaWorkspaceCloneClass))

typedef struct _GalaWorkspaceClone GalaWorkspaceClone;
typedef struct _GalaWorkspaceCloneClass GalaWorkspaceCloneClass;

#define GALA_TYPE_MONITOR_CLONE (gala_monitor_clone_get_type ())
#define GALA_MONITOR_CLONE(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), GALA_TYPE_MONITOR_CLONE, GalaMonitorClone))
#define GALA_MONITOR_CLONE_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), GALA_TYPE_MONITOR_CLONE, GalaMonitorCloneClass))
#define GALA_IS_MONITOR_CLONE(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), GALA_TYPE_MONITOR_CLONE))
#define GALA_IS_MONITOR_CLONE_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), GALA_TYPE_MONITOR_CLONE))
#define GALA_MONITOR_CLONE_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), GALA_TYPE_MONITOR_CLONE, GalaMonitorCloneClass))

typedef struct _GalaMonitorClone GalaMonitorClone;
typedef struct _GalaMonitorCloneClass GalaMonitorCloneClass;
typedef struct _GalaWindowCloneActiveShapePrivate GalaWindowCloneActiveShapePrivate;
enum  {
	GALA_WINDOW_CLONE_ACTIVE_SHAPE_0_PROPERTY,
	GALA_WINDOW_CLONE_ACTIVE_SHAPE_NUM_PROPERTIES
};
static GParamSpec* gala_window_clone_active_shape_properties[GALA_WINDOW_CLONE_ACTIVE_SHAPE_NUM_PROPERTIES];
enum  {
	GALA_WINDOW_CLONE_SELECTED_SIGNAL,
	GALA_WINDOW_CLONE_REQUEST_REPOSITION_SIGNAL,
	GALA_WINDOW_CLONE_NUM_SIGNALS
};
static guint gala_window_clone_signals[GALA_WINDOW_CLONE_NUM_SIGNALS] = {0};

struct _GalaWindowClone {
	ClutterActor parent_instance;
	GalaWindowClonePrivate * priv;
};

struct _GalaWindowCloneClass {
	ClutterActorClass parent_class;
};

struct _GalaWindowClonePrivate {
	GalaWindowManager* _wm;
	MetaWindow* _window;
	MtkRectangle* _slot;
	gboolean _overview_mode;
	GalaGestureTracker* _gesture_tracker;
	gfloat _monitor_scale_factor;
	GalaDragDropAction* drag_action;
	ClutterClone* clone;
	GalaShadowEffect* shadow_effect;
	ClutterActor* prev_parent;
	gint prev_index;
	gulong check_confirm_dialog_cb;
	gboolean in_slot_animation;
	GalaCloseButton* close_button;
	GalaWindowCloneActiveShape* active_shape;
	ClutterActor* window_icon;
	GalaTooltip* window_title;
};

struct _Block71Data {
	int _ref_count_;
	GalaWindowClone* self;
	MtkRectangle outer_rect;
	gfloat initial_scale;
	gfloat target_scale;
	gfloat initial_x;
	gfloat initial_y;
	gfloat initial_width;
	gfloat initial_height;
	gint target_x;
	gint target_y;
	gboolean animate;
};

struct _Block72Data {
	int _ref_count_;
	GalaWindowClone* self;
	gfloat initial_x;
	gfloat initial_y;
	gfloat initial_width;
	gfloat initial_height;
	gfloat scale;
	MtkRectangle rect;
};

struct _GalaWindowCloneActiveShape {
	GalaCanvasActor parent_instance;
	GalaWindowCloneActiveShapePrivate * priv;
};

struct _GalaWindowCloneActiveShapeClass {
	GalaCanvasActorClass parent_class;
};

static gint GalaWindowClone_private_offset;
static gpointer gala_window_clone_parent_class = NULL;
static gpointer gala_window_clone_active_shape_parent_class = NULL;

VALA_EXTERN GType gala_window_clone_get_type (void) G_GNUC_CONST ;
G_DEFINE_AUTOPTR_CLEANUP_FUNC (GalaWindowClone, g_object_unref)
VALA_EXTERN GType gala_gesture_tracker_get_type (void) G_GNUC_CONST ;
G_DEFINE_AUTOPTR_CLEANUP_FUNC (GalaGestureTracker, g_object_unref)
static GType gala_window_clone_active_shape_get_type (void) G_GNUC_CONST  G_GNUC_UNUSED ;
G_DEFINE_AUTOPTR_CLEANUP_FUNC (GalaWindowCloneActiveShape, g_object_unref)
VALA_EXTERN GType gala_tooltip_get_type (void) G_GNUC_CONST ;
G_DEFINE_AUTOPTR_CLEANUP_FUNC (GalaTooltip, g_object_unref)
VALA_EXTERN MetaWindow* gala_window_clone_get_window (GalaWindowClone* self);
static void gala_window_clone_unmanaged (GalaWindowClone* self);
static void _gala_window_clone_unmanaged_meta_window_unmanaged (MetaWindow* _sender,
                                                         gpointer self);
static void gala_window_clone_on_all_workspaces_changed (GalaWindowClone* self);
static void _gala_window_clone_on_all_workspaces_changed_g_object_notify (GObject* _sender,
                                                                   GParamSpec* pspec,
                                                                   gpointer self);
static void gala_window_clone_check_shadow_requirements (GalaWindowClone* self);
static void _gala_window_clone_check_shadow_requirements_g_object_notify (GObject* _sender,
                                                                   GParamSpec* pspec,
                                                                   gpointer self);
static void _vala_MtkRectangle_free (MtkRectangle* self);
VALA_EXTERN GalaWindowClone* gala_window_clone_new (GalaWindowManager* wm,
                                        MetaWindow* window,
                                        GalaGestureTracker* gesture_tracker,
                                        gfloat scale,
                                        gboolean overview_mode);
VALA_EXTERN GalaWindowClone* gala_window_clone_construct (GType object_type,
                                              GalaWindowManager* wm,
                                              MetaWindow* window,
                                              GalaGestureTracker* gesture_tracker,
                                              gfloat scale,
                                              gboolean overview_mode);
static void gala_window_clone_reallocate (GalaWindowClone* self);
VALA_EXTERN gfloat gala_window_clone_get_monitor_scale_factor (GalaWindowClone* self);
static void gala_window_clone_close_window (GalaWindowClone* self,
                                     guint32 timestamp);
static void _gala_window_clone_close_window_gala_close_button_triggered (GalaCloseButton* _sender,
                                                                  guint32 timestamp,
                                                                  gpointer self);
static void gala_window_clone_set_window_icon_position (GalaWindowClone* self,
                                                 gfloat window_width,
                                                 gfloat window_height,
                                                 gfloat scale_factor,
                                                 gboolean aligned);
static void gala_window_clone_load_clone (GalaWindowClone* self,
                                   gboolean was_waiting);
static gboolean ___lambda20_ (GalaWindowClone* self);
static gboolean ____lambda20__gsource_func (gpointer self);
VALA_EXTERN gboolean gala_window_clone_get_overview_mode (GalaWindowClone* self);
VALA_EXTERN void gala_window_clone_transition_to_original_state (GalaWindowClone* self,
                                                     gboolean animate,
                                                     gboolean with_gesture,
                                                     gboolean is_cancel_animation);
static gboolean gala_window_clone_should_fade (GalaWindowClone* self);
VALA_EXTERN MtkRectangle* gala_window_clone_get_slot (GalaWindowClone* self);
VALA_EXTERN void gala_window_clone_take_slot (GalaWindowClone* self,
                                  MtkRectangle* rect,
                                  gboolean with_gesture,
                                  gboolean is_cancel_animation);
VALA_EXTERN void gala_window_clone_set_shadow_opacity (GalaWindowClone* self,
                                           guint8 value);
static Block71Data* block71_data_ref (Block71Data* _data71_);
static void block71_data_unref (void * _userdata_);
VALA_EXTERN void gala_window_clone_set_active (GalaWindowClone* self,
                                   gboolean value);
VALA_EXTERN void gala_window_clone_place_widgets (GalaWindowClone* self,
                                      gint dest_width,
                                      gint dest_height,
                                      gfloat scale_factor);
static void __lambda21_ (Block71Data* _data71_,
                  gdouble percentage);
VALA_EXTERN gfloat gala_gesture_tracker_animation_value (gfloat initial_value,
                                             gfloat target_value,
                                             gdouble percentage,
                                             gboolean rounded);
static void ___lambda21__gala_gesture_tracker_on_update (gdouble percentage,
                                                  gpointer self);
static void __lambda22_ (Block71Data* _data71_,
                  gdouble percentage,
                  gboolean cancel_action);
VALA_EXTERN GalaWindowManager* gala_window_clone_get_wm (GalaWindowClone* self);
static void gala_window_clone_toggle_shadow (GalaWindowClone* self,
                                      gboolean show);
static void ___lambda78_ (Block71Data* _data71_);
static void ____lambda78__clutter_timeline_completed (ClutterTimeline* _sender,
                                               gpointer self);
static void ___lambda22__gala_gesture_tracker_on_end (gdouble percentage,
                                               gboolean cancel_action,
                                               gint calculated_duration,
                                               gpointer self);
VALA_EXTERN GalaGestureTracker* gala_window_clone_get_gesture_tracker (GalaWindowClone* self);
VALA_EXTERN void gala_gesture_tracker_connect_handlers (GalaGestureTracker* self,
                                            GalaGestureTrackerOnBegin on_begin_handler,
                                            gpointer on_begin_handler_target,
                                            GDestroyNotify on_begin_handler_target_destroy_notify,
                                            GalaGestureTrackerOnUpdate on_update_handler,
                                            gpointer on_update_handler_target,
                                            GDestroyNotify on_update_handler_target_destroy_notify,
                                            GalaGestureTrackerOnEnd on_end_handler,
                                            gpointer on_end_handler_target,
                                            GDestroyNotify on_end_handler_target_destroy_notify);
static Block72Data* block72_data_ref (Block72Data* _data72_);
static void block72_data_unref (void * _userdata_);
static void gala_window_clone_set_slot (GalaWindowClone* self,
                                 MtkRectangle* value);
static void __lambda26_ (Block72Data* _data72_,
                  gdouble percentage);
static void ___lambda26__gala_gesture_tracker_on_update (gdouble percentage,
                                                  gpointer self);
static void __lambda27_ (Block72Data* _data72_,
                  gdouble percentage,
                  gboolean cancel_action);
static void ___lambda28_ (Block72Data* _data72_);
static void ____lambda28__clutter_timeline_completed (ClutterTimeline* _sender,
                                               gpointer self);
static void ___lambda27__gala_gesture_tracker_on_end (gdouble percentage,
                                               gboolean cancel_action,
                                               gint calculated_duration,
                                               gpointer self);
static void gala_window_clone_real_allocate (ClutterActor* base,
                                      ClutterActorBox* box);
static gboolean gala_window_clone_real_button_press_event (ClutterActor* base,
                                                    ClutterEvent* event);
static gboolean gala_window_clone_real_enter_event (ClutterActor* base,
                                             ClutterEvent* event);
static gboolean gala_window_clone_real_leave_event (ClutterActor* base,
                                             ClutterEvent* event);
VALA_EXTERN gint gala_internal_utils_scale_to_int (gint value,
                                       gfloat scale_factor);
static gboolean gala_window_clone_is_close_button_on_left (void);
VALA_EXTERN void gala_tooltip_set_text (GalaTooltip* self,
                            const gchar* new_text);
VALA_EXTERN void gala_tooltip_set_max_width (GalaTooltip* self,
                                 gfloat new_max_width);
static void gala_window_clone_set_window_title_position (GalaWindowClone* self,
                                                  gfloat window_width,
                                                  gfloat window_height,
                                                  gfloat scale_factor);
VALA_EXTERN guint8 gala_window_clone_get_shadow_opacity (GalaWindowClone* self);
static void gala_window_clone_check_confirm_dialog (GalaWindowClone* self,
                                             gint monitor,
                                             MetaWindow* new_window);
static void _gala_window_clone_check_confirm_dialog_meta_display_window_entered_monitor (MetaDisplay* _sender,
                                                                                  gint object,
                                                                                  MetaWindow* p0,
                                                                                  gpointer self);
static gboolean ___lambda19_ (GalaWindowClone* self);
static gboolean ____lambda19__gsource_func (gpointer self);
static void gala_window_clone_actor_clicked (GalaWindowClone* self,
                                      guint32 button);
static ClutterActor* gala_window_clone_drag_begin (GalaWindowClone* self,
                                            gfloat click_x,
                                            gfloat click_y);
static void gala_window_clone_drag_destination_crossed (GalaWindowClone* self,
                                                 ClutterActor* destination,
                                                 gboolean hovered);
VALA_EXTERN GType gala_icon_group_get_type (void) G_GNUC_CONST ;
G_DEFINE_AUTOPTR_CLEANUP_FUNC (GalaIconGroup, g_object_unref)
VALA_EXTERN GType gala_workspace_insert_thumb_get_type (void) G_GNUC_CONST ;
G_DEFINE_AUTOPTR_CLEANUP_FUNC (GalaWorkspaceInsertThumb, g_object_unref)
VALA_EXTERN MetaWorkspace* gala_icon_group_get_workspace (GalaIconGroup* self);
VALA_EXTERN gint gala_workspace_insert_thumb_get_delay (GalaWorkspaceInsertThumb* self);
VALA_EXTERN void gala_workspace_insert_thumb_set_window_thumb (GalaWorkspaceInsertThumb* self,
                                                   MetaWindow* window);
VALA_EXTERN void gala_icon_group_add_window (GalaIconGroup* self,
                                 MetaWindow* window,
                                 gboolean no_redraw,
                                 gboolean temporary);
VALA_EXTERN void gala_icon_group_remove_window (GalaIconGroup* self,
                                    MetaWindow* window,
                                    gboolean animate);
static void gala_window_clone_drag_end (GalaWindowClone* self,
                                 ClutterActor* destination);
VALA_EXTERN GType gala_background_manager_get_type (void) G_GNUC_CONST ;
G_DEFINE_AUTOPTR_CLEANUP_FUNC (GalaBackgroundManager, g_object_unref)
 G_GNUC_INTERNAL GType gala_framed_background_get_type (void) G_GNUC_CONST  G_GNUC_UNUSED ;
G_DEFINE_AUTOPTR_CLEANUP_FUNC (GalaFramedBackground, g_object_unref)
VALA_EXTERN GType gala_workspace_clone_get_type (void) G_GNUC_CONST ;
G_DEFINE_AUTOPTR_CLEANUP_FUNC (GalaWorkspaceClone, g_object_unref)
VALA_EXTERN MetaWorkspace* gala_workspace_clone_get_workspace (GalaWorkspaceClone* self);
static void gala_window_clone_drag_canceled (GalaWindowClone* self);
VALA_EXTERN gint gala_workspace_insert_thumb_get_workspace_index (GalaWorkspaceInsertThumb* self);
VALA_EXTERN void gala_internal_utils_insert_workspace_with_window (gint index,
                                                       MetaWindow* new_window);
VALA_EXTERN GType gala_monitor_clone_get_type (void) G_GNUC_CONST ;
G_DEFINE_AUTOPTR_CLEANUP_FUNC (GalaMonitorClone, g_object_unref)
VALA_EXTERN gint gala_monitor_clone_get_monitor (GalaMonitorClone* self);
static void gala_window_clone_set_wm (GalaWindowClone* self,
                               GalaWindowManager* value);
static void gala_window_clone_set_window (GalaWindowClone* self,
                                   MetaWindow* value);
static gboolean _mtk_rectangle_equal (const MtkRectangle * s1,
                               const MtkRectangle * s2);
static MtkRectangle* _vala_MtkRectangle_copy (MtkRectangle* self);
static void gala_window_clone_set_overview_mode (GalaWindowClone* self,
                                          gboolean value);
static void gala_window_clone_set_gesture_tracker (GalaWindowClone* self,
                                            GalaGestureTracker* value);
VALA_EXTERN void gala_window_clone_set_monitor_scale_factor (GalaWindowClone* self,
                                                 gfloat value);
static void gala_window_clone_active_shape_invalidate (GalaWindowCloneActiveShape* self);
static void gala_window_clone_active_shape_real_draw (GalaCanvasActor* base,
                                               cairo_t* cr,
                                               gint width,
                                               gint height);
static GalaWindowCloneActiveShape* gala_window_clone_active_shape_new (void);
static GalaWindowCloneActiveShape* gala_window_clone_active_shape_construct (GType object_type);
static GObject * gala_window_clone_active_shape_constructor (GType type,
                                                      guint n_construct_properties,
                                                      GObjectConstructParam * construct_properties);
static void _gala_window_clone_active_shape_invalidate_g_object_notify (GObject* _sender,
                                                                 GParamSpec* pspec,
                                                                 gpointer self);
static GType gala_window_clone_active_shape_get_type_once (void);
static GObject * gala_window_clone_constructor (GType type,
                                         guint n_construct_properties,
                                         GObjectConstructParam * construct_properties);
static void _gala_window_clone____lambda79_ (GalaWindowClone* self,
                                      ClutterClickAction* action,
                                      ClutterActor* actor);
static void __gala_window_clone____lambda79__clutter_click_action_clicked (ClutterClickAction* _sender,
                                                                    ClutterActor* actor,
                                                                    gpointer self);
static ClutterActor* _gala_window_clone_drag_begin_gala_drag_drop_action_drag_begin (GalaDragDropAction* _sender,
                                                                              gfloat x,
                                                                              gfloat y,
                                                                              gpointer self);
static void _gala_window_clone_drag_destination_crossed_gala_drag_drop_action_destination_crossed (GalaDragDropAction* _sender,
                                                                                            ClutterActor* destination,
                                                                                            gboolean hovered,
                                                                                            gpointer self);
static void _gala_window_clone_drag_end_gala_drag_drop_action_drag_end (GalaDragDropAction* _sender,
                                                                 ClutterActor* actor,
                                                                 gpointer self);
static void _gala_window_clone_drag_canceled_gala_drag_drop_action_drag_canceled (GalaDragDropAction* _sender,
                                                                           gpointer self);
static void _gala_window_clone_actor_clicked_gala_drag_drop_action_actor_clicked (GalaDragDropAction* _sender,
                                                                           guint32 button,
                                                                           gpointer self);
VALA_EXTERN GalaTooltip* gala_tooltip_new (void);
VALA_EXTERN GalaTooltip* gala_tooltip_construct (GType object_type);
static void gala_window_clone_finalize (GObject * obj);
static GType gala_window_clone_get_type_once (void);
static void _vala_gala_window_clone_get_property (GObject * object,
                                           guint property_id,
                                           GValue * value,
                                           GParamSpec * pspec);
static void _vala_gala_window_clone_set_property (GObject * object,
                                           guint property_id,
                                           const GValue * value,
                                           GParamSpec * pspec);

static inline gpointer
gala_window_clone_get_instance_private (GalaWindowClone* self)
{
	return G_STRUCT_MEMBER_P (self, GalaWindowClone_private_offset);
}

static void
_gala_window_clone_unmanaged_meta_window_unmanaged (MetaWindow* _sender,
                                                    gpointer self)
{
#line 150 "../src/Widgets/WindowClone.vala"
	gala_window_clone_unmanaged ((GalaWindowClone*) self);
#line 523 "WindowClone.c"
}

static void
_gala_window_clone_on_all_workspaces_changed_g_object_notify (GObject* _sender,
                                                              GParamSpec* pspec,
                                                              gpointer self)
{
#line 151 "../src/Widgets/WindowClone.vala"
	gala_window_clone_on_all_workspaces_changed ((GalaWindowClone*) self);
#line 533 "WindowClone.c"
}

static void
_gala_window_clone_check_shadow_requirements_g_object_notify (GObject* _sender,
                                                              GParamSpec* pspec,
                                                              gpointer self)
{
#line 152 "../src/Widgets/WindowClone.vala"
	gala_window_clone_check_shadow_requirements ((GalaWindowClone*) self);
#line 543 "WindowClone.c"
}

static void
_vala_MtkRectangle_free (MtkRectangle* self)
{
#line 38 "../src/Widgets/WindowClone.vala"
	g_boxed_free (mtk_rectangle_get_type (), self);
#line 551 "WindowClone.c"
}

GalaWindowClone*
gala_window_clone_construct (GType object_type,
                             GalaWindowManager* wm,
                             MetaWindow* window,
                             GalaGestureTracker* gesture_tracker,
                             gfloat scale,
                             gboolean overview_mode)
{
	GalaWindowClone * self = NULL;
#line 98 "../src/Widgets/WindowClone.vala"
	g_return_val_if_fail (wm != NULL, NULL);
#line 98 "../src/Widgets/WindowClone.vala"
	g_return_val_if_fail (window != NULL, NULL);
#line 99 "../src/Widgets/WindowClone.vala"
	self = (GalaWindowClone*) g_object_new (object_type, "wm", wm, "window", window, "gesture-tracker", gesture_tracker, "monitor-scale-factor", scale, "overview-mode", overview_mode, NULL);
#line 98 "../src/Widgets/WindowClone.vala"
	return self;
#line 571 "WindowClone.c"
}

GalaWindowClone*
gala_window_clone_new (GalaWindowManager* wm,
                       MetaWindow* window,
                       GalaGestureTracker* gesture_tracker,
                       gfloat scale,
                       gboolean overview_mode)
{
#line 98 "../src/Widgets/WindowClone.vala"
	return gala_window_clone_construct (GALA_TYPE_WINDOW_CLONE, wm, window, gesture_tracker, scale, overview_mode);
#line 583 "WindowClone.c"
}

static void
_gala_window_clone_close_window_gala_close_button_triggered (GalaCloseButton* _sender,
                                                             guint32 timestamp,
                                                             gpointer self)
{
#line 163 "../src/Widgets/WindowClone.vala"
	gala_window_clone_close_window ((GalaWindowClone*) self, timestamp);
#line 593 "WindowClone.c"
}

static void
gala_window_clone_reallocate (GalaWindowClone* self)
{
	MtkRectangle window_frame_rect = {0};
	MetaWindow* _tmp0_;
	MtkRectangle _tmp1_ = {0};
	gfloat _tmp2_;
	gfloat _tmp3_;
	GalaCloseButton* _tmp4_ = NULL;
	GalaCloseButton* _tmp5_;
	MetaWindow* _tmp6_;
	gfloat _tmp7_;
	gfloat _tmp8_;
	GalaWindowIcon* _tmp9_;
	ClutterActor* _tmp10_;
	ClutterActor* _tmp11_;
	MtkRectangle _tmp12_;
	MtkRectangle _tmp13_;
	gfloat _tmp14_;
	gfloat _tmp15_;
	GalaCloseButton* _tmp16_;
	ClutterActor* _tmp17_;
	ClutterActor* _tmp18_;
	GalaTooltip* _tmp19_;
#line 157 "../src/Widgets/WindowClone.vala"
	g_return_if_fail (self != NULL);
#line 158 "../src/Widgets/WindowClone.vala"
	_tmp0_ = self->priv->_window;
#line 158 "../src/Widgets/WindowClone.vala"
	meta_window_get_frame_rect (_tmp0_, &_tmp1_);
#line 158 "../src/Widgets/WindowClone.vala"
	window_frame_rect = _tmp1_;
#line 160 "../src/Widgets/WindowClone.vala"
	_tmp2_ = gala_window_clone_get_monitor_scale_factor (self);
#line 160 "../src/Widgets/WindowClone.vala"
	_tmp3_ = _tmp2_;
#line 160 "../src/Widgets/WindowClone.vala"
	_tmp4_ = gala_close_button_new (_tmp3_);
#line 160 "../src/Widgets/WindowClone.vala"
	clutter_actor_set_opacity ((ClutterActor*) _tmp4_, (guint) 0);
#line 160 "../src/Widgets/WindowClone.vala"
	g_object_ref_sink (_tmp4_);
#line 160 "../src/Widgets/WindowClone.vala"
	_g_object_unref0 (self->priv->close_button);
#line 160 "../src/Widgets/WindowClone.vala"
	self->priv->close_button = _tmp4_;
#line 163 "../src/Widgets/WindowClone.vala"
	_tmp5_ = self->priv->close_button;
#line 163 "../src/Widgets/WindowClone.vala"
	g_signal_connect_object (_tmp5_, "triggered", (GCallback) _gala_window_clone_close_window_gala_close_button_triggered, self, 0);
#line 165 "../src/Widgets/WindowClone.vala"
	_tmp6_ = self->priv->_window;
#line 165 "../src/Widgets/WindowClone.vala"
	_tmp7_ = gala_window_clone_get_monitor_scale_factor (self);
#line 165 "../src/Widgets/WindowClone.vala"
	_tmp8_ = _tmp7_;
#line 165 "../src/Widgets/WindowClone.vala"
	_tmp9_ = gala_window_icon_new (_tmp6_, GALA_WINDOW_CLONE_WINDOW_ICON_SIZE, (gint) round ((gdouble) _tmp8_));
#line 165 "../src/Widgets/WindowClone.vala"
	g_object_ref_sink (_tmp9_);
#line 165 "../src/Widgets/WindowClone.vala"
	_g_object_unref0 (self->priv->window_icon);
#line 165 "../src/Widgets/WindowClone.vala"
	self->priv->window_icon = (ClutterActor*) _tmp9_;
#line 166 "../src/Widgets/WindowClone.vala"
	_tmp10_ = self->priv->window_icon;
#line 166 "../src/Widgets/WindowClone.vala"
	clutter_actor_set_opacity (_tmp10_, (guint) 0);
#line 167 "../src/Widgets/WindowClone.vala"
	_tmp11_ = self->priv->window_icon;
#line 167 "../src/Widgets/WindowClone.vala"
	clutter_actor_set_pivot_point (_tmp11_, 0.5f, 0.5f);
#line 168 "../src/Widgets/WindowClone.vala"
	_tmp12_ = window_frame_rect;
#line 168 "../src/Widgets/WindowClone.vala"
	_tmp13_ = window_frame_rect;
#line 168 "../src/Widgets/WindowClone.vala"
	_tmp14_ = gala_window_clone_get_monitor_scale_factor (self);
#line 168 "../src/Widgets/WindowClone.vala"
	_tmp15_ = _tmp14_;
#line 168 "../src/Widgets/WindowClone.vala"
	gala_window_clone_set_window_icon_position (self, (gfloat) _tmp12_.width, (gfloat) _tmp13_.height, _tmp15_, TRUE);
#line 170 "../src/Widgets/WindowClone.vala"
	_tmp16_ = self->priv->close_button;
#line 170 "../src/Widgets/WindowClone.vala"
	clutter_actor_add_child ((ClutterActor*) self, (ClutterActor*) _tmp16_);
#line 171 "../src/Widgets/WindowClone.vala"
	_tmp17_ = self->priv->window_icon;
#line 171 "../src/Widgets/WindowClone.vala"
	clutter_actor_add_child ((ClutterActor*) self, _tmp17_);
#line 173 "../src/Widgets/WindowClone.vala"
	_tmp18_ = self->priv->window_icon;
#line 173 "../src/Widgets/WindowClone.vala"
	_tmp19_ = self->priv->window_title;
#line 173 "../src/Widgets/WindowClone.vala"
	clutter_actor_set_child_below_sibling ((ClutterActor*) self, _tmp18_, (ClutterActor*) _tmp19_);
#line 692 "WindowClone.c"
}

/**
     * Waits for the texture of a new Meta.WindowActor to be available
     * and makes a close of it. If it was already was assigned a slot
     * at this point it will animate to it. Otherwise it will just place
     * itself at the location of the original window. Also adds the shadow
     * effect and makes sure the shadow is updated on size changes.
     *
     * @param was_waiting Internal argument used to indicate that we had to
     *                    wait before the window's texture became available.
     */
static gpointer
_g_object_ref0 (gpointer self)
{
#line 187 "../src/Widgets/WindowClone.vala"
	return self ? g_object_ref (self) : NULL;
#line 710 "WindowClone.c"
}

static gboolean
___lambda20_ (GalaWindowClone* self)
{
	MetaWindow* _tmp0_;
	GObject* _tmp1_;
	gboolean result;
#line 190 "../src/Widgets/WindowClone.vala"
	_tmp0_ = self->priv->_window;
#line 190 "../src/Widgets/WindowClone.vala"
	_tmp1_ = meta_window_get_compositor_private (_tmp0_);
#line 190 "../src/Widgets/WindowClone.vala"
	if (_tmp1_ != NULL) {
#line 191 "../src/Widgets/WindowClone.vala"
		gala_window_clone_load_clone (self, TRUE);
#line 727 "WindowClone.c"
	}
#line 192 "../src/Widgets/WindowClone.vala"
	result = G_SOURCE_REMOVE;
#line 192 "../src/Widgets/WindowClone.vala"
	return result;
#line 733 "WindowClone.c"
}

static gboolean
____lambda20__gsource_func (gpointer self)
{
	gboolean result;
	result = ___lambda20_ ((GalaWindowClone*) self);
#line 189 "../src/Widgets/WindowClone.vala"
	return result;
#line 743 "WindowClone.c"
}

static void
gala_window_clone_load_clone (GalaWindowClone* self,
                              gboolean was_waiting)
{
	MetaWindowActor* actor = NULL;
	MetaWindow* _tmp0_;
	GObject* _tmp1_;
	MetaWindowActor* _tmp2_;
	MetaWindowActor* _tmp3_;
	gboolean _tmp4_;
	MetaWindowActor* _tmp6_;
	ClutterClone* _tmp7_;
	ClutterClone* _tmp8_;
	GalaWindowCloneActiveShape* _tmp9_;
	ClutterClone* _tmp10_;
	GalaCloseButton* _tmp11_;
	ClutterClone* _tmp12_;
	ClutterActor* _tmp13_;
	ClutterClone* _tmp14_;
	GalaTooltip* _tmp15_;
	ClutterClone* _tmp16_;
	gboolean _tmp17_ = FALSE;
#line 186 "../src/Widgets/WindowClone.vala"
	g_return_if_fail (self != NULL);
#line 187 "../src/Widgets/WindowClone.vala"
	_tmp0_ = self->priv->_window;
#line 187 "../src/Widgets/WindowClone.vala"
	_tmp1_ = meta_window_get_compositor_private (_tmp0_);
#line 187 "../src/Widgets/WindowClone.vala"
	_tmp2_ = _g_object_ref0 (G_TYPE_CHECK_INSTANCE_CAST (_tmp1_, meta_window_actor_get_type (), MetaWindowActor));
#line 187 "../src/Widgets/WindowClone.vala"
	actor = _tmp2_;
#line 188 "../src/Widgets/WindowClone.vala"
	_tmp3_ = actor;
#line 188 "../src/Widgets/WindowClone.vala"
	if (_tmp3_ == NULL) {
#line 189 "../src/Widgets/WindowClone.vala"
		g_idle_add_full (G_PRIORITY_DEFAULT_IDLE, ____lambda20__gsource_func, g_object_ref (self), g_object_unref);
#line 195 "../src/Widgets/WindowClone.vala"
		_g_object_unref0 (actor);
#line 195 "../src/Widgets/WindowClone.vala"
		return;
#line 788 "WindowClone.c"
	}
#line 198 "../src/Widgets/WindowClone.vala"
	_tmp4_ = self->priv->_overview_mode;
#line 198 "../src/Widgets/WindowClone.vala"
	if (_tmp4_) {
#line 794 "WindowClone.c"
		MetaWindowActor* _tmp5_;
#line 199 "../src/Widgets/WindowClone.vala"
		_tmp5_ = actor;
#line 199 "../src/Widgets/WindowClone.vala"
		clutter_actor_hide ((ClutterActor*) _tmp5_);
#line 800 "WindowClone.c"
	}
#line 202 "../src/Widgets/WindowClone.vala"
	_tmp6_ = actor;
#line 202 "../src/Widgets/WindowClone.vala"
	_tmp7_ = (ClutterClone*) clutter_clone_new ((ClutterActor*) _tmp6_);
#line 202 "../src/Widgets/WindowClone.vala"
	g_object_ref_sink (_tmp7_);
#line 202 "../src/Widgets/WindowClone.vala"
	_g_object_unref0 (self->priv->clone);
#line 202 "../src/Widgets/WindowClone.vala"
	self->priv->clone = _tmp7_;
#line 203 "../src/Widgets/WindowClone.vala"
	_tmp8_ = self->priv->clone;
#line 203 "../src/Widgets/WindowClone.vala"
	clutter_actor_add_child ((ClutterActor*) self, (ClutterActor*) _tmp8_);
#line 205 "../src/Widgets/WindowClone.vala"
	_tmp9_ = self->priv->active_shape;
#line 205 "../src/Widgets/WindowClone.vala"
	_tmp10_ = self->priv->clone;
#line 205 "../src/Widgets/WindowClone.vala"
	clutter_actor_set_child_below_sibling ((ClutterActor*) self, (ClutterActor*) _tmp9_, (ClutterActor*) _tmp10_);
#line 206 "../src/Widgets/WindowClone.vala"
	_tmp11_ = self->priv->close_button;
#line 206 "../src/Widgets/WindowClone.vala"
	_tmp12_ = self->priv->clone;
#line 206 "../src/Widgets/WindowClone.vala"
	clutter_actor_set_child_above_sibling ((ClutterActor*) self, (ClutterActor*) _tmp11_, (ClutterActor*) _tmp12_);
#line 207 "../src/Widgets/WindowClone.vala"
	_tmp13_ = self->priv->window_icon;
#line 207 "../src/Widgets/WindowClone.vala"
	_tmp14_ = self->priv->clone;
#line 207 "../src/Widgets/WindowClone.vala"
	clutter_actor_set_child_above_sibling ((ClutterActor*) self, _tmp13_, (ClutterActor*) _tmp14_);
#line 208 "../src/Widgets/WindowClone.vala"
	_tmp15_ = self->priv->window_title;
#line 208 "../src/Widgets/WindowClone.vala"
	_tmp16_ = self->priv->clone;
#line 208 "../src/Widgets/WindowClone.vala"
	clutter_actor_set_child_above_sibling ((ClutterActor*) self, (ClutterActor*) _tmp15_, (ClutterActor*) _tmp16_);
#line 210 "../src/Widgets/WindowClone.vala"
	gala_window_clone_transition_to_original_state (self, FALSE, FALSE, FALSE);
#line 212 "../src/Widgets/WindowClone.vala"
	gala_window_clone_check_shadow_requirements (self);
#line 214 "../src/Widgets/WindowClone.vala"
	if (gala_window_clone_should_fade (self)) {
#line 215 "../src/Widgets/WindowClone.vala"
		clutter_actor_set_opacity ((ClutterActor*) self, (guint) 0);
#line 848 "WindowClone.c"
	}
#line 222 "../src/Widgets/WindowClone.vala"
	if (was_waiting) {
#line 852 "WindowClone.c"
		MtkRectangle* _tmp18_;
#line 222 "../src/Widgets/WindowClone.vala"
		_tmp18_ = self->priv->_slot;
#line 222 "../src/Widgets/WindowClone.vala"
		_tmp17_ = _tmp18_ != NULL;
#line 858 "WindowClone.c"
	} else {
#line 222 "../src/Widgets/WindowClone.vala"
		_tmp17_ = FALSE;
#line 862 "WindowClone.c"
	}
#line 222 "../src/Widgets/WindowClone.vala"
	if (_tmp17_) {
#line 866 "WindowClone.c"
		MtkRectangle* _tmp19_;
		MtkRectangle _tmp20_;
#line 223 "../src/Widgets/WindowClone.vala"
		clutter_actor_set_opacity ((ClutterActor*) self, (guint) 0);
#line 224 "../src/Widgets/WindowClone.vala"
		_tmp19_ = self->priv->_slot;
#line 224 "../src/Widgets/WindowClone.vala"
		_tmp20_ = *_tmp19_;
#line 224 "../src/Widgets/WindowClone.vala"
		gala_window_clone_take_slot (self, &_tmp20_, FALSE, FALSE);
#line 225 "../src/Widgets/WindowClone.vala"
		clutter_actor_set_opacity ((ClutterActor*) self, (guint) 255);
#line 227 "../src/Widgets/WindowClone.vala"
		g_signal_emit (self, gala_window_clone_signals[GALA_WINDOW_CLONE_REQUEST_REPOSITION_SIGNAL], 0);
#line 881 "WindowClone.c"
	}
#line 186 "../src/Widgets/WindowClone.vala"
	_g_object_unref0 (actor);
#line 885 "WindowClone.c"
}

static void
gala_window_clone_check_shadow_requirements (GalaWindowClone* self)
{
	ClutterClone* _tmp0_;
	gboolean _tmp1_ = FALSE;
	MetaWindow* _tmp2_;
	gboolean _tmp3_;
	gboolean _tmp4_;
#line 231 "../src/Widgets/WindowClone.vala"
	g_return_if_fail (self != NULL);
#line 232 "../src/Widgets/WindowClone.vala"
	_tmp0_ = self->priv->clone;
#line 232 "../src/Widgets/WindowClone.vala"
	if (_tmp0_ == NULL) {
#line 233 "../src/Widgets/WindowClone.vala"
		return;
#line 904 "WindowClone.c"
	}
#line 236 "../src/Widgets/WindowClone.vala"
	_tmp2_ = self->priv->_window;
#line 236 "../src/Widgets/WindowClone.vala"
	g_object_get (_tmp2_, "fullscreen", &_tmp3_, NULL);
#line 236 "../src/Widgets/WindowClone.vala"
	_tmp4_ = _tmp3_;
#line 236 "../src/Widgets/WindowClone.vala"
	if (_tmp4_) {
#line 236 "../src/Widgets/WindowClone.vala"
		_tmp1_ = TRUE;
#line 916 "WindowClone.c"
	} else {
		gboolean _tmp5_ = FALSE;
		MetaWindow* _tmp6_;
		gboolean _tmp7_;
		gboolean _tmp8_;
#line 236 "../src/Widgets/WindowClone.vala"
		_tmp6_ = self->priv->_window;
#line 236 "../src/Widgets/WindowClone.vala"
		g_object_get (_tmp6_, "maximized-horizontally", &_tmp7_, NULL);
#line 236 "../src/Widgets/WindowClone.vala"
		_tmp8_ = _tmp7_;
#line 236 "../src/Widgets/WindowClone.vala"
		if (_tmp8_) {
#line 930 "WindowClone.c"
			MetaWindow* _tmp9_;
			gboolean _tmp10_;
			gboolean _tmp11_;
#line 236 "../src/Widgets/WindowClone.vala"
			_tmp9_ = self->priv->_window;
#line 236 "../src/Widgets/WindowClone.vala"
			g_object_get (_tmp9_, "maximized-vertically", &_tmp10_, NULL);
#line 236 "../src/Widgets/WindowClone.vala"
			_tmp11_ = _tmp10_;
#line 236 "../src/Widgets/WindowClone.vala"
			_tmp5_ = _tmp11_;
#line 942 "WindowClone.c"
		} else {
#line 236 "../src/Widgets/WindowClone.vala"
			_tmp5_ = FALSE;
#line 946 "WindowClone.c"
		}
#line 236 "../src/Widgets/WindowClone.vala"
		_tmp1_ = _tmp5_;
#line 950 "WindowClone.c"
	}
#line 236 "../src/Widgets/WindowClone.vala"
	if (_tmp1_) {
#line 954 "WindowClone.c"
		GalaShadowEffect* _tmp12_;
#line 237 "../src/Widgets/WindowClone.vala"
		_tmp12_ = self->priv->shadow_effect;
#line 237 "../src/Widgets/WindowClone.vala"
		if (_tmp12_ == NULL) {
#line 960 "WindowClone.c"
			GalaShadowEffect* _tmp13_;
			ClutterClone* _tmp14_;
			GalaShadowEffect* _tmp15_;
#line 238 "../src/Widgets/WindowClone.vala"
			_tmp13_ = gala_shadow_effect_new ("window");
#line 238 "../src/Widgets/WindowClone.vala"
			g_object_ref_sink (_tmp13_);
#line 238 "../src/Widgets/WindowClone.vala"
			_g_object_unref0 (self->priv->shadow_effect);
#line 238 "../src/Widgets/WindowClone.vala"
			self->priv->shadow_effect = _tmp13_;
#line 239 "../src/Widgets/WindowClone.vala"
			gala_window_clone_set_shadow_opacity (self, (guint8) 0);
#line 240 "../src/Widgets/WindowClone.vala"
			_tmp14_ = self->priv->clone;
#line 240 "../src/Widgets/WindowClone.vala"
			_tmp15_ = self->priv->shadow_effect;
#line 240 "../src/Widgets/WindowClone.vala"
			clutter_actor_add_effect_with_name ((ClutterActor*) _tmp14_, "shadow", (ClutterEffect*) _tmp15_);
#line 980 "WindowClone.c"
		}
	} else {
		GalaShadowEffect* _tmp16_;
#line 243 "../src/Widgets/WindowClone.vala"
		_tmp16_ = self->priv->shadow_effect;
#line 243 "../src/Widgets/WindowClone.vala"
		if (_tmp16_ != NULL) {
#line 988 "WindowClone.c"
			ClutterClone* _tmp17_;
			GalaShadowEffect* _tmp18_;
#line 244 "../src/Widgets/WindowClone.vala"
			_tmp17_ = self->priv->clone;
#line 244 "../src/Widgets/WindowClone.vala"
			_tmp18_ = self->priv->shadow_effect;
#line 244 "../src/Widgets/WindowClone.vala"
			clutter_actor_remove_effect ((ClutterActor*) _tmp17_, (ClutterEffect*) _tmp18_);
#line 245 "../src/Widgets/WindowClone.vala"
			_g_object_unref0 (self->priv->shadow_effect);
#line 245 "../src/Widgets/WindowClone.vala"
			self->priv->shadow_effect = NULL;
#line 1001 "WindowClone.c"
		}
	}
}

/**
     * If we are in overview mode, we may display windows from workspaces other than
     * the current one. To ease their appearance we have to fade them in.
     */
static gboolean
gala_window_clone_should_fade (GalaWindowClone* self)
{
	gboolean _tmp0_ = FALSE;
	gboolean _tmp1_ = FALSE;
	gboolean _tmp2_;
	gboolean result;
#line 254 "../src/Widgets/WindowClone.vala"
	g_return_val_if_fail (self != NULL, FALSE);
#line 255 "../src/Widgets/WindowClone.vala"
	_tmp2_ = self->priv->_overview_mode;
#line 255 "../src/Widgets/WindowClone.vala"
	if (_tmp2_) {
#line 1023 "WindowClone.c"
		MetaWindow* _tmp3_;
		MetaWorkspace* _tmp4_;
		MetaWindow* _tmp5_;
		MetaDisplay* _tmp6_;
		MetaWorkspaceManager* _tmp7_;
		MetaWorkspace* _tmp8_;
#line 256 "../src/Widgets/WindowClone.vala"
		_tmp3_ = self->priv->_window;
#line 256 "../src/Widgets/WindowClone.vala"
		_tmp4_ = meta_window_get_workspace (_tmp3_);
#line 256 "../src/Widgets/WindowClone.vala"
		_tmp5_ = self->priv->_window;
#line 256 "../src/Widgets/WindowClone.vala"
		_tmp6_ = meta_window_get_display (_tmp5_);
#line 256 "../src/Widgets/WindowClone.vala"
		_tmp7_ = meta_display_get_workspace_manager (_tmp6_);
#line 256 "../src/Widgets/WindowClone.vala"
		_tmp8_ = meta_workspace_manager_get_active_workspace (_tmp7_);
#line 256 "../src/Widgets/WindowClone.vala"
		_tmp1_ = _tmp4_ != _tmp8_;
#line 1044 "WindowClone.c"
	} else {
#line 255 "../src/Widgets/WindowClone.vala"
		_tmp1_ = FALSE;
#line 1048 "WindowClone.c"
	}
#line 255 "../src/Widgets/WindowClone.vala"
	if (_tmp1_) {
#line 255 "../src/Widgets/WindowClone.vala"
		_tmp0_ = TRUE;
#line 1054 "WindowClone.c"
	} else {
		MetaWindow* _tmp9_;
		gboolean _tmp10_;
		gboolean _tmp11_;
#line 256 "../src/Widgets/WindowClone.vala"
		_tmp9_ = self->priv->_window;
#line 256 "../src/Widgets/WindowClone.vala"
		g_object_get (_tmp9_, "minimized", &_tmp10_, NULL);
#line 256 "../src/Widgets/WindowClone.vala"
		_tmp11_ = _tmp10_;
#line 256 "../src/Widgets/WindowClone.vala"
		_tmp0_ = _tmp11_;
#line 1067 "WindowClone.c"
	}
#line 255 "../src/Widgets/WindowClone.vala"
	result = _tmp0_;
#line 255 "../src/Widgets/WindowClone.vala"
	return result;
#line 1073 "WindowClone.c"
}

static void
gala_window_clone_on_all_workspaces_changed (GalaWindowClone* self)
{
	MetaWindow* _tmp0_;
	gboolean _tmp1_;
	gboolean _tmp2_;
#line 259 "../src/Widgets/WindowClone.vala"
	g_return_if_fail (self != NULL);
#line 261 "../src/Widgets/WindowClone.vala"
	_tmp0_ = self->priv->_window;
#line 261 "../src/Widgets/WindowClone.vala"
	g_object_get (_tmp0_, "on-all-workspaces", &_tmp1_, NULL);
#line 261 "../src/Widgets/WindowClone.vala"
	_tmp2_ = _tmp1_;
#line 261 "../src/Widgets/WindowClone.vala"
	if (_tmp2_) {
#line 262 "../src/Widgets/WindowClone.vala"
		gala_window_clone_unmanaged (self);
#line 1094 "WindowClone.c"
	}
}

/**
     * Place the window at the location of the original MetaWindow
     *
     * @param animate Animate the transformation of the placement
     */
static Block71Data*
block71_data_ref (Block71Data* _data71_)
{
#line 271 "../src/Widgets/WindowClone.vala"
	g_atomic_int_inc (&_data71_->_ref_count_);
#line 271 "../src/Widgets/WindowClone.vala"
	return _data71_;
#line 1110 "WindowClone.c"
}

static void
block71_data_unref (void * _userdata_)
{
	Block71Data* _data71_;
	_data71_ = (Block71Data*) _userdata_;
#line 271 "../src/Widgets/WindowClone.vala"
	if (g_atomic_int_dec_and_test (&_data71_->_ref_count_)) {
#line 1120 "WindowClone.c"
		GalaWindowClone* self;
#line 271 "../src/Widgets/WindowClone.vala"
		self = _data71_->self;
#line 271 "../src/Widgets/WindowClone.vala"
		_g_object_unref0 (self);
#line 271 "../src/Widgets/WindowClone.vala"
		g_slice_free (Block71Data, _data71_);
#line 1128 "WindowClone.c"
	}
}

static void
__lambda21_ (Block71Data* _data71_,
             gdouble percentage)
{
	GalaWindowClone* self;
	gfloat x = 0.0F;
	gfloat y = 0.0F;
	gfloat width = 0.0F;
	MtkRectangle _tmp0_;
	gfloat height = 0.0F;
	MtkRectangle _tmp1_;
	gfloat scale = 0.0F;
	gfloat opacity = 0.0F;
	ClutterActor* _tmp2_;
#line 293 "../src/Widgets/WindowClone.vala"
	self = _data71_->self;
#line 294 "../src/Widgets/WindowClone.vala"
	x = gala_gesture_tracker_animation_value (_data71_->initial_x, (gfloat) _data71_->target_x, percentage, FALSE);
#line 295 "../src/Widgets/WindowClone.vala"
	y = gala_gesture_tracker_animation_value (_data71_->initial_y, (gfloat) _data71_->target_y, percentage, FALSE);
#line 296 "../src/Widgets/WindowClone.vala"
	_tmp0_ = _data71_->outer_rect;
#line 296 "../src/Widgets/WindowClone.vala"
	width = gala_gesture_tracker_animation_value (_data71_->initial_width, (gfloat) _tmp0_.width, percentage, FALSE);
#line 297 "../src/Widgets/WindowClone.vala"
	_tmp1_ = _data71_->outer_rect;
#line 297 "../src/Widgets/WindowClone.vala"
	height = gala_gesture_tracker_animation_value (_data71_->initial_height, (gfloat) _tmp1_.height, percentage, FALSE);
#line 298 "../src/Widgets/WindowClone.vala"
	scale = gala_gesture_tracker_animation_value (_data71_->initial_scale, _data71_->target_scale, percentage, FALSE);
#line 299 "../src/Widgets/WindowClone.vala"
	opacity = gala_gesture_tracker_animation_value (255.f, 0.f, percentage, FALSE);
#line 301 "../src/Widgets/WindowClone.vala"
	clutter_actor_set_size ((ClutterActor*) self, width, height);
#line 302 "../src/Widgets/WindowClone.vala"
	clutter_actor_set_position ((ClutterActor*) self, x, y);
#line 304 "../src/Widgets/WindowClone.vala"
	_tmp2_ = self->priv->window_icon;
#line 304 "../src/Widgets/WindowClone.vala"
	clutter_actor_set_opacity (_tmp2_, (guint) opacity);
#line 305 "../src/Widgets/WindowClone.vala"
	gala_window_clone_set_window_icon_position (self, width, height, scale, FALSE);
#line 306 "../src/Widgets/WindowClone.vala"
	gala_window_clone_place_widgets (self, (gint) width, (gint) height, scale);
#line 308 "../src/Widgets/WindowClone.vala"
	gala_window_clone_set_shadow_opacity (self, (guint8) opacity);
#line 1178 "WindowClone.c"
}

static void
___lambda21__gala_gesture_tracker_on_update (gdouble percentage,
                                             gpointer self)
{
#line 293 "../src/Widgets/WindowClone.vala"
	__lambda21_ (self, percentage);
#line 1187 "WindowClone.c"
}

static void
___lambda78_ (Block71Data* _data71_)
{
	GalaWindowClone* self;
	MtkRectangle _tmp0_;
	MtkRectangle _tmp1_;
#line 344 "../src/Widgets/WindowClone.vala"
	self = _data71_->self;
#line 345 "../src/Widgets/WindowClone.vala"
	self->priv->in_slot_animation = FALSE;
#line 346 "../src/Widgets/WindowClone.vala"
	_tmp0_ = _data71_->outer_rect;
#line 346 "../src/Widgets/WindowClone.vala"
	_tmp1_ = _data71_->outer_rect;
#line 346 "../src/Widgets/WindowClone.vala"
	gala_window_clone_place_widgets (self, _tmp0_.width, _tmp1_.height, _data71_->target_scale);
#line 1206 "WindowClone.c"
}

static void
____lambda78__clutter_timeline_completed (ClutterTimeline* _sender,
                                          gpointer self)
{
#line 344 "../src/Widgets/WindowClone.vala"
	___lambda78_ (self);
#line 1215 "WindowClone.c"
}

static void
__lambda22_ (Block71Data* _data71_,
             gdouble percentage,
             gboolean cancel_action)
{
	GalaWindowClone* self;
	gint _tmp0_ = 0;
	gboolean _tmp1_ = FALSE;
	gint duration = 0;
	MtkRectangle _tmp5_;
	MtkRectangle _tmp6_;
	ClutterActor* _tmp7_;
	ClutterActor* _tmp8_;
	ClutterActor* _tmp9_;
	ClutterActor* _tmp10_;
	MtkRectangle _tmp11_;
	MtkRectangle _tmp12_;
	ClutterActor* _tmp13_;
	ClutterTransition* transition = NULL;
	ClutterActor* _tmp14_;
	ClutterTransition* _tmp15_;
	ClutterTransition* _tmp16_;
	ClutterTransition* _tmp17_;
#line 311 "../src/Widgets/WindowClone.vala"
	self = _data71_->self;
#line 312 "../src/Widgets/WindowClone.vala"
	if (cancel_action) {
#line 313 "../src/Widgets/WindowClone.vala"
		return;
#line 1247 "WindowClone.c"
	}
#line 316 "../src/Widgets/WindowClone.vala"
	if (_data71_->animate) {
#line 1251 "WindowClone.c"
		GalaWindowManager* _tmp2_;
		gboolean _tmp3_;
		gboolean _tmp4_;
#line 316 "../src/Widgets/WindowClone.vala"
		_tmp2_ = self->priv->_wm;
#line 316 "../src/Widgets/WindowClone.vala"
		_tmp3_ = gala_window_manager_get_enable_animations (_tmp2_);
#line 316 "../src/Widgets/WindowClone.vala"
		_tmp4_ = _tmp3_;
#line 316 "../src/Widgets/WindowClone.vala"
		_tmp1_ = _tmp4_;
#line 1263 "WindowClone.c"
	} else {
#line 316 "../src/Widgets/WindowClone.vala"
		_tmp1_ = FALSE;
#line 1267 "WindowClone.c"
	}
#line 316 "../src/Widgets/WindowClone.vala"
	if (_tmp1_) {
#line 316 "../src/Widgets/WindowClone.vala"
		_tmp0_ = GALA_MULTITASKING_VIEW_ANIMATION_DURATION;
#line 1273 "WindowClone.c"
	} else {
#line 316 "../src/Widgets/WindowClone.vala"
		_tmp0_ = 0;
#line 1277 "WindowClone.c"
	}
#line 316 "../src/Widgets/WindowClone.vala"
	duration = _tmp0_;
#line 318 "../src/Widgets/WindowClone.vala"
	clutter_actor_save_easing_state ((ClutterActor*) self);
#line 319 "../src/Widgets/WindowClone.vala"
	clutter_actor_set_easing_mode ((ClutterActor*) self, CLUTTER_EASE_OUT_QUAD);
#line 320 "../src/Widgets/WindowClone.vala"
	clutter_actor_set_easing_duration ((ClutterActor*) self, (guint) duration);
#line 322 "../src/Widgets/WindowClone.vala"
	clutter_actor_set_position ((ClutterActor*) self, (gfloat) _data71_->target_x, (gfloat) _data71_->target_y);
#line 323 "../src/Widgets/WindowClone.vala"
	_tmp5_ = _data71_->outer_rect;
#line 323 "../src/Widgets/WindowClone.vala"
	_tmp6_ = _data71_->outer_rect;
#line 323 "../src/Widgets/WindowClone.vala"
	clutter_actor_set_size ((ClutterActor*) self, (gfloat) _tmp5_.width, (gfloat) _tmp6_.height);
#line 325 "../src/Widgets/WindowClone.vala"
	if (gala_window_clone_should_fade (self)) {
#line 326 "../src/Widgets/WindowClone.vala"
		clutter_actor_set_opacity ((ClutterActor*) self, (guint) 0);
#line 1299 "WindowClone.c"
	}
#line 329 "../src/Widgets/WindowClone.vala"
	clutter_actor_restore_easing_state ((ClutterActor*) self);
#line 331 "../src/Widgets/WindowClone.vala"
	if (_data71_->animate) {
#line 332 "../src/Widgets/WindowClone.vala"
		gala_window_clone_toggle_shadow (self, FALSE);
#line 1307 "WindowClone.c"
	}
#line 335 "../src/Widgets/WindowClone.vala"
	_tmp7_ = self->priv->window_icon;
#line 335 "../src/Widgets/WindowClone.vala"
	clutter_actor_save_easing_state (_tmp7_);
#line 336 "../src/Widgets/WindowClone.vala"
	_tmp8_ = self->priv->window_icon;
#line 336 "../src/Widgets/WindowClone.vala"
	clutter_actor_set_easing_mode (_tmp8_, CLUTTER_EASE_OUT_QUAD);
#line 337 "../src/Widgets/WindowClone.vala"
	_tmp9_ = self->priv->window_icon;
#line 337 "../src/Widgets/WindowClone.vala"
	clutter_actor_set_easing_duration (_tmp9_, (guint) duration);
#line 338 "../src/Widgets/WindowClone.vala"
	_tmp10_ = self->priv->window_icon;
#line 338 "../src/Widgets/WindowClone.vala"
	clutter_actor_set_opacity (_tmp10_, (guint) 0);
#line 339 "../src/Widgets/WindowClone.vala"
	_tmp11_ = _data71_->outer_rect;
#line 339 "../src/Widgets/WindowClone.vala"
	_tmp12_ = _data71_->outer_rect;
#line 339 "../src/Widgets/WindowClone.vala"
	gala_window_clone_set_window_icon_position (self, (gfloat) _tmp11_.width, (gfloat) _tmp12_.height, _data71_->target_scale, TRUE);
#line 340 "../src/Widgets/WindowClone.vala"
	_tmp13_ = self->priv->window_icon;
#line 340 "../src/Widgets/WindowClone.vala"
	clutter_actor_restore_easing_state (_tmp13_);
#line 342 "../src/Widgets/WindowClone.vala"
	_tmp14_ = self->priv->window_icon;
#line 342 "../src/Widgets/WindowClone.vala"
	_tmp15_ = clutter_actor_get_transition (_tmp14_, "opacity");
#line 342 "../src/Widgets/WindowClone.vala"
	_tmp16_ = _g_object_ref0 (_tmp15_);
#line 342 "../src/Widgets/WindowClone.vala"
	transition = _tmp16_;
#line 343 "../src/Widgets/WindowClone.vala"
	_tmp17_ = transition;
#line 343 "../src/Widgets/WindowClone.vala"
	if (_tmp17_ != NULL) {
#line 1347 "WindowClone.c"
		ClutterTransition* _tmp18_;
#line 344 "../src/Widgets/WindowClone.vala"
		_tmp18_ = transition;
#line 344 "../src/Widgets/WindowClone.vala"
		g_signal_connect_data ((ClutterTimeline*) _tmp18_, "completed", (GCallback) ____lambda78__clutter_timeline_completed, block71_data_ref (_data71_), (GClosureNotify) block71_data_unref, 0);
#line 1353 "WindowClone.c"
	} else {
		MtkRectangle _tmp19_;
		MtkRectangle _tmp20_;
#line 349 "../src/Widgets/WindowClone.vala"
		self->priv->in_slot_animation = FALSE;
#line 350 "../src/Widgets/WindowClone.vala"
		_tmp19_ = _data71_->outer_rect;
#line 350 "../src/Widgets/WindowClone.vala"
		_tmp20_ = _data71_->outer_rect;
#line 350 "../src/Widgets/WindowClone.vala"
		gala_window_clone_place_widgets (self, _tmp19_.width, _tmp20_.height, _data71_->target_scale);
#line 1365 "WindowClone.c"
	}
#line 311 "../src/Widgets/WindowClone.vala"
	_g_object_unref0 (transition);
#line 1369 "WindowClone.c"
}

static void
___lambda22__gala_gesture_tracker_on_end (gdouble percentage,
                                          gboolean cancel_action,
                                          gint calculated_duration,
                                          gpointer self)
{
#line 311 "../src/Widgets/WindowClone.vala"
	__lambda22_ (self, percentage, cancel_action);
#line 1380 "WindowClone.c"
}

void
gala_window_clone_transition_to_original_state (GalaWindowClone* self,
                                                gboolean animate,
                                                gboolean with_gesture,
                                                gboolean is_cancel_animation)
{
	Block71Data* _data71_;
	MetaWindow* _tmp0_;
	MtkRectangle _tmp1_ = {0};
	MetaDisplay* display = NULL;
	MetaWindow* _tmp2_;
	MetaDisplay* _tmp3_;
	MtkRectangle monitor_geom = {0};
	MetaDisplay* _tmp4_;
	MetaWindow* _tmp5_;
	MtkRectangle _tmp6_ = {0};
	gfloat _tmp7_;
	gfloat _tmp8_;
	MetaDisplay* _tmp9_;
	MetaWindow* _tmp10_;
	gint offset_x = 0;
	MtkRectangle _tmp11_;
	gint offset_y = 0;
	MtkRectangle _tmp12_;
	gfloat _tmp13_;
	gfloat _tmp14_;
	gfloat _tmp15_;
	gfloat _tmp16_;
	gfloat _tmp17_;
	gfloat _tmp18_;
	gfloat _tmp19_;
	gfloat _tmp20_;
	MtkRectangle _tmp21_;
	MtkRectangle _tmp22_;
	MtkRectangle _tmp23_;
	MtkRectangle _tmp24_;
	GalaGestureTrackerOnUpdate on_animation_update = NULL;
	gpointer on_animation_update_target;
	GDestroyNotify on_animation_update_target_destroy_notify;
	GalaGestureTrackerOnEnd on_animation_end = NULL;
	gpointer on_animation_end_target;
	GDestroyNotify on_animation_end_target_destroy_notify;
	gboolean _tmp25_ = FALSE;
	gboolean _tmp26_ = FALSE;
	gboolean _tmp27_ = FALSE;
#line 271 "../src/Widgets/WindowClone.vala"
	g_return_if_fail (self != NULL);
#line 271 "../src/Widgets/WindowClone.vala"
	_data71_ = g_slice_new0 (Block71Data);
#line 271 "../src/Widgets/WindowClone.vala"
	_data71_->_ref_count_ = 1;
#line 271 "../src/Widgets/WindowClone.vala"
	_data71_->self = g_object_ref (self);
#line 271 "../src/Widgets/WindowClone.vala"
	_data71_->animate = animate;
#line 272 "../src/Widgets/WindowClone.vala"
	_tmp0_ = self->priv->_window;
#line 272 "../src/Widgets/WindowClone.vala"
	meta_window_get_frame_rect (_tmp0_, &_tmp1_);
#line 272 "../src/Widgets/WindowClone.vala"
	_data71_->outer_rect = _tmp1_;
#line 274 "../src/Widgets/WindowClone.vala"
	_tmp2_ = self->priv->_window;
#line 274 "../src/Widgets/WindowClone.vala"
	_tmp3_ = meta_window_get_display (_tmp2_);
#line 274 "../src/Widgets/WindowClone.vala"
	display = _tmp3_;
#line 275 "../src/Widgets/WindowClone.vala"
	_tmp4_ = display;
#line 275 "../src/Widgets/WindowClone.vala"
	_tmp5_ = self->priv->_window;
#line 275 "../src/Widgets/WindowClone.vala"
	meta_display_get_monitor_geometry (_tmp4_, meta_window_get_monitor (_tmp5_), &_tmp6_);
#line 275 "../src/Widgets/WindowClone.vala"
	monitor_geom = _tmp6_;
#line 276 "../src/Widgets/WindowClone.vala"
	_tmp7_ = gala_window_clone_get_monitor_scale_factor (self);
#line 276 "../src/Widgets/WindowClone.vala"
	_tmp8_ = _tmp7_;
#line 276 "../src/Widgets/WindowClone.vala"
	_data71_->initial_scale = _tmp8_;
#line 277 "../src/Widgets/WindowClone.vala"
	_tmp9_ = display;
#line 277 "../src/Widgets/WindowClone.vala"
	_tmp10_ = self->priv->_window;
#line 277 "../src/Widgets/WindowClone.vala"
	_data71_->target_scale = meta_display_get_monitor_scale (_tmp9_, meta_window_get_monitor (_tmp10_));
#line 278 "../src/Widgets/WindowClone.vala"
	_tmp11_ = monitor_geom;
#line 278 "../src/Widgets/WindowClone.vala"
	offset_x = _tmp11_.x;
#line 279 "../src/Widgets/WindowClone.vala"
	_tmp12_ = monitor_geom;
#line 279 "../src/Widgets/WindowClone.vala"
	offset_y = _tmp12_.y;
#line 281 "../src/Widgets/WindowClone.vala"
	_tmp13_ = clutter_actor_get_x ((ClutterActor*) self);
#line 281 "../src/Widgets/WindowClone.vala"
	_tmp14_ = _tmp13_;
#line 281 "../src/Widgets/WindowClone.vala"
	_data71_->initial_x = _tmp14_;
#line 282 "../src/Widgets/WindowClone.vala"
	_tmp15_ = clutter_actor_get_y ((ClutterActor*) self);
#line 282 "../src/Widgets/WindowClone.vala"
	_tmp16_ = _tmp15_;
#line 282 "../src/Widgets/WindowClone.vala"
	_data71_->initial_y = _tmp16_;
#line 283 "../src/Widgets/WindowClone.vala"
	_tmp17_ = clutter_actor_get_width ((ClutterActor*) self);
#line 283 "../src/Widgets/WindowClone.vala"
	_tmp18_ = _tmp17_;
#line 283 "../src/Widgets/WindowClone.vala"
	_data71_->initial_width = _tmp18_;
#line 284 "../src/Widgets/WindowClone.vala"
	_tmp19_ = clutter_actor_get_height ((ClutterActor*) self);
#line 284 "../src/Widgets/WindowClone.vala"
	_tmp20_ = _tmp19_;
#line 284 "../src/Widgets/WindowClone.vala"
	_data71_->initial_height = _tmp20_;
#line 286 "../src/Widgets/WindowClone.vala"
	_tmp21_ = _data71_->outer_rect;
#line 286 "../src/Widgets/WindowClone.vala"
	_data71_->target_x = _tmp21_.x - offset_x;
#line 287 "../src/Widgets/WindowClone.vala"
	_tmp22_ = _data71_->outer_rect;
#line 287 "../src/Widgets/WindowClone.vala"
	_data71_->target_y = _tmp22_.y - offset_y;
#line 289 "../src/Widgets/WindowClone.vala"
	gala_window_clone_set_active (self, FALSE);
#line 290 "../src/Widgets/WindowClone.vala"
	self->priv->in_slot_animation = TRUE;
#line 291 "../src/Widgets/WindowClone.vala"
	_tmp23_ = _data71_->outer_rect;
#line 291 "../src/Widgets/WindowClone.vala"
	_tmp24_ = _data71_->outer_rect;
#line 291 "../src/Widgets/WindowClone.vala"
	gala_window_clone_place_widgets (self, _tmp23_.width, _tmp24_.height, _data71_->initial_scale);
#line 293 "../src/Widgets/WindowClone.vala"
	on_animation_update = ___lambda21__gala_gesture_tracker_on_update;
#line 293 "../src/Widgets/WindowClone.vala"
	on_animation_update_target = block71_data_ref (_data71_);
#line 293 "../src/Widgets/WindowClone.vala"
	on_animation_update_target_destroy_notify = block71_data_unref;
#line 311 "../src/Widgets/WindowClone.vala"
	on_animation_end = ___lambda22__gala_gesture_tracker_on_end;
#line 311 "../src/Widgets/WindowClone.vala"
	on_animation_end_target = block71_data_ref (_data71_);
#line 311 "../src/Widgets/WindowClone.vala"
	on_animation_end_target_destroy_notify = block71_data_unref;
#line 354 "../src/Widgets/WindowClone.vala"
	if (!_data71_->animate) {
#line 354 "../src/Widgets/WindowClone.vala"
		_tmp27_ = TRUE;
#line 1536 "WindowClone.c"
	} else {
		GalaGestureTracker* _tmp28_;
#line 354 "../src/Widgets/WindowClone.vala"
		_tmp28_ = self->priv->_gesture_tracker;
#line 354 "../src/Widgets/WindowClone.vala"
		_tmp27_ = _tmp28_ == NULL;
#line 1543 "WindowClone.c"
	}
#line 354 "../src/Widgets/WindowClone.vala"
	if (_tmp27_) {
#line 354 "../src/Widgets/WindowClone.vala"
		_tmp26_ = TRUE;
#line 1549 "WindowClone.c"
	} else {
#line 354 "../src/Widgets/WindowClone.vala"
		_tmp26_ = !with_gesture;
#line 1553 "WindowClone.c"
	}
#line 354 "../src/Widgets/WindowClone.vala"
	if (_tmp26_) {
#line 354 "../src/Widgets/WindowClone.vala"
		_tmp25_ = TRUE;
#line 1559 "WindowClone.c"
	} else {
		GalaWindowManager* _tmp29_;
		gboolean _tmp30_;
		gboolean _tmp31_;
#line 354 "../src/Widgets/WindowClone.vala"
		_tmp29_ = self->priv->_wm;
#line 354 "../src/Widgets/WindowClone.vala"
		_tmp30_ = gala_window_manager_get_enable_animations (_tmp29_);
#line 354 "../src/Widgets/WindowClone.vala"
		_tmp31_ = _tmp30_;
#line 354 "../src/Widgets/WindowClone.vala"
		_tmp25_ = !_tmp31_;
#line 1572 "WindowClone.c"
	}
#line 354 "../src/Widgets/WindowClone.vala"
	if (_tmp25_) {
#line 1576 "WindowClone.c"
		GalaGestureTrackerOnEnd _tmp32_;
		gpointer _tmp32__target;
#line 355 "../src/Widgets/WindowClone.vala"
		_tmp32_ = on_animation_end;
#line 355 "../src/Widgets/WindowClone.vala"
		_tmp32__target = on_animation_end_target;
#line 355 "../src/Widgets/WindowClone.vala"
		_tmp32_ ((gdouble) 1, FALSE, 0, _tmp32__target);
#line 1585 "WindowClone.c"
	} else {
		GalaGestureTracker* _tmp33_;
		GalaGestureTrackerOnUpdate _tmp34_;
		gpointer _tmp34__target;
		GDestroyNotify _tmp34__target_destroy_notify;
		GalaGestureTrackerOnEnd _tmp35_;
		gpointer _tmp35__target;
		GDestroyNotify _tmp35__target_destroy_notify;
#line 357 "../src/Widgets/WindowClone.vala"
		_tmp33_ = self->priv->_gesture_tracker;
#line 357 "../src/Widgets/WindowClone.vala"
		_tmp34_ = on_animation_update;
#line 357 "../src/Widgets/WindowClone.vala"
		_tmp34__target = on_animation_update_target;
#line 357 "../src/Widgets/WindowClone.vala"
		_tmp34__target_destroy_notify = on_animation_update_target_destroy_notify;
#line 357 "../src/Widgets/WindowClone.vala"
		on_animation_update = NULL;
#line 357 "../src/Widgets/WindowClone.vala"
		on_animation_update_target = NULL;
#line 357 "../src/Widgets/WindowClone.vala"
		on_animation_update_target_destroy_notify = NULL;
#line 357 "../src/Widgets/WindowClone.vala"
		_tmp35_ = on_animation_end;
#line 357 "../src/Widgets/WindowClone.vala"
		_tmp35__target = on_animation_end_target;
#line 357 "../src/Widgets/WindowClone.vala"
		_tmp35__target_destroy_notify = on_animation_end_target_destroy_notify;
#line 357 "../src/Widgets/WindowClone.vala"
		on_animation_end = NULL;
#line 357 "../src/Widgets/WindowClone.vala"
		on_animation_end_target = NULL;
#line 357 "../src/Widgets/WindowClone.vala"
		on_animation_end_target_destroy_notify = NULL;
#line 357 "../src/Widgets/WindowClone.vala"
		gala_gesture_tracker_connect_handlers (_tmp33_, NULL, NULL, NULL, _tmp34_, _tmp34__target, _tmp34__target_destroy_notify, _tmp35_, _tmp35__target, _tmp35__target_destroy_notify);
#line 1622 "WindowClone.c"
	}
#line 271 "../src/Widgets/WindowClone.vala"
	(on_animation_end_target_destroy_notify == NULL) ? NULL : (on_animation_end_target_destroy_notify (on_animation_end_target), NULL);
#line 271 "../src/Widgets/WindowClone.vala"
	on_animation_end = NULL;
#line 271 "../src/Widgets/WindowClone.vala"
	on_animation_end_target = NULL;
#line 271 "../src/Widgets/WindowClone.vala"
	on_animation_end_target_destroy_notify = NULL;
#line 271 "../src/Widgets/WindowClone.vala"
	(on_animation_update_target_destroy_notify == NULL) ? NULL : (on_animation_update_target_destroy_notify (on_animation_update_target), NULL);
#line 271 "../src/Widgets/WindowClone.vala"
	on_animation_update = NULL;
#line 271 "../src/Widgets/WindowClone.vala"
	on_animation_update_target = NULL;
#line 271 "../src/Widgets/WindowClone.vala"
	on_animation_update_target_destroy_notify = NULL;
#line 271 "../src/Widgets/WindowClone.vala"
	block71_data_unref (_data71_);
#line 271 "../src/Widgets/WindowClone.vala"
	_data71_ = NULL;
#line 1644 "WindowClone.c"
}

/**
     * Animate the window to the given slot
     */
static Block72Data*
block72_data_ref (Block72Data* _data72_)
{
#line 365 "../src/Widgets/WindowClone.vala"
	g_atomic_int_inc (&_data72_->_ref_count_);
#line 365 "../src/Widgets/WindowClone.vala"
	return _data72_;
#line 1657 "WindowClone.c"
}

static void
block72_data_unref (void * _userdata_)
{
	Block72Data* _data72_;
	_data72_ = (Block72Data*) _userdata_;
#line 365 "../src/Widgets/WindowClone.vala"
	if (g_atomic_int_dec_and_test (&_data72_->_ref_count_)) {
#line 1667 "WindowClone.c"
		GalaWindowClone* self;
#line 365 "../src/Widgets/WindowClone.vala"
		self = _data72_->self;
#line 365 "../src/Widgets/WindowClone.vala"
		_g_object_unref0 (self);
#line 365 "../src/Widgets/WindowClone.vala"
		g_slice_free (Block72Data, _data72_);
#line 1675 "WindowClone.c"
	}
}

static void
__lambda26_ (Block72Data* _data72_,
             gdouble percentage)
{
	GalaWindowClone* self;
	gfloat x = 0.0F;
	MtkRectangle _tmp0_;
	gfloat y = 0.0F;
	MtkRectangle _tmp1_;
	gfloat width = 0.0F;
	MtkRectangle _tmp2_;
	gfloat height = 0.0F;
	MtkRectangle _tmp3_;
	gfloat opacity = 0.0F;
	ClutterActor* _tmp4_;
#line 382 "../src/Widgets/WindowClone.vala"
	self = _data72_->self;
#line 383 "../src/Widgets/WindowClone.vala"
	_tmp0_ = _data72_->rect;
#line 383 "../src/Widgets/WindowClone.vala"
	x = gala_gesture_tracker_animation_value (_data72_->initial_x, (gfloat) _tmp0_.x, percentage, FALSE);
#line 384 "../src/Widgets/WindowClone.vala"
	_tmp1_ = _data72_->rect;
#line 384 "../src/Widgets/WindowClone.vala"
	y = gala_gesture_tracker_animation_value (_data72_->initial_y, (gfloat) _tmp1_.y, percentage, FALSE);
#line 385 "../src/Widgets/WindowClone.vala"
	_tmp2_ = _data72_->rect;
#line 385 "../src/Widgets/WindowClone.vala"
	width = gala_gesture_tracker_animation_value (_data72_->initial_width, (gfloat) _tmp2_.width, percentage, FALSE);
#line 386 "../src/Widgets/WindowClone.vala"
	_tmp3_ = _data72_->rect;
#line 386 "../src/Widgets/WindowClone.vala"
	height = gala_gesture_tracker_animation_value (_data72_->initial_height, (gfloat) _tmp3_.height, percentage, FALSE);
#line 387 "../src/Widgets/WindowClone.vala"
	opacity = gala_gesture_tracker_animation_value (0.f, 255.f, percentage, FALSE);
#line 389 "../src/Widgets/WindowClone.vala"
	clutter_actor_set_size ((ClutterActor*) self, width, height);
#line 390 "../src/Widgets/WindowClone.vala"
	clutter_actor_set_position ((ClutterActor*) self, x, y);
#line 392 "../src/Widgets/WindowClone.vala"
	_tmp4_ = self->priv->window_icon;
#line 392 "../src/Widgets/WindowClone.vala"
	clutter_actor_set_opacity (_tmp4_, (guint) opacity);
#line 393 "../src/Widgets/WindowClone.vala"
	gala_window_clone_set_window_icon_position (self, width, height, _data72_->scale, FALSE);
#line 395 "../src/Widgets/WindowClone.vala"
	gala_window_clone_set_shadow_opacity (self, (guint8) opacity);
#line 1726 "WindowClone.c"
}

static void
___lambda26__gala_gesture_tracker_on_update (gdouble percentage,
                                             gpointer self)
{
#line 382 "../src/Widgets/WindowClone.vala"
	__lambda26_ (self, percentage);
#line 1735 "WindowClone.c"
}

static void
___lambda28_ (Block72Data* _data72_)
{
	GalaWindowClone* self;
	MtkRectangle _tmp0_;
	MtkRectangle _tmp1_;
#line 425 "../src/Widgets/WindowClone.vala"
	self = _data72_->self;
#line 426 "../src/Widgets/WindowClone.vala"
	self->priv->in_slot_animation = FALSE;
#line 427 "../src/Widgets/WindowClone.vala"
	_tmp0_ = _data72_->rect;
#line 427 "../src/Widgets/WindowClone.vala"
	_tmp1_ = _data72_->rect;
#line 427 "../src/Widgets/WindowClone.vala"
	gala_window_clone_place_widgets (self, _tmp0_.width, _tmp1_.height, _data72_->scale);
#line 1754 "WindowClone.c"
}

static void
____lambda28__clutter_timeline_completed (ClutterTimeline* _sender,
                                          gpointer self)
{
#line 425 "../src/Widgets/WindowClone.vala"
	___lambda28_ (self);
#line 1763 "WindowClone.c"
}

static void
__lambda27_ (Block72Data* _data72_,
             gdouble percentage,
             gboolean cancel_action)
{
	GalaWindowClone* self;
	gint _tmp0_ = 0;
	GalaWindowManager* _tmp1_;
	gboolean _tmp2_;
	gboolean _tmp3_;
	gint duration = 0;
	MtkRectangle _tmp4_;
	MtkRectangle _tmp5_;
	MtkRectangle _tmp6_;
	MtkRectangle _tmp7_;
	ClutterActor* _tmp8_;
	ClutterActor* _tmp9_;
	ClutterActor* _tmp10_;
	ClutterActor* _tmp11_;
	MtkRectangle _tmp12_;
	MtkRectangle _tmp13_;
	ClutterActor* _tmp14_;
	ClutterTransition* transition = NULL;
	ClutterActor* _tmp15_;
	ClutterTransition* _tmp16_;
	ClutterTransition* _tmp17_;
	ClutterTransition* _tmp18_;
#line 398 "../src/Widgets/WindowClone.vala"
	self = _data72_->self;
#line 399 "../src/Widgets/WindowClone.vala"
	if (cancel_action) {
#line 400 "../src/Widgets/WindowClone.vala"
		return;
#line 1799 "WindowClone.c"
	}
#line 403 "../src/Widgets/WindowClone.vala"
	_tmp1_ = self->priv->_wm;
#line 403 "../src/Widgets/WindowClone.vala"
	_tmp2_ = gala_window_manager_get_enable_animations (_tmp1_);
#line 403 "../src/Widgets/WindowClone.vala"
	_tmp3_ = _tmp2_;
#line 403 "../src/Widgets/WindowClone.vala"
	if (_tmp3_) {
#line 403 "../src/Widgets/WindowClone.vala"
		_tmp0_ = GALA_MULTITASKING_VIEW_ANIMATION_DURATION;
#line 1811 "WindowClone.c"
	} else {
#line 403 "../src/Widgets/WindowClone.vala"
		_tmp0_ = 0;
#line 1815 "WindowClone.c"
	}
#line 403 "../src/Widgets/WindowClone.vala"
	duration = _tmp0_;
#line 405 "../src/Widgets/WindowClone.vala"
	clutter_actor_save_easing_state ((ClutterActor*) self);
#line 406 "../src/Widgets/WindowClone.vala"
	clutter_actor_set_easing_mode ((ClutterActor*) self, CLUTTER_EASE_OUT_QUAD);
#line 407 "../src/Widgets/WindowClone.vala"
	clutter_actor_set_easing_duration ((ClutterActor*) self, (guint) duration);
#line 409 "../src/Widgets/WindowClone.vala"
	_tmp4_ = _data72_->rect;
#line 409 "../src/Widgets/WindowClone.vala"
	_tmp5_ = _data72_->rect;
#line 409 "../src/Widgets/WindowClone.vala"
	clutter_actor_set_size ((ClutterActor*) self, (gfloat) _tmp4_.width, (gfloat) _tmp5_.height);
#line 410 "../src/Widgets/WindowClone.vala"
	_tmp6_ = _data72_->rect;
#line 410 "../src/Widgets/WindowClone.vala"
	_tmp7_ = _data72_->rect;
#line 410 "../src/Widgets/WindowClone.vala"
	clutter_actor_set_position ((ClutterActor*) self, (gfloat) _tmp6_.x, (gfloat) _tmp7_.y);
#line 411 "../src/Widgets/WindowClone.vala"
	clutter_actor_set_opacity ((ClutterActor*) self, (guint) 255);
#line 412 "../src/Widgets/WindowClone.vala"
	clutter_actor_restore_easing_state ((ClutterActor*) self);
#line 414 "../src/Widgets/WindowClone.vala"
	_tmp8_ = self->priv->window_icon;
#line 414 "../src/Widgets/WindowClone.vala"
	clutter_actor_save_easing_state (_tmp8_);
#line 415 "../src/Widgets/WindowClone.vala"
	_tmp9_ = self->priv->window_icon;
#line 415 "../src/Widgets/WindowClone.vala"
	clutter_actor_set_easing_mode (_tmp9_, CLUTTER_EASE_OUT_QUAD);
#line 416 "../src/Widgets/WindowClone.vala"
	_tmp10_ = self->priv->window_icon;
#line 416 "../src/Widgets/WindowClone.vala"
	clutter_actor_set_easing_duration (_tmp10_, (guint) duration);
#line 417 "../src/Widgets/WindowClone.vala"
	_tmp11_ = self->priv->window_icon;
#line 417 "../src/Widgets/WindowClone.vala"
	clutter_actor_set_opacity (_tmp11_, (guint) 255);
#line 418 "../src/Widgets/WindowClone.vala"
	_tmp12_ = _data72_->rect;
#line 418 "../src/Widgets/WindowClone.vala"
	_tmp13_ = _data72_->rect;
#line 418 "../src/Widgets/WindowClone.vala"
	gala_window_clone_set_window_icon_position (self, (gfloat) _tmp12_.width, (gfloat) _tmp13_.height, _data72_->scale, TRUE);
#line 419 "../src/Widgets/WindowClone.vala"
	_tmp14_ = self->priv->window_icon;
#line 419 "../src/Widgets/WindowClone.vala"
	clutter_actor_restore_easing_state (_tmp14_);
#line 421 "../src/Widgets/WindowClone.vala"
	gala_window_clone_toggle_shadow (self, TRUE);
#line 423 "../src/Widgets/WindowClone.vala"
	_tmp15_ = self->priv->window_icon;
#line 423 "../src/Widgets/WindowClone.vala"
	_tmp16_ = clutter_actor_get_transition (_tmp15_, "opacity");
#line 423 "../src/Widgets/WindowClone.vala"
	_tmp17_ = _g_object_ref0 (_tmp16_);
#line 423 "../src/Widgets/WindowClone.vala"
	transition = _tmp17_;
#line 424 "../src/Widgets/WindowClone.vala"
	_tmp18_ = transition;
#line 424 "../src/Widgets/WindowClone.vala"
	if (_tmp18_ != NULL) {
#line 1881 "WindowClone.c"
		ClutterTransition* _tmp19_;
#line 425 "../src/Widgets/WindowClone.vala"
		_tmp19_ = transition;
#line 425 "../src/Widgets/WindowClone.vala"
		g_signal_connect_data ((ClutterTimeline*) _tmp19_, "completed", (GCallback) ____lambda28__clutter_timeline_completed, block72_data_ref (_data72_), (GClosureNotify) block72_data_unref, 0);
#line 1887 "WindowClone.c"
	} else {
		MtkRectangle _tmp20_;
		MtkRectangle _tmp21_;
#line 430 "../src/Widgets/WindowClone.vala"
		self->priv->in_slot_animation = FALSE;
#line 431 "../src/Widgets/WindowClone.vala"
		_tmp20_ = _data72_->rect;
#line 431 "../src/Widgets/WindowClone.vala"
		_tmp21_ = _data72_->rect;
#line 431 "../src/Widgets/WindowClone.vala"
		gala_window_clone_place_widgets (self, _tmp20_.width, _tmp21_.height, _data72_->scale);
#line 1899 "WindowClone.c"
	}
#line 398 "../src/Widgets/WindowClone.vala"
	_g_object_unref0 (transition);
#line 1903 "WindowClone.c"
}

static void
___lambda27__gala_gesture_tracker_on_end (gdouble percentage,
                                          gboolean cancel_action,
                                          gint calculated_duration,
                                          gpointer self)
{
#line 398 "../src/Widgets/WindowClone.vala"
	__lambda27_ (self, percentage, cancel_action);
#line 1914 "WindowClone.c"
}

void
gala_window_clone_take_slot (GalaWindowClone* self,
                             MtkRectangle* rect,
                             gboolean with_gesture,
                             gboolean is_cancel_animation)
{
	Block72Data* _data72_;
	MtkRectangle _tmp0_;
	MtkRectangle _tmp1_;
	gfloat _tmp2_;
	gfloat _tmp3_;
	gfloat _tmp4_;
	gfloat _tmp5_;
	gfloat _tmp6_;
	gfloat _tmp7_;
	gfloat _tmp8_;
	gfloat _tmp9_;
	MetaDisplay* display = NULL;
	GalaWindowManager* _tmp10_;
	MetaDisplay* _tmp11_;
	MetaDisplay* _tmp12_;
	MetaDisplay* _tmp13_;
	MtkRectangle _tmp14_;
	MtkRectangle _tmp15_;
	MtkRectangle _tmp16_;
	GalaGestureTrackerOnUpdate on_animation_update = NULL;
	gpointer on_animation_update_target;
	GDestroyNotify on_animation_update_target_destroy_notify;
	GalaGestureTrackerOnEnd on_animation_end = NULL;
	gpointer on_animation_end_target;
	GDestroyNotify on_animation_end_target_destroy_notify;
	gboolean _tmp17_ = FALSE;
	gboolean _tmp18_ = FALSE;
	GalaGestureTracker* _tmp19_;
#line 365 "../src/Widgets/WindowClone.vala"
	g_return_if_fail (self != NULL);
#line 365 "../src/Widgets/WindowClone.vala"
	g_return_if_fail (rect != NULL);
#line 365 "../src/Widgets/WindowClone.vala"
	_data72_ = g_slice_new0 (Block72Data);
#line 365 "../src/Widgets/WindowClone.vala"
	_data72_->_ref_count_ = 1;
#line 365 "../src/Widgets/WindowClone.vala"
	_data72_->self = g_object_ref (self);
#line 365 "../src/Widgets/WindowClone.vala"
	_tmp0_ = *rect;
#line 365 "../src/Widgets/WindowClone.vala"
	_data72_->rect = _tmp0_;
#line 369 "../src/Widgets/WindowClone.vala"
	_tmp1_ = _data72_->rect;
#line 369 "../src/Widgets/WindowClone.vala"
	gala_window_clone_set_slot (self, &_tmp1_);
#line 370 "../src/Widgets/WindowClone.vala"
	_tmp2_ = clutter_actor_get_x ((ClutterActor*) self);
#line 370 "../src/Widgets/WindowClone.vala"
	_tmp3_ = _tmp2_;
#line 370 "../src/Widgets/WindowClone.vala"
	_data72_->initial_x = _tmp3_;
#line 371 "../src/Widgets/WindowClone.vala"
	_tmp4_ = clutter_actor_get_y ((ClutterActor*) self);
#line 371 "../src/Widgets/WindowClone.vala"
	_tmp5_ = _tmp4_;
#line 371 "../src/Widgets/WindowClone.vala"
	_data72_->initial_y = _tmp5_;
#line 372 "../src/Widgets/WindowClone.vala"
	_tmp6_ = clutter_actor_get_width ((ClutterActor*) self);
#line 372 "../src/Widgets/WindowClone.vala"
	_tmp7_ = _tmp6_;
#line 372 "../src/Widgets/WindowClone.vala"
	_data72_->initial_width = _tmp7_;
#line 373 "../src/Widgets/WindowClone.vala"
	_tmp8_ = clutter_actor_get_height ((ClutterActor*) self);
#line 373 "../src/Widgets/WindowClone.vala"
	_tmp9_ = _tmp8_;
#line 373 "../src/Widgets/WindowClone.vala"
	_data72_->initial_height = _tmp9_;
#line 375 "../src/Widgets/WindowClone.vala"
	gala_window_clone_set_active (self, FALSE);
#line 376 "../src/Widgets/WindowClone.vala"
	_tmp10_ = self->priv->_wm;
#line 376 "../src/Widgets/WindowClone.vala"
	_tmp11_ = meta_plugin_get_display ((MetaPlugin*) _tmp10_);
#line 376 "../src/Widgets/WindowClone.vala"
	display = _tmp11_;
#line 377 "../src/Widgets/WindowClone.vala"
	_tmp12_ = display;
#line 377 "../src/Widgets/WindowClone.vala"
	_tmp13_ = display;
#line 377 "../src/Widgets/WindowClone.vala"
	_tmp14_ = _data72_->rect;
#line 377 "../src/Widgets/WindowClone.vala"
	_data72_->scale = meta_display_get_monitor_scale (_tmp12_, meta_display_get_monitor_index_for_rect (_tmp13_, &_tmp14_));
#line 379 "../src/Widgets/WindowClone.vala"
	self->priv->in_slot_animation = TRUE;
#line 380 "../src/Widgets/WindowClone.vala"
	_tmp15_ = _data72_->rect;
#line 380 "../src/Widgets/WindowClone.vala"
	_tmp16_ = _data72_->rect;
#line 380 "../src/Widgets/WindowClone.vala"
	gala_window_clone_place_widgets (self, _tmp15_.width, _tmp16_.height, _data72_->scale);
#line 382 "../src/Widgets/WindowClone.vala"
	on_animation_update = ___lambda26__gala_gesture_tracker_on_update;
#line 382 "../src/Widgets/WindowClone.vala"
	on_animation_update_target = block72_data_ref (_data72_);
#line 382 "../src/Widgets/WindowClone.vala"
	on_animation_update_target_destroy_notify = block72_data_unref;
#line 398 "../src/Widgets/WindowClone.vala"
	on_animation_end = ___lambda27__gala_gesture_tracker_on_end;
#line 398 "../src/Widgets/WindowClone.vala"
	on_animation_end_target = block72_data_ref (_data72_);
#line 398 "../src/Widgets/WindowClone.vala"
	on_animation_end_target_destroy_notify = block72_data_unref;
#line 435 "../src/Widgets/WindowClone.vala"
	_tmp19_ = self->priv->_gesture_tracker;
#line 435 "../src/Widgets/WindowClone.vala"
	if (_tmp19_ == NULL) {
#line 435 "../src/Widgets/WindowClone.vala"
		_tmp18_ = TRUE;
#line 2035 "WindowClone.c"
	} else {
#line 435 "../src/Widgets/WindowClone.vala"
		_tmp18_ = !with_gesture;
#line 2039 "WindowClone.c"
	}
#line 435 "../src/Widgets/WindowClone.vala"
	if (_tmp18_) {
#line 435 "../src/Widgets/WindowClone.vala"
		_tmp17_ = TRUE;
#line 2045 "WindowClone.c"
	} else {
		GalaWindowManager* _tmp20_;
		gboolean _tmp21_;
		gboolean _tmp22_;
#line 435 "../src/Widgets/WindowClone.vala"
		_tmp20_ = self->priv->_wm;
#line 435 "../src/Widgets/WindowClone.vala"
		_tmp21_ = gala_window_manager_get_enable_animations (_tmp20_);
#line 435 "../src/Widgets/WindowClone.vala"
		_tmp22_ = _tmp21_;
#line 435 "../src/Widgets/WindowClone.vala"
		_tmp17_ = !_tmp22_;
#line 2058 "WindowClone.c"
	}
#line 435 "../src/Widgets/WindowClone.vala"
	if (_tmp17_) {
#line 2062 "WindowClone.c"
		GalaGestureTrackerOnEnd _tmp23_;
		gpointer _tmp23__target;
#line 436 "../src/Widgets/WindowClone.vala"
		_tmp23_ = on_animation_end;
#line 436 "../src/Widgets/WindowClone.vala"
		_tmp23__target = on_animation_end_target;
#line 436 "../src/Widgets/WindowClone.vala"
		_tmp23_ ((gdouble) 1, FALSE, 0, _tmp23__target);
#line 2071 "WindowClone.c"
	} else {
		GalaGestureTracker* _tmp24_;
		GalaGestureTrackerOnUpdate _tmp25_;
		gpointer _tmp25__target;
		GDestroyNotify _tmp25__target_destroy_notify;
		GalaGestureTrackerOnEnd _tmp26_;
		gpointer _tmp26__target;
		GDestroyNotify _tmp26__target_destroy_notify;
#line 438 "../src/Widgets/WindowClone.vala"
		_tmp24_ = self->priv->_gesture_tracker;
#line 438 "../src/Widgets/WindowClone.vala"
		_tmp25_ = on_animation_update;
#line 438 "../src/Widgets/WindowClone.vala"
		_tmp25__target = on_animation_update_target;
#line 438 "../src/Widgets/WindowClone.vala"
		_tmp25__target_destroy_notify = on_animation_update_target_destroy_notify;
#line 438 "../src/Widgets/WindowClone.vala"
		on_animation_update = NULL;
#line 438 "../src/Widgets/WindowClone.vala"
		on_animation_update_target = NULL;
#line 438 "../src/Widgets/WindowClone.vala"
		on_animation_update_target_destroy_notify = NULL;
#line 438 "../src/Widgets/WindowClone.vala"
		_tmp26_ = on_animation_end;
#line 438 "../src/Widgets/WindowClone.vala"
		_tmp26__target = on_animation_end_target;
#line 438 "../src/Widgets/WindowClone.vala"
		_tmp26__target_destroy_notify = on_animation_end_target_destroy_notify;
#line 438 "../src/Widgets/WindowClone.vala"
		on_animation_end = NULL;
#line 438 "../src/Widgets/WindowClone.vala"
		on_animation_end_target = NULL;
#line 438 "../src/Widgets/WindowClone.vala"
		on_animation_end_target_destroy_notify = NULL;
#line 438 "../src/Widgets/WindowClone.vala"
		gala_gesture_tracker_connect_handlers (_tmp24_, NULL, NULL, NULL, _tmp25_, _tmp25__target, _tmp25__target_destroy_notify, _tmp26_, _tmp26__target, _tmp26__target_destroy_notify);
#line 2108 "WindowClone.c"
	}
#line 365 "../src/Widgets/WindowClone.vala"
	(on_animation_end_target_destroy_notify == NULL) ? NULL : (on_animation_end_target_destroy_notify (on_animation_end_target), NULL);
#line 365 "../src/Widgets/WindowClone.vala"
	on_animation_end = NULL;
#line 365 "../src/Widgets/WindowClone.vala"
	on_animation_end_target = NULL;
#line 365 "../src/Widgets/WindowClone.vala"
	on_animation_end_target_destroy_notify = NULL;
#line 365 "../src/Widgets/WindowClone.vala"
	(on_animation_update_target_destroy_notify == NULL) ? NULL : (on_animation_update_target_destroy_notify (on_animation_update_target), NULL);
#line 365 "../src/Widgets/WindowClone.vala"
	on_animation_update = NULL;
#line 365 "../src/Widgets/WindowClone.vala"
	on_animation_update_target = NULL;
#line 365 "../src/Widgets/WindowClone.vala"
	on_animation_update_target_destroy_notify = NULL;
#line 365 "../src/Widgets/WindowClone.vala"
	block72_data_unref (_data72_);
#line 365 "../src/Widgets/WindowClone.vala"
	_data72_ = NULL;
#line 2130 "WindowClone.c"
}

/**
     * Except for the texture clone and the highlight all children are placed
     * according to their given allocations. The first two are placed in a way
     * that compensates for invisible borders of the texture.
     */
static void
gala_window_clone_real_allocate (ClutterActor* base,
                                 ClutterActorBox* box)
{
	GalaWindowClone * self;
	ClutterActorBox _tmp0_;
	MtkRectangle input_rect = {0};
	MetaWindow* _tmp1_;
	MtkRectangle _tmp2_ = {0};
	MtkRectangle outer_rect = {0};
	MetaWindow* _tmp3_;
	MtkRectangle _tmp4_ = {0};
	gfloat scale_factor = 0.0F;
	gfloat _tmp5_;
	gfloat _tmp6_;
	MtkRectangle _tmp7_;
	ClutterActorBox shape_alloc = {0};
	MtkRectangle _tmp8_;
	MtkRectangle _tmp9_;
	ClutterActorBox _tmp10_ = {0};
	GalaWindowCloneActiveShape* _tmp11_;
	ClutterActorBox _tmp12_;
	gboolean _tmp13_ = FALSE;
	ClutterClone* _tmp14_;
	ClutterClone* _tmp20_;
	ClutterClone* _tmp21_;
	MtkRectangle _tmp22_;
	MtkRectangle _tmp23_;
	MtkRectangle _tmp24_;
	MtkRectangle _tmp25_;
#line 447 "../src/Widgets/WindowClone.vala"
	self = (GalaWindowClone*) base;
#line 447 "../src/Widgets/WindowClone.vala"
	g_return_if_fail (box != NULL);
#line 448 "../src/Widgets/WindowClone.vala"
	_tmp0_ = *box;
#line 448 "../src/Widgets/WindowClone.vala"
	CLUTTER_ACTOR_CLASS (gala_window_clone_parent_class)->allocate (G_TYPE_CHECK_INSTANCE_CAST (self, clutter_actor_get_type (), ClutterActor), &_tmp0_);
#line 450 "../src/Widgets/WindowClone.vala"
	_tmp1_ = self->priv->_window;
#line 450 "../src/Widgets/WindowClone.vala"
	meta_window_get_buffer_rect (_tmp1_, &_tmp2_);
#line 450 "../src/Widgets/WindowClone.vala"
	input_rect = _tmp2_;
#line 451 "../src/Widgets/WindowClone.vala"
	_tmp3_ = self->priv->_window;
#line 451 "../src/Widgets/WindowClone.vala"
	meta_window_get_frame_rect (_tmp3_, &_tmp4_);
#line 451 "../src/Widgets/WindowClone.vala"
	outer_rect = _tmp4_;
#line 452 "../src/Widgets/WindowClone.vala"
	_tmp5_ = clutter_actor_get_width ((ClutterActor*) self);
#line 452 "../src/Widgets/WindowClone.vala"
	_tmp6_ = _tmp5_;
#line 452 "../src/Widgets/WindowClone.vala"
	_tmp7_ = outer_rect;
#line 452 "../src/Widgets/WindowClone.vala"
	scale_factor = _tmp6_ / _tmp7_.width;
#line 454 "../src/Widgets/WindowClone.vala"
	_tmp8_ = outer_rect;
#line 454 "../src/Widgets/WindowClone.vala"
	_tmp9_ = outer_rect;
#line 454 "../src/Widgets/WindowClone.vala"
	_tmp10_.x1 = (gfloat) (-GALA_WINDOW_CLONE_ACTIVE_SHAPE_SIZE);
#line 454 "../src/Widgets/WindowClone.vala"
	_tmp10_.y1 = (gfloat) (-GALA_WINDOW_CLONE_ACTIVE_SHAPE_SIZE);
#line 454 "../src/Widgets/WindowClone.vala"
	_tmp10_.x2 = (_tmp8_.width * scale_factor) + GALA_WINDOW_CLONE_ACTIVE_SHAPE_SIZE;
#line 454 "../src/Widgets/WindowClone.vala"
	_tmp10_.y2 = (_tmp9_.height * scale_factor) + GALA_WINDOW_CLONE_ACTIVE_SHAPE_SIZE;
#line 454 "../src/Widgets/WindowClone.vala"
	shape_alloc = _tmp10_;
#line 460 "../src/Widgets/WindowClone.vala"
	_tmp11_ = self->priv->active_shape;
#line 460 "../src/Widgets/WindowClone.vala"
	_tmp12_ = shape_alloc;
#line 460 "../src/Widgets/WindowClone.vala"
	clutter_actor_allocate ((ClutterActor*) _tmp11_, &_tmp12_);
#line 462 "../src/Widgets/WindowClone.vala"
	_tmp14_ = self->priv->clone;
#line 462 "../src/Widgets/WindowClone.vala"
	if (_tmp14_ == NULL) {
#line 462 "../src/Widgets/WindowClone.vala"
		_tmp13_ = TRUE;
#line 2222 "WindowClone.c"
	} else {
		gboolean _tmp15_ = FALSE;
		GalaDragDropAction* _tmp16_;
#line 462 "../src/Widgets/WindowClone.vala"
		_tmp16_ = self->priv->drag_action;
#line 462 "../src/Widgets/WindowClone.vala"
		if (_tmp16_ != NULL) {
#line 2230 "WindowClone.c"
			GalaDragDropAction* _tmp17_;
			gboolean _tmp18_;
			gboolean _tmp19_;
#line 462 "../src/Widgets/WindowClone.vala"
			_tmp17_ = self->priv->drag_action;
#line 462 "../src/Widgets/WindowClone.vala"
			_tmp18_ = gala_drag_drop_action_get_dragging (_tmp17_);
#line 462 "../src/Widgets/WindowClone.vala"
			_tmp19_ = _tmp18_;
#line 462 "../src/Widgets/WindowClone.vala"
			_tmp15_ = _tmp19_;
#line 2242 "WindowClone.c"
		} else {
#line 462 "../src/Widgets/WindowClone.vala"
			_tmp15_ = FALSE;
#line 2246 "WindowClone.c"
		}
#line 462 "../src/Widgets/WindowClone.vala"
		_tmp13_ = _tmp15_;
#line 2250 "WindowClone.c"
	}
#line 462 "../src/Widgets/WindowClone.vala"
	if (_tmp13_) {
#line 463 "../src/Widgets/WindowClone.vala"
		return;
#line 2256 "WindowClone.c"
	}
#line 466 "../src/Widgets/WindowClone.vala"
	_tmp20_ = self->priv->clone;
#line 466 "../src/Widgets/WindowClone.vala"
	clutter_actor_set_scale ((ClutterActor*) _tmp20_, (gdouble) scale_factor, (gdouble) scale_factor);
#line 467 "../src/Widgets/WindowClone.vala"
	_tmp21_ = self->priv->clone;
#line 467 "../src/Widgets/WindowClone.vala"
	_tmp22_ = input_rect;
#line 467 "../src/Widgets/WindowClone.vala"
	_tmp23_ = outer_rect;
#line 467 "../src/Widgets/WindowClone.vala"
	_tmp24_ = input_rect;
#line 467 "../src/Widgets/WindowClone.vala"
	_tmp25_ = outer_rect;
#line 467 "../src/Widgets/WindowClone.vala"
	clutter_actor_set_position ((ClutterActor*) _tmp21_, (_tmp22_.x - _tmp23_.x) * scale_factor, (_tmp24_.y - _tmp25_.y) * scale_factor);
#line 2274 "WindowClone.c"
}

static gboolean
gala_window_clone_real_button_press_event (ClutterActor* base,
                                           ClutterEvent* event)
{
	GalaWindowClone * self;
	gboolean result;
#line 472 "../src/Widgets/WindowClone.vala"
	self = (GalaWindowClone*) base;
#line 472 "../src/Widgets/WindowClone.vala"
	g_return_val_if_fail (event != NULL, FALSE);
#line 476 "../src/Widgets/WindowClone.vala"
	result = CLUTTER_EVENT_STOP;
#line 476 "../src/Widgets/WindowClone.vala"
	return result;
#line 2291 "WindowClone.c"
}

static gboolean
gala_window_clone_real_enter_event (ClutterActor* base,
                                    ClutterEvent* event)
{
	GalaWindowClone * self;
	gboolean _tmp0_ = FALSE;
	GalaDragDropAction* _tmp1_;
	gint _tmp5_ = 0;
	GalaWindowManager* _tmp6_;
	gboolean _tmp7_;
	gboolean _tmp8_;
	gint duration = 0;
	GalaCloseButton* _tmp9_;
	GalaCloseButton* _tmp10_;
	GalaCloseButton* _tmp11_;
	gint _tmp12_ = 0;
	GalaCloseButton* _tmp13_;
	GalaCloseButton* _tmp14_;
	GalaTooltip* _tmp15_;
	GalaTooltip* _tmp16_;
	GalaTooltip* _tmp17_;
	gint _tmp18_ = 0;
	GalaTooltip* _tmp19_;
	GalaTooltip* _tmp20_;
	gboolean result;
#line 480 "../src/Widgets/WindowClone.vala"
	self = (GalaWindowClone*) base;
#line 480 "../src/Widgets/WindowClone.vala"
	g_return_val_if_fail (event != NULL, FALSE);
#line 484 "../src/Widgets/WindowClone.vala"
	_tmp1_ = self->priv->drag_action;
#line 484 "../src/Widgets/WindowClone.vala"
	if (_tmp1_ != NULL) {
#line 2327 "WindowClone.c"
		GalaDragDropAction* _tmp2_;
		gboolean _tmp3_;
		gboolean _tmp4_;
#line 484 "../src/Widgets/WindowClone.vala"
		_tmp2_ = self->priv->drag_action;
#line 484 "../src/Widgets/WindowClone.vala"
		_tmp3_ = gala_drag_drop_action_get_dragging (_tmp2_);
#line 484 "../src/Widgets/WindowClone.vala"
		_tmp4_ = _tmp3_;
#line 484 "../src/Widgets/WindowClone.vala"
		_tmp0_ = _tmp4_;
#line 2339 "WindowClone.c"
	} else {
#line 484 "../src/Widgets/WindowClone.vala"
		_tmp0_ = FALSE;
#line 2343 "WindowClone.c"
	}
#line 484 "../src/Widgets/WindowClone.vala"
	if (_tmp0_) {
#line 485 "../src/Widgets/WindowClone.vala"
		result = CLUTTER_EVENT_PROPAGATE;
#line 485 "../src/Widgets/WindowClone.vala"
		return result;
#line 2351 "WindowClone.c"
	}
#line 488 "../src/Widgets/WindowClone.vala"
	_tmp6_ = self->priv->_wm;
#line 488 "../src/Widgets/WindowClone.vala"
	_tmp7_ = gala_window_manager_get_enable_animations (_tmp6_);
#line 488 "../src/Widgets/WindowClone.vala"
	_tmp8_ = _tmp7_;
#line 488 "../src/Widgets/WindowClone.vala"
	if (_tmp8_) {
#line 488 "../src/Widgets/WindowClone.vala"
		_tmp5_ = GALA_WINDOW_CLONE_FADE_ANIMATION_DURATION;
#line 2363 "WindowClone.c"
	} else {
#line 488 "../src/Widgets/WindowClone.vala"
		_tmp5_ = 0;
#line 2367 "WindowClone.c"
	}
#line 488 "../src/Widgets/WindowClone.vala"
	duration = _tmp5_;
#line 490 "../src/Widgets/WindowClone.vala"
	_tmp9_ = self->priv->close_button;
#line 490 "../src/Widgets/WindowClone.vala"
	clutter_actor_save_easing_state ((ClutterActor*) _tmp9_);
#line 491 "../src/Widgets/WindowClone.vala"
	_tmp10_ = self->priv->close_button;
#line 491 "../src/Widgets/WindowClone.vala"
	clutter_actor_set_easing_mode ((ClutterActor*) _tmp10_, CLUTTER_LINEAR);
#line 492 "../src/Widgets/WindowClone.vala"
	_tmp11_ = self->priv->close_button;
#line 492 "../src/Widgets/WindowClone.vala"
	clutter_actor_set_easing_duration ((ClutterActor*) _tmp11_, (guint) duration);
#line 493 "../src/Widgets/WindowClone.vala"
	if (self->priv->in_slot_animation) {
#line 493 "../src/Widgets/WindowClone.vala"
		_tmp12_ = 0;
#line 2387 "WindowClone.c"
	} else {
#line 493 "../src/Widgets/WindowClone.vala"
		_tmp12_ = 255;
#line 2391 "WindowClone.c"
	}
#line 493 "../src/Widgets/WindowClone.vala"
	_tmp13_ = self->priv->close_button;
#line 493 "../src/Widgets/WindowClone.vala"
	clutter_actor_set_opacity ((ClutterActor*) _tmp13_, (guint) _tmp12_);
#line 494 "../src/Widgets/WindowClone.vala"
	_tmp14_ = self->priv->close_button;
#line 494 "../src/Widgets/WindowClone.vala"
	clutter_actor_restore_easing_state ((ClutterActor*) _tmp14_);
#line 496 "../src/Widgets/WindowClone.vala"
	_tmp15_ = self->priv->window_title;
#line 496 "../src/Widgets/WindowClone.vala"
	clutter_actor_save_easing_state ((ClutterActor*) _tmp15_);
#line 497 "../src/Widgets/WindowClone.vala"
	_tmp16_ = self->priv->window_title;
#line 497 "../src/Widgets/WindowClone.vala"
	clutter_actor_set_easing_mode ((ClutterActor*) _tmp16_, CLUTTER_LINEAR);
#line 498 "../src/Widgets/WindowClone.vala"
	_tmp17_ = self->priv->window_title;
#line 498 "../src/Widgets/WindowClone.vala"
	clutter_actor_set_easing_duration ((ClutterActor*) _tmp17_, (guint) duration);
#line 499 "../src/Widgets/WindowClone.vala"
	if (self->priv->in_slot_animation) {
#line 499 "../src/Widgets/WindowClone.vala"
		_tmp18_ = 0;
#line 2417 "WindowClone.c"
	} else {
#line 499 "../src/Widgets/WindowClone.vala"
		_tmp18_ = 255;
#line 2421 "WindowClone.c"
	}
#line 499 "../src/Widgets/WindowClone.vala"
	_tmp19_ = self->priv->window_title;
#line 499 "../src/Widgets/WindowClone.vala"
	clutter_actor_set_opacity ((ClutterActor*) _tmp19_, (guint) _tmp18_);
#line 500 "../src/Widgets/WindowClone.vala"
	_tmp20_ = self->priv->window_title;
#line 500 "../src/Widgets/WindowClone.vala"
	clutter_actor_restore_easing_state ((ClutterActor*) _tmp20_);
#line 502 "../src/Widgets/WindowClone.vala"
	result = CLUTTER_EVENT_PROPAGATE;
#line 502 "../src/Widgets/WindowClone.vala"
	return result;
#line 2435 "WindowClone.c"
}

static gboolean
gala_window_clone_real_leave_event (ClutterActor* base,
                                    ClutterEvent* event)
{
	GalaWindowClone * self;
	gint _tmp0_ = 0;
	GalaWindowManager* _tmp1_;
	gboolean _tmp2_;
	gboolean _tmp3_;
	gint duration = 0;
	GalaCloseButton* _tmp4_;
	GalaCloseButton* _tmp5_;
	GalaCloseButton* _tmp6_;
	GalaCloseButton* _tmp7_;
	GalaCloseButton* _tmp8_;
	GalaTooltip* _tmp9_;
	GalaTooltip* _tmp10_;
	GalaTooltip* _tmp11_;
	GalaTooltip* _tmp12_;
	GalaTooltip* _tmp13_;
	gboolean result;
#line 506 "../src/Widgets/WindowClone.vala"
	self = (GalaWindowClone*) base;
#line 506 "../src/Widgets/WindowClone.vala"
	g_return_val_if_fail (event != NULL, FALSE);
#line 510 "../src/Widgets/WindowClone.vala"
	_tmp1_ = self->priv->_wm;
#line 510 "../src/Widgets/WindowClone.vala"
	_tmp2_ = gala_window_manager_get_enable_animations (_tmp1_);
#line 510 "../src/Widgets/WindowClone.vala"
	_tmp3_ = _tmp2_;
#line 510 "../src/Widgets/WindowClone.vala"
	if (_tmp3_) {
#line 510 "../src/Widgets/WindowClone.vala"
		_tmp0_ = GALA_WINDOW_CLONE_FADE_ANIMATION_DURATION;
#line 2473 "WindowClone.c"
	} else {
#line 510 "../src/Widgets/WindowClone.vala"
		_tmp0_ = 0;
#line 2477 "WindowClone.c"
	}
#line 510 "../src/Widgets/WindowClone.vala"
	duration = _tmp0_;
#line 512 "../src/Widgets/WindowClone.vala"
	_tmp4_ = self->priv->close_button;
#line 512 "../src/Widgets/WindowClone.vala"
	clutter_actor_save_easing_state ((ClutterActor*) _tmp4_);
#line 513 "../src/Widgets/WindowClone.vala"
	_tmp5_ = self->priv->close_button;
#line 513 "../src/Widgets/WindowClone.vala"
	clutter_actor_set_easing_mode ((ClutterActor*) _tmp5_, CLUTTER_LINEAR);
#line 514 "../src/Widgets/WindowClone.vala"
	_tmp6_ = self->priv->close_button;
#line 514 "../src/Widgets/WindowClone.vala"
	clutter_actor_set_easing_duration ((ClutterActor*) _tmp6_, (guint) duration);
#line 515 "../src/Widgets/WindowClone.vala"
	_tmp7_ = self->priv->close_button;
#line 515 "../src/Widgets/WindowClone.vala"
	clutter_actor_set_opacity ((ClutterActor*) _tmp7_, (guint) 0);
#line 516 "../src/Widgets/WindowClone.vala"
	_tmp8_ = self->priv->close_button;
#line 516 "../src/Widgets/WindowClone.vala"
	clutter_actor_restore_easing_state ((ClutterActor*) _tmp8_);
#line 518 "../src/Widgets/WindowClone.vala"
	_tmp9_ = self->priv->window_title;
#line 518 "../src/Widgets/WindowClone.vala"
	clutter_actor_save_easing_state ((ClutterActor*) _tmp9_);
#line 519 "../src/Widgets/WindowClone.vala"
	_tmp10_ = self->priv->window_title;
#line 519 "../src/Widgets/WindowClone.vala"
	clutter_actor_set_easing_mode ((ClutterActor*) _tmp10_, CLUTTER_LINEAR);
#line 520 "../src/Widgets/WindowClone.vala"
	_tmp11_ = self->priv->window_title;
#line 520 "../src/Widgets/WindowClone.vala"
	clutter_actor_set_easing_duration ((ClutterActor*) _tmp11_, (guint) duration);
#line 521 "../src/Widgets/WindowClone.vala"
	_tmp12_ = self->priv->window_title;
#line 521 "../src/Widgets/WindowClone.vala"
	clutter_actor_set_opacity ((ClutterActor*) _tmp12_, (guint) 0);
#line 522 "../src/Widgets/WindowClone.vala"
	_tmp13_ = self->priv->window_title;
#line 522 "../src/Widgets/WindowClone.vala"
	clutter_actor_restore_easing_state ((ClutterActor*) _tmp13_);
#line 524 "../src/Widgets/WindowClone.vala"
	result = CLUTTER_EVENT_PROPAGATE;
#line 524 "../src/Widgets/WindowClone.vala"
	return result;
#line 2525 "WindowClone.c"
}

/**
     * Place the widgets, that is the close button and the WindowIcon of the window,
     * at their positions inside the actor for a given width and height.
     */
void
gala_window_clone_place_widgets (GalaWindowClone* self,
                                 gint dest_width,
                                 gint dest_height,
                                 gfloat scale_factor)
{
	gint close_button_size = 0;
	GalaCloseButton* _tmp0_;
	GalaCloseButton* _tmp1_;
	GalaCloseButton* _tmp2_;
	gfloat _tmp3_;
	gfloat _tmp4_;
	gfloat _tmp5_ = 0.0F;
	GalaCloseButton* _tmp12_;
	gboolean _tmp13_ = FALSE;
	gboolean _tmp14_;
	gboolean _tmp15_;
	gboolean show = FALSE;
	gint _tmp16_ = 0;
	GalaCloseButton* _tmp17_;
	GalaTooltip* _tmp18_;
	GalaCloseButton* _tmp19_;
	guint _tmp20_;
	guint _tmp21_;
	const gchar* _tmp22_ = NULL;
	MetaWindow* _tmp23_;
	const gchar* _tmp24_;
	GalaTooltip* _tmp25_;
	GalaTooltip* _tmp26_;
#line 531 "../src/Widgets/WindowClone.vala"
	g_return_if_fail (self != NULL);
#line 532 "../src/Widgets/WindowClone.vala"
	close_button_size = gala_internal_utils_scale_to_int (GALA_WINDOW_CLONE_CLOSE_WINDOW_ICON_SIZE, scale_factor);
#line 533 "../src/Widgets/WindowClone.vala"
	_tmp0_ = self->priv->close_button;
#line 533 "../src/Widgets/WindowClone.vala"
	clutter_actor_set_size ((ClutterActor*) _tmp0_, (gfloat) close_button_size, (gfloat) close_button_size);
#line 535 "../src/Widgets/WindowClone.vala"
	_tmp1_ = self->priv->close_button;
#line 535 "../src/Widgets/WindowClone.vala"
	_tmp2_ = self->priv->close_button;
#line 535 "../src/Widgets/WindowClone.vala"
	_tmp3_ = clutter_actor_get_height ((ClutterActor*) _tmp2_);
#line 535 "../src/Widgets/WindowClone.vala"
	_tmp4_ = _tmp3_;
#line 535 "../src/Widgets/WindowClone.vala"
	clutter_actor_set_y ((ClutterActor*) _tmp1_, (-_tmp4_) * 0.33f);
#line 536 "../src/Widgets/WindowClone.vala"
	if (gala_window_clone_is_close_button_on_left ()) {
#line 2581 "WindowClone.c"
		GalaCloseButton* _tmp6_;
		gfloat _tmp7_;
		gfloat _tmp8_;
#line 537 "../src/Widgets/WindowClone.vala"
		_tmp6_ = self->priv->close_button;
#line 537 "../src/Widgets/WindowClone.vala"
		_tmp7_ = clutter_actor_get_width ((ClutterActor*) _tmp6_);
#line 537 "../src/Widgets/WindowClone.vala"
		_tmp8_ = _tmp7_;
#line 537 "../src/Widgets/WindowClone.vala"
		_tmp5_ = (-_tmp8_) * 0.5f;
#line 2593 "WindowClone.c"
	} else {
		GalaCloseButton* _tmp9_;
		gfloat _tmp10_;
		gfloat _tmp11_;
#line 538 "../src/Widgets/WindowClone.vala"
		_tmp9_ = self->priv->close_button;
#line 538 "../src/Widgets/WindowClone.vala"
		_tmp10_ = clutter_actor_get_width ((ClutterActor*) _tmp9_);
#line 538 "../src/Widgets/WindowClone.vala"
		_tmp11_ = _tmp10_;
#line 538 "../src/Widgets/WindowClone.vala"
		_tmp5_ = dest_width - (_tmp11_ * 0.5f);
#line 2606 "WindowClone.c"
	}
#line 536 "../src/Widgets/WindowClone.vala"
	_tmp12_ = self->priv->close_button;
#line 536 "../src/Widgets/WindowClone.vala"
	clutter_actor_set_x ((ClutterActor*) _tmp12_, _tmp5_);
#line 540 "../src/Widgets/WindowClone.vala"
	g_object_get ((ClutterActor*) self, "has-pointer", &_tmp14_, NULL);
#line 540 "../src/Widgets/WindowClone.vala"
	_tmp15_ = _tmp14_;
#line 540 "../src/Widgets/WindowClone.vala"
	if (_tmp15_) {
#line 540 "../src/Widgets/WindowClone.vala"
		_tmp13_ = !self->priv->in_slot_animation;
#line 2620 "WindowClone.c"
	} else {
#line 540 "../src/Widgets/WindowClone.vala"
		_tmp13_ = FALSE;
#line 2624 "WindowClone.c"
	}
#line 540 "../src/Widgets/WindowClone.vala"
	show = _tmp13_;
#line 541 "../src/Widgets/WindowClone.vala"
	if (show) {
#line 541 "../src/Widgets/WindowClone.vala"
		_tmp16_ = 255;
#line 2632 "WindowClone.c"
	} else {
#line 541 "../src/Widgets/WindowClone.vala"
		_tmp16_ = 0;
#line 2636 "WindowClone.c"
	}
#line 541 "../src/Widgets/WindowClone.vala"
	_tmp17_ = self->priv->close_button;
#line 541 "../src/Widgets/WindowClone.vala"
	clutter_actor_set_opacity ((ClutterActor*) _tmp17_, (guint) _tmp16_);
#line 542 "../src/Widgets/WindowClone.vala"
	_tmp18_ = self->priv->window_title;
#line 542 "../src/Widgets/WindowClone.vala"
	_tmp19_ = self->priv->close_button;
#line 542 "../src/Widgets/WindowClone.vala"
	_tmp20_ = clutter_actor_get_opacity ((ClutterActor*) _tmp19_);
#line 542 "../src/Widgets/WindowClone.vala"
	_tmp21_ = _tmp20_;
#line 542 "../src/Widgets/WindowClone.vala"
	clutter_actor_set_opacity ((ClutterActor*) _tmp18_, _tmp21_);
#line 544 "../src/Widgets/WindowClone.vala"
	_tmp23_ = self->priv->_window;
#line 544 "../src/Widgets/WindowClone.vala"
	_tmp24_ = meta_window_get_title (_tmp23_);
#line 544 "../src/Widgets/WindowClone.vala"
	_tmp22_ = _tmp24_;
#line 544 "../src/Widgets/WindowClone.vala"
	if (_tmp22_ == NULL) {
#line 544 "../src/Widgets/WindowClone.vala"
		_tmp22_ = "";
#line 2662 "WindowClone.c"
	}
#line 544 "../src/Widgets/WindowClone.vala"
	_tmp25_ = self->priv->window_title;
#line 544 "../src/Widgets/WindowClone.vala"
	gala_tooltip_set_text (_tmp25_, _tmp22_);
#line 545 "../src/Widgets/WindowClone.vala"
	_tmp26_ = self->priv->window_title;
#line 545 "../src/Widgets/WindowClone.vala"
	gala_tooltip_set_max_width (_tmp26_, (gfloat) (dest_width - gala_internal_utils_scale_to_int (GALA_WINDOW_CLONE_TITLE_MAX_WIDTH_MARGIN, scale_factor)));
#line 546 "../src/Widgets/WindowClone.vala"
	gala_window_clone_set_window_title_position (self, (gfloat) dest_width, (gfloat) dest_height, scale_factor);
#line 2674 "WindowClone.c"
}

static void
gala_window_clone_toggle_shadow (GalaWindowClone* self,
                                 gboolean show)
{
	ClutterTransition* _tmp0_;
	GalaWindowManager* _tmp1_;
	gboolean _tmp2_;
	gboolean _tmp3_;
#line 549 "../src/Widgets/WindowClone.vala"
	g_return_if_fail (self != NULL);
#line 550 "../src/Widgets/WindowClone.vala"
	_tmp0_ = clutter_actor_get_transition ((ClutterActor*) self, "shadow-opacity");
#line 550 "../src/Widgets/WindowClone.vala"
	if (_tmp0_ != NULL) {
#line 551 "../src/Widgets/WindowClone.vala"
		clutter_actor_remove_transition ((ClutterActor*) self, "shadow-opacity");
#line 2693 "WindowClone.c"
	}
#line 554 "../src/Widgets/WindowClone.vala"
	_tmp1_ = self->priv->_wm;
#line 554 "../src/Widgets/WindowClone.vala"
	_tmp2_ = gala_window_manager_get_enable_animations (_tmp1_);
#line 554 "../src/Widgets/WindowClone.vala"
	_tmp3_ = _tmp2_;
#line 554 "../src/Widgets/WindowClone.vala"
	if (_tmp3_) {
#line 2703 "WindowClone.c"
		gint _tmp4_ = 0;
		ClutterPropertyTransition* shadow_transition = NULL;
		guint8 _tmp5_;
		guint8 _tmp6_;
		ClutterInterval* _tmp7_;
		ClutterPropertyTransition* _tmp8_ = NULL;
		ClutterPropertyTransition* _tmp9_;
#line 559 "../src/Widgets/WindowClone.vala"
		if (show) {
#line 559 "../src/Widgets/WindowClone.vala"
			_tmp4_ = 255;
#line 2715 "WindowClone.c"
		} else {
#line 559 "../src/Widgets/WindowClone.vala"
			_tmp4_ = 0;
#line 2719 "WindowClone.c"
		}
#line 555 "../src/Widgets/WindowClone.vala"
		_tmp5_ = gala_window_clone_get_shadow_opacity (self);
#line 555 "../src/Widgets/WindowClone.vala"
		_tmp6_ = _tmp5_;
#line 555 "../src/Widgets/WindowClone.vala"
		_tmp7_ = clutter_interval_new (G_TYPE_UCHAR, _tmp6_, _tmp4_, NULL);
#line 555 "../src/Widgets/WindowClone.vala"
		g_object_ref_sink (_tmp7_);
#line 555 "../src/Widgets/WindowClone.vala"
		_tmp8_ = (ClutterPropertyTransition*) clutter_property_transition_new ("shadow-opacity");
#line 555 "../src/Widgets/WindowClone.vala"
		clutter_timeline_set_duration ((ClutterTimeline*) _tmp8_, (guint) GALA_MULTITASKING_VIEW_ANIMATION_DURATION);
#line 555 "../src/Widgets/WindowClone.vala"
		clutter_transition_set_remove_on_complete ((ClutterTransition*) _tmp8_, TRUE);
#line 555 "../src/Widgets/WindowClone.vala"
		clutter_timeline_set_progress_mode ((ClutterTimeline*) _tmp8_, CLUTTER_EASE_OUT_QUAD);
#line 555 "../src/Widgets/WindowClone.vala"
		clutter_transition_set_interval ((ClutterTransition*) _tmp8_, _tmp7_);
#line 555 "../src/Widgets/WindowClone.vala"
		_g_object_unref0 (_tmp7_);
#line 555 "../src/Widgets/WindowClone.vala"
		shadow_transition = _tmp8_;
#line 562 "../src/Widgets/WindowClone.vala"
		_tmp9_ = shadow_transition;
#line 562 "../src/Widgets/WindowClone.vala"
		clutter_actor_add_transition ((ClutterActor*) self, "shadow-opacity", (ClutterTransition*) _tmp9_);
#line 554 "../src/Widgets/WindowClone.vala"
		_g_object_unref0 (shadow_transition);
#line 2749 "WindowClone.c"
	} else {
		gint _tmp10_ = 0;
#line 564 "../src/Widgets/WindowClone.vala"
		if (show) {
#line 564 "../src/Widgets/WindowClone.vala"
			_tmp10_ = 255;
#line 2756 "WindowClone.c"
		} else {
#line 564 "../src/Widgets/WindowClone.vala"
			_tmp10_ = 0;
#line 2760 "WindowClone.c"
		}
#line 564 "../src/Widgets/WindowClone.vala"
		gala_window_clone_set_shadow_opacity (self, (guint8) _tmp10_);
#line 2764 "WindowClone.c"
	}
}

/**
     * Send the window the delete signal and listen for new windows to be added
     * to the window's workspace, in which case we check if the new window is a
     * dialog of the window we were going to delete. If that's the case, we request
     * to select our window.
     */
static void
_gala_window_clone_check_confirm_dialog_meta_display_window_entered_monitor (MetaDisplay* _sender,
                                                                             gint object,
                                                                             MetaWindow* p0,
                                                                             gpointer self)
{
#line 576 "../src/Widgets/WindowClone.vala"
	gala_window_clone_check_confirm_dialog ((GalaWindowClone*) self, object, p0);
#line 2782 "WindowClone.c"
}

static void
gala_window_clone_close_window (GalaWindowClone* self,
                                guint32 timestamp)
{
	MetaDisplay* display = NULL;
	MetaWindow* _tmp0_;
	MetaDisplay* _tmp1_;
	gulong _tmp2_;
	MetaWindow* _tmp3_;
#line 574 "../src/Widgets/WindowClone.vala"
	g_return_if_fail (self != NULL);
#line 575 "../src/Widgets/WindowClone.vala"
	_tmp0_ = self->priv->_window;
#line 575 "../src/Widgets/WindowClone.vala"
	_tmp1_ = meta_window_get_display (_tmp0_);
#line 575 "../src/Widgets/WindowClone.vala"
	display = _tmp1_;
#line 576 "../src/Widgets/WindowClone.vala"
	_tmp2_ = g_signal_connect_object (display, "window-entered-monitor", (GCallback) _gala_window_clone_check_confirm_dialog_meta_display_window_entered_monitor, self, 0);
#line 576 "../src/Widgets/WindowClone.vala"
	self->priv->check_confirm_dialog_cb = _tmp2_;
#line 578 "../src/Widgets/WindowClone.vala"
	_tmp3_ = self->priv->_window;
#line 578 "../src/Widgets/WindowClone.vala"
	meta_window_delete (_tmp3_, timestamp);
#line 2810 "WindowClone.c"
}

static gboolean
___lambda19_ (GalaWindowClone* self)
{
	gboolean result;
#line 584 "../src/Widgets/WindowClone.vala"
	g_signal_emit (self, gala_window_clone_signals[GALA_WINDOW_CLONE_SELECTED_SIGNAL], 0);
#line 585 "../src/Widgets/WindowClone.vala"
	result = G_SOURCE_REMOVE;
#line 585 "../src/Widgets/WindowClone.vala"
	return result;
#line 2823 "WindowClone.c"
}

static gboolean
____lambda19__gsource_func (gpointer self)
{
	gboolean result;
	result = ___lambda19_ ((GalaWindowClone*) self);
#line 583 "../src/Widgets/WindowClone.vala"
	return result;
#line 2833 "WindowClone.c"
}

static void
gala_window_clone_check_confirm_dialog (GalaWindowClone* self,
                                        gint monitor,
                                        MetaWindow* new_window)
{
	MetaWindow* _tmp0_;
	MetaWindow* _tmp1_;
#line 581 "../src/Widgets/WindowClone.vala"
	g_return_if_fail (self != NULL);
#line 581 "../src/Widgets/WindowClone.vala"
	g_return_if_fail (new_window != NULL);
#line 582 "../src/Widgets/WindowClone.vala"
	_tmp0_ = meta_window_get_transient_for (new_window);
#line 582 "../src/Widgets/WindowClone.vala"
	_tmp1_ = self->priv->_window;
#line 582 "../src/Widgets/WindowClone.vala"
	if (_tmp0_ == _tmp1_) {
#line 2853 "WindowClone.c"
		MetaWindow* _tmp2_;
		MetaDisplay* _tmp3_;
#line 583 "../src/Widgets/WindowClone.vala"
		g_idle_add_full (G_PRIORITY_DEFAULT_IDLE, ____lambda19__gsource_func, g_object_ref (self), g_object_unref);
#line 588 "../src/Widgets/WindowClone.vala"
		_tmp2_ = self->priv->_window;
#line 588 "../src/Widgets/WindowClone.vala"
		_tmp3_ = meta_window_get_display (_tmp2_);
#line 588 "../src/Widgets/WindowClone.vala"
		g_signal_handler_disconnect (_tmp3_, self->priv->check_confirm_dialog_cb);
#line 589 "../src/Widgets/WindowClone.vala"
		self->priv->check_confirm_dialog_cb = (gulong) 0;
#line 2866 "WindowClone.c"
	}
}

/**
     * The window unmanaged by the compositor, so we need to destroy ourselves too.
     */
static void
gala_window_clone_unmanaged (GalaWindowClone* self)
{
	gboolean _tmp0_ = FALSE;
	GalaDragDropAction* _tmp1_;
	ClutterClone* _tmp6_;
#line 596 "../src/Widgets/WindowClone.vala"
	g_return_if_fail (self != NULL);
#line 597 "../src/Widgets/WindowClone.vala"
	clutter_actor_remove_all_transitions ((ClutterActor*) self);
#line 599 "../src/Widgets/WindowClone.vala"
	_tmp1_ = self->priv->drag_action;
#line 599 "../src/Widgets/WindowClone.vala"
	if (_tmp1_ != NULL) {
#line 2887 "WindowClone.c"
		GalaDragDropAction* _tmp2_;
		gboolean _tmp3_;
		gboolean _tmp4_;
#line 599 "../src/Widgets/WindowClone.vala"
		_tmp2_ = self->priv->drag_action;
#line 599 "../src/Widgets/WindowClone.vala"
		_tmp3_ = gala_drag_drop_action_get_dragging (_tmp2_);
#line 599 "../src/Widgets/WindowClone.vala"
		_tmp4_ = _tmp3_;
#line 599 "../src/Widgets/WindowClone.vala"
		_tmp0_ = _tmp4_;
#line 2899 "WindowClone.c"
	} else {
#line 599 "../src/Widgets/WindowClone.vala"
		_tmp0_ = FALSE;
#line 2903 "WindowClone.c"
	}
#line 599 "../src/Widgets/WindowClone.vala"
	if (_tmp0_) {
#line 2907 "WindowClone.c"
		GalaDragDropAction* _tmp5_;
#line 600 "../src/Widgets/WindowClone.vala"
		_tmp5_ = self->priv->drag_action;
#line 600 "../src/Widgets/WindowClone.vala"
		gala_drag_drop_action_cancel (_tmp5_);
#line 2913 "WindowClone.c"
	}
#line 603 "../src/Widgets/WindowClone.vala"
	_tmp6_ = self->priv->clone;
#line 603 "../src/Widgets/WindowClone.vala"
	if (_tmp6_ != NULL) {
#line 2919 "WindowClone.c"
		ClutterClone* _tmp7_;
#line 604 "../src/Widgets/WindowClone.vala"
		_tmp7_ = self->priv->clone;
#line 604 "../src/Widgets/WindowClone.vala"
		clutter_actor_destroy ((ClutterActor*) _tmp7_);
#line 2925 "WindowClone.c"
	}
#line 607 "../src/Widgets/WindowClone.vala"
	if (self->priv->check_confirm_dialog_cb != ((gulong) 0)) {
#line 2929 "WindowClone.c"
		MetaWindow* _tmp8_;
		MetaDisplay* _tmp9_;
#line 608 "../src/Widgets/WindowClone.vala"
		_tmp8_ = self->priv->_window;
#line 608 "../src/Widgets/WindowClone.vala"
		_tmp9_ = meta_window_get_display (_tmp8_);
#line 608 "../src/Widgets/WindowClone.vala"
		g_signal_handler_disconnect (_tmp9_, self->priv->check_confirm_dialog_cb);
#line 609 "../src/Widgets/WindowClone.vala"
		self->priv->check_confirm_dialog_cb = (gulong) 0;
#line 2940 "WindowClone.c"
	}
#line 612 "../src/Widgets/WindowClone.vala"
	clutter_actor_destroy ((ClutterActor*) self);
#line 2944 "WindowClone.c"
}

static void
gala_window_clone_actor_clicked (GalaWindowClone* self,
                                 guint32 button)
{
#line 615 "../src/Widgets/WindowClone.vala"
	g_return_if_fail (self != NULL);
#line 616 "../src/Widgets/WindowClone.vala"
	switch (button) {
#line 616 "../src/Widgets/WindowClone.vala"
		case CLUTTER_BUTTON_PRIMARY:
#line 2957 "WindowClone.c"
		{
#line 618 "../src/Widgets/WindowClone.vala"
			g_signal_emit (self, gala_window_clone_signals[GALA_WINDOW_CLONE_SELECTED_SIGNAL], 0);
#line 619 "../src/Widgets/WindowClone.vala"
			break;
#line 2963 "WindowClone.c"
		}
#line 616 "../src/Widgets/WindowClone.vala"
		case CLUTTER_BUTTON_MIDDLE:
#line 2967 "WindowClone.c"
		{
			GalaWindowManager* _tmp0_;
			MetaDisplay* _tmp1_;
#line 621 "../src/Widgets/WindowClone.vala"
			_tmp0_ = self->priv->_wm;
#line 621 "../src/Widgets/WindowClone.vala"
			_tmp1_ = meta_plugin_get_display ((MetaPlugin*) _tmp0_);
#line 621 "../src/Widgets/WindowClone.vala"
			gala_window_clone_close_window (self, meta_display_get_current_time (_tmp1_));
#line 622 "../src/Widgets/WindowClone.vala"
			break;
#line 2979 "WindowClone.c"
		}
		default:
#line 616 "../src/Widgets/WindowClone.vala"
		break;
#line 2984 "WindowClone.c"
	}
}

/**
     * A drag action has been initiated on us, we reparent ourselves to the stage so
     * we can move freely, scale ourselves to a smaller scale and request that the
     * position we just freed is immediately filled by the WindowCloneContainer.
     */
static ClutterActor*
gala_window_clone_drag_begin (GalaWindowClone* self,
                              gfloat click_x,
                              gfloat click_y)
{
	gfloat abs_x = 0.0F;
	gfloat abs_y = 0.0F;
	gfloat prev_parent_x = 0.0F;
	gfloat prev_parent_y = 0.0F;
	ClutterActor* _tmp0_;
	ClutterActor* _tmp1_;
	ClutterActor* _tmp2_;
	GList* _tmp3_;
	GList* _tmp4_;
	ClutterActor* _tmp5_;
	gfloat _tmp6_ = 0.0F;
	gfloat _tmp7_ = 0.0F;
	ClutterStage* stage = NULL;
	ClutterStage* _tmp8_;
	ClutterStage* _tmp9_;
	ClutterActor* _tmp10_;
	ClutterStage* _tmp11_;
	GalaWindowCloneActiveShape* _tmp12_;
	gfloat scale = 0.0F;
	ClutterActor* _tmp13_;
	gfloat _tmp14_;
	gfloat _tmp15_;
	ClutterClone* _tmp16_;
	gfloat _tmp17_;
	gfloat _tmp18_;
	gint _tmp19_ = 0;
	GalaWindowManager* _tmp20_;
	gboolean _tmp21_;
	gboolean _tmp22_;
	gint duration = 0;
	ClutterClone* _tmp23_;
	gfloat _tmp24_ = 0.0F;
	gfloat _tmp25_ = 0.0F;
	ClutterClone* _tmp26_;
	ClutterClone* _tmp27_;
	ClutterClone* _tmp28_;
	ClutterClone* _tmp29_;
	ClutterClone* _tmp30_;
	gfloat _tmp31_;
	gfloat _tmp32_;
	ClutterClone* _tmp33_;
	gfloat _tmp34_;
	gfloat _tmp35_;
	ClutterClone* _tmp36_;
	ClutterClone* _tmp37_;
	ClutterClone* _tmp38_;
	gfloat _tmp39_ = 0.0F;
	gfloat _tmp40_ = 0.0F;
	ClutterActor* _tmp41_;
	ClutterActor* _tmp42_;
	ClutterActor* _tmp43_;
	ClutterActor* _tmp44_;
	ClutterActor* _tmp45_;
	gfloat _tmp46_;
	gfloat _tmp47_;
	ClutterActor* _tmp48_;
	gfloat _tmp49_;
	gfloat _tmp50_;
	ClutterActor* _tmp51_;
	GalaCloseButton* _tmp52_;
	GalaTooltip* _tmp53_;
	GalaWindowManager* _tmp54_;
	MetaDisplay* _tmp55_;
	ClutterActor* _tmp56_;
	ClutterActor* result;
#line 631 "../src/Widgets/WindowClone.vala"
	g_return_val_if_fail (self != NULL, NULL);
#line 635 "../src/Widgets/WindowClone.vala"
	_tmp0_ = clutter_actor_get_parent ((ClutterActor*) self);
#line 635 "../src/Widgets/WindowClone.vala"
	_tmp1_ = _g_object_ref0 (_tmp0_);
#line 635 "../src/Widgets/WindowClone.vala"
	_g_object_unref0 (self->priv->prev_parent);
#line 635 "../src/Widgets/WindowClone.vala"
	self->priv->prev_parent = _tmp1_;
#line 636 "../src/Widgets/WindowClone.vala"
	_tmp2_ = self->priv->prev_parent;
#line 636 "../src/Widgets/WindowClone.vala"
	_tmp3_ = clutter_actor_get_children (_tmp2_);
#line 636 "../src/Widgets/WindowClone.vala"
	_tmp4_ = _tmp3_;
#line 636 "../src/Widgets/WindowClone.vala"
	self->priv->prev_index = g_list_index (_tmp4_, (ClutterActor*) self);
#line 636 "../src/Widgets/WindowClone.vala"
	(_tmp4_ == NULL) ? NULL : (_tmp4_ = (g_list_free (_tmp4_), NULL));
#line 637 "../src/Widgets/WindowClone.vala"
	_tmp5_ = self->priv->prev_parent;
#line 637 "../src/Widgets/WindowClone.vala"
	clutter_actor_get_transformed_position (_tmp5_, &_tmp6_, &_tmp7_);
#line 637 "../src/Widgets/WindowClone.vala"
	prev_parent_x = _tmp6_;
#line 637 "../src/Widgets/WindowClone.vala"
	prev_parent_y = _tmp7_;
#line 639 "../src/Widgets/WindowClone.vala"
	_tmp8_ = clutter_actor_get_stage ((ClutterActor*) self);
#line 639 "../src/Widgets/WindowClone.vala"
	_tmp9_ = _g_object_ref0 (_tmp8_);
#line 639 "../src/Widgets/WindowClone.vala"
	stage = _tmp9_;
#line 640 "../src/Widgets/WindowClone.vala"
	_tmp10_ = self->priv->prev_parent;
#line 640 "../src/Widgets/WindowClone.vala"
	clutter_actor_remove_child (_tmp10_, (ClutterActor*) self);
#line 641 "../src/Widgets/WindowClone.vala"
	_tmp11_ = stage;
#line 641 "../src/Widgets/WindowClone.vala"
	clutter_actor_add_child ((ClutterActor*) _tmp11_, (ClutterActor*) self);
#line 643 "../src/Widgets/WindowClone.vala"
	_tmp12_ = self->priv->active_shape;
#line 643 "../src/Widgets/WindowClone.vala"
	clutter_actor_hide ((ClutterActor*) _tmp12_);
#line 645 "../src/Widgets/WindowClone.vala"
	_tmp13_ = self->priv->window_icon;
#line 645 "../src/Widgets/WindowClone.vala"
	_tmp14_ = clutter_actor_get_width (_tmp13_);
#line 645 "../src/Widgets/WindowClone.vala"
	_tmp15_ = _tmp14_;
#line 645 "../src/Widgets/WindowClone.vala"
	_tmp16_ = self->priv->clone;
#line 645 "../src/Widgets/WindowClone.vala"
	_tmp17_ = clutter_actor_get_width ((ClutterActor*) _tmp16_);
#line 645 "../src/Widgets/WindowClone.vala"
	_tmp18_ = _tmp17_;
#line 645 "../src/Widgets/WindowClone.vala"
	scale = _tmp15_ / _tmp18_;
#line 646 "../src/Widgets/WindowClone.vala"
	_tmp20_ = self->priv->_wm;
#line 646 "../src/Widgets/WindowClone.vala"
	_tmp21_ = gala_window_manager_get_enable_animations (_tmp20_);
#line 646 "../src/Widgets/WindowClone.vala"
	_tmp22_ = _tmp21_;
#line 646 "../src/Widgets/WindowClone.vala"
	if (_tmp22_) {
#line 646 "../src/Widgets/WindowClone.vala"
		_tmp19_ = GALA_WINDOW_CLONE_FADE_ANIMATION_DURATION;
#line 3133 "WindowClone.c"
	} else {
#line 646 "../src/Widgets/WindowClone.vala"
		_tmp19_ = 0;
#line 3137 "WindowClone.c"
	}
#line 646 "../src/Widgets/WindowClone.vala"
	duration = _tmp19_;
#line 648 "../src/Widgets/WindowClone.vala"
	_tmp23_ = self->priv->clone;
#line 648 "../src/Widgets/WindowClone.vala"
	clutter_actor_get_transformed_position ((ClutterActor*) _tmp23_, &_tmp24_, &_tmp25_);
#line 648 "../src/Widgets/WindowClone.vala"
	abs_x = _tmp24_;
#line 648 "../src/Widgets/WindowClone.vala"
	abs_y = _tmp25_;
#line 649 "../src/Widgets/WindowClone.vala"
	_tmp26_ = self->priv->clone;
#line 649 "../src/Widgets/WindowClone.vala"
	clutter_actor_save_easing_state ((ClutterActor*) _tmp26_);
#line 650 "../src/Widgets/WindowClone.vala"
	_tmp27_ = self->priv->clone;
#line 650 "../src/Widgets/WindowClone.vala"
	clutter_actor_set_easing_duration ((ClutterActor*) _tmp27_, (guint) duration);
#line 651 "../src/Widgets/WindowClone.vala"
	_tmp28_ = self->priv->clone;
#line 651 "../src/Widgets/WindowClone.vala"
	clutter_actor_set_easing_mode ((ClutterActor*) _tmp28_, CLUTTER_EASE_IN_CUBIC);
#line 652 "../src/Widgets/WindowClone.vala"
	_tmp29_ = self->priv->clone;
#line 652 "../src/Widgets/WindowClone.vala"
	_tmp30_ = self->priv->clone;
#line 652 "../src/Widgets/WindowClone.vala"
	_tmp31_ = clutter_actor_get_width ((ClutterActor*) _tmp30_);
#line 652 "../src/Widgets/WindowClone.vala"
	_tmp32_ = _tmp31_;
#line 652 "../src/Widgets/WindowClone.vala"
	_tmp33_ = self->priv->clone;
#line 652 "../src/Widgets/WindowClone.vala"
	_tmp34_ = clutter_actor_get_height ((ClutterActor*) _tmp33_);
#line 652 "../src/Widgets/WindowClone.vala"
	_tmp35_ = _tmp34_;
#line 652 "../src/Widgets/WindowClone.vala"
	clutter_actor_set_pivot_point ((ClutterActor*) _tmp29_, (click_x - abs_x) / _tmp32_, (click_y - abs_y) / _tmp35_);
#line 653 "../src/Widgets/WindowClone.vala"
	_tmp36_ = self->priv->clone;
#line 653 "../src/Widgets/WindowClone.vala"
	clutter_actor_set_scale ((ClutterActor*) _tmp36_, (gdouble) scale, (gdouble) scale);
#line 654 "../src/Widgets/WindowClone.vala"
	_tmp37_ = self->priv->clone;
#line 654 "../src/Widgets/WindowClone.vala"
	clutter_actor_set_opacity ((ClutterActor*) _tmp37_, (guint) 0);
#line 655 "../src/Widgets/WindowClone.vala"
	_tmp38_ = self->priv->clone;
#line 655 "../src/Widgets/WindowClone.vala"
	clutter_actor_restore_easing_state ((ClutterActor*) _tmp38_);
#line 657 "../src/Widgets/WindowClone.vala"
	g_signal_emit (self, gala_window_clone_signals[GALA_WINDOW_CLONE_REQUEST_REPOSITION_SIGNAL], 0);
#line 659 "../src/Widgets/WindowClone.vala"
	clutter_actor_get_transformed_position ((ClutterActor*) self, &_tmp39_, &_tmp40_);
#line 659 "../src/Widgets/WindowClone.vala"
	abs_x = _tmp39_;
#line 659 "../src/Widgets/WindowClone.vala"
	abs_y = _tmp40_;
#line 661 "../src/Widgets/WindowClone.vala"
	clutter_actor_set_position ((ClutterActor*) self, abs_x + prev_parent_x, abs_y + prev_parent_y);
#line 663 "../src/Widgets/WindowClone.vala"
	_tmp41_ = self->priv->window_icon;
#line 663 "../src/Widgets/WindowClone.vala"
	clutter_actor_save_easing_state (_tmp41_);
#line 664 "../src/Widgets/WindowClone.vala"
	_tmp42_ = self->priv->window_icon;
#line 664 "../src/Widgets/WindowClone.vala"
	clutter_actor_set_easing_duration (_tmp42_, (guint) duration);
#line 665 "../src/Widgets/WindowClone.vala"
	_tmp43_ = self->priv->window_icon;
#line 665 "../src/Widgets/WindowClone.vala"
	clutter_actor_set_easing_mode (_tmp43_, CLUTTER_EASE_IN_OUT_CUBIC);
#line 666 "../src/Widgets/WindowClone.vala"
	_tmp44_ = self->priv->window_icon;
#line 666 "../src/Widgets/WindowClone.vala"
	_tmp45_ = self->priv->window_icon;
#line 666 "../src/Widgets/WindowClone.vala"
	_tmp46_ = clutter_actor_get_width (_tmp45_);
#line 666 "../src/Widgets/WindowClone.vala"
	_tmp47_ = _tmp46_;
#line 666 "../src/Widgets/WindowClone.vala"
	_tmp48_ = self->priv->window_icon;
#line 666 "../src/Widgets/WindowClone.vala"
	_tmp49_ = clutter_actor_get_height (_tmp48_);
#line 666 "../src/Widgets/WindowClone.vala"
	_tmp50_ = _tmp49_;
#line 666 "../src/Widgets/WindowClone.vala"
	clutter_actor_set_position (_tmp44_, (click_x - (abs_x + prev_parent_x)) - (_tmp47_ / 2), (click_y - (abs_y + prev_parent_y)) - (_tmp50_ / 2));
#line 670 "../src/Widgets/WindowClone.vala"
	_tmp51_ = self->priv->window_icon;
#line 670 "../src/Widgets/WindowClone.vala"
	clutter_actor_restore_easing_state (_tmp51_);
#line 672 "../src/Widgets/WindowClone.vala"
	_tmp52_ = self->priv->close_button;
#line 672 "../src/Widgets/WindowClone.vala"
	clutter_actor_set_opacity ((ClutterActor*) _tmp52_, (guint) 0);
#line 673 "../src/Widgets/WindowClone.vala"
	_tmp53_ = self->priv->window_title;
#line 673 "../src/Widgets/WindowClone.vala"
	clutter_actor_set_opacity ((ClutterActor*) _tmp53_, (guint) 0);
#line 675 "../src/Widgets/WindowClone.vala"
	_tmp54_ = self->priv->_wm;
#line 675 "../src/Widgets/WindowClone.vala"
	_tmp55_ = meta_plugin_get_display ((MetaPlugin*) _tmp54_);
#line 675 "../src/Widgets/WindowClone.vala"
	meta_display_set_cursor (_tmp55_, META_CURSOR_DND_IN_DRAG);
#line 677 "../src/Widgets/WindowClone.vala"
	_tmp56_ = _g_object_ref0 ((ClutterActor*) self);
#line 677 "../src/Widgets/WindowClone.vala"
	result = _tmp56_;
#line 677 "../src/Widgets/WindowClone.vala"
	_g_object_unref0 (stage);
#line 677 "../src/Widgets/WindowClone.vala"
	return result;
#line 3253 "WindowClone.c"
}

/**
     * When we cross an IconGroup, we animate to an even smaller size and slightly
     * less opacity and add ourselves as temporary window to the group. When left,
     * we reverse those steps.
     */
static void
gala_window_clone_drag_destination_crossed (GalaWindowClone* self,
                                            ClutterActor* destination,
                                            gboolean hovered)
{
	GalaIconGroup* icon_group = NULL;
	GalaIconGroup* _tmp0_;
	GalaWorkspaceInsertThumb* insert_thumb = NULL;
	GalaWorkspaceInsertThumb* _tmp1_;
	gboolean _tmp2_ = FALSE;
	gboolean _tmp3_ = FALSE;
	GalaIconGroup* _tmp4_;
	gboolean _tmp8_ = FALSE;
	gboolean _tmp9_ = FALSE;
	GalaIconGroup* _tmp10_;
	gdouble _tmp17_ = 0.0;
	gdouble scale = 0.0;
	gint _tmp18_ = 0;
	gint opacity = 0;
	gint _tmp19_ = 0;
	gboolean _tmp20_ = FALSE;
	gint duration = 0;
	gint _tmp25_ = 0;
	GalaWindowManager* _tmp26_;
	gboolean _tmp27_;
	gboolean _tmp28_;
	ClutterActor* _tmp29_;
	ClutterActor* _tmp30_;
	ClutterActor* _tmp31_;
	ClutterActor* _tmp32_;
	ClutterActor* _tmp33_;
	ClutterActor* _tmp34_;
	GalaWorkspaceInsertThumb* _tmp35_;
	GalaIconGroup* _tmp38_;
	MetaCursor _tmp43_ = 0;
	GalaWindowManager* _tmp44_;
	MetaDisplay* _tmp45_;
#line 685 "../src/Widgets/WindowClone.vala"
	g_return_if_fail (self != NULL);
#line 685 "../src/Widgets/WindowClone.vala"
	g_return_if_fail (destination != NULL);
#line 686 "../src/Widgets/WindowClone.vala"
	_tmp0_ = _g_object_ref0 (GALA_IS_ICON_GROUP (destination) ? ((GalaIconGroup*) destination) : NULL);
#line 686 "../src/Widgets/WindowClone.vala"
	icon_group = _tmp0_;
#line 687 "../src/Widgets/WindowClone.vala"
	_tmp1_ = _g_object_ref0 (GALA_IS_WORKSPACE_INSERT_THUMB (destination) ? ((GalaWorkspaceInsertThumb*) destination) : NULL);
#line 687 "../src/Widgets/WindowClone.vala"
	insert_thumb = _tmp1_;
#line 690 "../src/Widgets/WindowClone.vala"
	_tmp4_ = icon_group;
#line 690 "../src/Widgets/WindowClone.vala"
	if (_tmp4_ == NULL) {
#line 3314 "WindowClone.c"
		GalaWorkspaceInsertThumb* _tmp5_;
#line 690 "../src/Widgets/WindowClone.vala"
		_tmp5_ = insert_thumb;
#line 690 "../src/Widgets/WindowClone.vala"
		_tmp3_ = _tmp5_ == NULL;
#line 3320 "WindowClone.c"
	} else {
#line 690 "../src/Widgets/WindowClone.vala"
		_tmp3_ = FALSE;
#line 3324 "WindowClone.c"
	}
#line 690 "../src/Widgets/WindowClone.vala"
	if (_tmp3_) {
#line 690 "../src/Widgets/WindowClone.vala"
		_tmp2_ = TRUE;
#line 3330 "WindowClone.c"
	} else {
		gboolean _tmp6_ = FALSE;
		GalaWorkspaceInsertThumb* _tmp7_;
#line 691 "../src/Widgets/WindowClone.vala"
		_tmp7_ = insert_thumb;
#line 691 "../src/Widgets/WindowClone.vala"
		if (_tmp7_ != NULL) {
#line 691 "../src/Widgets/WindowClone.vala"
			_tmp6_ = !meta_prefs_get_dynamic_workspaces ();
#line 3340 "WindowClone.c"
		} else {
#line 691 "../src/Widgets/WindowClone.vala"
			_tmp6_ = FALSE;
#line 3344 "WindowClone.c"
		}
#line 691 "../src/Widgets/WindowClone.vala"
		_tmp2_ = _tmp6_;
#line 3348 "WindowClone.c"
	}
#line 690 "../src/Widgets/WindowClone.vala"
	if (_tmp2_) {
#line 692 "../src/Widgets/WindowClone.vala"
		_g_object_unref0 (insert_thumb);
#line 692 "../src/Widgets/WindowClone.vala"
		_g_object_unref0 (icon_group);
#line 692 "../src/Widgets/WindowClone.vala"
		return;
#line 3358 "WindowClone.c"
	}
#line 696 "../src/Widgets/WindowClone.vala"
	_tmp10_ = icon_group;
#line 696 "../src/Widgets/WindowClone.vala"
	if (_tmp10_ != NULL) {
#line 3364 "WindowClone.c"
		GalaIconGroup* _tmp11_;
		MetaWorkspace* _tmp12_;
		MetaWorkspace* _tmp13_;
		MetaWindow* _tmp14_;
		MetaWorkspace* _tmp15_;
#line 697 "../src/Widgets/WindowClone.vala"
		_tmp11_ = icon_group;
#line 697 "../src/Widgets/WindowClone.vala"
		_tmp12_ = gala_icon_group_get_workspace (_tmp11_);
#line 697 "../src/Widgets/WindowClone.vala"
		_tmp13_ = _tmp12_;
#line 697 "../src/Widgets/WindowClone.vala"
		_tmp14_ = self->priv->_window;
#line 697 "../src/Widgets/WindowClone.vala"
		_tmp15_ = meta_window_get_workspace (_tmp14_);
#line 697 "../src/Widgets/WindowClone.vala"
		_tmp9_ = _tmp13_ == _tmp15_;
#line 3382 "WindowClone.c"
	} else {
#line 696 "../src/Widgets/WindowClone.vala"
		_tmp9_ = FALSE;
#line 3386 "WindowClone.c"
	}
#line 696 "../src/Widgets/WindowClone.vala"
	if (_tmp9_) {
#line 3390 "WindowClone.c"
		MetaWindow* _tmp16_;
#line 698 "../src/Widgets/WindowClone.vala"
		_tmp16_ = self->priv->_window;
#line 698 "../src/Widgets/WindowClone.vala"
		_tmp8_ = meta_window_is_on_primary_monitor (_tmp16_);
#line 3396 "WindowClone.c"
	} else {
#line 696 "../src/Widgets/WindowClone.vala"
		_tmp8_ = FALSE;
#line 3400 "WindowClone.c"
	}
#line 696 "../src/Widgets/WindowClone.vala"
	if (_tmp8_) {
#line 699 "../src/Widgets/WindowClone.vala"
		_g_object_unref0 (insert_thumb);
#line 699 "../src/Widgets/WindowClone.vala"
		_g_object_unref0 (icon_group);
#line 699 "../src/Widgets/WindowClone.vala"
		return;
#line 3410 "WindowClone.c"
	}
#line 702 "../src/Widgets/WindowClone.vala"
	if (hovered) {
#line 702 "../src/Widgets/WindowClone.vala"
		_tmp17_ = 0.4;
#line 3416 "WindowClone.c"
	} else {
#line 702 "../src/Widgets/WindowClone.vala"
		_tmp17_ = 1.0;
#line 3420 "WindowClone.c"
	}
#line 702 "../src/Widgets/WindowClone.vala"
	scale = _tmp17_;
#line 703 "../src/Widgets/WindowClone.vala"
	if (hovered) {
#line 703 "../src/Widgets/WindowClone.vala"
		_tmp18_ = 0;
#line 3428 "WindowClone.c"
	} else {
#line 703 "../src/Widgets/WindowClone.vala"
		_tmp18_ = 255;
#line 3432 "WindowClone.c"
	}
#line 703 "../src/Widgets/WindowClone.vala"
	opacity = _tmp18_;
#line 704 "../src/Widgets/WindowClone.vala"
	if (hovered) {
#line 3438 "WindowClone.c"
		GalaWorkspaceInsertThumb* _tmp21_;
#line 704 "../src/Widgets/WindowClone.vala"
		_tmp21_ = insert_thumb;
#line 704 "../src/Widgets/WindowClone.vala"
		_tmp20_ = _tmp21_ != NULL;
#line 3444 "WindowClone.c"
	} else {
#line 704 "../src/Widgets/WindowClone.vala"
		_tmp20_ = FALSE;
#line 3448 "WindowClone.c"
	}
#line 704 "../src/Widgets/WindowClone.vala"
	if (_tmp20_) {
#line 3452 "WindowClone.c"
		GalaWorkspaceInsertThumb* _tmp22_;
		gint _tmp23_;
		gint _tmp24_;
#line 704 "../src/Widgets/WindowClone.vala"
		_tmp22_ = insert_thumb;
#line 704 "../src/Widgets/WindowClone.vala"
		_tmp23_ = gala_workspace_insert_thumb_get_delay (_tmp22_);
#line 704 "../src/Widgets/WindowClone.vala"
		_tmp24_ = _tmp23_;
#line 704 "../src/Widgets/WindowClone.vala"
		_tmp19_ = _tmp24_;
#line 3464 "WindowClone.c"
	} else {
#line 704 "../src/Widgets/WindowClone.vala"
		_tmp19_ = 100;
#line 3468 "WindowClone.c"
	}
#line 704 "../src/Widgets/WindowClone.vala"
	duration = _tmp19_;
#line 705 "../src/Widgets/WindowClone.vala"
	_tmp26_ = self->priv->_wm;
#line 705 "../src/Widgets/WindowClone.vala"
	_tmp27_ = gala_window_manager_get_enable_animations (_tmp26_);
#line 705 "../src/Widgets/WindowClone.vala"
	_tmp28_ = _tmp27_;
#line 705 "../src/Widgets/WindowClone.vala"
	if (_tmp28_) {
#line 705 "../src/Widgets/WindowClone.vala"
		_tmp25_ = duration;
#line 3482 "WindowClone.c"
	} else {
#line 705 "../src/Widgets/WindowClone.vala"
		_tmp25_ = 0;
#line 3486 "WindowClone.c"
	}
#line 705 "../src/Widgets/WindowClone.vala"
	duration = _tmp25_;
#line 707 "../src/Widgets/WindowClone.vala"
	_tmp29_ = self->priv->window_icon;
#line 707 "../src/Widgets/WindowClone.vala"
	clutter_actor_save_easing_state (_tmp29_);
#line 709 "../src/Widgets/WindowClone.vala"
	_tmp30_ = self->priv->window_icon;
#line 709 "../src/Widgets/WindowClone.vala"
	clutter_actor_set_easing_mode (_tmp30_, CLUTTER_LINEAR);
#line 710 "../src/Widgets/WindowClone.vala"
	_tmp31_ = self->priv->window_icon;
#line 710 "../src/Widgets/WindowClone.vala"
	clutter_actor_set_easing_duration (_tmp31_, (guint) duration);
#line 711 "../src/Widgets/WindowClone.vala"
	_tmp32_ = self->priv->window_icon;
#line 711 "../src/Widgets/WindowClone.vala"
	clutter_actor_set_scale (_tmp32_, scale, scale);
#line 712 "../src/Widgets/WindowClone.vala"
	_tmp33_ = self->priv->window_icon;
#line 712 "../src/Widgets/WindowClone.vala"
	clutter_actor_set_opacity (_tmp33_, (guint8) opacity);
#line 714 "../src/Widgets/WindowClone.vala"
	_tmp34_ = self->priv->window_icon;
#line 714 "../src/Widgets/WindowClone.vala"
	clutter_actor_restore_easing_state (_tmp34_);
#line 716 "../src/Widgets/WindowClone.vala"
	_tmp35_ = insert_thumb;
#line 716 "../src/Widgets/WindowClone.vala"
	if (_tmp35_ != NULL) {
#line 3518 "WindowClone.c"
		GalaWorkspaceInsertThumb* _tmp36_;
		MetaWindow* _tmp37_;
#line 717 "../src/Widgets/WindowClone.vala"
		_tmp36_ = insert_thumb;
#line 717 "../src/Widgets/WindowClone.vala"
		_tmp37_ = self->priv->_window;
#line 717 "../src/Widgets/WindowClone.vala"
		gala_workspace_insert_thumb_set_window_thumb (_tmp36_, _tmp37_);
#line 3527 "WindowClone.c"
	}
#line 720 "../src/Widgets/WindowClone.vala"
	_tmp38_ = icon_group;
#line 720 "../src/Widgets/WindowClone.vala"
	if (_tmp38_ != NULL) {
#line 721 "../src/Widgets/WindowClone.vala"
		if (hovered) {
#line 3535 "WindowClone.c"
			GalaIconGroup* _tmp39_;
			MetaWindow* _tmp40_;
#line 722 "../src/Widgets/WindowClone.vala"
			_tmp39_ = icon_group;
#line 722 "../src/Widgets/WindowClone.vala"
			_tmp40_ = self->priv->_window;
#line 722 "../src/Widgets/WindowClone.vala"
			gala_icon_group_add_window (_tmp39_, _tmp40_, FALSE, TRUE);
#line 3544 "WindowClone.c"
		} else {
			GalaIconGroup* _tmp41_;
			MetaWindow* _tmp42_;
#line 724 "../src/Widgets/WindowClone.vala"
			_tmp41_ = icon_group;
#line 724 "../src/Widgets/WindowClone.vala"
			_tmp42_ = self->priv->_window;
#line 724 "../src/Widgets/WindowClone.vala"
			gala_icon_group_remove_window (_tmp41_, _tmp42_, FALSE);
#line 3554 "WindowClone.c"
		}
	}
#line 728 "../src/Widgets/WindowClone.vala"
	if (hovered) {
#line 728 "../src/Widgets/WindowClone.vala"
		_tmp43_ = META_CURSOR_DND_MOVE;
#line 3561 "WindowClone.c"
	} else {
#line 728 "../src/Widgets/WindowClone.vala"
		_tmp43_ = META_CURSOR_DND_IN_DRAG;
#line 3565 "WindowClone.c"
	}
#line 728 "../src/Widgets/WindowClone.vala"
	_tmp44_ = self->priv->_wm;
#line 728 "../src/Widgets/WindowClone.vala"
	_tmp45_ = meta_plugin_get_display ((MetaPlugin*) _tmp44_);
#line 728 "../src/Widgets/WindowClone.vala"
	meta_display_set_cursor (_tmp45_, _tmp43_);
#line 685 "../src/Widgets/WindowClone.vala"
	_g_object_unref0 (insert_thumb);
#line 685 "../src/Widgets/WindowClone.vala"
	_g_object_unref0 (icon_group);
#line 3577 "WindowClone.c"
}

/**
     * Depending on the destination we have different ways to find the correct destination.
     * After we found one we destroy ourselves so the dragged clone immediately disappears,
     * otherwise we cancel the drag and animate back to our old place.
     */
static void
gala_window_clone_drag_end (GalaWindowClone* self,
                            ClutterActor* destination)
{
	MetaWorkspace* workspace = NULL;
	gint primary = 0;
	MetaWindow* _tmp0_;
	MetaDisplay* _tmp1_;
	GalaWindowCloneActiveShape* _tmp2_;
	GalaWindowManager* _tmp3_;
	MetaDisplay* _tmp4_;
	gboolean did_move = FALSE;
	gboolean _tmp28_ = FALSE;
	gboolean _tmp31_ = FALSE;
	MetaWorkspace* _tmp32_;
#line 736 "../src/Widgets/WindowClone.vala"
	g_return_if_fail (self != NULL);
#line 736 "../src/Widgets/WindowClone.vala"
	g_return_if_fail (destination != NULL);
#line 737 "../src/Widgets/WindowClone.vala"
	workspace = NULL;
#line 738 "../src/Widgets/WindowClone.vala"
	_tmp0_ = self->priv->_window;
#line 738 "../src/Widgets/WindowClone.vala"
	_tmp1_ = meta_window_get_display (_tmp0_);
#line 738 "../src/Widgets/WindowClone.vala"
	primary = meta_display_get_primary_monitor (_tmp1_);
#line 740 "../src/Widgets/WindowClone.vala"
	_tmp2_ = self->priv->active_shape;
#line 740 "../src/Widgets/WindowClone.vala"
	clutter_actor_show ((ClutterActor*) _tmp2_);
#line 742 "../src/Widgets/WindowClone.vala"
	_tmp3_ = self->priv->_wm;
#line 742 "../src/Widgets/WindowClone.vala"
	_tmp4_ = meta_plugin_get_display ((MetaPlugin*) _tmp3_);
#line 742 "../src/Widgets/WindowClone.vala"
	meta_display_set_cursor (_tmp4_, META_CURSOR_DEFAULT);
#line 744 "../src/Widgets/WindowClone.vala"
	if (GALA_IS_ICON_GROUP (destination)) {
#line 3624 "WindowClone.c"
		MetaWorkspace* _tmp5_;
		MetaWorkspace* _tmp6_;
		MetaWorkspace* _tmp7_;
#line 745 "../src/Widgets/WindowClone.vala"
		_tmp5_ = gala_icon_group_get_workspace (G_TYPE_CHECK_INSTANCE_CAST (destination, GALA_TYPE_ICON_GROUP, GalaIconGroup));
#line 745 "../src/Widgets/WindowClone.vala"
		_tmp6_ = _tmp5_;
#line 745 "../src/Widgets/WindowClone.vala"
		_tmp7_ = _g_object_ref0 (_tmp6_);
#line 745 "../src/Widgets/WindowClone.vala"
		_g_object_unref0 (workspace);
#line 745 "../src/Widgets/WindowClone.vala"
		workspace = _tmp7_;
#line 3638 "WindowClone.c"
	} else {
#line 746 "../src/Widgets/WindowClone.vala"
		if (GALA_IS_FRAMED_BACKGROUND (destination)) {
#line 3642 "WindowClone.c"
			ClutterActor* _tmp8_;
			MetaWorkspace* _tmp9_;
			MetaWorkspace* _tmp10_;
			MetaWorkspace* _tmp11_;
#line 747 "../src/Widgets/WindowClone.vala"
			_tmp8_ = clutter_actor_get_parent (destination);
#line 747 "../src/Widgets/WindowClone.vala"
			_tmp9_ = gala_workspace_clone_get_workspace (G_TYPE_CHECK_INSTANCE_CAST (_tmp8_, GALA_TYPE_WORKSPACE_CLONE, GalaWorkspaceClone));
#line 747 "../src/Widgets/WindowClone.vala"
			_tmp10_ = _tmp9_;
#line 747 "../src/Widgets/WindowClone.vala"
			_tmp11_ = _g_object_ref0 (_tmp10_);
#line 747 "../src/Widgets/WindowClone.vala"
			_g_object_unref0 (workspace);
#line 747 "../src/Widgets/WindowClone.vala"
			workspace = _tmp11_;
#line 3659 "WindowClone.c"
		} else {
#line 748 "../src/Widgets/WindowClone.vala"
			if (GALA_IS_WORKSPACE_INSERT_THUMB (destination)) {
#line 3663 "WindowClone.c"
				GalaWorkspaceInsertThumb* inserter = NULL;
				gboolean will_move = FALSE;
				MetaWindow* _tmp12_;
				MetaWorkspace* _tmp13_;
				GalaWorkspaceInsertThumb* _tmp14_;
				gint _tmp15_;
				gint _tmp16_;
				gboolean _tmp17_ = FALSE;
				GalaWorkspaceInsertThumb* _tmp20_;
				gint _tmp21_;
				gint _tmp22_;
				MetaWindow* _tmp23_;
#line 749 "../src/Widgets/WindowClone.vala"
				if (!meta_prefs_get_dynamic_workspaces ()) {
#line 750 "../src/Widgets/WindowClone.vala"
					gala_window_clone_drag_canceled (self);
#line 751 "../src/Widgets/WindowClone.vala"
					_g_object_unref0 (workspace);
#line 751 "../src/Widgets/WindowClone.vala"
					return;
#line 3684 "WindowClone.c"
				}
#line 754 "../src/Widgets/WindowClone.vala"
				inserter = G_TYPE_CHECK_INSTANCE_CAST (destination, GALA_TYPE_WORKSPACE_INSERT_THUMB, GalaWorkspaceInsertThumb);
#line 756 "../src/Widgets/WindowClone.vala"
				_tmp12_ = self->priv->_window;
#line 756 "../src/Widgets/WindowClone.vala"
				_tmp13_ = meta_window_get_workspace (_tmp12_);
#line 756 "../src/Widgets/WindowClone.vala"
				_tmp14_ = inserter;
#line 756 "../src/Widgets/WindowClone.vala"
				_tmp15_ = gala_workspace_insert_thumb_get_workspace_index (_tmp14_);
#line 756 "../src/Widgets/WindowClone.vala"
				_tmp16_ = _tmp15_;
#line 756 "../src/Widgets/WindowClone.vala"
				will_move = meta_workspace_index (_tmp13_) != _tmp16_;
#line 758 "../src/Widgets/WindowClone.vala"
				if (meta_prefs_get_workspaces_only_on_primary ()) {
#line 3702 "WindowClone.c"
					MetaWindow* _tmp18_;
#line 758 "../src/Widgets/WindowClone.vala"
					_tmp18_ = self->priv->_window;
#line 758 "../src/Widgets/WindowClone.vala"
					_tmp17_ = !meta_window_is_on_primary_monitor (_tmp18_);
#line 3708 "WindowClone.c"
				} else {
#line 758 "../src/Widgets/WindowClone.vala"
					_tmp17_ = FALSE;
#line 3712 "WindowClone.c"
				}
#line 758 "../src/Widgets/WindowClone.vala"
				if (_tmp17_) {
#line 3716 "WindowClone.c"
					MetaWindow* _tmp19_;
#line 759 "../src/Widgets/WindowClone.vala"
					_tmp19_ = self->priv->_window;
#line 759 "../src/Widgets/WindowClone.vala"
					meta_window_move_to_monitor (_tmp19_, primary);
#line 760 "../src/Widgets/WindowClone.vala"
					will_move = TRUE;
#line 3724 "WindowClone.c"
				}
#line 763 "../src/Widgets/WindowClone.vala"
				_tmp20_ = inserter;
#line 763 "../src/Widgets/WindowClone.vala"
				_tmp21_ = gala_workspace_insert_thumb_get_workspace_index (_tmp20_);
#line 763 "../src/Widgets/WindowClone.vala"
				_tmp22_ = _tmp21_;
#line 763 "../src/Widgets/WindowClone.vala"
				_tmp23_ = self->priv->_window;
#line 763 "../src/Widgets/WindowClone.vala"
				gala_internal_utils_insert_workspace_with_window (_tmp22_, _tmp23_);
#line 767 "../src/Widgets/WindowClone.vala"
				if (will_move) {
#line 768 "../src/Widgets/WindowClone.vala"
					gala_window_clone_unmanaged (self);
#line 3740 "WindowClone.c"
				} else {
#line 770 "../src/Widgets/WindowClone.vala"
					gala_window_clone_drag_canceled (self);
#line 3744 "WindowClone.c"
				}
#line 773 "../src/Widgets/WindowClone.vala"
				_g_object_unref0 (workspace);
#line 773 "../src/Widgets/WindowClone.vala"
				return;
#line 3750 "WindowClone.c"
			} else {
#line 774 "../src/Widgets/WindowClone.vala"
				if (GALA_IS_MONITOR_CLONE (destination)) {
#line 3754 "WindowClone.c"
					gint monitor = 0;
					gint _tmp24_;
					gint _tmp25_;
					MetaWindow* _tmp26_;
#line 775 "../src/Widgets/WindowClone.vala"
					_tmp24_ = gala_monitor_clone_get_monitor (G_TYPE_CHECK_INSTANCE_CAST (destination, GALA_TYPE_MONITOR_CLONE, GalaMonitorClone));
#line 775 "../src/Widgets/WindowClone.vala"
					_tmp25_ = _tmp24_;
#line 775 "../src/Widgets/WindowClone.vala"
					monitor = _tmp25_;
#line 776 "../src/Widgets/WindowClone.vala"
					_tmp26_ = self->priv->_window;
#line 776 "../src/Widgets/WindowClone.vala"
					if (meta_window_get_monitor (_tmp26_) != monitor) {
#line 3769 "WindowClone.c"
						MetaWindow* _tmp27_;
#line 777 "../src/Widgets/WindowClone.vala"
						_tmp27_ = self->priv->_window;
#line 777 "../src/Widgets/WindowClone.vala"
						meta_window_move_to_monitor (_tmp27_, monitor);
#line 778 "../src/Widgets/WindowClone.vala"
						gala_window_clone_unmanaged (self);
#line 3777 "WindowClone.c"
					} else {
#line 780 "../src/Widgets/WindowClone.vala"
						gala_window_clone_drag_canceled (self);
#line 3781 "WindowClone.c"
					}
#line 783 "../src/Widgets/WindowClone.vala"
					_g_object_unref0 (workspace);
#line 783 "../src/Widgets/WindowClone.vala"
					return;
#line 3787 "WindowClone.c"
				}
			}
		}
	}
#line 786 "../src/Widgets/WindowClone.vala"
	did_move = FALSE;
#line 788 "../src/Widgets/WindowClone.vala"
	if (meta_prefs_get_workspaces_only_on_primary ()) {
#line 3796 "WindowClone.c"
		MetaWindow* _tmp29_;
#line 788 "../src/Widgets/WindowClone.vala"
		_tmp29_ = self->priv->_window;
#line 788 "../src/Widgets/WindowClone.vala"
		_tmp28_ = !meta_window_is_on_primary_monitor (_tmp29_);
#line 3802 "WindowClone.c"
	} else {
#line 788 "../src/Widgets/WindowClone.vala"
		_tmp28_ = FALSE;
#line 3806 "WindowClone.c"
	}
#line 788 "../src/Widgets/WindowClone.vala"
	if (_tmp28_) {
#line 3810 "WindowClone.c"
		MetaWindow* _tmp30_;
#line 789 "../src/Widgets/WindowClone.vala"
		_tmp30_ = self->priv->_window;
#line 789 "../src/Widgets/WindowClone.vala"
		meta_window_move_to_monitor (_tmp30_, primary);
#line 790 "../src/Widgets/WindowClone.vala"
		did_move = TRUE;
#line 3818 "WindowClone.c"
	}
#line 793 "../src/Widgets/WindowClone.vala"
	_tmp32_ = workspace;
#line 793 "../src/Widgets/WindowClone.vala"
	if (_tmp32_ != NULL) {
#line 3824 "WindowClone.c"
		MetaWorkspace* _tmp33_;
		MetaWindow* _tmp34_;
		MetaWorkspace* _tmp35_;
#line 793 "../src/Widgets/WindowClone.vala"
		_tmp33_ = workspace;
#line 793 "../src/Widgets/WindowClone.vala"
		_tmp34_ = self->priv->_window;
#line 793 "../src/Widgets/WindowClone.vala"
		_tmp35_ = meta_window_get_workspace (_tmp34_);
#line 793 "../src/Widgets/WindowClone.vala"
		_tmp31_ = _tmp33_ != _tmp35_;
#line 3836 "WindowClone.c"
	} else {
#line 793 "../src/Widgets/WindowClone.vala"
		_tmp31_ = FALSE;
#line 3840 "WindowClone.c"
	}
#line 793 "../src/Widgets/WindowClone.vala"
	if (_tmp31_) {
#line 3844 "WindowClone.c"
		MetaWindow* _tmp36_;
		MetaWorkspace* _tmp37_;
#line 794 "../src/Widgets/WindowClone.vala"
		_tmp36_ = self->priv->_window;
#line 794 "../src/Widgets/WindowClone.vala"
		_tmp37_ = workspace;
#line 794 "../src/Widgets/WindowClone.vala"
		meta_window_change_workspace (_tmp36_, _tmp37_);
#line 795 "../src/Widgets/WindowClone.vala"
		did_move = TRUE;
#line 3855 "WindowClone.c"
	}
#line 798 "../src/Widgets/WindowClone.vala"
	if (did_move) {
#line 799 "../src/Widgets/WindowClone.vala"
		gala_window_clone_unmanaged (self);
#line 3861 "WindowClone.c"
	} else {
#line 802 "../src/Widgets/WindowClone.vala"
		gala_window_clone_drag_canceled (self);
#line 3865 "WindowClone.c"
	}
#line 736 "../src/Widgets/WindowClone.vala"
	_g_object_unref0 (workspace);
#line 3869 "WindowClone.c"
}

/**
     * Animate back to our previous position with a bouncing animation.
     */
static void
gala_window_clone_drag_canceled (GalaWindowClone* self)
{
	ClutterActor* _tmp0_;
	ClutterActor* _tmp1_;
	gint _tmp2_ = 0;
	GalaWindowManager* _tmp3_;
	gboolean _tmp4_;
	gboolean _tmp5_;
	gint duration = 0;
	ClutterClone* _tmp6_;
	ClutterClone* _tmp7_;
	ClutterClone* _tmp8_;
	ClutterClone* _tmp9_;
	ClutterClone* _tmp10_;
	ClutterClone* _tmp11_;
	ClutterClone* _tmp12_;
	ClutterActor* _tmp13_;
	ClutterActor* _tmp14_;
	ClutterActor* _tmp15_;
	MtkRectangle* _tmp16_;
	MtkRectangle* _tmp17_;
	gfloat _tmp18_;
	gfloat _tmp19_;
	ClutterActor* _tmp20_;
	GalaWindowManager* _tmp21_;
	MetaDisplay* _tmp22_;
#line 809 "../src/Widgets/WindowClone.vala"
	g_return_if_fail (self != NULL);
#line 810 "../src/Widgets/WindowClone.vala"
	_tmp0_ = clutter_actor_get_parent ((ClutterActor*) self);
#line 810 "../src/Widgets/WindowClone.vala"
	clutter_actor_remove_child (_tmp0_, (ClutterActor*) self);
#line 811 "../src/Widgets/WindowClone.vala"
	_tmp1_ = self->priv->prev_parent;
#line 811 "../src/Widgets/WindowClone.vala"
	clutter_actor_insert_child_at_index (_tmp1_, (ClutterActor*) self, self->priv->prev_index);
#line 813 "../src/Widgets/WindowClone.vala"
	_tmp3_ = self->priv->_wm;
#line 813 "../src/Widgets/WindowClone.vala"
	_tmp4_ = gala_window_manager_get_enable_animations (_tmp3_);
#line 813 "../src/Widgets/WindowClone.vala"
	_tmp5_ = _tmp4_;
#line 813 "../src/Widgets/WindowClone.vala"
	if (_tmp5_) {
#line 813 "../src/Widgets/WindowClone.vala"
		_tmp2_ = GALA_MULTITASKING_VIEW_ANIMATION_DURATION;
#line 3922 "WindowClone.c"
	} else {
#line 813 "../src/Widgets/WindowClone.vala"
		_tmp2_ = 0;
#line 3926 "WindowClone.c"
	}
#line 813 "../src/Widgets/WindowClone.vala"
	duration = _tmp2_;
#line 815 "../src/Widgets/WindowClone.vala"
	_tmp6_ = self->priv->clone;
#line 815 "../src/Widgets/WindowClone.vala"
	clutter_actor_set_pivot_point ((ClutterActor*) _tmp6_, 0.0f, 0.0f);
#line 816 "../src/Widgets/WindowClone.vala"
	_tmp7_ = self->priv->clone;
#line 816 "../src/Widgets/WindowClone.vala"
	clutter_actor_save_easing_state ((ClutterActor*) _tmp7_);
#line 817 "../src/Widgets/WindowClone.vala"
	_tmp8_ = self->priv->clone;
#line 817 "../src/Widgets/WindowClone.vala"
	clutter_actor_set_easing_duration ((ClutterActor*) _tmp8_, (guint) duration);
#line 818 "../src/Widgets/WindowClone.vala"
	_tmp9_ = self->priv->clone;
#line 818 "../src/Widgets/WindowClone.vala"
	clutter_actor_set_easing_mode ((ClutterActor*) _tmp9_, CLUTTER_EASE_OUT_QUAD);
#line 819 "../src/Widgets/WindowClone.vala"
	_tmp10_ = self->priv->clone;
#line 819 "../src/Widgets/WindowClone.vala"
	clutter_actor_set_scale ((ClutterActor*) _tmp10_, (gdouble) 1, (gdouble) 1);
#line 820 "../src/Widgets/WindowClone.vala"
	_tmp11_ = self->priv->clone;
#line 820 "../src/Widgets/WindowClone.vala"
	clutter_actor_set_opacity ((ClutterActor*) _tmp11_, (guint) 255);
#line 821 "../src/Widgets/WindowClone.vala"
	_tmp12_ = self->priv->clone;
#line 821 "../src/Widgets/WindowClone.vala"
	clutter_actor_restore_easing_state ((ClutterActor*) _tmp12_);
#line 823 "../src/Widgets/WindowClone.vala"
	g_signal_emit (self, gala_window_clone_signals[GALA_WINDOW_CLONE_REQUEST_REPOSITION_SIGNAL], 0);
#line 825 "../src/Widgets/WindowClone.vala"
	_tmp13_ = self->priv->window_icon;
#line 825 "../src/Widgets/WindowClone.vala"
	clutter_actor_save_easing_state (_tmp13_);
#line 826 "../src/Widgets/WindowClone.vala"
	_tmp14_ = self->priv->window_icon;
#line 826 "../src/Widgets/WindowClone.vala"
	clutter_actor_set_easing_duration (_tmp14_, (guint) duration);
#line 827 "../src/Widgets/WindowClone.vala"
	_tmp15_ = self->priv->window_icon;
#line 827 "../src/Widgets/WindowClone.vala"
	clutter_actor_set_easing_mode (_tmp15_, CLUTTER_EASE_OUT_QUAD);
#line 829 "../src/Widgets/WindowClone.vala"
	_tmp16_ = self->priv->_slot;
#line 829 "../src/Widgets/WindowClone.vala"
	_tmp17_ = self->priv->_slot;
#line 829 "../src/Widgets/WindowClone.vala"
	_tmp18_ = gala_window_clone_get_monitor_scale_factor (self);
#line 829 "../src/Widgets/WindowClone.vala"
	_tmp19_ = _tmp18_;
#line 829 "../src/Widgets/WindowClone.vala"
	gala_window_clone_set_window_icon_position (self, (gfloat) (*_tmp16_).width, (gfloat) (*_tmp17_).height, _tmp19_, TRUE);
#line 830 "../src/Widgets/WindowClone.vala"
	_tmp20_ = self->priv->window_icon;
#line 830 "../src/Widgets/WindowClone.vala"
	clutter_actor_restore_easing_state (_tmp20_);
#line 832 "../src/Widgets/WindowClone.vala"
	_tmp21_ = self->priv->_wm;
#line 832 "../src/Widgets/WindowClone.vala"
	_tmp22_ = meta_plugin_get_display ((MetaPlugin*) _tmp21_);
#line 832 "../src/Widgets/WindowClone.vala"
	meta_display_set_cursor (_tmp22_, META_CURSOR_DEFAULT);
#line 3992 "WindowClone.c"
}

static void
gala_window_clone_set_window_icon_position (GalaWindowClone* self,
                                            gfloat window_width,
                                            gfloat window_height,
                                            gfloat scale_factor,
                                            gboolean aligned)
{
	gint size = 0;
	gfloat x = 0.0F;
	gfloat y = 0.0F;
	ClutterActor* _tmp0_;
	ClutterActor* _tmp1_;
#line 835 "../src/Widgets/WindowClone.vala"
	g_return_if_fail (self != NULL);
#line 836 "../src/Widgets/WindowClone.vala"
	size = gala_internal_utils_scale_to_int (GALA_WINDOW_CLONE_WINDOW_ICON_SIZE, scale_factor);
#line 837 "../src/Widgets/WindowClone.vala"
	x = (window_width - size) / 2;
#line 838 "../src/Widgets/WindowClone.vala"
	y = window_height - (size * 0.75f);
#line 840 "../src/Widgets/WindowClone.vala"
	if (aligned) {
#line 841 "../src/Widgets/WindowClone.vala"
		x = (gfloat) ((gint) round ((gdouble) x));
#line 842 "../src/Widgets/WindowClone.vala"
		y = (gfloat) ((gint) round ((gdouble) y));
#line 4021 "WindowClone.c"
	}
#line 845 "../src/Widgets/WindowClone.vala"
	_tmp0_ = self->priv->window_icon;
#line 845 "../src/Widgets/WindowClone.vala"
	clutter_actor_set_size (_tmp0_, (gfloat) size, (gfloat) size);
#line 846 "../src/Widgets/WindowClone.vala"
	_tmp1_ = self->priv->window_icon;
#line 846 "../src/Widgets/WindowClone.vala"
	clutter_actor_set_position (_tmp1_, x, y);
#line 4031 "WindowClone.c"
}

static void
gala_window_clone_set_window_title_position (GalaWindowClone* self,
                                             gfloat window_width,
                                             gfloat window_height,
                                             gfloat scale_factor)
{
	gint x = 0;
	GalaTooltip* _tmp0_;
	gfloat _tmp1_;
	gfloat _tmp2_;
	gint y = 0;
	GalaTooltip* _tmp3_;
	gfloat _tmp4_;
	gfloat _tmp5_;
	GalaTooltip* _tmp6_;
#line 849 "../src/Widgets/WindowClone.vala"
	g_return_if_fail (self != NULL);
#line 850 "../src/Widgets/WindowClone.vala"
	_tmp0_ = self->priv->window_title;
#line 850 "../src/Widgets/WindowClone.vala"
	_tmp1_ = clutter_actor_get_width ((ClutterActor*) _tmp0_);
#line 850 "../src/Widgets/WindowClone.vala"
	_tmp2_ = _tmp1_;
#line 850 "../src/Widgets/WindowClone.vala"
	x = (gint) round ((gdouble) ((window_width - _tmp2_) / 2));
#line 851 "../src/Widgets/WindowClone.vala"
	_tmp3_ = self->priv->window_title;
#line 851 "../src/Widgets/WindowClone.vala"
	_tmp4_ = clutter_actor_get_height ((ClutterActor*) _tmp3_);
#line 851 "../src/Widgets/WindowClone.vala"
	_tmp5_ = _tmp4_;
#line 851 "../src/Widgets/WindowClone.vala"
	y = (gint) round ((gdouble) (((window_height - (gala_internal_utils_scale_to_int (GALA_WINDOW_CLONE_WINDOW_ICON_SIZE, scale_factor) * 0.75f)) - (_tmp5_ / 2)) - gala_internal_utils_scale_to_int (18, scale_factor)));
#line 852 "../src/Widgets/WindowClone.vala"
	_tmp6_ = self->priv->window_title;
#line 852 "../src/Widgets/WindowClone.vala"
	clutter_actor_set_position ((ClutterActor*) _tmp6_, (gfloat) x, (gfloat) y);
#line 4071 "WindowClone.c"
}

static gboolean
gala_window_clone_is_close_button_on_left (void)
{
	MetaButtonLayout layout = {0};
	MetaButtonLayout _tmp0_ = {0};
	MetaButtonLayout _tmp1_;
	gboolean result;
#line 856 "../src/Widgets/WindowClone.vala"
	meta_prefs_get_button_layout (&_tmp0_);
#line 856 "../src/Widgets/WindowClone.vala"
	layout = _tmp0_;
#line 857 "../src/Widgets/WindowClone.vala"
	_tmp1_ = layout;
#line 4087 "WindowClone.c"
	{
		MetaButtonFunction* button_function_collection = NULL;
		gint button_function_collection_length1 = 0;
		gint _button_function_collection_size_ = 0;
		gint button_function_it = 0;
#line 857 "../src/Widgets/WindowClone.vala"
		button_function_collection = _tmp1_.left_buttons;
#line 857 "../src/Widgets/WindowClone.vala"
		button_function_collection_length1 = 4;
#line 857 "../src/Widgets/WindowClone.vala"
		for (button_function_it = 0; button_function_it < button_function_collection_length1; button_function_it = button_function_it + 1) {
#line 4099 "WindowClone.c"
			MetaButtonFunction button_function = 0;
#line 857 "../src/Widgets/WindowClone.vala"
			button_function = button_function_collection[button_function_it];
#line 4103 "WindowClone.c"
			{
#line 858 "../src/Widgets/WindowClone.vala"
				if (button_function == META_BUTTON_FUNCTION_CLOSE) {
#line 859 "../src/Widgets/WindowClone.vala"
					result = TRUE;
#line 859 "../src/Widgets/WindowClone.vala"
					return result;
#line 4111 "WindowClone.c"
				}
			}
		}
	}
#line 863 "../src/Widgets/WindowClone.vala"
	result = FALSE;
#line 863 "../src/Widgets/WindowClone.vala"
	return result;
#line 4120 "WindowClone.c"
}

GalaWindowManager*
gala_window_clone_get_wm (GalaWindowClone* self)
{
	GalaWindowManager* result;
	GalaWindowManager* _tmp0_;
#line 30 "../src/Widgets/WindowClone.vala"
	g_return_val_if_fail (self != NULL, NULL);
#line 30 "../src/Widgets/WindowClone.vala"
	_tmp0_ = self->priv->_wm;
#line 30 "../src/Widgets/WindowClone.vala"
	result = _tmp0_;
#line 30 "../src/Widgets/WindowClone.vala"
	return result;
#line 4136 "WindowClone.c"
}

static void
gala_window_clone_set_wm (GalaWindowClone* self,
                          GalaWindowManager* value)
{
	GalaWindowManager* old_value;
#line 30 "../src/Widgets/WindowClone.vala"
	g_return_if_fail (self != NULL);
#line 30 "../src/Widgets/WindowClone.vala"
	old_value = gala_window_clone_get_wm (self);
#line 30 "../src/Widgets/WindowClone.vala"
	if (old_value != value) {
#line 4150 "WindowClone.c"
		GalaWindowManager* _tmp0_;
#line 30 "../src/Widgets/WindowClone.vala"
		_tmp0_ = _g_object_ref0 (value);
#line 30 "../src/Widgets/WindowClone.vala"
		_g_object_unref0 (self->priv->_wm);
#line 30 "../src/Widgets/WindowClone.vala"
		self->priv->_wm = _tmp0_;
#line 30 "../src/Widgets/WindowClone.vala"
		g_object_notify_by_pspec ((GObject *) self, gala_window_clone_properties[GALA_WINDOW_CLONE_WM_PROPERTY]);
#line 4160 "WindowClone.c"
	}
}

MetaWindow*
gala_window_clone_get_window (GalaWindowClone* self)
{
	MetaWindow* result;
	MetaWindow* _tmp0_;
#line 32 "../src/Widgets/WindowClone.vala"
	g_return_val_if_fail (self != NULL, NULL);
#line 32 "../src/Widgets/WindowClone.vala"
	_tmp0_ = self->priv->_window;
#line 32 "../src/Widgets/WindowClone.vala"
	result = _tmp0_;
#line 32 "../src/Widgets/WindowClone.vala"
	return result;
#line 4177 "WindowClone.c"
}

static void
gala_window_clone_set_window (GalaWindowClone* self,
                              MetaWindow* value)
{
	MetaWindow* old_value;
#line 32 "../src/Widgets/WindowClone.vala"
	g_return_if_fail (self != NULL);
#line 32 "../src/Widgets/WindowClone.vala"
	old_value = gala_window_clone_get_window (self);
#line 32 "../src/Widgets/WindowClone.vala"
	if (old_value != value) {
#line 4191 "WindowClone.c"
		MetaWindow* _tmp0_;
#line 32 "../src/Widgets/WindowClone.vala"
		_tmp0_ = _g_object_ref0 (value);
#line 32 "../src/Widgets/WindowClone.vala"
		_g_object_unref0 (self->priv->_window);
#line 32 "../src/Widgets/WindowClone.vala"
		self->priv->_window = _tmp0_;
#line 32 "../src/Widgets/WindowClone.vala"
		g_object_notify_by_pspec ((GObject *) self, gala_window_clone_properties[GALA_WINDOW_CLONE_WINDOW_PROPERTY]);
#line 4201 "WindowClone.c"
	}
}

MtkRectangle*
gala_window_clone_get_slot (GalaWindowClone* self)
{
	MtkRectangle* result;
	MtkRectangle* _tmp0_;
#line 38 "../src/Widgets/WindowClone.vala"
	g_return_val_if_fail (self != NULL, NULL);
#line 38 "../src/Widgets/WindowClone.vala"
	_tmp0_ = self->priv->_slot;
#line 38 "../src/Widgets/WindowClone.vala"
	result = _tmp0_;
#line 38 "../src/Widgets/WindowClone.vala"
	return result;
#line 4218 "WindowClone.c"
}

static gboolean
_mtk_rectangle_equal (const MtkRectangle * s1,
                      const MtkRectangle * s2)
{
#line 38 "../src/Widgets/WindowClone.vala"
	if (s1 == s2) {
#line 38 "../src/Widgets/WindowClone.vala"
		return TRUE;
#line 4229 "WindowClone.c"
	}
#line 38 "../src/Widgets/WindowClone.vala"
	if (s1 == NULL) {
#line 38 "../src/Widgets/WindowClone.vala"
		return FALSE;
#line 4235 "WindowClone.c"
	}
#line 38 "../src/Widgets/WindowClone.vala"
	if (s2 == NULL) {
#line 38 "../src/Widgets/WindowClone.vala"
		return FALSE;
#line 4241 "WindowClone.c"
	}
#line 38 "../src/Widgets/WindowClone.vala"
	if (s1->x != s2->x) {
#line 38 "../src/Widgets/WindowClone.vala"
		return FALSE;
#line 4247 "WindowClone.c"
	}
#line 38 "../src/Widgets/WindowClone.vala"
	if (s1->y != s2->y) {
#line 38 "../src/Widgets/WindowClone.vala"
		return FALSE;
#line 4253 "WindowClone.c"
	}
#line 38 "../src/Widgets/WindowClone.vala"
	if (s1->width != s2->width) {
#line 38 "../src/Widgets/WindowClone.vala"
		return FALSE;
#line 4259 "WindowClone.c"
	}
#line 38 "../src/Widgets/WindowClone.vala"
	if (s1->height != s2->height) {
#line 38 "../src/Widgets/WindowClone.vala"
		return FALSE;
#line 4265 "WindowClone.c"
	}
#line 38 "../src/Widgets/WindowClone.vala"
	return TRUE;
#line 4269 "WindowClone.c"
}

static MtkRectangle*
_vala_MtkRectangle_copy (MtkRectangle* self)
{
#line 38 "../src/Widgets/WindowClone.vala"
	return g_boxed_copy (mtk_rectangle_get_type (), self);
#line 4277 "WindowClone.c"
}

static gpointer
__vala_MtkRectangle_copy0 (gpointer self)
{
#line 38 "../src/Widgets/WindowClone.vala"
	return self ? _vala_MtkRectangle_copy (self) : NULL;
#line 4285 "WindowClone.c"
}

static void
gala_window_clone_set_slot (GalaWindowClone* self,
                            MtkRectangle* value)
{
	MtkRectangle* old_value;
#line 38 "../src/Widgets/WindowClone.vala"
	g_return_if_fail (self != NULL);
#line 38 "../src/Widgets/WindowClone.vala"
	old_value = gala_window_clone_get_slot (self);
#line 38 "../src/Widgets/WindowClone.vala"
	if (_mtk_rectangle_equal (value, old_value) != TRUE) {
#line 4299 "WindowClone.c"
		MtkRectangle* _tmp0_;
#line 38 "../src/Widgets/WindowClone.vala"
		_tmp0_ = __vala_MtkRectangle_copy0 (value);
#line 38 "../src/Widgets/WindowClone.vala"
		__vala_MtkRectangle_free0 (self->priv->_slot);
#line 38 "../src/Widgets/WindowClone.vala"
		self->priv->_slot = _tmp0_;
#line 38 "../src/Widgets/WindowClone.vala"
		g_object_notify_by_pspec ((GObject *) self, gala_window_clone_properties[GALA_WINDOW_CLONE_SLOT_PROPERTY]);
#line 4309 "WindowClone.c"
	}
}

void
gala_window_clone_set_active (GalaWindowClone* self,
                              gboolean value)
{
	GalaWindowCloneActiveShape* _tmp0_;
	gint _tmp1_ = 0;
	GalaWindowManager* _tmp2_;
	gboolean _tmp3_;
	gboolean _tmp4_;
	GalaWindowCloneActiveShape* _tmp5_;
	gint _tmp6_ = 0;
	GalaWindowCloneActiveShape* _tmp7_;
	GalaWindowCloneActiveShape* _tmp8_;
#line 48 "../src/Widgets/WindowClone.vala"
	g_return_if_fail (self != NULL);
#line 49 "../src/Widgets/WindowClone.vala"
	_tmp0_ = self->priv->active_shape;
#line 49 "../src/Widgets/WindowClone.vala"
	clutter_actor_save_easing_state ((ClutterActor*) _tmp0_);
#line 50 "../src/Widgets/WindowClone.vala"
	_tmp2_ = self->priv->_wm;
#line 50 "../src/Widgets/WindowClone.vala"
	_tmp3_ = gala_window_manager_get_enable_animations (_tmp2_);
#line 50 "../src/Widgets/WindowClone.vala"
	_tmp4_ = _tmp3_;
#line 50 "../src/Widgets/WindowClone.vala"
	if (_tmp4_) {
#line 50 "../src/Widgets/WindowClone.vala"
		_tmp1_ = GALA_WINDOW_CLONE_FADE_ANIMATION_DURATION;
#line 4342 "WindowClone.c"
	} else {
#line 50 "../src/Widgets/WindowClone.vala"
		_tmp1_ = 0;
#line 4346 "WindowClone.c"
	}
#line 50 "../src/Widgets/WindowClone.vala"
	_tmp5_ = self->priv->active_shape;
#line 50 "../src/Widgets/WindowClone.vala"
	clutter_actor_set_easing_duration ((ClutterActor*) _tmp5_, (guint) _tmp1_);
#line 51 "../src/Widgets/WindowClone.vala"
	if (value) {
#line 51 "../src/Widgets/WindowClone.vala"
		_tmp6_ = 255;
#line 4356 "WindowClone.c"
	} else {
#line 51 "../src/Widgets/WindowClone.vala"
		_tmp6_ = 0;
#line 4360 "WindowClone.c"
	}
#line 51 "../src/Widgets/WindowClone.vala"
	_tmp7_ = self->priv->active_shape;
#line 51 "../src/Widgets/WindowClone.vala"
	clutter_actor_set_opacity ((ClutterActor*) _tmp7_, (guint) _tmp6_);
#line 52 "../src/Widgets/WindowClone.vala"
	_tmp8_ = self->priv->active_shape;
#line 52 "../src/Widgets/WindowClone.vala"
	clutter_actor_restore_easing_state ((ClutterActor*) _tmp8_);
#line 48 "../src/Widgets/WindowClone.vala"
	g_object_notify_by_pspec ((GObject *) self, gala_window_clone_properties[GALA_WINDOW_CLONE_ACTIVE_PROPERTY]);
#line 4372 "WindowClone.c"
}

gboolean
gala_window_clone_get_overview_mode (GalaWindowClone* self)
{
	gboolean result;
#line 56 "../src/Widgets/WindowClone.vala"
	g_return_val_if_fail (self != NULL, FALSE);
#line 56 "../src/Widgets/WindowClone.vala"
	result = self->priv->_overview_mode;
#line 56 "../src/Widgets/WindowClone.vala"
	return result;
#line 4385 "WindowClone.c"
}

static void
gala_window_clone_set_overview_mode (GalaWindowClone* self,
                                     gboolean value)
{
	gboolean old_value;
#line 56 "../src/Widgets/WindowClone.vala"
	g_return_if_fail (self != NULL);
#line 56 "../src/Widgets/WindowClone.vala"
	old_value = gala_window_clone_get_overview_mode (self);
#line 56 "../src/Widgets/WindowClone.vala"
	if (old_value != value) {
#line 56 "../src/Widgets/WindowClone.vala"
		self->priv->_overview_mode = value;
#line 56 "../src/Widgets/WindowClone.vala"
		g_object_notify_by_pspec ((GObject *) self, gala_window_clone_properties[GALA_WINDOW_CLONE_OVERVIEW_MODE_PROPERTY]);
#line 4403 "WindowClone.c"
	}
}

GalaGestureTracker*
gala_window_clone_get_gesture_tracker (GalaWindowClone* self)
{
	GalaGestureTracker* result;
	GalaGestureTracker* _tmp0_;
#line 57 "../src/Widgets/WindowClone.vala"
	g_return_val_if_fail (self != NULL, NULL);
#line 57 "../src/Widgets/WindowClone.vala"
	_tmp0_ = self->priv->_gesture_tracker;
#line 57 "../src/Widgets/WindowClone.vala"
	result = _tmp0_;
#line 57 "../src/Widgets/WindowClone.vala"
	return result;
#line 4420 "WindowClone.c"
}

static void
gala_window_clone_set_gesture_tracker (GalaWindowClone* self,
                                       GalaGestureTracker* value)
{
	GalaGestureTracker* old_value;
#line 57 "../src/Widgets/WindowClone.vala"
	g_return_if_fail (self != NULL);
#line 57 "../src/Widgets/WindowClone.vala"
	old_value = gala_window_clone_get_gesture_tracker (self);
#line 57 "../src/Widgets/WindowClone.vala"
	if (old_value != value) {
#line 4434 "WindowClone.c"
		GalaGestureTracker* _tmp0_;
#line 57 "../src/Widgets/WindowClone.vala"
		_tmp0_ = _g_object_ref0 (value);
#line 57 "../src/Widgets/WindowClone.vala"
		_g_object_unref0 (self->priv->_gesture_tracker);
#line 57 "../src/Widgets/WindowClone.vala"
		self->priv->_gesture_tracker = _tmp0_;
#line 57 "../src/Widgets/WindowClone.vala"
		g_object_notify_by_pspec ((GObject *) self, gala_window_clone_properties[GALA_WINDOW_CLONE_GESTURE_TRACKER_PROPERTY]);
#line 4444 "WindowClone.c"
	}
}

gfloat
gala_window_clone_get_monitor_scale_factor (GalaWindowClone* self)
{
	gfloat result;
#line 60 "../src/Widgets/WindowClone.vala"
	g_return_val_if_fail (self != NULL, 0.0F);
#line 61 "../src/Widgets/WindowClone.vala"
	result = self->priv->_monitor_scale_factor;
#line 61 "../src/Widgets/WindowClone.vala"
	return result;
#line 4458 "WindowClone.c"
}

void
gala_window_clone_set_monitor_scale_factor (GalaWindowClone* self,
                                            gfloat value)
{
#line 63 "../src/Widgets/WindowClone.vala"
	g_return_if_fail (self != NULL);
#line 64 "../src/Widgets/WindowClone.vala"
	if (value != self->priv->_monitor_scale_factor) {
#line 65 "../src/Widgets/WindowClone.vala"
		self->priv->_monitor_scale_factor = value;
#line 66 "../src/Widgets/WindowClone.vala"
		gala_window_clone_reallocate (self);
#line 4473 "WindowClone.c"
	}
#line 63 "../src/Widgets/WindowClone.vala"
	g_object_notify_by_pspec ((GObject *) self, gala_window_clone_properties[GALA_WINDOW_CLONE_MONITOR_SCALE_FACTOR_PROPERTY]);
#line 4477 "WindowClone.c"
}

guint8
gala_window_clone_get_shadow_opacity (GalaWindowClone* self)
{
	guint8 result;
	guint8 _tmp0_ = 0U;
	GalaShadowEffect* _tmp1_;
#line 73 "../src/Widgets/WindowClone.vala"
	g_return_val_if_fail (self != NULL, 0U);
#line 74 "../src/Widgets/WindowClone.vala"
	_tmp1_ = self->priv->shadow_effect;
#line 74 "../src/Widgets/WindowClone.vala"
	if (_tmp1_ != NULL) {
#line 4492 "WindowClone.c"
		GalaShadowEffect* _tmp2_;
		guint8 _tmp3_;
		guint8 _tmp4_;
#line 74 "../src/Widgets/WindowClone.vala"
		_tmp2_ = self->priv->shadow_effect;
#line 74 "../src/Widgets/WindowClone.vala"
		_tmp3_ = gala_shadow_effect_get_shadow_opacity (_tmp2_);
#line 74 "../src/Widgets/WindowClone.vala"
		_tmp4_ = _tmp3_;
#line 74 "../src/Widgets/WindowClone.vala"
		_tmp0_ = _tmp4_;
#line 4504 "WindowClone.c"
	} else {
#line 74 "../src/Widgets/WindowClone.vala"
		_tmp0_ = (guint8) 255;
#line 4508 "WindowClone.c"
	}
#line 74 "../src/Widgets/WindowClone.vala"
	result = _tmp0_;
#line 74 "../src/Widgets/WindowClone.vala"
	return result;
#line 4514 "WindowClone.c"
}

void
gala_window_clone_set_shadow_opacity (GalaWindowClone* self,
                                      guint8 value)
{
	GalaShadowEffect* _tmp0_;
#line 76 "../src/Widgets/WindowClone.vala"
	g_return_if_fail (self != NULL);
#line 77 "../src/Widgets/WindowClone.vala"
	_tmp0_ = self->priv->shadow_effect;
#line 77 "../src/Widgets/WindowClone.vala"
	if (_tmp0_ != NULL) {
#line 4528 "WindowClone.c"
		GalaShadowEffect* _tmp1_;
#line 78 "../src/Widgets/WindowClone.vala"
		_tmp1_ = self->priv->shadow_effect;
#line 78 "../src/Widgets/WindowClone.vala"
		gala_shadow_effect_set_shadow_opacity (_tmp1_, value);
#line 79 "../src/Widgets/WindowClone.vala"
		clutter_actor_queue_redraw ((ClutterActor*) self);
#line 4536 "WindowClone.c"
	}
}

static void
gala_window_clone_active_shape_invalidate (GalaWindowCloneActiveShape* self)
{
	ClutterContent* _tmp0_;
	ClutterContent* _tmp1_;
#line 877 "../src/Widgets/WindowClone.vala"
	g_return_if_fail (self != NULL);
#line 878 "../src/Widgets/WindowClone.vala"
	_tmp0_ = clutter_actor_get_content ((ClutterActor*) self);
#line 878 "../src/Widgets/WindowClone.vala"
	_tmp1_ = _tmp0_;
#line 878 "../src/Widgets/WindowClone.vala"
	clutter_content_invalidate (_tmp1_);
#line 4553 "WindowClone.c"
}

static void
gala_window_clone_active_shape_real_draw (GalaCanvasActor* base,
                                          cairo_t* cr,
                                          gint width,
                                          gint height)
{
	GalaWindowCloneActiveShape * self;
	gboolean _tmp0_ = FALSE;
	gboolean _tmp1_;
	gboolean _tmp2_;
	GdkRGBA color = {0};
	GalaDrawingStyleManager* _tmp5_;
	GalaDrawingStyleManager* _tmp6_;
	GdkRGBA _tmp7_ = {0};
	GdkRGBA _tmp8_;
	GdkRGBA _tmp9_;
	GdkRGBA _tmp10_;
	GdkRGBA _tmp11_;
	GdkRGBA _tmp12_;
#line 881 "../src/Widgets/WindowClone.vala"
	self = (GalaWindowCloneActiveShape*) base;
#line 881 "../src/Widgets/WindowClone.vala"
	g_return_if_fail (cr != NULL);
#line 882 "../src/Widgets/WindowClone.vala"
	g_object_get ((ClutterActor*) self, "visible", &_tmp1_, NULL);
#line 882 "../src/Widgets/WindowClone.vala"
	_tmp2_ = _tmp1_;
#line 882 "../src/Widgets/WindowClone.vala"
	if (!_tmp2_) {
#line 882 "../src/Widgets/WindowClone.vala"
		_tmp0_ = TRUE;
#line 4587 "WindowClone.c"
	} else {
		guint _tmp3_;
		guint _tmp4_;
#line 882 "../src/Widgets/WindowClone.vala"
		_tmp3_ = clutter_actor_get_opacity ((ClutterActor*) self);
#line 882 "../src/Widgets/WindowClone.vala"
		_tmp4_ = _tmp3_;
#line 882 "../src/Widgets/WindowClone.vala"
		_tmp0_ = _tmp4_ == ((guint) 0);
#line 4597 "WindowClone.c"
	}
#line 882 "../src/Widgets/WindowClone.vala"
	if (_tmp0_) {
#line 883 "../src/Widgets/WindowClone.vala"
		return;
#line 4603 "WindowClone.c"
	}
#line 886 "../src/Widgets/WindowClone.vala"
	_tmp5_ = gala_drawing_style_manager_get_instance ();
#line 886 "../src/Widgets/WindowClone.vala"
	_tmp6_ = _tmp5_;
#line 886 "../src/Widgets/WindowClone.vala"
	gala_drawing_style_manager_get_theme_accent_color (_tmp6_, &_tmp7_);
#line 886 "../src/Widgets/WindowClone.vala"
	_tmp8_ = _tmp7_;
#line 886 "../src/Widgets/WindowClone.vala"
	_tmp9_ = _tmp8_;
#line 886 "../src/Widgets/WindowClone.vala"
	_g_object_unref0 (_tmp6_);
#line 886 "../src/Widgets/WindowClone.vala"
	color = _tmp9_;
#line 888 "../src/Widgets/WindowClone.vala"
	cairo_save (cr);
#line 889 "../src/Widgets/WindowClone.vala"
	cairo_set_operator (cr, CAIRO_OPERATOR_CLEAR);
#line 890 "../src/Widgets/WindowClone.vala"
	cairo_paint (cr);
#line 891 "../src/Widgets/WindowClone.vala"
	cairo_restore (cr);
#line 893 "../src/Widgets/WindowClone.vala"
	gala_drawing_utilities_cairo_rounded_rectangle (cr, (gdouble) 0, (gdouble) 0, (gdouble) width, (gdouble) height, (gdouble) GALA_WINDOW_CLONE_ACTIVE_SHAPE_BORDER_RADIUS);
#line 894 "../src/Widgets/WindowClone.vala"
	_tmp10_ = color;
#line 894 "../src/Widgets/WindowClone.vala"
	_tmp11_ = color;
#line 894 "../src/Widgets/WindowClone.vala"
	_tmp12_ = color;
#line 894 "../src/Widgets/WindowClone.vala"
	cairo_set_source_rgba (cr, _tmp10_.red, _tmp11_.green, _tmp12_.blue, GALA_WINDOW_CLONE_ACTIVE_SHAPE_COLOR_OPACITY);
#line 895 "../src/Widgets/WindowClone.vala"
	cairo_fill (cr);
#line 4639 "WindowClone.c"
}

static GalaWindowCloneActiveShape*
gala_window_clone_active_shape_construct (GType object_type)
{
	GalaWindowCloneActiveShape * self = NULL;
#line 869 "../src/Widgets/WindowClone.vala"
	self = (GalaWindowCloneActiveShape*) gala_canvas_actor_construct (object_type);
#line 869 "../src/Widgets/WindowClone.vala"
	return self;
#line 4650 "WindowClone.c"
}

static GalaWindowCloneActiveShape*
gala_window_clone_active_shape_new (void)
{
#line 869 "../src/Widgets/WindowClone.vala"
	return gala_window_clone_active_shape_construct (GALA_WINDOW_CLONE_TYPE_ACTIVE_SHAPE);
#line 4658 "WindowClone.c"
}

static void
_gala_window_clone_active_shape_invalidate_g_object_notify (GObject* _sender,
                                                            GParamSpec* pspec,
                                                            gpointer self)
{
#line 874 "../src/Widgets/WindowClone.vala"
	gala_window_clone_active_shape_invalidate ((GalaWindowCloneActiveShape*) self);
#line 4668 "WindowClone.c"
}

static GObject *
gala_window_clone_active_shape_constructor (GType type,
                                            guint n_construct_properties,
                                            GObjectConstructParam * construct_properties)
{
	GObject * obj;
	GObjectClass * parent_class;
	GalaWindowCloneActiveShape * self;
#line 873 "../src/Widgets/WindowClone.vala"
	parent_class = G_OBJECT_CLASS (gala_window_clone_active_shape_parent_class);
#line 873 "../src/Widgets/WindowClone.vala"
	obj = parent_class->constructor (type, n_construct_properties, construct_properties);
#line 873 "../src/Widgets/WindowClone.vala"
	self = G_TYPE_CHECK_INSTANCE_CAST (obj, GALA_WINDOW_CLONE_TYPE_ACTIVE_SHAPE, GalaWindowCloneActiveShape);
#line 874 "../src/Widgets/WindowClone.vala"
	g_signal_connect_object ((GObject*) self, "notify::opacity", (GCallback) _gala_window_clone_active_shape_invalidate_g_object_notify, self, 0);
#line 873 "../src/Widgets/WindowClone.vala"
	return obj;
#line 4689 "WindowClone.c"
}

static void
gala_window_clone_active_shape_class_init (GalaWindowCloneActiveShapeClass * klass,
                                           gpointer klass_data)
{
#line 869 "../src/Widgets/WindowClone.vala"
	gala_window_clone_active_shape_parent_class = g_type_class_peek_parent (klass);
#line 869 "../src/Widgets/WindowClone.vala"
	((GalaCanvasActorClass *) klass)->draw = (void (*) (GalaCanvasActor*, cairo_t*, gint, gint)) gala_window_clone_active_shape_real_draw;
#line 869 "../src/Widgets/WindowClone.vala"
	G_OBJECT_CLASS (klass)->constructor = gala_window_clone_active_shape_constructor;
#line 4702 "WindowClone.c"
}

static void
gala_window_clone_active_shape_instance_init (GalaWindowCloneActiveShape * self,
                                              gpointer klass)
{
}

/**
     * Border to show around the selected window when using keyboard navigation.
     */
 G_GNUC_NO_INLINE static GType
gala_window_clone_active_shape_get_type_once (void)
{
	static const GTypeInfo g_define_type_info = { sizeof (GalaWindowCloneActiveShapeClass), (GBaseInitFunc) NULL, (GBaseFinalizeFunc) NULL, (GClassInitFunc) gala_window_clone_active_shape_class_init, (GClassFinalizeFunc) NULL, NULL, sizeof (GalaWindowCloneActiveShape), 0, (GInstanceInitFunc) gala_window_clone_active_shape_instance_init, NULL };
	GType gala_window_clone_active_shape_type_id;
	gala_window_clone_active_shape_type_id = g_type_register_static (GALA_TYPE_CANVAS_ACTOR, "GalaWindowCloneActiveShape", &g_define_type_info, 0);
	return gala_window_clone_active_shape_type_id;
}

static GType
gala_window_clone_active_shape_get_type (void)
{
	static gsize gala_window_clone_active_shape_type_id__once = 0;
	if (g_once_init_enter (&gala_window_clone_active_shape_type_id__once)) {
		GType gala_window_clone_active_shape_type_id;
		gala_window_clone_active_shape_type_id = gala_window_clone_active_shape_get_type_once ();
		g_once_init_leave (&gala_window_clone_active_shape_type_id__once, gala_window_clone_active_shape_type_id);
	}
	return gala_window_clone_active_shape_type_id__once;
}

static void
_gala_window_clone____lambda79_ (GalaWindowClone* self,
                                 ClutterClickAction* action,
                                 ClutterActor* actor)
{
#line 119 "../src/Widgets/WindowClone.vala"
	g_return_if_fail (action != NULL);
#line 119 "../src/Widgets/WindowClone.vala"
	g_return_if_fail (actor != NULL);
#line 120 "../src/Widgets/WindowClone.vala"
	gala_window_clone_actor_clicked (self, (guint32) clutter_click_action_get_button (action));
#line 4746 "WindowClone.c"
}

static void
__gala_window_clone____lambda79__clutter_click_action_clicked (ClutterClickAction* _sender,
                                                               ClutterActor* actor,
                                                               gpointer self)
{
#line 119 "../src/Widgets/WindowClone.vala"
	_gala_window_clone____lambda79_ ((GalaWindowClone*) self, _sender, actor);
#line 4756 "WindowClone.c"
}

static ClutterActor*
_gala_window_clone_drag_begin_gala_drag_drop_action_drag_begin (GalaDragDropAction* _sender,
                                                                gfloat x,
                                                                gfloat y,
                                                                gpointer self)
{
	ClutterActor* result;
	result = gala_window_clone_drag_begin ((GalaWindowClone*) self, x, y);
#line 126 "../src/Widgets/WindowClone.vala"
	return result;
#line 4769 "WindowClone.c"
}

static void
_gala_window_clone_drag_destination_crossed_gala_drag_drop_action_destination_crossed (GalaDragDropAction* _sender,
                                                                                       ClutterActor* destination,
                                                                                       gboolean hovered,
                                                                                       gpointer self)
{
#line 127 "../src/Widgets/WindowClone.vala"
	gala_window_clone_drag_destination_crossed ((GalaWindowClone*) self, destination, hovered);
#line 4780 "WindowClone.c"
}

static void
_gala_window_clone_drag_end_gala_drag_drop_action_drag_end (GalaDragDropAction* _sender,
                                                            ClutterActor* actor,
                                                            gpointer self)
{
#line 128 "../src/Widgets/WindowClone.vala"
	gala_window_clone_drag_end ((GalaWindowClone*) self, actor);
#line 4790 "WindowClone.c"
}

static void
_gala_window_clone_drag_canceled_gala_drag_drop_action_drag_canceled (GalaDragDropAction* _sender,
                                                                      gpointer self)
{
#line 129 "../src/Widgets/WindowClone.vala"
	gala_window_clone_drag_canceled ((GalaWindowClone*) self);
#line 4799 "WindowClone.c"
}

static void
_gala_window_clone_actor_clicked_gala_drag_drop_action_actor_clicked (GalaDragDropAction* _sender,
                                                                      guint32 button,
                                                                      gpointer self)
{
#line 130 "../src/Widgets/WindowClone.vala"
	gala_window_clone_actor_clicked ((GalaWindowClone*) self, button);
#line 4809 "WindowClone.c"
}

static GObject *
gala_window_clone_constructor (GType type,
                               guint n_construct_properties,
                               GObjectConstructParam * construct_properties)
{
	GObject * obj;
	GObjectClass * parent_class;
	GalaWindowClone * self;
	MetaWindow* _tmp0_;
	MetaWindow* _tmp1_;
	MetaWindow* _tmp2_;
	MetaWindow* _tmp3_;
	MetaWindow* _tmp4_;
	gboolean _tmp5_;
	GalaTooltip* _tmp16_;
	GalaTooltip* _tmp17_;
	GalaWindowCloneActiveShape* _tmp18_;
	GalaWindowCloneActiveShape* _tmp19_;
	GalaWindowCloneActiveShape* _tmp20_;
	GalaTooltip* _tmp21_;
#line 108 "../src/Widgets/WindowClone.vala"
	parent_class = G_OBJECT_CLASS (gala_window_clone_parent_class);
#line 108 "../src/Widgets/WindowClone.vala"
	obj = parent_class->constructor (type, n_construct_properties, construct_properties);
#line 108 "../src/Widgets/WindowClone.vala"
	self = G_TYPE_CHECK_INSTANCE_CAST (obj, GALA_TYPE_WINDOW_CLONE, GalaWindowClone);
#line 109 "../src/Widgets/WindowClone.vala"
	clutter_actor_set_reactive ((ClutterActor*) self, TRUE);
#line 111 "../src/Widgets/WindowClone.vala"
	_tmp0_ = self->priv->_window;
#line 111 "../src/Widgets/WindowClone.vala"
	g_signal_connect_object (_tmp0_, "unmanaged", (GCallback) _gala_window_clone_unmanaged_meta_window_unmanaged, self, 0);
#line 112 "../src/Widgets/WindowClone.vala"
	_tmp1_ = self->priv->_window;
#line 112 "../src/Widgets/WindowClone.vala"
	g_signal_connect_object ((GObject*) _tmp1_, "notify::on-all-workspaces", (GCallback) _gala_window_clone_on_all_workspaces_changed_g_object_notify, self, 0);
#line 113 "../src/Widgets/WindowClone.vala"
	_tmp2_ = self->priv->_window;
#line 113 "../src/Widgets/WindowClone.vala"
	g_signal_connect_object ((GObject*) _tmp2_, "notify::fullscreen", (GCallback) _gala_window_clone_check_shadow_requirements_g_object_notify, self, 0);
#line 114 "../src/Widgets/WindowClone.vala"
	_tmp3_ = self->priv->_window;
#line 114 "../src/Widgets/WindowClone.vala"
	g_signal_connect_object ((GObject*) _tmp3_, "notify::maximized-horizontally", (GCallback) _gala_window_clone_check_shadow_requirements_g_object_notify, self, 0);
#line 115 "../src/Widgets/WindowClone.vala"
	_tmp4_ = self->priv->_window;
#line 115 "../src/Widgets/WindowClone.vala"
	g_signal_connect_object ((GObject*) _tmp4_, "notify::maximized-vertically", (GCallback) _gala_window_clone_check_shadow_requirements_g_object_notify, self, 0);
#line 117 "../src/Widgets/WindowClone.vala"
	_tmp5_ = self->priv->_overview_mode;
#line 117 "../src/Widgets/WindowClone.vala"
	if (_tmp5_) {
#line 4864 "WindowClone.c"
		ClutterClickAction* click_action = NULL;
		ClutterClickAction* _tmp6_;
		ClutterClickAction* _tmp7_;
		ClutterClickAction* _tmp8_;
#line 118 "../src/Widgets/WindowClone.vala"
		_tmp6_ = (ClutterClickAction*) clutter_click_action_new ();
#line 118 "../src/Widgets/WindowClone.vala"
		g_object_ref_sink (_tmp6_);
#line 118 "../src/Widgets/WindowClone.vala"
		click_action = _tmp6_;
#line 119 "../src/Widgets/WindowClone.vala"
		_tmp7_ = click_action;
#line 119 "../src/Widgets/WindowClone.vala"
		g_signal_connect_object (_tmp7_, "clicked", (GCallback) __gala_window_clone____lambda79__clutter_click_action_clicked, self, 0);
#line 123 "../src/Widgets/WindowClone.vala"
		_tmp8_ = click_action;
#line 123 "../src/Widgets/WindowClone.vala"
		clutter_actor_add_action ((ClutterActor*) self, (ClutterAction*) _tmp8_);
#line 117 "../src/Widgets/WindowClone.vala"
		_g_object_unref0 (click_action);
#line 4885 "WindowClone.c"
	} else {
		GalaDragDropAction* _tmp9_;
		GalaDragDropAction* _tmp10_;
		GalaDragDropAction* _tmp11_;
		GalaDragDropAction* _tmp12_;
		GalaDragDropAction* _tmp13_;
		GalaDragDropAction* _tmp14_;
		GalaDragDropAction* _tmp15_;
#line 125 "../src/Widgets/WindowClone.vala"
		_tmp9_ = gala_drag_drop_action_new (GALA_DRAG_DROP_ACTION_TYPE_SOURCE, "multitaskingview-window");
#line 125 "../src/Widgets/WindowClone.vala"
		g_object_ref_sink (_tmp9_);
#line 125 "../src/Widgets/WindowClone.vala"
		_g_object_unref0 (self->priv->drag_action);
#line 125 "../src/Widgets/WindowClone.vala"
		self->priv->drag_action = _tmp9_;
#line 126 "../src/Widgets/WindowClone.vala"
		_tmp10_ = self->priv->drag_action;
#line 126 "../src/Widgets/WindowClone.vala"
		g_signal_connect_object (_tmp10_, "drag-begin", (GCallback) _gala_window_clone_drag_begin_gala_drag_drop_action_drag_begin, self, 0);
#line 127 "../src/Widgets/WindowClone.vala"
		_tmp11_ = self->priv->drag_action;
#line 127 "../src/Widgets/WindowClone.vala"
		g_signal_connect_object (_tmp11_, "destination-crossed", (GCallback) _gala_window_clone_drag_destination_crossed_gala_drag_drop_action_destination_crossed, self, 0);
#line 128 "../src/Widgets/WindowClone.vala"
		_tmp12_ = self->priv->drag_action;
#line 128 "../src/Widgets/WindowClone.vala"
		g_signal_connect_object (_tmp12_, "drag-end", (GCallback) _gala_window_clone_drag_end_gala_drag_drop_action_drag_end, self, 0);
#line 129 "../src/Widgets/WindowClone.vala"
		_tmp13_ = self->priv->drag_action;
#line 129 "../src/Widgets/WindowClone.vala"
		g_signal_connect_object (_tmp13_, "drag-canceled", (GCallback) _gala_window_clone_drag_canceled_gala_drag_drop_action_drag_canceled, self, 0);
#line 130 "../src/Widgets/WindowClone.vala"
		_tmp14_ = self->priv->drag_action;
#line 130 "../src/Widgets/WindowClone.vala"
		g_signal_connect_object (_tmp14_, "actor-clicked", (GCallback) _gala_window_clone_actor_clicked_gala_drag_drop_action_actor_clicked, self, 0);
#line 132 "../src/Widgets/WindowClone.vala"
		_tmp15_ = self->priv->drag_action;
#line 132 "../src/Widgets/WindowClone.vala"
		clutter_actor_add_action ((ClutterActor*) self, (ClutterAction*) _tmp15_);
#line 4926 "WindowClone.c"
	}
#line 135 "../src/Widgets/WindowClone.vala"
	_tmp16_ = gala_tooltip_new ();
#line 135 "../src/Widgets/WindowClone.vala"
	g_object_ref_sink (_tmp16_);
#line 135 "../src/Widgets/WindowClone.vala"
	_g_object_unref0 (self->priv->window_title);
#line 135 "../src/Widgets/WindowClone.vala"
	self->priv->window_title = _tmp16_;
#line 136 "../src/Widgets/WindowClone.vala"
	_tmp17_ = self->priv->window_title;
#line 136 "../src/Widgets/WindowClone.vala"
	clutter_actor_set_opacity ((ClutterActor*) _tmp17_, (guint) 0);
#line 138 "../src/Widgets/WindowClone.vala"
	_tmp18_ = gala_window_clone_active_shape_new ();
#line 138 "../src/Widgets/WindowClone.vala"
	g_object_ref_sink (_tmp18_);
#line 138 "../src/Widgets/WindowClone.vala"
	_g_object_unref0 (self->priv->active_shape);
#line 138 "../src/Widgets/WindowClone.vala"
	self->priv->active_shape = _tmp18_;
#line 139 "../src/Widgets/WindowClone.vala"
	_tmp19_ = self->priv->active_shape;
#line 139 "../src/Widgets/WindowClone.vala"
	clutter_actor_set_opacity ((ClutterActor*) _tmp19_, (guint) 0);
#line 141 "../src/Widgets/WindowClone.vala"
	_tmp20_ = self->priv->active_shape;
#line 141 "../src/Widgets/WindowClone.vala"
	clutter_actor_add_child ((ClutterActor*) self, (ClutterActor*) _tmp20_);
#line 142 "../src/Widgets/WindowClone.vala"
	_tmp21_ = self->priv->window_title;
#line 142 "../src/Widgets/WindowClone.vala"
	clutter_actor_add_child ((ClutterActor*) self, (ClutterActor*) _tmp21_);
#line 144 "../src/Widgets/WindowClone.vala"
	gala_window_clone_reallocate (self);
#line 146 "../src/Widgets/WindowClone.vala"
	gala_window_clone_load_clone (self, FALSE);
#line 108 "../src/Widgets/WindowClone.vala"
	return obj;
#line 4966 "WindowClone.c"
}

static void
gala_window_clone_class_init (GalaWindowCloneClass * klass,
                              gpointer klass_data)
{
#line 11 "../src/Widgets/WindowClone.vala"
	gala_window_clone_parent_class = g_type_class_peek_parent (klass);
#line 11 "../src/Widgets/WindowClone.vala"
	g_type_class_adjust_private_offset (klass, &GalaWindowClone_private_offset);
#line 11 "../src/Widgets/WindowClone.vala"
	((ClutterActorClass *) klass)->allocate = (void (*) (ClutterActor*, ClutterActorBox*)) gala_window_clone_real_allocate;
#line 11 "../src/Widgets/WindowClone.vala"
	((ClutterActorClass *) klass)->button_press_event = (gboolean (*) (ClutterActor*, ClutterEvent*)) gala_window_clone_real_button_press_event;
#line 11 "../src/Widgets/WindowClone.vala"
	((ClutterActorClass *) klass)->enter_event = (gboolean (*) (ClutterActor*, ClutterEvent*)) gala_window_clone_real_enter_event;
#line 11 "../src/Widgets/WindowClone.vala"
	((ClutterActorClass *) klass)->leave_event = (gboolean (*) (ClutterActor*, ClutterEvent*)) gala_window_clone_real_leave_event;
#line 11 "../src/Widgets/WindowClone.vala"
	G_OBJECT_CLASS (klass)->get_property = _vala_gala_window_clone_get_property;
#line 11 "../src/Widgets/WindowClone.vala"
	G_OBJECT_CLASS (klass)->set_property = _vala_gala_window_clone_set_property;
#line 11 "../src/Widgets/WindowClone.vala"
	G_OBJECT_CLASS (klass)->constructor = gala_window_clone_constructor;
#line 11 "../src/Widgets/WindowClone.vala"
	G_OBJECT_CLASS (klass)->finalize = gala_window_clone_finalize;
#line 11 "../src/Widgets/WindowClone.vala"
	g_object_class_install_property (G_OBJECT_CLASS (klass), GALA_WINDOW_CLONE_WM_PROPERTY, gala_window_clone_properties[GALA_WINDOW_CLONE_WM_PROPERTY] = g_param_spec_object ("wm", "wm", "wm", GALA_TYPE_WINDOW_MANAGER, G_PARAM_STATIC_STRINGS | G_PARAM_READABLE | G_PARAM_WRITABLE | G_PARAM_CONSTRUCT_ONLY));
#line 11 "../src/Widgets/WindowClone.vala"
	g_object_class_install_property (G_OBJECT_CLASS (klass), GALA_WINDOW_CLONE_WINDOW_PROPERTY, gala_window_clone_properties[GALA_WINDOW_CLONE_WINDOW_PROPERTY] = g_param_spec_object ("window", "window", "window", meta_window_get_type (), G_PARAM_STATIC_STRINGS | G_PARAM_READABLE | G_PARAM_WRITABLE | G_PARAM_CONSTRUCT_ONLY));
#line 4997 "WindowClone.c"
	/**
	     * The currently assigned slot of the window in the tiling layout. May be null.
	     */
#line 11 "../src/Widgets/WindowClone.vala"
	g_object_class_install_property (G_OBJECT_CLASS (klass), GALA_WINDOW_CLONE_SLOT_PROPERTY, gala_window_clone_properties[GALA_WINDOW_CLONE_SLOT_PROPERTY] = g_param_spec_boxed ("slot", "slot", "slot", mtk_rectangle_get_type (), G_PARAM_STATIC_STRINGS | G_PARAM_READABLE));
#line 5003 "WindowClone.c"
	/**
	     * When active fades a white border around the window in. Used for the visually
	     * indicating the WindowCloneContainer's current_window.
	     */
#line 11 "../src/Widgets/WindowClone.vala"
	g_object_class_install_property (G_OBJECT_CLASS (klass), GALA_WINDOW_CLONE_ACTIVE_PROPERTY, gala_window_clone_properties[GALA_WINDOW_CLONE_ACTIVE_PROPERTY] = g_param_spec_boolean ("active", "active", "active", FALSE, G_PARAM_STATIC_STRINGS | G_PARAM_WRITABLE));
#line 11 "../src/Widgets/WindowClone.vala"
	g_object_class_install_property (G_OBJECT_CLASS (klass), GALA_WINDOW_CLONE_OVERVIEW_MODE_PROPERTY, gala_window_clone_properties[GALA_WINDOW_CLONE_OVERVIEW_MODE_PROPERTY] = g_param_spec_boolean ("overview-mode", "overview-mode", "overview-mode", FALSE, G_PARAM_STATIC_STRINGS | G_PARAM_READABLE | G_PARAM_WRITABLE | G_PARAM_CONSTRUCT_ONLY));
#line 11 "../src/Widgets/WindowClone.vala"
	g_object_class_install_property (G_OBJECT_CLASS (klass), GALA_WINDOW_CLONE_GESTURE_TRACKER_PROPERTY, gala_window_clone_properties[GALA_WINDOW_CLONE_GESTURE_TRACKER_PROPERTY] = g_param_spec_object ("gesture-tracker", "gesture-tracker", "gesture-tracker", GALA_TYPE_GESTURE_TRACKER, G_PARAM_STATIC_STRINGS | G_PARAM_READABLE | G_PARAM_WRITABLE | G_PARAM_CONSTRUCT_ONLY));
#line 11 "../src/Widgets/WindowClone.vala"
	g_object_class_install_property (G_OBJECT_CLASS (klass), GALA_WINDOW_CLONE_MONITOR_SCALE_FACTOR_PROPERTY, gala_window_clone_properties[GALA_WINDOW_CLONE_MONITOR_SCALE_FACTOR_PROPERTY] = g_param_spec_float ("monitor-scale-factor", "monitor-scale-factor", "monitor-scale-factor", -G_MAXFLOAT, G_MAXFLOAT, 0.0F, G_PARAM_STATIC_STRINGS | G_PARAM_READABLE | G_PARAM_WRITABLE));
#line 11 "../src/Widgets/WindowClone.vala"
	g_object_class_install_property (G_OBJECT_CLASS (klass), GALA_WINDOW_CLONE_SHADOW_OPACITY_PROPERTY, gala_window_clone_properties[GALA_WINDOW_CLONE_SHADOW_OPACITY_PROPERTY] = g_param_spec_uchar ("shadow-opacity", "shadow-opacity", "shadow-opacity", 0, G_MAXUINT8, 0, G_PARAM_STATIC_STRINGS | G_PARAM_READABLE | G_PARAM_WRITABLE | G_PARAM_EXPLICIT_NOTIFY));
#line 5018 "WindowClone.c"
	/**
	     * The window was selected. The MultitaskingView should consider activating
	     * the window and closing the view.
	     */
#line 11 "../src/Widgets/WindowClone.vala"
	gala_window_clone_signals[GALA_WINDOW_CLONE_SELECTED_SIGNAL] = g_signal_new ("selected", GALA_TYPE_WINDOW_CLONE, G_SIGNAL_RUN_LAST, 0, NULL, NULL, g_cclosure_marshal_VOID__VOID, G_TYPE_NONE, 0);
#line 5025 "WindowClone.c"
	/**
	     * The window was moved or resized and a relayout of the tiling layout may
	     * be sensible right now.
	     */
#line 11 "../src/Widgets/WindowClone.vala"
	gala_window_clone_signals[GALA_WINDOW_CLONE_REQUEST_REPOSITION_SIGNAL] = g_signal_new ("request-reposition", GALA_TYPE_WINDOW_CLONE, G_SIGNAL_RUN_LAST, 0, NULL, NULL, g_cclosure_marshal_VOID__VOID, G_TYPE_NONE, 0);
#line 5032 "WindowClone.c"
}

static void
gala_window_clone_instance_init (GalaWindowClone * self,
                                 gpointer klass)
{
#line 11 "../src/Widgets/WindowClone.vala"
	self->priv = gala_window_clone_get_instance_private (self);
#line 38 "../src/Widgets/WindowClone.vala"
	self->priv->_slot = NULL;
#line 58 "../src/Widgets/WindowClone.vala"
	self->priv->_monitor_scale_factor = 1.0f;
#line 84 "../src/Widgets/WindowClone.vala"
	self->priv->drag_action = NULL;
#line 85 "../src/Widgets/WindowClone.vala"
	self->priv->clone = NULL;
#line 86 "../src/Widgets/WindowClone.vala"
	self->priv->shadow_effect = NULL;
#line 88 "../src/Widgets/WindowClone.vala"
	self->priv->prev_parent = NULL;
#line 89 "../src/Widgets/WindowClone.vala"
	self->priv->prev_index = -1;
#line 90 "../src/Widgets/WindowClone.vala"
	self->priv->check_confirm_dialog_cb = (gulong) 0;
#line 91 "../src/Widgets/WindowClone.vala"
	self->priv->in_slot_animation = FALSE;
#line 5059 "WindowClone.c"
}

static void
gala_window_clone_finalize (GObject * obj)
{
	GalaWindowClone * self;
	MetaWindow* _tmp0_;
	guint _tmp1_;
	MetaWindow* _tmp2_;
	guint _tmp3_;
	GQuark _tmp4_;
	MetaWindow* _tmp5_;
	guint _tmp6_;
	GQuark _tmp7_;
	MetaWindow* _tmp8_;
	guint _tmp9_;
	GQuark _tmp10_;
	MetaWindow* _tmp11_;
	guint _tmp12_;
	GQuark _tmp13_;
#line 11 "../src/Widgets/WindowClone.vala"
	self = G_TYPE_CHECK_INSTANCE_CAST (obj, GALA_TYPE_WINDOW_CLONE, GalaWindowClone);
#line 150 "../src/Widgets/WindowClone.vala"
	_tmp0_ = self->priv->_window;
#line 150 "../src/Widgets/WindowClone.vala"
	g_signal_parse_name ("unmanaged", meta_window_get_type (), &_tmp1_, NULL, FALSE);
#line 150 "../src/Widgets/WindowClone.vala"
	g_signal_handlers_disconnect_matched (_tmp0_, G_SIGNAL_MATCH_ID | G_SIGNAL_MATCH_FUNC | G_SIGNAL_MATCH_DATA, _tmp1_, 0, NULL, (GCallback) _gala_window_clone_unmanaged_meta_window_unmanaged, self);
#line 151 "../src/Widgets/WindowClone.vala"
	_tmp2_ = self->priv->_window;
#line 151 "../src/Widgets/WindowClone.vala"
	g_signal_parse_name ("notify::on-all-workspaces", G_TYPE_OBJECT, &_tmp3_, &_tmp4_, TRUE);
#line 151 "../src/Widgets/WindowClone.vala"
	g_signal_handlers_disconnect_matched ((GObject*) _tmp2_, G_SIGNAL_MATCH_ID | G_SIGNAL_MATCH_DETAIL | G_SIGNAL_MATCH_FUNC | G_SIGNAL_MATCH_DATA, _tmp3_, _tmp4_, NULL, (GCallback) _gala_window_clone_on_all_workspaces_changed_g_object_notify, self);
#line 152 "../src/Widgets/WindowClone.vala"
	_tmp5_ = self->priv->_window;
#line 152 "../src/Widgets/WindowClone.vala"
	g_signal_parse_name ("notify::fullscreen", G_TYPE_OBJECT, &_tmp6_, &_tmp7_, TRUE);
#line 152 "../src/Widgets/WindowClone.vala"
	g_signal_handlers_disconnect_matched ((GObject*) _tmp5_, G_SIGNAL_MATCH_ID | G_SIGNAL_MATCH_DETAIL | G_SIGNAL_MATCH_FUNC | G_SIGNAL_MATCH_DATA, _tmp6_, _tmp7_, NULL, (GCallback) _gala_window_clone_check_shadow_requirements_g_object_notify, self);
#line 153 "../src/Widgets/WindowClone.vala"
	_tmp8_ = self->priv->_window;
#line 153 "../src/Widgets/WindowClone.vala"
	g_signal_parse_name ("notify::maximized-horizontally", G_TYPE_OBJECT, &_tmp9_, &_tmp10_, TRUE);
#line 153 "../src/Widgets/WindowClone.vala"
	g_signal_handlers_disconnect_matched ((GObject*) _tmp8_, G_SIGNAL_MATCH_ID | G_SIGNAL_MATCH_DETAIL | G_SIGNAL_MATCH_FUNC | G_SIGNAL_MATCH_DATA, _tmp9_, _tmp10_, NULL, (GCallback) _gala_window_clone_check_shadow_requirements_g_object_notify, self);
#line 154 "../src/Widgets/WindowClone.vala"
	_tmp11_ = self->priv->_window;
#line 154 "../src/Widgets/WindowClone.vala"
	g_signal_parse_name ("notify::maximized-vertically", G_TYPE_OBJECT, &_tmp12_, &_tmp13_, TRUE);
#line 154 "../src/Widgets/WindowClone.vala"
	g_signal_handlers_disconnect_matched ((GObject*) _tmp11_, G_SIGNAL_MATCH_ID | G_SIGNAL_MATCH_DETAIL | G_SIGNAL_MATCH_FUNC | G_SIGNAL_MATCH_DATA, _tmp12_, _tmp13_, NULL, (GCallback) _gala_window_clone_check_shadow_requirements_g_object_notify, self);
#line 30 "../src/Widgets/WindowClone.vala"
	_g_object_unref0 (self->priv->_wm);
#line 32 "../src/Widgets/WindowClone.vala"
	_g_object_unref0 (self->priv->_window);
#line 38 "../src/Widgets/WindowClone.vala"
	__vala_MtkRectangle_free0 (self->priv->_slot);
#line 57 "../src/Widgets/WindowClone.vala"
	_g_object_unref0 (self->priv->_gesture_tracker);
#line 84 "../src/Widgets/WindowClone.vala"
	_g_object_unref0 (self->priv->drag_action);
#line 85 "../src/Widgets/WindowClone.vala"
	_g_object_unref0 (self->priv->clone);
#line 86 "../src/Widgets/WindowClone.vala"
	_g_object_unref0 (self->priv->shadow_effect);
#line 88 "../src/Widgets/WindowClone.vala"
	_g_object_unref0 (self->priv->prev_parent);
#line 93 "../src/Widgets/WindowClone.vala"
	_g_object_unref0 (self->priv->close_button);
#line 94 "../src/Widgets/WindowClone.vala"
	_g_object_unref0 (self->priv->active_shape);
#line 95 "../src/Widgets/WindowClone.vala"
	_g_object_unref0 (self->priv->window_icon);
#line 96 "../src/Widgets/WindowClone.vala"
	_g_object_unref0 (self->priv->window_title);
#line 11 "../src/Widgets/WindowClone.vala"
	G_OBJECT_CLASS (gala_window_clone_parent_class)->finalize (obj);
#line 5138 "WindowClone.c"
}

/**
 * A container for a clone of the texture of a MetaWindow, a WindowIcon, a Tooltip with the title,
 * a close button and a shadow. Used together with the WindowCloneContainer.
 */
 G_GNUC_NO_INLINE static GType
gala_window_clone_get_type_once (void)
{
	static const GTypeInfo g_define_type_info = { sizeof (GalaWindowCloneClass), (GBaseInitFunc) NULL, (GBaseFinalizeFunc) NULL, (GClassInitFunc) gala_window_clone_class_init, (GClassFinalizeFunc) NULL, NULL, sizeof (GalaWindowClone), 0, (GInstanceInitFunc) gala_window_clone_instance_init, NULL };
	GType gala_window_clone_type_id;
	gala_window_clone_type_id = g_type_register_static (clutter_actor_get_type (), "GalaWindowClone", &g_define_type_info, 0);
	GalaWindowClone_private_offset = g_type_add_instance_private (gala_window_clone_type_id, sizeof (GalaWindowClonePrivate));
	return gala_window_clone_type_id;
}

GType
gala_window_clone_get_type (void)
{
	static gsize gala_window_clone_type_id__once = 0;
	if (g_once_init_enter (&gala_window_clone_type_id__once)) {
		GType gala_window_clone_type_id;
		gala_window_clone_type_id = gala_window_clone_get_type_once ();
		g_once_init_leave (&gala_window_clone_type_id__once, gala_window_clone_type_id);
	}
	return gala_window_clone_type_id__once;
}

static void
_vala_gala_window_clone_get_property (GObject * object,
                                      guint property_id,
                                      GValue * value,
                                      GParamSpec * pspec)
{
	GalaWindowClone * self;
	self = G_TYPE_CHECK_INSTANCE_CAST (object, GALA_TYPE_WINDOW_CLONE, GalaWindowClone);
#line 11 "../src/Widgets/WindowClone.vala"
	switch (property_id) {
#line 11 "../src/Widgets/WindowClone.vala"
		case GALA_WINDOW_CLONE_WM_PROPERTY:
#line 11 "../src/Widgets/WindowClone.vala"
		g_value_set_object (value, gala_window_clone_get_wm (self));
#line 11 "../src/Widgets/WindowClone.vala"
		break;
#line 11 "../src/Widgets/WindowClone.vala"
		case GALA_WINDOW_CLONE_WINDOW_PROPERTY:
#line 11 "../src/Widgets/WindowClone.vala"
		g_value_set_object (value, gala_window_clone_get_window (self));
#line 11 "../src/Widgets/WindowClone.vala"
		break;
#line 11 "../src/Widgets/WindowClone.vala"
		case GALA_WINDOW_CLONE_SLOT_PROPERTY:
#line 5191 "WindowClone.c"
		{
			MtkRectangle* boxed;
#line 11 "../src/Widgets/WindowClone.vala"
			boxed = gala_window_clone_get_slot (self);
#line 11 "../src/Widgets/WindowClone.vala"
			g_value_set_boxed (value, boxed);
#line 5198 "WindowClone.c"
		}
#line 11 "../src/Widgets/WindowClone.vala"
		break;
#line 11 "../src/Widgets/WindowClone.vala"
		case GALA_WINDOW_CLONE_OVERVIEW_MODE_PROPERTY:
#line 11 "../src/Widgets/WindowClone.vala"
		g_value_set_boolean (value, gala_window_clone_get_overview_mode (self));
#line 11 "../src/Widgets/WindowClone.vala"
		break;
#line 11 "../src/Widgets/WindowClone.vala"
		case GALA_WINDOW_CLONE_GESTURE_TRACKER_PROPERTY:
#line 11 "../src/Widgets/WindowClone.vala"
		g_value_set_object (value, gala_window_clone_get_gesture_tracker (self));
#line 11 "../src/Widgets/WindowClone.vala"
		break;
#line 11 "../src/Widgets/WindowClone.vala"
		case GALA_WINDOW_CLONE_MONITOR_SCALE_FACTOR_PROPERTY:
#line 11 "../src/Widgets/WindowClone.vala"
		g_value_set_float (value, gala_window_clone_get_monitor_scale_factor (self));
#line 11 "../src/Widgets/WindowClone.vala"
		break;
#line 11 "../src/Widgets/WindowClone.vala"
		case GALA_WINDOW_CLONE_SHADOW_OPACITY_PROPERTY:
#line 11 "../src/Widgets/WindowClone.vala"
		g_value_set_uchar (value, gala_window_clone_get_shadow_opacity (self));
#line 11 "../src/Widgets/WindowClone.vala"
		break;
#line 5226 "WindowClone.c"
		default:
#line 11 "../src/Widgets/WindowClone.vala"
		G_OBJECT_WARN_INVALID_PROPERTY_ID (object, property_id, pspec);
#line 11 "../src/Widgets/WindowClone.vala"
		break;
#line 5232 "WindowClone.c"
	}
}

static void
_vala_gala_window_clone_set_property (GObject * object,
                                      guint property_id,
                                      const GValue * value,
                                      GParamSpec * pspec)
{
	GalaWindowClone * self;
	self = G_TYPE_CHECK_INSTANCE_CAST (object, GALA_TYPE_WINDOW_CLONE, GalaWindowClone);
#line 11 "../src/Widgets/WindowClone.vala"
	switch (property_id) {
#line 11 "../src/Widgets/WindowClone.vala"
		case GALA_WINDOW_CLONE_WM_PROPERTY:
#line 11 "../src/Widgets/WindowClone.vala"
		gala_window_clone_set_wm (self, g_value_get_object (value));
#line 11 "../src/Widgets/WindowClone.vala"
		break;
#line 11 "../src/Widgets/WindowClone.vala"
		case GALA_WINDOW_CLONE_WINDOW_PROPERTY:
#line 11 "../src/Widgets/WindowClone.vala"
		gala_window_clone_set_window (self, g_value_get_object (value));
#line 11 "../src/Widgets/WindowClone.vala"
		break;
#line 11 "../src/Widgets/WindowClone.vala"
		case GALA_WINDOW_CLONE_SLOT_PROPERTY:
#line 11 "../src/Widgets/WindowClone.vala"
		gala_window_clone_set_slot (self, g_value_get_boxed (value));
#line 11 "../src/Widgets/WindowClone.vala"
		break;
#line 11 "../src/Widgets/WindowClone.vala"
		case GALA_WINDOW_CLONE_ACTIVE_PROPERTY:
#line 11 "../src/Widgets/WindowClone.vala"
		gala_window_clone_set_active (self, g_value_get_boolean (value));
#line 11 "../src/Widgets/WindowClone.vala"
		break;
#line 11 "../src/Widgets/WindowClone.vala"
		case GALA_WINDOW_CLONE_OVERVIEW_MODE_PROPERTY:
#line 11 "../src/Widgets/WindowClone.vala"
		gala_window_clone_set_overview_mode (self, g_value_get_boolean (value));
#line 11 "../src/Widgets/WindowClone.vala"
		break;
#line 11 "../src/Widgets/WindowClone.vala"
		case GALA_WINDOW_CLONE_GESTURE_TRACKER_PROPERTY:
#line 11 "../src/Widgets/WindowClone.vala"
		gala_window_clone_set_gesture_tracker (self, g_value_get_object (value));
#line 11 "../src/Widgets/WindowClone.vala"
		break;
#line 11 "../src/Widgets/WindowClone.vala"
		case GALA_WINDOW_CLONE_MONITOR_SCALE_FACTOR_PROPERTY:
#line 11 "../src/Widgets/WindowClone.vala"
		gala_window_clone_set_monitor_scale_factor (self, g_value_get_float (value));
#line 11 "../src/Widgets/WindowClone.vala"
		break;
#line 11 "../src/Widgets/WindowClone.vala"
		case GALA_WINDOW_CLONE_SHADOW_OPACITY_PROPERTY:
#line 11 "../src/Widgets/WindowClone.vala"
		gala_window_clone_set_shadow_opacity (self, g_value_get_uchar (value));
#line 11 "../src/Widgets/WindowClone.vala"
		break;
#line 5294 "WindowClone.c"
		default:
#line 11 "../src/Widgets/WindowClone.vala"
		G_OBJECT_WARN_INVALID_PROPERTY_ID (object, property_id, pspec);
#line 11 "../src/Widgets/WindowClone.vala"
		break;
#line 5300 "WindowClone.c"
	}
}

